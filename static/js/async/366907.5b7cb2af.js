"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["366907"],{550912:function(e,s,r){r.r(s),r.d(s,{default:()=>c});var n=r(110239),i=r(437562),l=r(441332),a=r(420188),o=r(394128);function d(e){let s={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"codeeditor",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#codeeditor",children:"#"}),"CodeEditor"]}),"\n",(0,n.jsx)(s.p,{children:"CodeEditor 是一个功能强大的代码编辑器组件，基于 CodeMirror 6 构建，支持多种编程语言的语法高亮和智能提示。它提供了 TypeScript、Python、SQL、Shell、JSON 等语言的专用编辑器版本。"}),"\n",(0,n.jsxs)(s.h2,{id:"案例演示",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#案例演示",children:"#"}),"案例演示"]}),"\n",(0,n.jsxs)(s.h3,{id:"基本使用",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#基本使用",children:"#"}),"基本使用"]}),"\n",(0,n.jsx)(o.w,{}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,n.jsxs)(s.code,{className:"language-tsx",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { CodeEditor } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"string"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" undefined"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"code_editor"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        {({ field }) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"CodeEditor"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"            value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".value}"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"            onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{(value) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(value)}"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"            languageId"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"typescript"'})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          />"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        )}"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"不同语言的专用编辑器",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#不同语言的专用编辑器",children:"#"}),"不同语言的专用编辑器"]}),"\n",(0,n.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,n.jsx)(s.div,{className:"rspress-directive-title",children:"注意事项"}),(0,n.jsx)(s.div,{className:"rspress-directive-content",children:(0,n.jsx)(s.p,{children:"\n单独引入对应语言的专用编辑器，可以减少打包所需要的依赖"})})]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-tsx",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// TypeScript 编辑器"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { TypeScriptCodeEditor } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Python 编辑器"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { PythonCodeEditor } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// SQL 编辑器"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { SQLCodeEditor } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Shell 编辑器"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { ShellCodeEditor } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// JSON 编辑器"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { JsonCodeEditor } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]})]})})}),"\n",(0,n.jsxs)(s.h2,{id:"api-参考",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#api-参考",children:"#"}),"API 参考"]}),"\n",(0,n.jsxs)(s.h3,{id:"codeeditor-props",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#codeeditor-props",children:"#"}),"CodeEditor Props"]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"属性名"}),(0,n.jsx)(s.th,{children:"类型"}),(0,n.jsx)(s.th,{children:"默认值"}),(0,n.jsx)(s.th,{children:"描述"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"value"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"编辑器内容"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"onChange"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"(value: string) => void"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"内容变化时的回调函数"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"languageId"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"'python' | 'typescript' | 'shell' | 'json' | 'sql'"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"代码语言类型"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"theme"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"'dark' | 'light'"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"'light'"})}),(0,n.jsx)(s.td,{children:"编辑器主题"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"placeholder"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"占位符文本"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"activeLinePlaceholder"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"当前行的占位提示"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"readonly"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"boolean"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"false"})}),(0,n.jsx)(s.td,{children:"是否为只读模式"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"mini"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"boolean"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"false"})}),(0,n.jsx)(s.td,{children:"是否为迷你模式"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"options"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"Options"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"CodeMirror 配置选项"})]})]})]}),"\n",(0,n.jsxs)(s.h3,{id:"语言支持",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#语言支持",children:"#"}),"语言支持"]}),"\n",(0,n.jsx)(s.p,{children:"CodeEditor 支持以下语言："}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"typescript"}),": TypeScript/JavaScript"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"python"}),": Python"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql"}),": SQL"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"shell"}),": Shell 脚本"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"json"}),": JSON"]}),"\n"]}),"\n",(0,n.jsxs)(s.h2,{id:"源码导读",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#源码导读",children:"#"}),"源码导读"]}),"\n",(0,n.jsx)(a.ZB,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/materials/form-materials/src/components/code-editor"}),"\n",(0,n.jsx)(s.p,{children:"使用 CLI 命令可以复制源代码到本地："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsx)(s.code,{className:"language-bash",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" components/code-editor"})]})})})}),"\n",(0,n.jsxs)(s.h3,{id:"目录结构讲解",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#目录结构讲解",children:"#"}),"目录结构讲解"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-txt",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"code-editor/"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── index.tsx           # 统一导出文件"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── editor.tsx          # 基础编辑器组件 BaseCodeEditor"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── editor-all.tsx      # 全功能编辑器（已废弃）"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── editor-ts.tsx       # TypeScript 编辑器"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── editor-python.tsx   # Python 编辑器"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── editor-sql.tsx      # SQL 编辑器"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── editor-shell.tsx    # Shell 编辑器"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── editor-json.tsx     # JSON 编辑器"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── factory.tsx         # 编辑器工厂函数"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── theme/              # 主题配置"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"│   ├── dark.ts         # 暗色主题"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"│   ├── light.ts        # 亮色主题"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"│   └── index.ts        # 主题导出"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── utils.ts            # 工具函数"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"└── styles.css          # 样式文件"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"核心实现说明",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#核心实现说明",children:"#"}),"核心实现说明"]}),"\n",(0,n.jsxs)(s.h4,{id:"basecodeeditor",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#basecodeeditor",children:"#"}),"BaseCodeEditor"]}),"\n",(0,n.jsx)(s.p,{children:"基础编辑器组件，对 coze-editor 的简单封装，提供了基础的语法高亮、主题切换、迷你模式、只读模式等功能。"}),"\n",(0,n.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,n.jsx)(s.div,{className:"rspress-directive-title",children:"注意事项"}),(0,n.jsx)(s.div,{className:"rspress-directive-content",children:(0,n.jsx)(s.p,{children:"\nBaseCodeEditor 不包含任何语言逻辑的加载，语言逻辑是在专用编辑器中实现的。"})})]}),"\n",(0,n.jsxs)(s.h4,{id:"专用编辑器",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#专用编辑器",children:"#"}),"专用编辑器"]}),"\n",(0,n.jsx)(s.p,{children:"每种语言都有对应的专用编辑器，通过动态导入实现按需加载："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-typescript",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" loadTypescriptLanguage"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@flowgram.ai/coze-editor/language-typescript'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".then"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"((module) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // TypeScript 语言加载逻辑"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  });"})}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" TypeScriptCodeEditor"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" CodeEditorFactory"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  loadTypescriptLanguage"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  {"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    displayName"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'TypeScriptCodeEditor'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    fixLanguageId"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'typescript'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"使用到的-flowgram-api",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#使用到的-flowgram-api",children:"#"}),"使用到的 flowgram API"]}),"\n",(0,n.jsxs)(s.h4,{id:"flowgramaicoze-editor",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgramaicoze-editor",children:"#"}),"@flowgram.ai/coze-editor"]}),"\n",(0,n.jsxs)(s.p,{children:["@flowgram.ai/coze-editor 是一个基于 CodeMirror 6 构建的代码编辑器组件。源代码见：",(0,n.jsx)(s.a,{href:"https://github.com/coze-dev/rush-arch/tree/main/packages/text-editor",rel:"noopener noreferrer",target:"_blank",children:"coze-dev/rush-dev"})]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"createRenderer"}),": 创建编辑器"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"preset-code"}),": 代码编辑器预设配置"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"EditorProvider"}),": 编辑器上下文提供者"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"ActiveLinePlaceholder"}),": 当前行占位符组件"]}),"\n"]}),"\n",(0,n.jsxs)(s.h4,{id:"codemirrorview",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#codemirrorview",children:"#"}),"@codemirror/view"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"EditorView"}),": CodeMirror 编辑器视图"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"整体流程",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#整体流程",children:"#"}),"整体流程"]}),"\n",(0,n.jsx)(l.Z,{code:"graph TD\n    A[CodeEditor 组件] --\x3e B[选择 languageId \\n 或者专用编辑器]\n    B --React.lazy--\x3e C[根据 languageId \\n 加载语言所需要的依赖]\n    C --\x3e D[BaseCodeEditor]\n    D --\x3e E[CozeEditor 编辑器]\n    E --\x3e F[语法高亮]\n    E --\x3e G[主题应用]\n    E --\x3e H[事件处理]",config:{}}),"\n",(0,n.jsxs)(s.h3,{id:"性能优化",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#性能优化",children:"#"}),"性能优化"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"按需加载"}),": 每种语言按需加载"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"专用编辑器"}),": 推荐使用 XXXCodeEditor 而非通用 CodeEditor，以优化打包速度"]}),"\n"]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["zh%2Fmaterials%2Fcomponents%2Fcode-editor.mdx"]={toc:[{id:"案例演示",text:"案例演示",depth:2},{id:"基本使用",text:"基本使用",depth:3},{id:"不同语言的专用编辑器",text:"不同语言的专用编辑器",depth:3},{id:"api-参考",text:"API 参考",depth:2},{id:"codeeditor-props",text:"CodeEditor Props",depth:3},{id:"语言支持",text:"语言支持",depth:3},{id:"源码导读",text:"源码导读",depth:2},{id:"目录结构讲解",text:"目录结构讲解",depth:3},{id:"核心实现说明",text:"核心实现说明",depth:3},{id:"basecodeeditor",text:"BaseCodeEditor",depth:4},{id:"专用编辑器",text:"专用编辑器",depth:4},{id:"使用到的-flowgram-api",text:"使用到的 flowgram API",depth:3},{id:"flowgramaicoze-editor",text:"@flowgram.ai/coze-editor",depth:4},{id:"codemirrorview",text:"@codemirror/view",depth:4},{id:"整体流程",text:"整体流程",depth:3},{id:"性能优化",text:"性能优化",depth:3}],title:"CodeEditor",headingTitle:"CodeEditor",frontmatter:{}}},394128:function(e,s,r){r.d(s,{w:()=>c});var n=r(110239),i=r(908600),l=r(640898),a=r(132288);let o=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914"),r.e("227692"),r.e("838147"),r.e("135674"),r.e("942362"),r.e("254129"),r.e("428647"),r.e("260790"),r.e("46854"),r.e("795751"),r.e("461889")]).then(r.bind(r,929024)).then(e=>({default:e.CodeEditor}))),d=`// Here, you can retrieve input variables from the node using 'params' and output results using 'ret'.
// 'params' has been correctly injected into the environment.
// Here's an example of getting the value of the parameter named 'input' from the node input:
// const input = params.input;
// Here's an example of outputting a 'ret' object containing multiple data types:
// const ret = { "name": 'Xiaoming', "hobbies": ["Reading", "Traveling"] };

async function main({ params }) {
  // Build the output object
  const ret = {
    key0: params.input + params.input, // Concatenate the input parameter 'input' twice
    key1: ["hello", "world"], // Output an array
    key2: { // Output an Object
      key21: "hi"
    },
  };

  return ret;
}`,c=()=>(0,n.jsx)(a.y,{filterStartNode:!0,filterEndNode:!0,height:600,formMeta:{render:()=>(0,n.jsxs)("div",{style:{width:500},children:[(0,n.jsx)(a.p,{}),(0,n.jsx)(l.gNt,{name:"code_editor",defaultValue:d,children:e=>{let{field:s}=e;return(0,n.jsx)(o,{value:s.value,onChange:e=>s.onChange(e),languageId:"typescript"})}})]})}})},132288:function(e,s,r){r.d(s,{p:()=>a,y:()=>o});var n=r(110239),i=r(908600);let l=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914"),r.e("227692"),r.e("135674"),r.e("254129"),r.e("428647"),r.e("260790"),r.e("46854"),r.e("787220")]).then(r.bind(r,654296)).then(e=>({default:e.FreeFormMetaStoryBuilder}))),a=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914"),r.e("227692"),r.e("135674"),r.e("254129"),r.e("428647"),r.e("260790"),r.e("46854"),r.e("787220")]).then(r.bind(r,654296)).then(e=>({default:e.FormHeader}))),o=e=>(0,n.jsx)("div",{style:{position:"relative",height:e.height||400},children:(0,n.jsx)(l,{...e})})}}]);