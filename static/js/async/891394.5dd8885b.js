"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["891394"],{6396:function(e,s,n){n.r(s),n.d(s,{default:()=>a});var r=n(110239),o=n(437562),i=n(321896);function l(e){let s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"flowgramaifree-stack-plugin",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgramaifree-stack-plugin",children:"#"}),"@flowgram.ai/free-stack-plugin"]}),"\n",(0,r.jsx)(s.p,{children:"A layer management plugin that provides z-index layer control functionality for nodes and connections in free layout canvas."}),"\n",(0,r.jsxs)(s.h2,{id:"features",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#features",children:"#"}),"Features"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Intelligently calculates layer relationships between nodes and connections to avoid occlusion issues"}),"\n",(0,r.jsx)(s.li,{children:"Supports automatic top-level display for selected nodes"}),"\n",(0,r.jsx)(s.li,{children:"Supports highlighting of hovered nodes and connections"}),"\n",(0,r.jsx)(s.li,{children:"Customizable node sorting rules to control rendering order of nodes at the same level"}),"\n",(0,r.jsx)(s.li,{children:"Automatically handles parent-child node layer relationships"}),"\n",(0,r.jsx)(s.li,{children:"Supports intelligent layer management for connections, ensuring connection visibility"}),"\n",(0,r.jsx)(s.li,{children:"Real-time response to node selection, hover, and entity change events"}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"quick-start",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#quick-start",children:"#"}),"Quick Start"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Installation"}),"\n"]}),"\n",(0,r.jsx)(i.SU,{command:"install @flowgram.ai/free-stack-plugin"}),"\n",(0,r.jsxs)(s.ol,{start:"2",children:["\n",(0,r.jsx)(s.li,{children:"Register Plugin"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"The plugin registration method is basically the same as other flowgram plugins. Just make sure not to create duplicates and finally pass it to the corresponding FreeLayoutEditorProvider."}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-tsx",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { createFreeStackPlugin } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/free-stack-plugin'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" editorProps"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" useMemo"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(() "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  plugins"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"    createFreeStackPlugin"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  ]"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"})"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" []);"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FreeLayoutEditorProvider"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"editorProps}>"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"EditorRenderer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FreeLayoutEditorProvider"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"})})]})})}),"\n",(0,r.jsxs)(s.ol,{start:"3",children:["\n",(0,r.jsx)(s.li,{children:"Custom Node Sorting"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["You can customize the sorting rules for nodes at the same level through the ",(0,r.jsx)(s.code,{children:"sortNodes"})," function:"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-tsx",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { createFreeStackPlugin } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/free-stack-plugin'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { WorkflowNodeType } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" './nodes/constants'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" editorProps"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" useMemo"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(() "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  plugins"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"    createFreeStackPlugin"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"      sortNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (nodes) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"        const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" commentNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" [];"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"        const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" otherNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" [];"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"        // Separate comment nodes from other nodes"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"        nodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".forEach"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"((node) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"          if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"node"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".flowNodeType "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"==="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" WorkflowNodeType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".Comment) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"            commentNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".push"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(node);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"else"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"            otherNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".push"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(node);"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        });"})}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"        // Comment nodes render at the bottom layer, other nodes at the top layer"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"        return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"commentNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ..."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"otherNodes];"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    })"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  ]"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"})"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" []);"})]})]})})}),"\n",(0,r.jsxs)(s.h2,{id:"configuration-options",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration-options",children:"#"}),"Configuration Options"]}),"\n",(0,r.jsxs)(s.h3,{id:"freestackpluginoptions",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#freestackpluginoptions",children:"#"}),"FreeStackPluginOptions"]}),"\n",(0,r.jsx)(s.p,{children:"Plugin configuration options:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-typescript",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"interface"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" FreeStackPluginOptions"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  /** Custom node sorting function */"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  sortNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (nodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" WorkflowNodeEntity"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"[]) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" WorkflowNodeEntity"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"[];"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,r.jsxs)(s.h3,{id:"sortnodes-function",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#sortnodes-function",children:"#"}),"sortNodes Function"]}),"\n",(0,r.jsx)(s.p,{children:"Used to customize sorting rules for nodes at the same level:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsx)(s.code,{className:"language-typescript",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" SortNodesFunction"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (nodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" WorkflowNodeEntity"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"[]) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" WorkflowNodeEntity"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"[];"})]})})})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Parameter Description:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"nodes"}),": Array of nodes to be sorted"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Return Value"}),": Array of sorted nodes"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Use Cases:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Place specific types of nodes (like comments) at the bottom layer"}),"\n",(0,r.jsx)(s.li,{children:"Sort nodes by business priority"}),"\n",(0,r.jsx)(s.li,{children:"Sort by creation time or other attributes"}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"layer-management-algorithm",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#layer-management-algorithm",children:"#"}),"Layer Management Algorithm"]}),"\n",(0,r.jsxs)(s.h3,{id:"basic-layer-calculation",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#basic-layer-calculation",children:"#"}),"Basic Layer Calculation"]}),"\n",(0,r.jsx)(s.p,{children:"The plugin uses an intelligent algorithm to calculate the layer for each node and connection:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Base Layer"}),": Starts calculation from ",(0,r.jsx)(s.code,{children:"BASE_Z_INDEX"})," (default is 8)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Node Layer"}),": Calculated based on node nesting relationships and sorting rules"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Connection Layer"}),": Ensures connections are not occluded by nodes while handling special cases"]}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"layer-elevation-rules",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#layer-elevation-rules",children:"#"}),"Layer Elevation Rules"]}),"\n",(0,r.jsx)(s.p,{children:"The following situations will trigger layer elevation:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Selected Nodes"}),": Selected nodes will be elevated to the top layer"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Hovered Elements"}),": Hovered nodes or connections will be highlighted"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Drawing Connections"}),": Connections being drawn will be placed at the top layer"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Parent-Child Relationship Connections"}),": Connections between parent-child nodes will be prioritized for display"]}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"layer-calculation-process",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#layer-calculation-process",children:"#"}),"Layer Calculation Process"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Initialization"}),": Clear cache, calculate basic parameters"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Node Indexing"}),": Establish node index mapping"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Selected Node Processing"}),": Mark parent relationships of selected nodes"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Layer Assignment"}),": Recursively process node layers"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Connection Processing"}),": Calculate connection layers, ensure visibility"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Style Application"}),": Apply calculation results to DOM elements"]}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"advanced-usage",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#advanced-usage",children:"#"}),"Advanced Usage"]}),"\n",(0,r.jsxs)(s.h3,{id:"complex-sorting-rules",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#complex-sorting-rules",children:"#"}),"Complex Sorting Rules"]}),"\n",(0,r.jsx)(s.p,{children:"You can implement complex node sorting logic:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-typescript",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" sortNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (nodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" WorkflowNodeEntity"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"[]) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" nodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".sort"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"((a"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" b) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // 1. Sort by node type priority"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" typeOrder"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"WorkflowNodeType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".Comment]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"WorkflowNodeType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".Start]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"WorkflowNodeType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".End]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"      // ... other types"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    };"})}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" aOrder"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" typeOrder["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"a"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".flowNodeType] "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"??"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 999"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" bOrder"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" typeOrder["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"b"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".flowNodeType] "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"??"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 999"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (aOrder "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!=="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" bOrder) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"      return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" aOrder "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" bOrder;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // 2. Sort by creation time"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" a"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".createTime "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" b"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".createTime;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  });"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"};"})})]})})}),"\n",(0,r.jsxs)(s.h2,{id:"faq",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#faq",children:"#"}),"FAQ"]}),"\n",(0,r.jsxs)(s.h3,{id:"q-how-to-keep-specific-types-of-nodes-always-at-the-bottom-layer",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#q-how-to-keep-specific-types-of-nodes-always-at-the-bottom-layer",children:"#"}),"Q: How to keep specific types of nodes always at the bottom layer?"]}),"\n",(0,r.jsxs)(s.p,{children:["A: Place these nodes at the front of the array through the ",(0,r.jsx)(s.code,{children:"sortNodes"})," function:"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-typescript",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" sortNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (nodes) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" backgroundNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" nodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".filter"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(node "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"    node"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".flowNodeType "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"==="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" WorkflowNodeType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".Comment"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  );"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" foregroundNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" nodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".filter"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(node "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"    node"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".flowNodeType "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!=="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" WorkflowNodeType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".Comment"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  );"})}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"backgroundNodes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ..."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"foregroundNodes];"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"};"})})]})})}),"\n",(0,r.jsxs)(s.h3,{id:"q-how-to-disable-automatic-layer-management",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#q-how-to-disable-automatic-layer-management",children:"#"}),"Q: How to disable automatic layer management?"]}),"\n",(0,r.jsx)(s.p,{children:"A: Currently, the plugin does not provide a disable option. If you need complete custom layer management, it is recommended not to use this plugin and directly set z-index in node components."}),"\n",(0,r.jsxs)(s.h3,{id:"q-performance-optimization-suggestions",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#q-performance-optimization-suggestions",children:"#"}),"Q: Performance optimization suggestions?"]}),"\n",(0,r.jsx)(s.p,{children:"A: The plugin already has built-in performance optimizations:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Uses debounce mechanism to reduce calculation frequency"}),"\n",(0,r.jsx)(s.li,{children:"Only recalculates layers when necessary"}),"\n",(0,r.jsx)(s.li,{children:"Uses Map data structure to improve lookup efficiency"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"For large canvases (over 1000 nodes), it is recommended to:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Simplify the logic of the ",(0,r.jsx)(s.code,{children:"sortNodes"})," function"]}),"\n",(0,r.jsx)(s.li,{children:"Avoid complex calculations in sorting functions"}),"\n"]})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,o.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fguide%2Fplugin%2Ffree-stack-plugin.mdx"]={toc:[{id:"features",text:"Features",depth:2},{id:"quick-start",text:"Quick Start",depth:2},{id:"configuration-options",text:"Configuration Options",depth:2},{id:"freestackpluginoptions",text:"FreeStackPluginOptions",depth:3},{id:"sortnodes-function",text:"sortNodes Function",depth:3},{id:"layer-management-algorithm",text:"Layer Management Algorithm",depth:2},{id:"basic-layer-calculation",text:"Basic Layer Calculation",depth:3},{id:"layer-elevation-rules",text:"Layer Elevation Rules",depth:3},{id:"layer-calculation-process",text:"Layer Calculation Process",depth:3},{id:"advanced-usage",text:"Advanced Usage",depth:2},{id:"complex-sorting-rules",text:"Complex Sorting Rules",depth:3},{id:"faq",text:"FAQ",depth:2},{id:"q-how-to-keep-specific-types-of-nodes-always-at-the-bottom-layer",text:"Q: How to keep specific types of nodes always at the bottom layer?",depth:3},{id:"q-how-to-disable-automatic-layer-management",text:"Q: How to disable automatic layer management?",depth:3},{id:"q-performance-optimization-suggestions",text:"Q: Performance optimization suggestions?",depth:3}],title:"@flowgram.ai/free-stack-plugin",headingTitle:"@flowgram.ai/free-stack-plugin",frontmatter:{}}}}]);