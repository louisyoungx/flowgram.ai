"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["859785"],{753447:function(e,s,r){r.r(s),r.d(s,{default:()=>d});var n=r(110239),i=r(437562),l=r(441332),a=r(944529),c=r(543848);function o(e){let s={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"typeselector",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#typeselector",children:"#"}),"TypeSelector"]}),"\n",(0,n.jsx)(s.p,{children:"TypeSelector 是一个类型选择器组件，用于在表单中选择 JSON Schema 类型。它支持基本类型和复合类型（如数组类型）的选择。"}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)("div",{children:(0,n.jsx)("img",{loading:"lazy",src:"/materials/type-selector.png",alt:"TypeSelector 组件",style:{width:"50%"}})}),"\n",(0,n.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,n.jsx)(s.div,{className:"rspress-directive-title",children:"TIP"}),(0,n.jsx)(s.div,{className:"rspress-directive-content",children:(0,n.jsxs)(s.p,{children:["\nIf you want to add new variable types, please read ",(0,n.jsx)(s.a,{href:"/materials/common/json-schema-preset.html",children:"Type Management"})]})})]}),"\n",(0,n.jsxs)(s.h2,{id:"案例演示",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#案例演示",children:"#"}),"案例演示"]}),"\n",(0,n.jsxs)(s.h3,{id:"基本使用",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#基本使用",children:"#"}),"基本使用"]}),"\n",(0,n.jsx)(c.w,{}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,n.jsxs)(s.code,{className:"language-tsx",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { TypeSelector } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Partial"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"IJsonSchema"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" undefined"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"type_selector"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" defaultValue"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{ type"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" }}>"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        {({ field }) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"TypeSelector"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".value} "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{(value) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(value)} />"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        )}"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"新增新类型",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#新增新类型",children:"#"}),"新增新类型"]}),"\n",(0,n.jsx)(s.p,{children:"详见："}),"\n",(0,n.jsxs)(s.h2,{id:"api-参考",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#api-参考",children:"#"}),"API 参考"]}),"\n",(0,n.jsxs)(s.h3,{id:"typeselector-props",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#typeselector-props",children:"#"}),"TypeSelector Props"]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"属性名"}),(0,n.jsx)(s.th,{children:"类型"}),(0,n.jsx)(s.th,{children:"默认值"}),(0,n.jsx)(s.th,{children:"描述"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"value"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"Partial<IJsonSchema>"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"选中的类型值，符合 JSON Schema 格式"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"onChange"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"(value?: Partial<IJsonSchema>) => void"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"类型选择变化时的回调函数"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"readonly"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"boolean"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"false"})}),(0,n.jsx)(s.td,{children:"是否为只读模式"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"disabled"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"boolean"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"false"})}),(0,n.jsx)(s.td,{children:"是否禁用（已废弃，请使用 readonly）"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"style"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"React.CSSProperties"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"自定义样式"})]})]})]}),"\n",(0,n.jsxs)(s.h3,{id:"类型格式说明",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#类型格式说明",children:"#"}),"类型格式说明"]}),"\n",(0,n.jsx)(s.p,{children:"TypeSelector 支持以下 JSON Schema 类型格式："}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"基本类型"}),": ",(0,n.jsx)(s.code,{children:"{ type: 'string' }"}),", ",(0,n.jsx)(s.code,{children:"{ type: 'number' }"}),", ",(0,n.jsx)(s.code,{children:"{ type: 'boolean' }"})," 等"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"数组类型"}),": ",(0,n.jsx)(s.code,{children:"{ type: 'array', items: { type: 'string' } }"})]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"嵌套数组"}),": ",(0,n.jsx)(s.code,{children:"{ type: 'array', items: { type: 'array', items: { type: 'string' } } }"})]}),"\n"]}),"\n",(0,n.jsxs)(s.h2,{id:"源码导读",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#源码导读",children:"#"}),"源码导读"]}),"\n",(0,n.jsx)(a.ZB,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/materials/form-materials/src/components/type-selector"}),"\n",(0,n.jsx)(s.p,{children:"使用 CLI 命令可以复制源代码到本地："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsx)(s.code,{className:"language-bash",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" components/type-selector"})]})})})}),"\n",(0,n.jsxs)(s.h3,{id:"目录结构讲解",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#目录结构讲解",children:"#"}),"目录结构讲解"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-txt",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"type-selector/"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"└── index.tsx           # 主组件实现，包含 TypeSelector 核心逻辑"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"核心实现说明",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#核心实现说明",children:"#"}),"核心实现说明"]}),"\n",(0,n.jsxs)(s.h4,{id:"gettypeselectvalue",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#gettypeselectvalue",children:"#"}),"getTypeSelectValue"]}),"\n",(0,n.jsx)(s.p,{children:"将 JSON Schema 对象转换为 Cascader 组件所需的数组格式："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-typescript",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// 输入: { type: 'array', items: { type: 'string' } }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// 输出: ['array', 'string']"})})]})})}),"\n",(0,n.jsxs)(s.h4,{id:"parsetypeselectvalue",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#parsetypeselectvalue",children:"#"}),"parseTypeSelectValue"]}),"\n",(0,n.jsx)(s.p,{children:"将 Cascader 组件的数组值转换回 JSON Schema 对象："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-typescript",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// 输入: ['array', 'string']"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// 输出: { type: 'array', items: { type: 'string' } }"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"使用到的-flowgram-api",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#使用到的-flowgram-api",children:"#"}),"使用到的 flowgram API"]}),"\n",(0,n.jsxs)(s.h4,{id:"flowgramaijson-schema",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgramaijson-schema",children:"#"}),"@flowgram.ai/json-schema"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"useTypeManager()"}),": 获取类型管理器，用于处理 JSON Schema 类型的显示和验证"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"IJsonSchema"}),": JSON Schema 类型定义"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"JsonSchemaTypeManager"}),": 类型管理器类，提供类型注册、图标显示等功能"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"整体流程",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#整体流程",children:"#"}),"整体流程"]}),"\n",(0,n.jsx)(l.Z,{code:"graph LR\n    A[TypeSelector 组件] --\x3e B[useTypeManager Hook]\n    B --\x3e C[获取类型注册表]\n    C --\x3e D[生成 Cascader 选项]\n    D --\x3e E[渲染级联选择器]\n    E --\x3e F[用户选择类型]\n    F --\x3e G[onChange 回调]\n    G --\x3e H[更新 JSON Schema 值]",config:{}})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["zh%2Fmaterials%2Fcomponents%2Ftype-selector.mdx"]={toc:[{id:"案例演示",text:"案例演示",depth:2},{id:"基本使用",text:"基本使用",depth:3},{id:"新增新类型",text:"新增新类型",depth:3},{id:"api-参考",text:"API 参考",depth:2},{id:"typeselector-props",text:"TypeSelector Props",depth:3},{id:"类型格式说明",text:"类型格式说明",depth:3},{id:"源码导读",text:"源码导读",depth:2},{id:"目录结构讲解",text:"目录结构讲解",depth:3},{id:"核心实现说明",text:"核心实现说明",depth:3},{id:"gettypeselectvalue",text:"getTypeSelectValue",depth:4},{id:"parsetypeselectvalue",text:"parseTypeSelectValue",depth:4},{id:"使用到的-flowgram-api",text:"使用到的 flowgram API",depth:3},{id:"flowgramaijson-schema",text:"@flowgram.ai/json-schema",depth:4},{id:"整体流程",text:"整体流程",depth:3}],title:"TypeSelector",headingTitle:"TypeSelector",frontmatter:{}}},543848:function(e,s,r){r.d(s,{w:()=>o});var n=r(110239),i=r(908600),l=r(640898),a=r(132288);let c=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914"),r.e("227692"),r.e("838147"),r.e("933451"),r.e("942362"),r.e("917828"),r.e("428647"),r.e("135691"),r.e("46854"),r.e("232558"),r.e("673693"),r.e("263869")]).then(r.bind(r,261548)).then(e=>({default:e.TypeSelector}))),o=()=>(0,n.jsx)(a.y,{filterStartNode:!0,filterEndNode:!0,formMeta:{render:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.p,{}),(0,n.jsx)(l.gNt,{name:"type_selector",defaultValue:{type:"string"},children:e=>{let{field:s}=e;return(0,n.jsx)(c,{value:s.value,onChange:e=>s.onChange(e)})}})]})}})},132288:function(e,s,r){r.d(s,{p:()=>a,y:()=>c});var n=r(110239),i=r(908600);let l=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914"),r.e("227692"),r.e("933451"),r.e("917828"),r.e("428647"),r.e("135691"),r.e("46854"),r.e("690536")]).then(r.bind(r,654296)).then(e=>({default:e.FreeFormMetaStoryBuilder}))),a=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914"),r.e("227692"),r.e("933451"),r.e("917828"),r.e("428647"),r.e("135691"),r.e("46854"),r.e("690536")]).then(r.bind(r,654296)).then(e=>({default:e.FormHeader}))),c=e=>(0,n.jsx)("div",{style:{position:"relative",height:e.height||400},children:(0,n.jsx)(l,{...e})})}}]);