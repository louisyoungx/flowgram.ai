(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["737443"],{308387:function(e,r,i){var n=i(687167);e.exports={Graph:n.Graph,json:i(511370),alg:i(144300),version:n.version}},683808:function(e){e.exports=function(e){var r,i={},n=[];return e.nodes().forEach(function(s){r=[],function n(s){i.hasOwnProperty(s)||(i[s]=!0,r.push(s),e.successors(s).forEach(n),e.predecessors(s).forEach(n))}(s),r.length&&n.push(r)}),n}},112403:function(e){function r(e,r,i,s){for(var o=[[e,!1]];o.length>0;){var h=o.pop();h[1]?s.push(h[0]):i.hasOwnProperty(h[0])||(i[h[0]]=!0,o.push([h[0],!0]),n(r(h[0]),e=>o.push([e,!1])))}}function i(e,r,i,s){for(var o=[e];o.length>0;){var h=o.pop();i.hasOwnProperty(h)||(i[h]=!0,s.push(h),n(r(h),e=>o.push(e)))}}function n(e,r){for(var i=e.length;i--;)r(e[i],i,e);return e}e.exports=function(e,n,s){Array.isArray(n)||(n=[n]);var o=e.isDirected()?r=>e.successors(r):r=>e.neighbors(r),h="post"===s?r:i,u=[],a={};return n.forEach(r=>{if(!e.hasNode(r))throw Error("Graph does not have node: "+r);h(r,o,a,u)}),u}},224208:function(e,r,i){var n=i(40622);e.exports=function(e,r,i){return e.nodes().reduce(function(s,o){return s[o]=n(e,o,r,i),s},{})}},40622:function(e,r,i){var n=i(651717);e.exports=function(e,r,i,o){return function(e,r,i,s){var o,h,u={},a=new n,l=function(e){var r=e.v!==o?e.v:e.w,n=u[r],s=i(e),l=h.distance+s;if(s<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+s);l<n.distance&&(n.distance=l,n.predecessor=o,a.decrease(r,l))};for(e.nodes().forEach(function(e){var i=e===r?0:1/0;u[e]={distance:i},a.add(e,i)});a.size()>0&&(h=u[o=a.removeMin()]).distance!==1/0;)s(o).forEach(l);return u}(e,String(r),i||s,o||function(r){return e.outEdges(r)})};var s=()=>1},586070:function(e,r,i){var n=i(703939);e.exports=function(e){return n(e).filter(function(r){return r.length>1||1===r.length&&e.hasEdge(r[0],r[0])})}},589560:function(e){e.exports=function(e,i,n){var s,o,h,u,a;return s=e,o=i||r,h=n||function(r){return e.outEdges(r)},u={},(a=s.nodes()).forEach(function(e){u[e]={},u[e][e]={distance:0},a.forEach(function(r){e!==r&&(u[e][r]={distance:1/0})}),h(e).forEach(function(r){var i=r.v===e?r.w:r.v,n=o(r);u[e][i]={distance:n,predecessor:e}})}),a.forEach(function(e){var r=u[e];a.forEach(function(i){var n=u[i];a.forEach(function(i){var s=n[e],o=r[i],h=n[i],u=s.distance+o.distance;u<h.distance&&(h.distance=u,h.predecessor=o.predecessor)})})}),u};var r=()=>1},144300:function(e,r,i){e.exports={components:i(683808),dijkstra:i(40622),dijkstraAll:i(224208),findCycles:i(586070),floydWarshall:i(589560),isAcyclic:i(527566),postorder:i(281909),preorder:i(272215),prim:i(965018),tarjan:i(703939),topsort:i(328677)}},527566:function(e,r,i){var n=i(328677);e.exports=function(e){try{n(e)}catch(e){if(e instanceof n.CycleException)return!1;throw e}return!0}},281909:function(e,r,i){var n=i(112403);e.exports=function(e,r){return n(e,r,"post")}},272215:function(e,r,i){var n=i(112403);e.exports=function(e,r){return n(e,r,"pre")}},965018:function(e,r,i){var n=i(506671),s=i(651717);e.exports=function(e,r){var i,o=new n,h={},u=new s;function a(e){var n=e.v===i?e.w:e.v,s=u.priority(n);if(void 0!==s){var o=r(e);o<s&&(h[n]=i,u.decrease(n,o))}}if(0===e.nodeCount())return o;e.nodes().forEach(function(e){u.add(e,1/0),o.setNode(e)}),u.decrease(e.nodes()[0],0);for(var l=!1;u.size()>0;){if(i=u.removeMin(),h.hasOwnProperty(i))o.setEdge(i,h[i]);else if(l)throw Error("Input graph is not connected: "+e);else l=!0;e.nodeEdges(i).forEach(a)}return o}},703939:function(e){e.exports=function(e){var r=0,i=[],n={},s=[];return e.nodes().forEach(function(o){n.hasOwnProperty(o)||function o(h){var u=n[h]={onStack:!0,lowlink:r,index:r++};if(i.push(h),e.successors(h).forEach(function(e){n.hasOwnProperty(e)?n[e].onStack&&(u.lowlink=Math.min(u.lowlink,n[e].index)):(o(e),u.lowlink=Math.min(u.lowlink,n[e].lowlink))}),u.lowlink===u.index){var a,l=[];do n[a=i.pop()].onStack=!1,l.push(a);while(h!==a);s.push(l)}}(o)}),s}},328677:function(e){function r(e){var r={},n={},s=[];if(e.sinks().forEach(function o(h){if(n.hasOwnProperty(h))throw new i;r.hasOwnProperty(h)||(n[h]=!0,r[h]=!0,e.predecessors(h).forEach(o),delete n[h],s.push(h))}),Object.keys(r).length!==e.nodeCount())throw new i;return s}class i extends Error{constructor(){super(...arguments)}}e.exports=r,r.CycleException=i},651717:function(e){e.exports=class{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(e){return e.key})}has(e){return this._keyIndices.hasOwnProperty(e)}priority(e){var r=this._keyIndices[e];if(void 0!==r)return this._arr[r].priority}min(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key}add(e,r){var i=this._keyIndices;if(e=String(e),!i.hasOwnProperty(e)){var n=this._arr,s=n.length;return i[e]=s,n.push({key:e,priority:r}),this._decrease(s),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,r){var i=this._keyIndices[e];if(r>this._arr[i].priority)throw Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(e){var r=this._arr,i=2*e,n=i+1,s=e;i<r.length&&(s=r[i].priority<r[s].priority?i:s,n<r.length&&(s=r[n].priority<r[s].priority?n:s),s!==e&&(this._swap(e,s),this._heapify(s)))}_decrease(e){for(var r,i=this._arr,n=i[e].priority;0!==e&&!(i[r=e>>1].priority<n);)this._swap(e,r),e=r}_swap(e,r){var i=this._arr,n=this._keyIndices,s=i[e],o=i[r];i[e]=o,i[r]=s,n[o.key]=e,n[s.key]=r}}},506671:function(e){"use strict";function r(e,r){e[r]?e[r]++:e[r]=1}function i(e,r){--e[r]||delete e[r]}function n(e,r,i,n){var s=""+r,o=""+i;if(!e&&s>o){var h=s;s=o,o=h}return s+"\x01"+o+"\x01"+(void 0===n?"\0":n)}function s(e,r){return n(e,r.v,r.w,r.name)}e.exports=class{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>void 0;_defaultEdgeLabelFn=()=>void 0;_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(e){e&&(this._isDirected=!e.hasOwnProperty("directed")||e.directed,this._isMultigraph=!!e.hasOwnProperty("multigraph")&&e.multigraph,this._isCompound=!!e.hasOwnProperty("compound")&&e.compound),this._isCompound&&(this._parent={},this._children={},this._children["\0"]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,"function"!=typeof e&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter(r=>0===Object.keys(e._in[r]).length)}sinks(){var e=this;return this.nodes().filter(r=>0===Object.keys(e._out[r]).length)}setNodes(e,r){var i=arguments,n=this;return e.forEach(function(e){i.length>1?n.setNode(e,r):n.setNode(e)}),this}setNode(e,r){return this._nodes.hasOwnProperty(e)?arguments.length>1&&(this._nodes[e]=r):(this._nodes[e]=arguments.length>1?r:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this}node(e){return this._nodes[e]}hasNode(e){return this._nodes.hasOwnProperty(e)}removeNode(e){var r=this;if(this._nodes.hasOwnProperty(e)){var i=e=>r.removeEdge(r._edgeObjs[e]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(e){r.setParent(e)}),delete this._children[e]),Object.keys(this._in[e]).forEach(i),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(i),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,r){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(void 0===r)r="\0";else{r+="";for(var i=r;void 0!==i;i=this.parent(i))if(i===e)throw Error("Setting "+r+" as parent of "+e+" would create a cycle");this.setNode(r)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=r,this._children[r][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var r=this._parent[e];if("\0"!==r)return r}}children(e="\0"){if(this._isCompound){var r=this._children[e];if(r)return Object.keys(r)}else if("\0"===e)return this.nodes();else if(this.hasNode(e))return[]}predecessors(e){var r=this._preds[e];if(r)return Object.keys(r)}successors(e){var r=this._sucs[e];if(r)return Object.keys(r)}neighbors(e){var r=this.predecessors(e);if(r){let n=new Set(r);for(var i of this.successors(e))n.add(i);return Array.from(n.values())}}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var i=this;Object.entries(this._nodes).forEach(function([i,n]){e(i)&&r.setNode(i,n)}),Object.values(this._edgeObjs).forEach(function(e){r.hasNode(e.v)&&r.hasNode(e.w)&&r.setEdge(e,i.edge(e))});var n={};return this._isCompound&&r.nodes().forEach(e=>r.setParent(e,function e(s){var o=i.parent(s);return void 0===o||r.hasNode(o)?(n[s]=o,o):o in n?n[o]:e(o)}(e))),r}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,"function"!=typeof e&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,r){var i=this,n=arguments;return e.reduce(function(e,s){return n.length>1?i.setEdge(e,s,r):i.setEdge(e,s),s}),this}setEdge(){var e,i,s,o,h=!1,u=arguments[0];"object"==typeof u&&null!==u&&"v"in u?(e=u.v,i=u.w,s=u.name,2==arguments.length&&(o=arguments[1],h=!0)):(e=u,i=arguments[1],s=arguments[3],arguments.length>2&&(o=arguments[2],h=!0)),e=""+e,i=""+i,void 0!==s&&(s=""+s);var a=n(this._isDirected,e,i,s);if(this._edgeLabels.hasOwnProperty(a))return h&&(this._edgeLabels[a]=o),this;if(void 0!==s&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(i),this._edgeLabels[a]=h?o:this._defaultEdgeLabelFn(e,i,s);var l=function(e,r,i,n){var s=""+r,o=""+i;if(!e&&s>o){var h=s;s=o,o=h}var u={v:s,w:o};return n&&(u.name=n),u}(this._isDirected,e,i,s);return e=l.v,i=l.w,Object.freeze(l),this._edgeObjs[a]=l,r(this._preds[i],e),r(this._sucs[e],i),this._in[i][a]=l,this._out[e][a]=l,this._edgeCount++,this}edge(e,r,i){var o=1==arguments.length?s(this._isDirected,arguments[0]):n(this._isDirected,e,r,i);return this._edgeLabels[o]}edgeAsObj(){let e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,r,i){var o=1==arguments.length?s(this._isDirected,arguments[0]):n(this._isDirected,e,r,i);return this._edgeLabels.hasOwnProperty(o)}removeEdge(e,r,o){var h=1==arguments.length?s(this._isDirected,arguments[0]):n(this._isDirected,e,r,o),u=this._edgeObjs[h];return u&&(e=u.v,r=u.w,delete this._edgeLabels[h],delete this._edgeObjs[h],i(this._preds[r],e),i(this._sucs[e],r),delete this._in[r][h],delete this._out[e][h],this._edgeCount--),this}inEdges(e,r){var i=this._in[e];if(i){var n=Object.values(i);return r?n.filter(e=>e.v===r):n}}outEdges(e,r){var i=this._out[e];if(i){var n=Object.values(i);return r?n.filter(e=>e.w===r):n}}nodeEdges(e,r){var i=this.inEdges(e,r);if(i)return i.concat(this.outEdges(e,r))}}},687167:function(e,r,i){e.exports={Graph:i(506671),version:i(231195)}},511370:function(e,r,i){var n=i(506671);e.exports={write:function(e){var r,i,n={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(r=e).nodes().map(function(e){var i=r.node(e),n=r.parent(e),s={v:e};return void 0!==i&&(s.value=i),void 0!==n&&(s.parent=n),s}),edges:(i=e).edges().map(function(e){var r=i.edge(e),n={v:e.v,w:e.w};return void 0!==e.name&&(n.name=e.name),void 0!==r&&(n.value=r),n})};return void 0!==e.graph()&&(n.value=structuredClone(e.graph())),n},read:function(e){var r=new n(e.options).setGraph(e.value);return e.nodes.forEach(function(e){r.setNode(e.v,e.value),e.parent&&r.setParent(e.v,e.parent)}),e.edges.forEach(function(e){r.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),r}}},231195:function(e){e.exports="2.2.2"},564085:function(e,r,i){"use strict";i.d(r,{D:()=>j});let{abs:n,cos:s,sin:o,acos:h,atan2:u,sqrt:a,pow:l}=Math;function c(e){return e<0?-l(-e,1/3):l(e,1/3)}let f=Math.PI,d=2*f,p=f/2,y=Number.MAX_SAFE_INTEGER||0x1fffffffffffff,x=Number.MIN_SAFE_INTEGER||-0x1fffffffffffff,g={x:0,y:0,z:0},_={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,r){let i=r(e),n=i.x*i.x+i.y*i.y;return void 0!==i.z&&(n+=i.z*i.z),a(n)},compute:function(e,r,i){if(0===e)return r[0].t=0,r[0];let n=r.length-1;if(1===e)return r[n].t=1,r[n];let s=1-e,o=r;if(0===n)return r[0].t=e,r[0];if(1===n){let r={x:s*o[0].x+e*o[1].x,y:s*o[0].y+e*o[1].y,t:e};return i&&(r.z=s*o[0].z+e*o[1].z),r}if(n<4){let r=s*s,h=e*e,u,a,l,c=0;2===n?(o=[o[0],o[1],o[2],g],u=r,a=s*e*2,l=h):3===n&&(u=r*s,a=r*e*3,l=s*h*3,c=e*h);let f={x:u*o[0].x+a*o[1].x+l*o[2].x+c*o[3].x,y:u*o[0].y+a*o[1].y+l*o[2].y+c*o[3].y,t:e};return i&&(f.z=u*o[0].z+a*o[1].z+l*o[2].z+c*o[3].z),f}let h=JSON.parse(JSON.stringify(r));for(;h.length>1;){for(let r=0;r<h.length-1;r++)h[r]={x:h[r].x+(h[r+1].x-h[r].x)*e,y:h[r].y+(h[r+1].y-h[r].y)*e},void 0!==h[r].z&&(h[r].z=h[r].z+(h[r+1].z-h[r].z)*e);h.splice(h.length-1,1)}return h[0].t=e,h[0]},computeWithRatios:function(e,r,i,n){let s=1-e,o=i[0],h=i[1],u=i[2],a=i[3],l;return(o*=s,h*=e,2===r.length)?(l=o+h,{x:(o*r[0].x+h*r[1].x)/l,y:(o*r[0].y+h*r[1].y)/l,z:!!n&&(o*r[0].z+h*r[1].z)/l,t:e}):(o*=s,h*=2*s,u*=e*e,3===r.length)?(l=o+h+u,{x:(o*r[0].x+h*r[1].x+u*r[2].x)/l,y:(o*r[0].y+h*r[1].y+u*r[2].y)/l,z:!!n&&(o*r[0].z+h*r[1].z+u*r[2].z)/l,t:e}):(o*=s,h*=1.5*s,u*=3*s,a*=e*e*e,4===r.length)?(l=o+h+u+a,{x:(o*r[0].x+h*r[1].x+u*r[2].x+a*r[3].x)/l,y:(o*r[0].y+h*r[1].y+u*r[2].y+a*r[3].y)/l,z:!!n&&(o*r[0].z+h*r[1].z+u*r[2].z+a*r[3].z)/l,t:e}):void 0},derive:function(e,r){let i=[];for(let n=e,s=n.length,o=s-1;s>1;s--,o--){let e=[];for(let i=0,s;i<o;i++)s={x:o*(n[i+1].x-n[i].x),y:o*(n[i+1].y-n[i].y)},r&&(s.z=o*(n[i+1].z-n[i].z)),e.push(s);i.push(e),n=e}return i},between:function(e,r,i){return r<=e&&e<=i||_.approximately(e,r)||_.approximately(e,i)},approximately:function(e,r,i){return n(e-r)<=(i||1e-6)},length:function(e){let r=_.Tvalues.length,i=0;for(let n=0,s;n<r;n++)s=.5*_.Tvalues[n]+.5,i+=_.Cvalues[n]*_.arcfn(s,e);return .5*i},map:function(e,r,i,n,s){return n+(e-r)/(i-r)*(s-n)},lerp:function(e,r,i){let n={x:r.x+e*(i.x-r.x),y:r.y+e*(i.y-r.y)};return void 0!==r.z&&void 0!==i.z&&(n.z=r.z+e*(i.z-r.z)),n},pointToString:function(e){let r=e.x+"/"+e.y;return void 0!==e.z&&(r+="/"+e.z),r},pointsToString:function(e){return"["+e.map(_.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,r,i){let n=r.x-e.x,s=r.y-e.y,o=i.x-e.x,h=i.y-e.y;return u(n*h-s*o,n*o+s*h)},round:function(e,r){let i=""+e,n=i.indexOf(".");return parseFloat(i.substring(0,n+1+r))},dist:function(e,r){let i=e.x-r.x,n=e.y-r.y;return a(i*i+n*n)},closest:function(e,r){let i=l(2,63),n,s;return e.forEach(function(e,o){(s=_.dist(r,e))<i&&(i=s,n=o)}),{mdist:i,mpos:n}},abcratio:function(e,r){if(2!==r&&3!==r)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let i=l(e,r)+l(1-e,r);return n((i-1)/i)},projectionratio:function(e,r){if(2!==r&&3!==r)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let i=l(1-e,r),n=l(e,r)+i;return i/n},lli8:function(e,r,i,n,s,o,h,u){let a=(e-i)*(o-u)-(r-n)*(s-h);return 0!=a&&{x:((e*n-r*i)*(s-h)-(e-i)*(s*u-o*h))/a,y:((e*n-r*i)*(o-u)-(r-n)*(s*u-o*h))/a}},lli4:function(e,r,i,n){let s=e.x,o=e.y,h=r.x,u=r.y,a=i.x,l=i.y,c=n.x,f=n.y;return _.lli8(s,o,h,u,a,l,c,f)},lli:function(e,r){return _.lli4(e,e.c,r,r.c)},makeline:function(e,r){return new j(e.x,e.y,(e.x+r.x)/2,(e.y+r.y)/2,r.x,r.y)},findbbox:function(e){let r=y,i=y,n=x,s=x;return e.forEach(function(e){let o=e.bbox();r>o.x.min&&(r=o.x.min),i>o.y.min&&(i=o.y.min),n<o.x.max&&(n=o.x.max),s<o.y.max&&(s=o.y.max)}),{x:{min:r,mid:(r+n)/2,max:n,size:n-r},y:{min:i,mid:(i+s)/2,max:s,size:s-i}}},shapeintersections:function(e,r,i,n,s){if(!_.bboxoverlap(r,n))return[];let o=[],h=[e.startcap,e.forward,e.back,e.endcap],u=[i.startcap,i.forward,i.back,i.endcap];return h.forEach(function(r){r.virtual||u.forEach(function(n){if(n.virtual)return;let h=r.intersects(n,s);h.length>0&&(h.c1=r,h.c2=n,h.s1=e,h.s2=i,o.push(h))})}),o},makeshape:function(e,r,i){let n=r.points.length,s=e.points.length,o=_.makeline(r.points[n-1],e.points[0]),h=_.makeline(e.points[s-1],r.points[0]),u={startcap:o,forward:e,back:r,endcap:h,bbox:_.findbbox([o,e,r,h])};return u.intersections=function(e){return _.shapeintersections(u,u.bbox,e,e.bbox,i)},u},getminmax:function(e,r,i){if(!i)return{min:0,max:0};let n=y,s=x,o,h;-1===i.indexOf(0)&&(i=[0].concat(i)),-1===i.indexOf(1)&&i.push(1);for(let u=0,a=i.length;u<a;u++)o=i[u],(h=e.get(o))[r]<n&&(n=h[r]),h[r]>s&&(s=h[r]);return{min:n,mid:(n+s)/2,max:s,size:s-n}},align:function(e,r){let i=r.p1.x,n=r.p1.y,h=-u(r.p2.y-n,r.p2.x-i);return e.map(function(e){return{x:(e.x-i)*s(h)-(e.y-n)*o(h),y:(e.x-i)*o(h)+(e.y-n)*s(h)}})},roots:function(e,r){let i,n,o;r=r||{p1:{x:0,y:0},p2:{x:1,y:0}};let u=e.length-1,l=_.align(e,r),f=function(e){return 0<=e&&e<=1};if(2===u){let e=l[0].y,r=l[1].y,i=l[2].y,n=e-2*r+i;if(0!==n){let s=-a(r*r-e*i),o=-e+r;return[-(s+o)/n,-(-s+o)/n].filter(f)}return r!==i&&0===n?[(2*r-i)/(2*r-2*i)].filter(f):[]}let p=l[0].y,y=l[1].y,x=l[2].y,g=-p+3*y-3*x+l[3].y,v=3*p-6*y+3*x,m=-3*p+3*y,z=p;if(_.approximately(g,0)){if(_.approximately(v,0))return _.approximately(m,0)?[]:[-z/m].filter(f);let e=a(m*m-4*v*z),r=2*v;return[(e-m)/r,(-m-e)/r].filter(f)}v/=g;let b=(3*(m/=g)-v*v)/3,w=b/3,E=(2*v*v*v-9*v*m+27*(z/=g))/27,k=E/2,O=k*k+w*w*w;if(O<0){let e=-b/3,r=a(e*e*e),i=-E/(2*r),u=h(i<-1?-1:i>1?1:i),l=2*c(r);return n=l*s(u/3)-v/3,[n,o=l*s((u+d)/3)-v/3,l*s((u+2*d)/3)-v/3].filter(f)}if(0===O)return[n=2*(i=k<0?c(-k):-c(k))-v/3,o=-i-v/3].filter(f);{let e=a(O);return[(i=c(-k+e))-c(k+e)-v/3].filter(f)}},droots:function(e){if(3===e.length){let r=e[0],i=e[1],n=e[2],s=r-2*i+n;if(0!==s){let e=-a(i*i-r*n),o=-r+i;return[-(e+o)/s,-(-e+o)/s]}return i!==n&&0===s?[(2*i-n)/(2*(i-n))]:[]}if(2===e.length){let r=e[0],i=e[1];if(r!==i)return[r/(r-i)]}return[]},curvature:function(e,r,i,s,o){let h,u,c,f,d=0,p=0,y=_.compute(e,r),x=_.compute(e,i),g=y.x*y.x+y.y*y.y;if(s?(h=a(l(y.y*x.z-x.y*y.z,2)+l(y.z*x.x-x.z*y.x,2)+l(y.x*x.y-x.x*y.y,2)),u=l(g+y.z*y.z,1.5)):(h=y.x*x.y-y.y*x.x,u=l(g,1.5)),0===h||0===u)return{k:0,r:0};if(d=h/u,p=u/h,!o){let o=_.curvature(e-.001,r,i,s,!0).k,h=_.curvature(e+.001,r,i,s,!0).k;f=(h-d+(d-o))/2,c=(n(h-d)+n(d-o))/2}return{k:d,r:p,dk:f,adk:c}},inflections:function(e){if(e.length<4)return[];let r=_.align(e,{p1:e[0],p2:e.slice(-1)[0]}),i=r[2].x*r[1].y,n=r[3].x*r[1].y,s=r[1].x*r[2].y,o=18*(-3*i+2*n+3*s-r[3].x*r[2].y),h=18*(3*i-n-3*s),u=18*(s-i);if(_.approximately(o,0)){if(!_.approximately(h,0)){let e=-u/h;if(0<=e&&e<=1)return[e]}return[]}let a=2*o;if(_.approximately(a,0))return[];let l=h*h-4*o*u;if(l<0)return[];let c=Math.sqrt(l);return[(c-h)/a,-(h+c)/a].filter(function(e){return 0<=e&&e<=1})},bboxoverlap:function(e,r){let i=["x","y"],s=i.length;for(let o=0,h,u,a,l;o<s;o++)if(u=e[h=i[o]].mid,a=r[h].mid,l=(e[h].size+r[h].size)/2,n(u-a)>=l)return!1;return!0},expandbox:function(e,r){r.x.min<e.x.min&&(e.x.min=r.x.min),r.y.min<e.y.min&&(e.y.min=r.y.min),r.z&&r.z.min<e.z.min&&(e.z.min=r.z.min),r.x.max>e.x.max&&(e.x.max=r.x.max),r.y.max>e.y.max&&(e.y.max=r.y.max),r.z&&r.z.max>e.z.max&&(e.z.max=r.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,r,i){let n=e.bbox(),s=r.bbox(),o=i||.5;if(n.x.size+n.y.size<o&&s.x.size+s.y.size<o)return[(1e5*(e._t1+e._t2)/2|0)/1e5+"/"+(1e5*(r._t1+r._t2)/2|0)/1e5];let h=e.split(.5),u=r.split(.5),a=[{left:h.left,right:u.left},{left:h.left,right:u.right},{left:h.right,right:u.right},{left:h.right,right:u.left}];a=a.filter(function(e){return _.bboxoverlap(e.left.bbox(),e.right.bbox())});let l=[];return 0===a.length?l:(a.forEach(function(e){l=l.concat(_.pairiteration(e.left,e.right,o))}),l=l.filter(function(e,r){return l.indexOf(e)===r}))},getccenter:function(e,r,i){let n=r.x-e.x,h=r.y-e.y,a=i.x-r.x,l=i.y-r.y,c=n*s(p)-h*o(p),f=n*o(p)+h*s(p),y=a*s(p)-l*o(p),x=a*o(p)+l*s(p),g=(e.x+r.x)/2,v=(e.y+r.y)/2,m=(r.x+i.x)/2,z=(r.y+i.y)/2,b=_.lli8(g,v,g+c,v+f,m,z,m+y,z+x),w=_.dist(b,e),E=u(e.y-b.y,e.x-b.x),k=u(r.y-b.y,r.x-b.x),O=u(i.y-b.y,i.x-b.x),C;return E<O?((E>k||k>O)&&(E+=d),E>O&&(C=O,O=E,E=C)):O<k&&k<E?(C=O,O=E,E=C):O+=d,b.s=E,b.e=O,b.r=w,b},numberSort:function(e,r){return e-r}};class v{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return _.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){let e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)_.expandbox(r,e[i].bbox());return r}offset(e){let r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new v(r)}}let{abs:m,min:z,max:b,cos:w,sin:E,acos:k,sqrt:O}=Math,C=Math.PI;class j{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if("object"==typeof r[0]){i=r.length;let e=[];r.forEach(function(r){["x","y","z"].forEach(function(i){void 0!==r[i]&&e.push(r[i])})}),r=e}let n=!1,s=r.length;if(i){if(i>4){if(1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");n=!0}}else if(6!==s&&8!==s&&9!==s&&12!==s&&1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");let o=this._3d=!n&&(9===s||12===s)||e&&e[0]&&void 0!==e[0].z,h=this.points=[];for(let e=0,i=o?3:2;e<s;e+=i){var u={x:r[e],y:r[e+1]};o&&(u.z=r[e+2]),h.push(u)}let a=this.order=h.length-1,l=this.dims=["x","y"];o&&l.push("z"),this.dimlen=l.length;let c=_.align(h,{p1:h[0],p2:h[a]}),f=_.dist(h[0],h[a]);this._linear=c.reduce((e,r)=>e+m(r.y),0)<f/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,n){if(void 0===n&&(n=.5),0===n)return new j(r,r,i);if(1===n)return new j(e,r,r);let s=j.getABC(2,e,r,i,n);return new j(e,s.A,i)}static cubicFromPoints(e,r,i,n,s){void 0===n&&(n=.5);let o=j.getABC(3,e,r,i,n);void 0===s&&(s=_.dist(r,o.C));let h=s*(1-n)/n,u=_.dist(e,i),a=(i.x-e.x)/u,l=(i.y-e.y)/u,c=s*a,f=s*l,d={x:r.x-c,y:r.y-f},p={x:r.x+h*a,y:r.y+h*l},y=o.A,x={x:y.x+(d.x-y.x)/(1-n),y:y.y+(d.y-y.y)/(1-n)},g={x:y.x+(p.x-y.x)/n,y:y.y+(p.y-y.y)/n},v={x:e.x+(x.x-e.x)/n,y:e.y+(x.y-e.y)/n};return new j(e,v,{x:i.x+(g.x-i.x)/(1-n),y:i.y+(g.y-i.y)/(1-n)},i)}static getUtils(){return _}getUtils(){return j.getUtils()}static get PolyBezier(){return v}valueOf(){return this.toString()}toString(){return _.pointsToString(this.points)}toSVG(){if(this._3d)return!1;let e=this.points,r=["M",e[0].x,e[0].y,2===this.order?"Q":"C"];for(let i=1,n=e.length;i<n;i++)r.push(e[i].x),r.push(e[i].y);return r.join(" ")}setRatios(e){if(e.length!==this.points.length)throw Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){let e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=_.derive(this.points,this._3d),this.computedirection()}computedirection(){let e=this.points,r=_.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return _.length(this.derivative.bind(this))}static getABC(e=2,r,i,n,s=.5){let o=_.projectionratio(s,e),h=1-o,u={x:o*r.x+h*n.x,y:o*r.y+h*n.y},a=_.abcratio(s,e);return{A:{x:i.x+(i.x-u.x)/a,y:i.y+(i.y-u.y)/a},B:i,C:u,S:r,E:n}}getABC(e,r){r=r||this.get(e);let i=this.points[0],n=this.points[this.order];return j.getABC(this.order,i,r,n,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,n;r<e;r++)n=r/(e-1),(i=this.compute(n)).t=n,this._lut.push(i);return this._lut}on(e,r){r=r||5;let i=this.getLUT(),n=[];for(let s=0,o;s<i.length;s++)o=i[s],_.dist(o,e)<r&&(n.push(o),i.length);return!!n.length&&(t/=n.length)}project(e){let r=this.getLUT(),i=r.length-1,n=_.closest(r,e),s=n.mpos,o=(s-1)/i,h=(s+1)/i,u=.1/i,a=n.mdist,l=o,c=l,f;a+=1;for(let r;l<h+u;l+=u)f=this.compute(l),(r=_.dist(e,f))<a&&(a=r,c=l);return c=c<0?0:c>1?1:c,(f=this.compute(c)).t=c,f.d=a,f}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?_.computeWithRatios(e,this.points,this.ratios,this._3d):_.compute(e,this.points,this._3d,this.ratios)}raise(){let e=this.points,r=[e[0]],i=e.length;for(let n=1,s,o;n<i;n++)s=e[n],o=e[n-1],r[n]={x:(i-n)/i*s.x+n/i*o.x,y:(i-n)/i*s.y+n/i*o.y};return r[i]=e[i-1],new j(r)}derivative(e){return _.compute(e,this.dpoints[0],this._3d)}dderivative(e){return _.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new j(_.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return _.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return _.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){let r=this.derivative(e),i=O(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){let r=this.derivative(e),i=this.derivative(e+.01),n=O(r.x*r.x+r.y*r.y+r.z*r.z),s=O(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=n,r.y/=n,r.z/=n,i.x/=s,i.y/=s,i.z/=s;let o={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},h=O(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=h,o.y/=h,o.z/=h;let u=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:e,x:u[0]*r.x+u[1]*r.y+u[2]*r.z,y:u[3]*r.x+u[4]*r.y+u[5]*r.z,z:u[6]*r.x+u[7]*r.y+u[8]*r.z}}hull(e){let r=this.points,i=[],n=[],s=0;for(n[s++]=r[0],n[s++]=r[1],n[s++]=r[2],3===this.order&&(n[s++]=r[3]);r.length>1;){i=[];for(let o=0,h,u=r.length-1;o<u;o++)h=_.lerp(e,r[o],r[o+1]),n[s++]=h,i.push(h);r=i}return n}split(e,r){if(0===e&&r)return this.split(r).left;if(1===r)return this.split(e).right;let i=this.hull(e),n={left:new j(2===this.order?[i[0],i[3],i[5]]:[i[0],i[4],i[7],i[9]]),right:new j(2===this.order?[i[5],i[4],i[2]]:[i[9],i[8],i[6],i[3]]),span:i};return(n.left._t1=_.map(0,0,1,this._t1,this._t2),n.left._t2=_.map(e,0,1,this._t1,this._t2),n.right._t1=_.map(e,0,1,this._t1,this._t2),n.right._t2=_.map(1,0,1,this._t1,this._t2),r)?(r=_.map(r,e,1,0,1),n.right.split(r).left):n}extrema(){let e={},r=[];return this.dims.forEach((function(i){let n=function(e){return e[i]},s=this.dpoints[0].map(n);e[i]=_.droots(s),3===this.order&&(s=this.dpoints[1].map(n),e[i]=e[i].concat(_.droots(s))),e[i]=e[i].filter(function(e){return e>=0&&e<=1}),r=r.concat(e[i].sort(_.numberSort))}).bind(this)),e.values=r.sort(_.numberSort).filter(function(e,i){return r.indexOf(e)===i}),e}bbox(){let e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=_.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){let r=this.bbox(),i=e.bbox();return _.bboxoverlap(r,i)}offset(e,r){if(void 0!==r){let i=this.get(e),n=this.normal(e),s={c:i,n:n,x:i.x+n.x*r,y:i.y+n.y*r};return this._3d&&(s.z=i.z+n.z*r),s}if(this._linear){let r=this.normal(0);return[new j(this.points.map(function(i){let n={x:i.x+e*r.x,y:i.y+e*r.y};return i.z&&r.z&&(n.z=i.z+e*r.z),n}))]}return this.reduce().map(function(r){return r._linear?r.offset(e)[0]:r.scale(e)})}simple(){if(3===this.order){let e=_.angle(this.points[0],this.points[3],this.points[1]),r=_.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&r<0||e<0&&r>0)return!1}let e=this.normal(0),r=this.normal(1),i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),m(k(i))<C/3}reduce(){let e,r=0,i=0,n,s=[],o=[],h=this.extrema().values;for(-1===h.indexOf(0)&&(h=[0].concat(h)),-1===h.indexOf(1)&&h.push(1),r=h[0],e=1;e<h.length;e++)i=h[e],(n=this.split(r,i))._t1=r,n._t2=i,s.push(n),r=i;return s.forEach(function(e){for(r=0,i=0;i<=1;)for(i=r+.01;i<=1.01;i+=.01)if(!(n=e.split(r,i)).simple()){if(i-=.01,.01>m(r-i))return[];(n=e.split(r,i))._t1=_.map(r,0,1,e._t1,e._t2),n._t2=_.map(i,0,1,e._t1,e._t2),o.push(n),r=i;break}r<1&&((n=e.split(r,1))._t1=_.map(r,0,1,e._t1,e._t2),n._t2=e._t2,o.push(n))}),o}translate(e,r,i){i="number"==typeof i?i:r;let n=this.order,s=this.points.map((e,s)=>(1-s/n)*r+s/n*i);return new j(this.points.map((r,i)=>({x:r.x+e.x*s[i],y:r.y+e.y*s[i]})))}scale(e){let r=this.order,i=!1;if("function"==typeof e&&(i=e),i&&2===r)return this.raise().scale(i);let n=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);let o=i?i(0):e,h=i?i(1):e,u=[this.offset(0,10),this.offset(1,10)],a=[],l=_.lli4(u[0],u[0].c,u[1],u[1].c);if(!l)throw Error("cannot scale this curve. Try reducing it first.");return([0,1].forEach(function(e){let i=a[e*r]=_.copy(s[e*r]);i.x+=(e?h:o)*u[e].n.x,i.y+=(e?h:o)*u[e].n.y}),i)?[0,1].forEach(function(o){if(2!==r||!o){var h=s[o+1],u={x:h.x-l.x,y:h.y-l.y},c=i?i((o+1)/r):e;i&&!n&&(c=-c);var f=O(u.x*u.x+u.y*u.y);u.x/=f,u.y/=f,a[o+1]={x:h.x+c*u.x,y:h.y+c*u.y}}}):[0,1].forEach(e=>{if(2===r&&e)return;let i=a[e*r],n=this.derivative(e),o={x:i.x+n.x,y:i.y+n.y};a[e+1]=_.lli4(i,o,l,s[e+1])}),new j(a)}outline(e,r,i,n){if(r=void 0===r?e:r,this._linear){let s,o,h,u=this.normal(0),a=this.points[0],l=this.points[this.points.length-1];void 0===i&&(i=e,n=r),s={x:a.x+u.x*e,y:a.y+u.y*e},h={x:l.x+u.x*i,y:l.y+u.y*i},o={x:(s.x+h.x)/2,y:(s.y+h.y)/2};let c=[s,o,h];s={x:a.x-u.x*r,y:a.y-u.y*r},h={x:l.x-u.x*n,y:l.y-u.y*n},o={x:(s.x+h.x)/2,y:(s.y+h.y)/2};let f=[h,o,s],d=_.makeline(f[2],c[0]),p=_.makeline(c[2],f[0]);return new v([d,new j(c),p,new j(f)])}let s=this.reduce(),o=s.length,h=[],u=[],a,l=0,c=this.length(),f=void 0!==i&&void 0!==n;function d(e,r,i,n,s){return function(o){let h=r-e;return _.map(o,0,1,e+n/i*h,e+(n+s)/i*h)}}s.forEach(function(s){let o=s.length();f?(h.push(s.scale(d(e,i,c,l,o))),u.push(s.scale(d(-r,-n,c,l,o)))):(h.push(s.scale(e)),u.push(s.scale(-r))),l+=o}),u=u.map(function(e){return(a=e.points)[3]?e.points=[a[3],a[2],a[1],a[0]]:e.points=[a[2],a[1],a[0]],e}).reverse();let p=h[0].points[0],y=h[o-1].points[h[o-1].points.length-1],x=u[o-1].points[u[o-1].points.length-1],g=u[0].points[0],m=_.makeline(x,p),z=_.makeline(y,g);return new v([m].concat(h).concat([z]).concat(u))}outlineshapes(e,r,i){r=r||e;let n=this.outline(e,r).curves,s=[];for(let e=1,r=n.length;e<r/2;e++){let o=_.makeshape(n[e],n[r-e],i);o.startcap.virtual=e>1,o.endcap.virtual=e<r/2-1,s.push(o)}return s}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof j&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){let r=z(e.p1.x,e.p2.x),i=z(e.p1.y,e.p2.y),n=b(e.p1.x,e.p2.x),s=b(e.p1.y,e.p2.y);return _.roots(this.points,e).filter(e=>{var o=this.get(e);return _.between(o.x,r,n)&&_.between(o.y,i,s)})}selfintersects(e){let r=this.reduce(),i=r.length-2,n=[];for(let s=0,o,h;s<i;s++)o=r.slice(s,s+1),h=r.slice(s+2),n.push(...this.curveintersects(o,h,e));return n}curveintersects(e,r,i){let n=[];e.forEach(function(e){r.forEach(function(r){e.overlaps(r)&&n.push({left:e,right:r})})});let s=[];return n.forEach(function(e){let r=_.pairiteration(e.left,e.right,i);r.length>0&&(s=s.concat(r))}),s}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,n){let s=(n-i)/4,o=this.get(i+s),h=this.get(n-s),u=_.dist(e,r),a=_.dist(e,o),l=_.dist(e,h);return m(a-u)+m(l-u)}_iterate(e,r){let i=0,n=1,s;do{s=0,n=1;let o=this.get(i),h,u,a,l,c=!1,f=!1,d,p=n,y=1;do if(f=c,l=a,p=(i+n)/2,h=this.get(p),u=this.get(n),(a=_.getccenter(o,h,u)).interval={start:i,end:n},c=this._error(a,o,i,n)<=e,(d=f&&!c)||(y=n),c){if(n>=1){if(a.interval.end=y=1,l=a,n>1){let e={x:a.x+a.r*w(a.e),y:a.y+a.r*E(a.e)};a.e+=_.angle({x:a.x,y:a.y},e,this.get(1))}break}n+=(n-i)/2}else n=p;while(!d&&s++<100);if(s>=100)break;l=l||a,r.push(l),i=y}while(n<1);return r}}}}]);