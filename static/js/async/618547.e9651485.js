"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["618547"],{98159:function(e,n,s){s.r(n),s.d(n,{default:()=>c});var r=s(110239),i=s(437562),l=s(441332),o=s(944529),a=s(491898);function t(e){let n={a:"a",code:"code",div:"div",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"inferinputsplugin",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#inferinputsplugin",children:"#"}),"inferInputsPlugin"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"inferInputsPlugin"})," is a ",(0,r.jsx)(n.strong,{children:"form plugin for automatically inferring JSON Schema of input parameters"}),". It can ",(0,r.jsx)(n.strong,{children:"automatically generate corresponding JSON Schema structures based on IFlowValue types (constants or variable references) before data is sent to the backend runtime"}),", providing type information for backend runtime type validation and backend interfaces."]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)("img",{loading:"lazy",src:"/materials/infer-inputs-plugin.png",alt:"Schema Inference",style:{width:"75%"}}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"When transmitted to the backend runtime, the JSON Schema of the inputs field is inferred from the values in inputsValues"})})]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Applicable Scenarios"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HTTP Nodes"}),": Infer Schema for request headers and query parameters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Code Nodes"}),": Infer type structure for code input parameters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Function Call Nodes"}),": Infer Schema for function parameters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Any nodes accepting dynamic inputs"}),": Need to provide input type information for the backend"]}),"\n"]})})]}),"\n",(0,r.jsxs)(n.h2,{id:"demo",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#demo",children:"#"}),"Demo"]}),"\n",(0,r.jsxs)(n.h3,{id:"basic-usage",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#basic-usage",children:"#"}),"Basic Usage"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsx)(n.p,{children:"Click the Debug panel in the top right corner of the demo to view the JSON data sent to the backend"})})]}),"\n",(0,r.jsx)(a.w,{}),"\n",(0,r.jsx)(n.p,{children:"Infer Schema for HTTP request headers and body:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,r.jsxs)(n.code,{className:"language-tsx",children:[(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" { createInferInputsPlugin"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" InputsValue"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" InputsValuesTree } "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" { Field } "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/editor'"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line"}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" const"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" HttpFormRender"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ({ form }) "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"FormContent"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Record"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"string"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" IFlowValue"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">> "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"headersValues"'}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"          {({ field }) "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"            <"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"InputsValues"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"              value"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:".value}"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"              onChange"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{(val) "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"(val)}"})]}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"            />"})}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"          )}"})}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"        </"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Record"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"string"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" IFlowValue"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">> "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"bodyValues"'}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"          {({ field }) "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"            <"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"InputsValuesTree"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"              value"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:".value}"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"              onChange"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{(val) "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"(val)}"})]}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"            />"})}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"          )}"})}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"        </"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"FormContent"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  );"})}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"};"})}),"\n",(0,r.jsx)(n.span,{className:"line"}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" const"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" FormMeta"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  render"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" HttpFormRender"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  plugins"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"    // Infer Schema for headers"})}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"    createInferInputsPlugin"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"      sourceKey"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'headersValues'"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"      targetKey"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'headersSchema'"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    })"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"    // Infer Schema for body"})}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"    createInferInputsPlugin"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"      sourceKey"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'bodyValues'"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"      targetKey"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'bodySchema'"})]}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    })"})}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  ]"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"};"})})]})})}),"\n",(0,r.jsxs)(n.h2,{id:"api-reference",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#api-reference",children:"#"}),"API Reference"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-typescript",children:[(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" createInferInputsPlugin"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"(options"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  sourceKey"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  targetKey"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  scope"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'private'"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'public'"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  ignoreConstantSchema"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" boolean"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"})"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" FormPlugin"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]})]})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Property"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Default"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"sourceKey"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Field path in the form that stores input values, value type is an object or array containing IFlowValue"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"targetKey"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Field path where the inferred JSON Schema is stored"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"scope"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"'private' | 'public'"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"public"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Specifies the scope type used for variable resolution"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"ignoreConstantSchema"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"false"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Whether to strip the Schema of constant values during submission (only keep Schema of variable references)"})]})]})]}),"\n",(0,r.jsxs)(n.h2,{id:"source-code-guide",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#source-code-guide",children:"#"}),"Source Code Guide"]}),"\n",(0,r.jsx)(o.ZB,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/materials/form-materials/src/form-plugins/infer-inputs-plugin/index.ts"}),"\n",(0,r.jsx)(n.p,{children:"Use CLI command to copy source code locally:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsx)(n.code,{className:"language-bash",children:(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" form-plugins/infer-inputs-plugin"})]})})})}),"\n",(0,r.jsxs)(n.h3,{id:"directory-structure",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#directory-structure",children:"#"}),"Directory Structure"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-plaintext",children:[(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{children:"infer-inputs-plugin/"})}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{children:"└── index.tsx  # Complete plugin implementation, including Schema inference and bidirectional conversion logic"})})]})})}),"\n",(0,r.jsxs)(n.h3,{id:"core-implementation",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#core-implementation",children:"#"}),"Core Implementation"]}),"\n",(0,r.jsxs)(n.p,{children:["The core function of ",(0,r.jsx)(n.code,{children:"inferInputsPlugin"})," is to infer JSON Schema from IFlowValue objects. For constant values, it directly uses their ",(0,r.jsx)(n.code,{children:"schema"})," field; for variable references, it queries variable types from the scope; for expressions and templates, it infers them as corresponding basic types. The plugin also supports ",(0,r.jsx)(n.code,{children:"ignoreConstantSchema"})," optimization, stripping constant Schema during submission and automatically restoring it during initialization."]}),"\n",(0,r.jsxs)(n.h4,{id:"workflow-sequence-diagram",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#workflow-sequence-diagram",children:"#"}),"Workflow Sequence Diagram"]}),"\n",(0,r.jsx)(l.Z,{code:"sequenceDiagram\n    participant Form as Form\n    participant Plugin as inferInputsPlugin\n    participant Scope as Variable Scope\n    participant Backend as Backend\n\n    Note over Form: Form Submission\n    Form->>Plugin: onSubmit triggered\n    Plugin->>Plugin: Read sourceKey data\n\n    loop Iterate each IFlowValue\n        alt Type is constant\n            Plugin->>Plugin: Use value.schema\n            opt ignoreConstantSchema = true\n                Plugin->>Plugin: Strip schema\n            end\n        else Type is ref\n            Plugin->>Scope: Query variable type\n            Scope->>Plugin: Return variable Schema\n        else Type is expression/template\n            Plugin->>Plugin: Infer as any/string type\n        end\n    end\n\n    Plugin->>Plugin: Merge all Schemas\n    Plugin->>Form: Set to targetKey\n    Form->>Backend: Submit data containing Schema\n\n    Note over Form: Form Initialization\n    Backend->>Form: Return data (may lack constant Schema)\n    Form->>Plugin: onInit triggered\n    opt ignoreConstantSchema = true\n        Plugin->>Plugin: Restore constant Schema from sourceKey\n        Plugin->>Form: Update targetKey\n    end",config:{}}),"\n",(0,r.jsx)(n.p,{children:"Core Features:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Automatic Schema Inference"}),": Scans IFlowValue objects in form data and automatically infers their JSON Schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Variable Type Resolution"}),": For variable references, resolves the actual type of variables from the scope"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Constant Schema Optimization"}),": Optionally strips constant Schema during submission to reduce backend data load"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bidirectional Conversion"}),": Restores Schema during form initialization and generates Schema during form submission"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"dependencies",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#dependencies",children:"#"}),"Dependencies"]}),"\n",(0,r.jsxs)(n.h4,{id:"flowgram-api",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgram-api",children:"#"}),"flowgram API"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/client/editor",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(n.strong,{children:"@flowgram.ai/editor"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"defineFormPluginCreator"}),": Factory function for defining form plugins"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"FormPlugin"}),": Form plugin type definition"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"FormPluginSetupMetaCtx"}),": Plugin setup context, provides ",(0,r.jsx)(n.code,{children:"addFormatOnInit"}),", ",(0,r.jsx)(n.code,{children:"addFormatOnSubmit"})," methods"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/variable-engine/variable-core",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(n.strong,{children:"@flowgram.ai/variable-core"})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/variable-engine/json-schema",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(n.strong,{children:"@flowgram.ai/json-schema"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"IJsonSchema"}),": JSON Schema type definition"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"other-dependencies",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#other-dependencies",children:"#"}),"Other Dependencies"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/en/materials/common/flow-value.html",children:(0,r.jsx)(n.strong,{children:"FlowValue"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"FlowValueUtils.inferJsonSchema()"}),": Infer JSON Schema of IFlowValue"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"FlowValueUtils.traverse()"}),": Traverse nested FlowValue structures"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"FlowValueUtils.isConstant()"}),", ",(0,r.jsx)(n.code,{children:"FlowValueUtils.isRef()"}),": Type judgment tools"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"IFlowValue"}),": Union type of Flow values"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"IFlowConstantValue"}),": Constant type, contains ",(0,r.jsx)(n.code,{children:"schema"})," field"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"IFlowRefValue"}),": Variable reference type, contains variable path"]}),"\n"]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["en%2Fmaterials%2Fform-plugins%2Finfer-inputs-plugin.mdx"]={toc:[{id:"demo",text:"Demo",depth:2},{id:"basic-usage",text:"Basic Usage",depth:3},{id:"api-reference",text:"API Reference",depth:2},{id:"source-code-guide",text:"Source Code Guide",depth:2},{id:"directory-structure",text:"Directory Structure",depth:3},{id:"core-implementation",text:"Core Implementation",depth:3},{id:"workflow-sequence-diagram",text:"Workflow Sequence Diagram",depth:4},{id:"dependencies",text:"Dependencies",depth:3},{id:"flowgram-api",text:"flowgram API",depth:4},{id:"other-dependencies",text:"Other Dependencies",depth:4}],title:"inferInputsPlugin",headingTitle:"inferInputsPlugin",frontmatter:{}}},491898:function(e,n,s){s.d(n,{w:()=>d});var r=s(110239),i=s(908600),l=s(640898),o=s(401255),a=s(132288);let t=i.lazy(()=>Promise.all([s.e("386212"),s.e("133914"),s.e("227692"),s.e("933451"),s.e("942362"),s.e("135691"),s.e("46854"),s.e("232558"),s.e("673693"),s.e("564864")]).then(s.bind(s,261548)).then(e=>({default:e.InputsValues}))),c=i.lazy(()=>Promise.all([s.e("386212"),s.e("133914"),s.e("227692"),s.e("933451"),s.e("942362"),s.e("135691"),s.e("46854"),s.e("232558"),s.e("673693"),s.e("564864")]).then(s.bind(s,261548)).then(e=>({default:e.InputsValuesTree}))),d=()=>(0,r.jsx)(a.y,{filterEndNode:!0,height:500,formMeta:{render:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.p,{}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{children:"Headers"}),(0,r.jsx)(l.gNt,{name:"headersValues",defaultValue:{"Content-Type":{type:"constant",content:"application/json",schema:{type:"string"}},Authorization:{type:"ref",content:["start_0","str"]}},children:e=>{let{field:n}=e;return(0,r.jsx)(t,{value:n.value,onChange:e=>n.onChange(e)})}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{children:"Body"}),(0,r.jsx)(l.gNt,{name:"bodyValues",defaultValue:{page:{index:{type:"ref",content:["start_0","obj","obj2","num"]},size:{type:"constant",content:10,schema:{type:"number"}}},query:{type:"ref",content:["start_0","obj"]}},children:e=>{let{field:n}=e;return(0,r.jsx)(c,{value:n.value,onChange:e=>n.onChange(e)})}})]})]})]}),plugins:[(0,o.k)({sourceKey:"headersValues",targetKey:"headersSchema"}),(0,o.k)({sourceKey:"bodyValues",targetKey:"bodySchema"})]}})},132288:function(e,n,s){s.d(n,{p:()=>o,y:()=>a});var r=s(110239),i=s(908600);let l=i.lazy(()=>Promise.all([s.e("386212"),s.e("133914"),s.e("227692"),s.e("933451"),s.e("917828"),s.e("428647"),s.e("135691"),s.e("46854"),s.e("690536")]).then(s.bind(s,654296)).then(e=>({default:e.FreeFormMetaStoryBuilder}))),o=i.lazy(()=>Promise.all([s.e("386212"),s.e("133914"),s.e("227692"),s.e("933451"),s.e("917828"),s.e("428647"),s.e("135691"),s.e("46854"),s.e("690536")]).then(s.bind(s,654296)).then(e=>({default:e.FormHeader}))),a=e=>(0,r.jsx)("div",{style:{position:"relative",height:e.height||400},children:(0,r.jsx)(l,{...e})})},401255:function(e,n,s){s.d(n,{k:()=>d});var r=s(969134),i=s(383909),l=s(492320),o=s(631952),a=s(950454),t=s(687252);let{produce:c}=new o.Ve({autoFreeze:!1}),d=(0,a.CR5)({onSetupFormMeta(e,n){let{addFormatOnSubmit:s,addFormatOnInit:o}=e,{sourceKey:d,targetKey:h,scope:p,ignoreConstantSchema:x}=n;d&&h&&(s((e,n)=>c(e,s=>{let o=(0,r.Z)(e,d);if((0,i.Z)(s,h,t.U.inferJsonSchema(o,"private"===p?(0,a.u$R)(n.node):(0,a.k6H)(n.node))),x)for(let{value:n,path:s}of t.U.traverse(o,{includeTypes:["constant"]}))t.U.isConstant(n)&&(null==n?void 0:n.schema)&&(0,i.Z)(e,`${d}.${s}`,(0,l.Z)(n,["schema"]))})),x&&o((e,n)=>{let s=(0,r.Z)(e,h);if(!s)return e;for(let{value:n,pathArr:l}of t.U.traverse((0,r.Z)(e,d),{includeTypes:["constant"]}))if(t.U.isConstant(n)&&!(null==n?void 0:n.schema)){let e=l.map(e=>`properties.${e}`).join("."),o=(0,r.Z)(s,e);o&&(0,i.Z)(n,"schema",o)}return e}))}})},687252:function(e,n,s){s.d(n,{U:()=>r});var r,i=s(111886),l=s(13721),o=s(721855),a=s(325486),t=s(937643),c=s(123387);let d=c.ZP.object({index:c.ZP.number().optional()}).optional(),h=c.ZP.object({type:c.ZP.literal("constant"),content:c.ZP.any().optional(),schema:c.ZP.any().optional(),extra:d}),p=c.ZP.object({type:c.ZP.literal("ref"),content:c.ZP.array(c.ZP.string()).optional(),extra:d}),x=c.ZP.object({type:c.ZP.literal("expression"),content:c.ZP.string().optional(),extra:d}),u=c.ZP.object({type:c.ZP.literal("template"),content:c.ZP.string().optional(),extra:d});!function(e){function n(e){return h.safeParse(e).success}function s(e){return p.safeParse(e).success}function r(e){return x.safeParse(e).success}function c(e){return u.safeParse(e).success}function d(e){return(null==e?void 0:e.schema)?e.schema:"string"==typeof e.content?{type:"string"}:"number"==typeof e.content?{type:"number"}:"boolean"==typeof e.content?{type:"boolean"}:(0,a.Z)(e.content)?{type:"object"}:void 0}e.isConstant=n,e.isRef=s,e.isExpression=r,e.isTemplate=c,e.isConstantOrRef=function(e){return n(e)||s(e)},e.isFlowValue=function(e){return n(e)||s(e)||r(e)||c(e)},e.traverse=function* e(o,a){let{includeTypes:t=["ref","template","expression","constant"],path:d="",pathArr:h=[]}=a||{};if((0,i.Z)(o)){if(s(o)&&t.includes("ref")||c(o)&&t.includes("template")||r(o)&&t.includes("expression")||n(o)&&t.includes("constant"))return void(yield{value:o,path:d,pathArr:h});for(let[n,s]of Object.entries(o))yield*e(s,{...a,path:d?`${d}.${n}`:n,pathArr:[...h,n]});return}if((0,l.Z)(o))for(let[n,s]of o.entries())yield*e(s,{...a,path:d?`${d}[${n}]`:`[${n}]`,pathArr:[...h,`[${n}]`]})},e.getTemplateKeyPaths=function(e){var n;return(0,o.Z)((null==(n=e.content)?void 0:n.match(/\{\{([^\}\{]+)\}\}/g))||[]).map(e=>e.slice(2,-2).split("."))},e.inferConstantJsonSchema=d,e.inferJsonSchema=function e(r,l){if((0,i.Z)(r)){if(n(r))return d(r);if(s(r)){let e=l.available.getByKeyPath(null==r?void 0:r.content);return(null==e?void 0:e.type)?t.Kz.astToSchema(null==e?void 0:e.type):void 0}return c(r)?{type:"string"}:{type:"object",properties:Object.keys(r).reduce((n,s)=>{let i=e(r[s],l);return i&&(n[s]=i),n},{})}}}}(r||(r={}))},383909:function(e,n,s){s.d(n,{Z:()=>i});var r=s(221145);let i=function(e,n,s){return null==e?e:(0,r.Z)(e,n,s)}}}]);