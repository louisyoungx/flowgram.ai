"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["779643"],{457712:function(s,n,e){e.r(n),e.d(n,{default:()=>c});var l=e(110239),r=e(437562),i=e(564114);function a(s){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,r.a)(),...s.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.h1,{id:"最佳实践",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#最佳实践",children:"#"}),"最佳实践"]}),"\n","\n",(0,l.jsx)(i.U2,{}),"\n",(0,l.jsxs)(n.h2,{id:"安装",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#安装",children:"#"}),"安装"]}),"\n",(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,l.jsx)(n.code,{className:"language-shell",children:(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/create-app@latest"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" fixed-layout"})]})})})}),"\n",(0,l.jsxs)(n.h2,{id:"源码",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#源码",children:"#"}),"源码"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/apps/demo-fixed-layout",rel:"noopener noreferrer",target:"_blank",children:"https://github.com/bytedance/flowgram.ai/tree/main/apps/demo-fixed-layout"})}),"\n",(0,l.jsxs)(n.h2,{id:"项目概览",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#项目概览",children:"#"}),"项目概览"]}),"\n",(0,l.jsxs)(n.h3,{id:"核心技术栈",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#核心技术栈",children:"#"}),"核心技术栈"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"前端框架"}),": React 18 + TypeScript"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"构建工具"}),": Rsbuild (基于 Rspack 的现代构建工具)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"样式方案"}),": Less + Styled Components + CSS Variables"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"UI 组件库"}),": Semi Design (@douyinfe/semi-ui)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"状态管理"}),": 基于 Flowgram 自研的编辑器框架"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"依赖注入"}),": Inversify"]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"核心依赖包",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#核心依赖包",children:"#"}),"核心依赖包"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"@flowgram.ai/fixed-layout-editor"}),": 固定布局编辑器核心依赖"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"@flowgram.ai/fixed-semi-materials"}),": Semi Design 物料库"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"@flowgram.ai/form-materials"}),": 表单物料库"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"@flowgram.ai/group-plugin"}),": 分组插件"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"@flowgram.ai/minimap-plugin"}),": 缩略图插件"]}),"\n"]}),"\n",(0,l.jsxs)(n.h2,{id:"代码说明",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#代码说明",children:"#"}),"代码说明"]}),"\n",(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-txt",children:[(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"src/"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── app.tsx                    # 应用入口组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── editor.tsx                 # 主编辑器组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── index.ts                   # 模块导出入口"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── initial-data.ts            # 初始化数据配置"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── type.d.ts                  # 全局类型声明"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── assets/                    # 静态资源"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── icon-mouse.tsx         # 鼠标图标组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   └── icon-pad.tsx           # 触控板图标组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── components/                # 通用组件库"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── index.ts               # 组件导出入口"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── node-list.tsx          # 节点列表组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── agent-adder/           # Agent 添加器组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── agent-label/           # Agent 标签组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── base-node/             # 基础节点组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── styles.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── branch-adder/          # 分支添加器组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── styles.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── drag-node/             # 拖拽节点组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── styles.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── node-adder/            # 节点添加器组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── styles.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── utils.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── selector-box-popover/  # 选择框弹出层组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── sidebar/               # 侧边栏组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── sidebar-node-renderer.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── sidebar-provider.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── sidebar-renderer.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   └── tools/                 # 工具栏组件群"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── styles.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── fit-view.tsx       # 适应视图工具"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── minimap-switch.tsx # 缩略图开关"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── minimap.tsx        # 缩略图组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── readonly.tsx       # 只读模式切换"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── run.tsx            # 运行工具"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── save.tsx           # 保存工具"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── switch-vertical.tsx # 垂直布局切换"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       └── zoom-select.tsx    # 缩放选择器"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── context/                   # React Context 状态管理"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── index.ts               # Context 导出入口"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── node-render-context.ts # 节点渲染上下文"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   └── sidebar-context.ts     # 侧边栏上下文"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── form-components/           # 表单组件库"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── index.ts               # 表单组件导出入口"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── feedback.tsx           # 反馈组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── form-content/          # 表单内容组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── styles.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── form-header/           # 表单头部组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── styles.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── title-input.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── utils.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── form-inputs/           # 表单输入组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── styles.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── form-item/             # 表单项组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.css"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── form-outputs/          # 表单输出组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── styles.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   └── properties-edit/       # 属性编辑组件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── property-edit.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       └── styles.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── hooks/                     # 自定义 React Hooks"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── index.ts               # Hooks 导出入口"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── use-editor-props.ts    # 编辑器属性 Hook"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── use-is-sidebar.ts      # 侧边栏状态 Hook"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   └── use-node-render-context.ts # 节点渲染上下文 Hook"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── nodes/                     # 流程节点定义"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── index.ts               # 节点注册表"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── default-form-meta.tsx  # 默认表单元数据"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── agent/                 # Agent 节点类型"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── agent.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── agent-llm.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── agent-memory.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── agent-tools.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── memory.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── tool.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── break-loop/            # 跳出循环节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── form-meta.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── case/                  # Case 分支节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── form-meta.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── case-default/          # 默认 Case 节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── form-meta.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── catch-block/           # 异常捕获块节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── form-meta.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── end/                   # 结束节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── form-meta.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── if/                    # 条件判断节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── if-block/              # 条件块节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── form-meta.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── llm/                   # LLM 节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── loop/                  # 循环节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── form-meta.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── start/                 # 开始节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── form-meta.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── switch/                # Switch 分支节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   └── trycatch/              # Try-Catch 节点"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       └── form-meta.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── plugins/                   # 插件系统"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── index.ts               # 插件导出入口"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── clipboard-plugin/      # 剪贴板插件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── create-clipboard-plugin.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── group-plugin/          # 分组插件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── group-box-header.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── group-node.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── group-note.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── group-tools.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   ├── icons/"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   │   └── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │   └── multilang-textarea-editor/"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │       ├── index.css"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │       ├── index.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   │       └── base-textarea.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   └── variable-panel-plugin/ # 变量面板插件"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── variable-panel-layer.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       ├── variable-panel-plugin.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│       └── components/"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│           ├── full-variable-list.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│           ├── global-variable-editor.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│           └── variable-panel.tsx"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── services/                  # 服务层"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   └── custom-service.ts      # 自定义服务"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"├── shortcuts/                 # 快捷键系统"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── index.ts"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   ├── constants.ts           # 快捷键常量"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│   └── utils.ts               # 快捷键工具函数"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"│"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"└── typings/                   # 类型定义"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"    ├── index.ts               # 类型导出入口"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"    ├── json-schema.ts         # JSON Schema 类型"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{children:"    └── node.ts                # 节点类型定义"})})]})})}),"\n",(0,l.jsxs)(n.h2,{id:"架构设计分析",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#架构设计分析",children:"#"}),"架构设计分析"]}),"\n",(0,l.jsxs)(n.h3,{id:"整体架构模式",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#整体架构模式",children:"#"}),"整体架构模式"]}),"\n",(0,l.jsxs)(n.p,{children:["该项目采用了",(0,l.jsx)(n.strong,{children:"分层架构"}),"和",(0,l.jsx)(n.strong,{children:"模块化设计"}),"相结合的架构模式："]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"表现层 (Presentation Layer)"})}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"组件层：负责 UI 渲染和用户交互"}),"\n",(0,l.jsx)(n.li,{children:"工具层：提供编辑器工具功能"}),"\n"]}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"业务逻辑层 (Business Logic Layer)"})}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"节点系统：定义各种流程节点的行为和属性"}),"\n",(0,l.jsx)(n.li,{children:"插件系统：提供可扩展的功能模块"}),"\n",(0,l.jsx)(n.li,{children:"服务层：处理业务逻辑和数据操作"}),"\n"]}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"数据层 (Data Layer)"})}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Context 状态管理：管理应用全局状态"}),"\n",(0,l.jsx)(n.li,{children:"类型系统：确保数据结构的一致性"}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"核心设计模式",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#核心设计模式",children:"#"}),"核心设计模式"]}),"\n",(0,l.jsxs)(n.h4,{id:"1-提供者模式-provider-pattern",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1-提供者模式-provider-pattern",children:"#"}),"1. 提供者模式 (Provider Pattern)"]}),"\n",(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-typescript",children:[(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// 主编辑器组件使用多层 Provider 嵌套"})}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"FixedLayoutEditorProvider {"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"editorProps}"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  <"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"SidebarProvider"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"    <"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"EditorRenderer "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"/>"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"    <"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"DemoTools "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"/>"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"    <"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"SidebarRenderer "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"/>"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"  </"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"SidebarProvider"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"</"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"FixedLayoutEditorProvider"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})]})})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"应用场景"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"FixedLayoutEditorProvider"}),": 提供编辑器核心功能和状态"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"SidebarProvider"}),": 管理侧边栏的显示状态和选中节点"]}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"2-注册表模式-registry-pattern",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2-注册表模式-registry-pattern",children:"#"}),"2. 注册表模式 (Registry Pattern)"]}),"\n",(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-typescript",children:[(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" const"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" FlowNodeRegistries"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" FlowNodeRegistry"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"[] "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  StartNodeRegistry"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  EndNodeRegistry"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  SwitchNodeRegistry"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  LLMNodeRegistry"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"  // ... 更多节点类型"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"];"})})]})})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"设计优势"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"支持动态节点类型注册"}),"\n",(0,l.jsx)(n.li,{children:"易于扩展新的节点类型"}),"\n",(0,l.jsx)(n.li,{children:"实现了节点类型的解耦"}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"3-插件模式-plugin-pattern",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#3-插件模式-plugin-pattern",children:"#"}),"3. 插件模式 (Plugin Pattern)"]}),"\n",(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-typescript",children:[(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"plugins"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ["})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"  createMinimapPlugin"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"({"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"})"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"  createGroupPlugin"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"({"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"})"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"  createClipboardPlugin"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"()"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"  createVariablePanelPlugin"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"({})"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"]"})})]})})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"插件系统特点"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"缩略图插件"}),": 提供画布缩略图功能"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"分组插件"}),": 支持节点分组管理"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"剪贴板插件"}),": 实现复制粘贴功能"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"变量面板插件"}),": 提供变量管理界面"]}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"4-工厂模式-factory-pattern",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#4-工厂模式-factory-pattern",children:"#"}),"4. 工厂模式 (Factory Pattern)"]}),"\n",(0,l.jsx)(n.p,{children:"在节点创建和配置中广泛使用："}),"\n",(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-typescript",children:[(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"getNodeDefaultRegistry"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"(type) {"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    type"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    meta"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"      defaultExpanded"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    }"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  };"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,l.jsxs)(n.h4,{id:"5-观察者模式-observer-pattern",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#5-观察者模式-observer-pattern",children:"#"}),"5. 观察者模式 (Observer Pattern)"]}),"\n",(0,l.jsx)(n.p,{children:"通过历史记录系统实现："}),"\n",(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-typescript",children:[(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"history"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  enable"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  enableChangeNode"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  onApply"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" debounce"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"((ctx"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" opt) "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"    console"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'auto save: '"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" ctx"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"document"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".toJSON"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"());"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" 100"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:")"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,l.jsxs)(n.h4,{id:"6-策略模式-strategy-pattern",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#6-策略模式-strategy-pattern",children:"#"}),"6. 策略模式 (Strategy Pattern)"]}),"\n",(0,l.jsx)(n.p,{children:"在材料系统中体现："}),"\n",(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-typescript",children:[(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"materials"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  components"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"    ..."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"defaultFixedSemiMaterials"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    ["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"FlowRendererKey"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"ADDER"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"]: NodeAdder"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    ["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"FlowRendererKey"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"BRANCH_ADDER"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"]: BranchAdder"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"    // 可根据 key 替换不同的渲染策略"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,l.jsxs)(n.h3,{id:"状态管理架构",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#状态管理架构",children:"#"}),"状态管理架构"]}),"\n",(0,l.jsxs)(n.h4,{id:"context-系统设计",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#context-系统设计",children:"#"}),"Context 系统设计"]}),"\n",(0,l.jsx)(n.p,{children:"项目采用了多个专用的 Context 来管理不同领域的状态："}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"SidebarContext"}),": 管理侧边栏状态"]}),"\n"]}),"\n",(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-typescript",children:[(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" const"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" SidebarContext"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" React"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".createContext"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"<{"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  visible"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" boolean"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  nodeId"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"  setNodeId"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" (node"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" undefined"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" void"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"}>({ visible"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" false"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" setNodeId"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {} });"})]})]})})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"NodeRenderContext"}),": 管理节点渲染相关状态"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"IsSidebarContext"}),": 简单的布尔状态管理"]}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"自定义-hooks-设计",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#自定义-hooks-设计",children:"#"}),"自定义 Hooks 设计"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"useEditorProps"}),": 集中管理编辑器的所有配置属性"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"useIsSidebar"}),": 判断当前是否在侧边栏环境中"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"useNodeRenderContext"}),": 获取节点渲染上下文"]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"组件架构设计",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#组件架构设计",children:"#"}),"组件架构设计"]}),"\n",(0,l.jsxs)(n.h4,{id:"组件分层结构",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#组件分层结构",children:"#"}),"组件分层结构"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"基础组件层"})}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"BaseNode"}),": 所有节点的基础渲染组件"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DragNode"}),": 拖拽状态下的节点组件"]}),"\n"]}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"功能组件层"})}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["添加器组件: ",(0,l.jsx)(n.code,{children:"NodeAdder"}),", ",(0,l.jsx)(n.code,{children:"BranchAdder"}),", ",(0,l.jsx)(n.code,{children:"AgentAdder"})]}),"\n",(0,l.jsx)(n.li,{children:"工具组件: 缩放、保存、运行等功能组件"}),"\n"]}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"容器组件层"})}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Sidebar"}),": 侧边栏容器及其子组件"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Tools"}),": 工具栏容器"]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"数据流架构",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#数据流架构",children:"#"}),"数据流架构"]}),"\n",(0,l.jsxs)(n.h4,{id:"初始数据结构",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#初始数据结构",children:"#"}),"初始数据结构"]}),"\n",(0,l.jsx)(n.p,{children:"项目定义了完整的初始流程数据，包含多种节点类型的示例："}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Start 节点"}),": 流程起始点，定义输出参数"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Agent 节点"}),": 包含 LLM、Memory、Tools 子组件"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"LLM 节点"}),": 大语言模型处理节点"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Switch 节点"}),": 条件分支节点"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Loop 节点"}),": 循环处理节点"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"TryCatch 节点"}),": 异常处理节点"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"End 节点"}),": 流程结束点"]}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"数据转换机制",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#数据转换机制",children:"#"}),"数据转换机制"]}),"\n",(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-typescript",children:[(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"fromNodeJSON"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"(node"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" json) {"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" json; "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// 数据导入时的转换逻辑"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"}"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"toNodeJSON"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"(node"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" json) {"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" json; "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// 数据导出时的转换逻辑"})]}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})})]})}function c(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...(0,r.a)(),...s.components};return n?(0,l.jsx)(n,{...s,children:(0,l.jsx)(a,{...s})}):a(s)}c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["zh%2Fexamples%2Ffixed-layout%2Ffixed-feature-overview.mdx"]={toc:[{id:"安装",text:"安装",depth:2},{id:"源码",text:"源码",depth:2},{id:"项目概览",text:"项目概览",depth:2},{id:"核心技术栈",text:"核心技术栈",depth:3},{id:"核心依赖包",text:"核心依赖包",depth:3},{id:"代码说明",text:"代码说明",depth:2},{id:"架构设计分析",text:"架构设计分析",depth:2},{id:"整体架构模式",text:"整体架构模式",depth:3},{id:"核心设计模式",text:"核心设计模式",depth:3},{id:"1-提供者模式-provider-pattern",text:"1. 提供者模式 (Provider Pattern)",depth:4},{id:"2-注册表模式-registry-pattern",text:"2. 注册表模式 (Registry Pattern)",depth:4},{id:"3-插件模式-plugin-pattern",text:"3. 插件模式 (Plugin Pattern)",depth:4},{id:"4-工厂模式-factory-pattern",text:"4. 工厂模式 (Factory Pattern)",depth:4},{id:"5-观察者模式-observer-pattern",text:"5. 观察者模式 (Observer Pattern)",depth:4},{id:"6-策略模式-strategy-pattern",text:"6. 策略模式 (Strategy Pattern)",depth:4},{id:"状态管理架构",text:"状态管理架构",depth:3},{id:"context-系统设计",text:"Context 系统设计",depth:4},{id:"自定义-hooks-设计",text:"自定义 Hooks 设计",depth:4},{id:"组件架构设计",text:"组件架构设计",depth:3},{id:"组件分层结构",text:"组件分层结构",depth:4},{id:"数据流架构",text:"数据流架构",depth:3},{id:"初始数据结构",text:"初始数据结构",depth:4},{id:"数据转换机制",text:"数据转换机制",depth:4}],title:"最佳实践",headingTitle:"最佳实践",frontmatter:{outline:!1}}}}]);