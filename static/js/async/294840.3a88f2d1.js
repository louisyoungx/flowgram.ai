"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["294840"],{534959:function(e,r,s){s.r(r),s.d(r,{default:()=>d});var n=s(110239),i=s(437562),l=s(441332),a=s(944529),c=s(425810);function o(e){let r={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.h1,{id:"batchvariableselector",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#batchvariableselector",children:"#"}),"BatchVariableSelector"]}),"\n",(0,n.jsxs)(r.p,{children:["BatchVariableSelector 是一个用于选择数组类型变量的组件，它是 ",(0,n.jsx)(r.a,{href:"/materials/components/variable-selector.html",children:"VariableSelector"})," 的封装版本。"]}),"\n",(0,n.jsxs)(r.p,{children:["该组件自动过滤变量树，只显示数组类型的变量，并自动设定",(0,n.jsx)(r.a,{href:"/guide/variable/concept.html#%E8%8A%82%E7%82%B9%E7%A7%81%E6%9C%89%E4%BD%9C%E7%94%A8%E5%9F%9F",children:"私有作用域"}),"，常用于批处理场景（如 Loop 节点的循环数据源选择）。"]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"核心特性："})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\uD83D\uDD0D ",(0,n.jsx)(r.strong,{children:"自动过滤"}),"：只显示数组类型（",(0,n.jsx)(r.code,{children:"type: 'array'"}),"）的变量。"]}),"\n",(0,n.jsxs)(r.li,{children:["\uD83D\uDD10 ",(0,n.jsx)(r.strong,{children:"私有作用域"}),"：通过 ",(0,n.jsx)(r.a,{href:"/guide/variable/concept.html#%E8%8A%82%E7%82%B9%E7%A7%81%E6%9C%89%E4%BD%9C%E7%94%A8%E5%9F%9F",children:(0,n.jsx)(r.code,{children:"PrivateScopeProvider"})})," 提供独立的变量作用域。"]}),"\n",(0,n.jsxs)(r.li,{children:["\uD83C\uDFAF ",(0,n.jsx)(r.strong,{children:"专用场景"}),"：专为批处理、循环等需要数组数据源的场景设计。"]}),"\n"]}),"\n",(0,n.jsxs)(r.h2,{id:"案例演示",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#案例演示",children:"#"}),"案例演示"]}),"\n",(0,n.jsxs)(r.h3,{id:"基本使用",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#基本使用",children:"#"}),"基本使用"]}),"\n",(0,n.jsx)(c.w,{}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,n.jsxs)(r.code,{className:"language-tsx",children:[(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" { BatchVariableSelector"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" VariableSelector } "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(r.span,{className:"line"}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"      {"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-comment)"},children:"/* BatchVariableSelector 只显示数组类型变量 */"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"}"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"string"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"[] "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" undefined"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"batch_variable"'}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"        {({ field }) "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"          <"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"BatchVariableSelector"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"            value"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:".value}"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"            onChange"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"{(value) "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"(value)}"})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"          />"})}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"        )}"})}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(r.span,{className:"line"}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"      {"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-comment)"},children:"/* VariableSelector 显示所有类型变量 */"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"}"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"string"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"[] "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" undefined"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"normal_variable"'}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"        {({ field }) "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"          <"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"VariableSelector"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"            value"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:".value}"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"            onChange"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"{(value) "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"(value)}"})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"          />"})}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"        )}"})}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  )"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsxs)(r.h2,{id:"api-参考",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#api-参考",children:"#"}),"API 参考"]}),"\n",(0,n.jsxs)(r.h3,{id:"batchvariableselector-props",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#batchvariableselector-props",children:"#"}),"BatchVariableSelector Props"]}),"\n",(0,n.jsxs)(r.p,{children:["BatchVariableSelector 继承了 ",(0,n.jsx)(r.a,{href:"/materials/components/variable-selector.html",children:"VariableSelector"})," 的所有属性，但 ",(0,n.jsx)(r.code,{children:"includeSchema"})," 属性已被固定为数组类型过滤，无法自定义。"]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"属性名"}),(0,n.jsx)(r.th,{children:"类型"}),(0,n.jsx)(r.th,{children:"默认值"}),(0,n.jsx)(r.th,{children:"描述"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"value"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string[]"})}),(0,n.jsx)(r.td,{children:"-"}),(0,n.jsx)(r.td,{children:"选中的变量路径数组"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"onChange"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"(value?: string[]) => void"})}),(0,n.jsx)(r.td,{children:"-"}),(0,n.jsx)(r.td,{children:"变量选择变化时的回调函数"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VariableSelectorConfig"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"{}"})}),(0,n.jsx)(r.td,{children:"配置对象（同 VariableSelector）"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"readonly"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"false"})}),(0,n.jsx)(r.td,{children:"是否为只读模式"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"hasError"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"boolean"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"false"})}),(0,n.jsx)(r.td,{children:"是否显示错误状态"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"style"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"React.CSSProperties"})}),(0,n.jsx)(r.td,{children:"-"}),(0,n.jsx)(r.td,{children:"自定义样式"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"triggerRender"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"(props: TriggerRenderProps) => React.ReactNode"})}),(0,n.jsx)(r.td,{children:"-"}),(0,n.jsx)(r.td,{children:"自定义触发器渲染"})]})]})]}),"\n",(0,n.jsxs)(r.div,{className:"rspress-directive warning",children:[(0,n.jsx)(r.div,{className:"rspress-directive-title",children:"WARNING"}),(0,n.jsx)(r.div,{className:"rspress-directive-content",children:(0,n.jsxs)(r.p,{children:["\n",(0,n.jsx)(r.code,{children:"includeSchema"})," 和 ",(0,n.jsx)(r.code,{children:"excludeSchema"})," 属性在 BatchVariableSelector 中不可用，因为组件内部已固定使用 ",(0,n.jsx)(r.code,{children:"{ type: 'array', extra: { weak: true } }"})," 作为过滤条件。"]})})]}),"\n",(0,n.jsxs)(r.h3,{id:"variableselectorconfig",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#variableselectorconfig",children:"#"}),"VariableSelectorConfig"]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"属性名"}),(0,n.jsx)(r.th,{children:"类型"}),(0,n.jsx)(r.th,{children:"默认值"}),(0,n.jsx)(r.th,{children:"描述"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"placeholder"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'选择变量'"})}),(0,n.jsx)(r.td,{children:"占位符文本"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"notFoundContent"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"string"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"'未定义'"})}),(0,n.jsx)(r.td,{children:"变量未找到时的显示内容"})]})]})]}),"\n",(0,n.jsxs)(r.h2,{id:"源码导读",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#源码导读",children:"#"}),"源码导读"]}),"\n",(0,n.jsx)(a.ZB,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/materials/form-materials/src/components/batch-variable-selector"}),"\n",(0,n.jsx)(r.p,{children:"使用 CLI 命令可以复制源代码到本地："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsx)(r.code,{className:"language-bash",children:(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string)"},children:" components/batch-variable-selector"})]})})})}),"\n",(0,n.jsxs)(r.h3,{id:"目录结构讲解",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#目录结构讲解",children:"#"}),"目录结构讲解"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(r.code,{className:"language-txt",children:[(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{children:"batch-variable-selector/"})}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{children:"└── index.tsx           # 主组件实现，包含 BatchVariableSelector 核心逻辑"})})]})})}),"\n",(0,n.jsxs)(r.h3,{id:"核心实现说明",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#核心实现说明",children:"#"}),"核心实现说明"]}),"\n",(0,n.jsxs)(r.h4,{id:"私有作用域机制",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#私有作用域机制",children:"#"}),"私有作用域机制"]}),"\n",(0,n.jsxs)(r.p,{children:["BatchVariableSelector 通过 ",(0,n.jsx)(r.code,{children:"PrivateScopeProvider"})," 为子组件提供独立的变量作用域："]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(r.code,{className:"language-tsx",children:[(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"PrivateScopeProvider"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  <"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"VariableSelector"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" {"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"props} "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"includeSchema"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"{batchVariableSchema} />"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"</"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"PrivateScopeProvider"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:">"})]})]})})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"PrivateScopeProvider"})," 会创建一个",(0,n.jsx)(r.a,{href:"/guide/variable/concept.html#%E8%8A%82%E7%82%B9%E7%A7%81%E6%9C%89%E4%BD%9C%E7%94%A8%E5%9F%9F",children:"节点私有作用域"}),"，这在批处理场景中非常重要："]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"循环变量隔离"}),"：在 Loop 节点中，每次迭代的循环变量（如 ",(0,n.jsx)(r.code,{children:"item"}),"、",(0,n.jsx)(r.code,{children:"index"}),"）都存储在私有作用域中，避免污染外部作用域"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"避免命名冲突"}),"：批处理节点内部定义的临时变量不会与外部变量产生命名冲突"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"支持嵌套结构"}),"：复杂的批处理逻辑可以在私有作用域中定义多层变量结构"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"数据安全"}),"：私有作用域中的变量只能被当前节点及其子节点访问，确保数据安全性"]}),"\n"]}),"\n",(0,n.jsxs)(r.div,{className:"rspress-directive info",children:[(0,n.jsx)(r.div,{className:"rspress-directive-title",children:"INFO"}),(0,n.jsx)(r.div,{className:"rspress-directive-content",children:(0,n.jsxs)(r.p,{children:["更多关于作用域的详细信息，请参考",(0,n.jsx)(r.a,{href:"/guide/variable/concept.html#%E7%94%BB%E5%B8%83%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F",children:"变量概念文档"}),"。"]})})]}),"\n",(0,n.jsxs)(r.h4,{id:"数组类型过滤",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#数组类型过滤",children:"#"}),"数组类型过滤"]}),"\n",(0,n.jsx)(r.p,{children:"组件内部固定使用以下 schema 进行过滤："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(r.code,{className:"language-typescript",children:[(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" batchVariableSchema"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:" IJsonSchema"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  type"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'array'"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  extra"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" { weak"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" }"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"};"})})]})})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"type: 'array'"}),"：只显示数组类型的变量"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"extra: { weak: true }"}),"：启用弱类型匹配，允许匹配可能兼容的类型"]}),"\n"]}),"\n",(0,n.jsxs)(r.h3,{id:"整体流程",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#整体流程",children:"#"}),"整体流程"]}),"\n",(0,n.jsx)(l.Z,{code:"sequenceDiagram\n    participant User\n    participant BatchVariableSelector\n    participant PrivateScopeProvider\n    participant VariableSelector\n    participant useVariableTree\n    participant VariableTree\n\n    User->>BatchVariableSelector: 选择数组变量\n    BatchVariableSelector->>PrivateScopeProvider: 设定私有作用域上下文\n    PrivateScopeProvider->>VariableSelector: 传递包含数组过滤的 schema\n    VariableSelector->>useVariableTree: 获取可用变量列表\n    useVariableTree->>VariableTree: 查询变量树数据\n    VariableTree--\x3e>useVariableTree: 返回所有变量\n    useVariableTree--\x3e>VariableSelector: 过滤出数组类型变量\n    VariableSelector--\x3e>BatchVariableSelector: 渲染数组变量选择器\n    BatchVariableSelector--\x3e>User: 显示可选的数组变量",config:{}}),"\n",(0,n.jsxs)(r.h3,{id:"使用到的-flowgram-api",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#使用到的-flowgram-api",children:"#"}),"使用到的 FlowGram API"]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/plugins/node-variable-plugin",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(r.strong,{children:"@flowgram.ai/editor"})})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"https://flowgram.ai/auto-docs/node-variable-plugin/functions/PrivateScopeProvider",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(r.code,{children:"PrivateScopeProvider"})}),": 提供私有变量作用域的 Context Provider"]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/variable/json-schema",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(r.strong,{children:"@flowgram.ai/json-schema"})})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"https://flowgram.ai/auto-docs/json-schema/interfaces/IJsonSchema",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(r.code,{children:"IJsonSchema"})}),": JSON Schema 类型定义，用于变量类型过滤"]}),"\n"]}),"\n",(0,n.jsxs)(r.h3,{id:"依赖的其他物料",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#依赖的其他物料",children:"#"}),"依赖的其他物料"]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/materials/components/variable-selector.html",children:(0,n.jsx)(r.strong,{children:"VariableSelector"})})," 变量选择器基础组件"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"VariableSelector"}),": 核心变量选择组件，BatchVariableSelector 是其封装版本"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"VariableSelectorProps"}),": 属性类型定义"]}),"\n"]}),"\n",(0,n.jsxs)(r.h2,{id:"常见问题",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#常见问题",children:"#"}),"常见问题"]}),"\n",(0,n.jsxs)(r.h3,{id:"为什么需要-privatescopeprovider",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#为什么需要-privatescopeprovider",children:"#"}),"为什么需要 PrivateScopeProvider？"]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"PrivateScopeProvider"})," 提供了变量作用域隔离机制，在以下场景中非常重要："]}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"循环节点"}),"：在 Loop 节点中，每次迭代都需要一个独立的作用域来存储循环变量（如 ",(0,n.jsx)(r.code,{children:"item"}),", ",(0,n.jsx)(r.code,{children:"index"}),"）。参考",(0,n.jsx)(r.a,{href:"/guide/variable/concept.html#%E8%8A%82%E7%82%B9%E7%A7%81%E6%9C%89%E4%BD%9C%E7%94%A8%E5%9F%9F",children:"变量概念 - 节点私有作用域"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"嵌套结构"}),"：当节点内部有嵌套的变量声明时，避免与外部变量产生命名冲突"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"组件复用"}),"：相同的组件在不同上下文中使用时，确保变量不会互相干扰"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"数据安全"}),"：私有作用域中的变量只能被当前节点及其子节点访问，确保数据安全性"]}),"\n"]}),"\n",(0,n.jsxs)(r.p,{children:["更多关于作用域链和变量访问权限的信息，请参考",(0,n.jsx)(r.a,{href:"/guide/variable/concept.html#%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE",children:"变量概念 - 作用域链"}),"。"]}),"\n",(0,n.jsxs)(r.h3,{id:"batchvariableselector-与-variableselector-的区别",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#batchvariableselector-与-variableselector-的区别",children:"#"}),"BatchVariableSelector 与 VariableSelector 的区别？"]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"特性"}),(0,n.jsx)(r.th,{children:"BatchVariableSelector"}),(0,n.jsx)(r.th,{children:"VariableSelector"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"变量类型过滤"}),(0,n.jsx)(r.td,{children:"固定为数组类型"}),(0,n.jsx)(r.td,{children:"可自定义"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"作用域"}),(0,n.jsx)(r.td,{children:"自带私有作用域"}),(0,n.jsx)(r.td,{children:"使用当前作用域"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"使用场景"}),(0,n.jsx)(r.td,{children:"批处理、循环等"}),(0,n.jsx)(r.td,{children:"通用变量选择"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Schema 配置"}),(0,n.jsx)(r.td,{children:"不可配置"}),(0,n.jsx)(r.td,{children:"完全可配置"})]})]})]}),"\n",(0,n.jsxs)(r.h3,{id:"如何获取选中变量的实际值",children:[(0,n.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#如何获取选中变量的实际值",children:"#"}),"如何获取选中变量的实际值？"]}),"\n",(0,n.jsxs)(r.p,{children:["BatchVariableSelector 返回的是变量路径（",(0,n.jsx)(r.code,{children:"string[]"}),"），如需获取实际值，需要在表单的 effect 中配合 ",(0,n.jsx)(r.a,{href:"/materials/effects/provide-batch-input.html",children:(0,n.jsx)(r.code,{children:"provideBatchInputEffect"})})," 使用："]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(r.code,{className:"language-typescript",children:[(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:" const"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  render"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" YourFormRender"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  effect"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"    yourFieldName"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" provideBatchInputEffect"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"};"})})]})})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"provideBatchInputEffect"})," 会自动解析变量引用并注入到表单数据中。"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}={...(0,i.a)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["zh%2Fmaterials%2Fcomponents%2Fbatch-variable-selector.mdx"]={toc:[{id:"案例演示",text:"案例演示",depth:2},{id:"基本使用",text:"基本使用",depth:3},{id:"api-参考",text:"API 参考",depth:2},{id:"batchvariableselector-props",text:"BatchVariableSelector Props",depth:3},{id:"variableselectorconfig",text:"VariableSelectorConfig",depth:3},{id:"源码导读",text:"源码导读",depth:2},{id:"目录结构讲解",text:"目录结构讲解",depth:3},{id:"核心实现说明",text:"核心实现说明",depth:3},{id:"私有作用域机制",text:"私有作用域机制",depth:4},{id:"数组类型过滤",text:"数组类型过滤",depth:4},{id:"整体流程",text:"整体流程",depth:3},{id:"使用到的-flowgram-api",text:"使用到的 FlowGram API",depth:3},{id:"依赖的其他物料",text:"依赖的其他物料",depth:3},{id:"常见问题",text:"常见问题",depth:2},{id:"为什么需要-privatescopeprovider",text:"为什么需要 PrivateScopeProvider？",depth:3},{id:"batchvariableselector-与-variableselector-的区别",text:"BatchVariableSelector 与 VariableSelector 的区别？",depth:3},{id:"如何获取选中变量的实际值",text:"如何获取选中变量的实际值？",depth:3}],title:"BatchVariableSelector",headingTitle:"BatchVariableSelector",frontmatter:{}}},425810:function(e,r,s){s.d(r,{w:()=>d});var n=s(110239),i=s(908600),l=s(640898),a=s(132288);let c=i.lazy(()=>Promise.all([s.e("386212"),s.e("133914"),s.e("227692"),s.e("838147"),s.e("933451"),s.e("942362"),s.e("917828"),s.e("428647"),s.e("135691"),s.e("46854"),s.e("232558"),s.e("673693"),s.e("263869")]).then(s.bind(s,261548)).then(e=>({default:e.BatchVariableSelector}))),o=i.lazy(()=>Promise.all([s.e("386212"),s.e("133914"),s.e("227692"),s.e("838147"),s.e("933451"),s.e("942362"),s.e("917828"),s.e("428647"),s.e("135691"),s.e("46854"),s.e("232558"),s.e("673693"),s.e("263869")]).then(s.bind(s,261548)).then(e=>({default:e.VariableSelector}))),d=()=>(0,n.jsx)(a.y,{filterEndNode:!0,formMeta:{render:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.p,{}),(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)("div",{style:{marginBottom:8,fontSize:12,color:"#666"},children:"BatchVariableSelector (Array variables only):"}),(0,n.jsx)(l.gNt,{name:"batch_variable",children:e=>{let{field:r}=e;return(0,n.jsx)(c,{value:r.value,onChange:e=>r.onChange(e)})}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{marginBottom:8,fontSize:12,color:"#666"},children:"VariableSelector (All variables):"}),(0,n.jsx)(l.gNt,{name:"normal_variable",children:e=>{let{field:r}=e;return(0,n.jsx)(o,{value:r.value,onChange:e=>r.onChange(e)})}})]})]})}})},132288:function(e,r,s){s.d(r,{p:()=>a,y:()=>c});var n=s(110239),i=s(908600);let l=i.lazy(()=>Promise.all([s.e("386212"),s.e("133914"),s.e("227692"),s.e("933451"),s.e("917828"),s.e("428647"),s.e("135691"),s.e("46854"),s.e("690536")]).then(s.bind(s,654296)).then(e=>({default:e.FreeFormMetaStoryBuilder}))),a=i.lazy(()=>Promise.all([s.e("386212"),s.e("133914"),s.e("227692"),s.e("933451"),s.e("917828"),s.e("428647"),s.e("135691"),s.e("46854"),s.e("690536")]).then(s.bind(s,654296)).then(e=>({default:e.FormHeader}))),c=e=>(0,n.jsx)("div",{style:{position:"relative",height:e.height||400},children:(0,n.jsx)(l,{...e})})}}]);