"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["359424"],{206303:function(e,s,r){r.r(s),r.d(s,{default:()=>t});var n=r(110239),i=r(437562),a=r(441332),o=r(321896),l=r(901737);function c(e){let s={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"providejsonschemaoutputs",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#providejsonschemaoutputs",children:"#"}),"provideJsonSchemaOutputs"]}),"\n",(0,n.jsx)(s.p,{children:"provideJsonSchemaOutputs 是一个表单副作用，用于将 JSON Schema 定义转换为 FlowGram 变量引擎中的输出变量。"}),"\n",(0,n.jsx)(s.p,{children:"它能够自动将表单中定义的 JSON Schema 结构解析为变量声明，使工作流中的其他节点可以引用这些输出。"}),"\n",(0,n.jsxs)(s.h2,{id:"案例演示",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#案例演示",children:"#"}),"案例演示"]}),"\n",(0,n.jsxs)(s.h3,{id:"基本使用",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#基本使用",children:"#"}),"基本使用"]}),"\n",(0,n.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,n.jsx)(s.div,{className:"rspress-directive-title",children:"TIP"}),(0,n.jsx)(s.div,{className:"rspress-directive-content",children:(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"provideJsonSchemaOutputs"})," 通常结合 ",(0,n.jsx)(s.a,{href:"/materials/effects/sync-variable-title.html",children:(0,n.jsx)(s.code,{children:"syncVariableTitle"})})," 使用，保证变量能",(0,n.jsx)(s.strong,{children:"实时同步节点的标题"}),"。"]})})]}),"\n",(0,n.jsx)(l.w,{}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,n.jsxs)(s.code,{className:"language-tsx",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { JsonSchemaEditor"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" provideJsonSchemaOutputs"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" syncVariableTitle } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { Field } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/free-layout-editor'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"IJsonSchema"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" undefined"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        name"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"outputs"'})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        defaultValue"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          type"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'object'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          properties"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            name"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { type"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" }"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            age"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { type"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'number'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" }"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          }"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      >"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        {({ field }) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"JsonSchemaEditor"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".value} "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{(value) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(value)} />"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        )}"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  effect"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // 同步标题到变量"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    title"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" syncVariableTitle"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // 将 JSON Schema 转换为输出变量"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    outputs"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" provideJsonSchemaOutputs"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsxs)(s.h2,{id:"api-参考",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#api-参考",children:"#"}),"API 参考"]}),"\n",(0,n.jsxs)(s.h3,{id:"providejsonschemaoutputs-1",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#providejsonschemaoutputs-1",children:"#"}),"provideJsonSchemaOutputs"]}),"\n",(0,n.jsx)(s.p,{children:"提供一个表单副作用，将 JSON Schema 转换为工作流输出变量。"}),"\n",(0,n.jsxs)(s.h4,{id:"参数",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#参数",children:"#"}),"参数"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"无直接参数，作为表单副作用直接使用在 formMeta.effect 中"}),"\n"]}),"\n",(0,n.jsxs)(s.h4,{id:"返回值",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#返回值",children:"#"}),"返回值"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"EffectOptions[]"}),": 表单副作用选项数组，用于 formMeta.effect 配置"]}),"\n"]}),"\n",(0,n.jsxs)(s.h4,{id:"工作原理",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#工作原理",children:"#"}),"工作原理"]}),"\n",(0,n.jsx)(s.p,{children:"该表单副作用会："}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"获取表单中定义的 JSON Schema 值"}),"\n",(0,n.jsx)(s.li,{children:"将 Schema 转换为 FlowGram 的 AST 类型"}),"\n",(0,n.jsx)(s.li,{children:"创建变量声明，键名为当前节点 ID"}),"\n",(0,n.jsx)(s.li,{children:"设置变量的元数据（标题、图标等）"}),"\n"]}),"\n",(0,n.jsxs)(s.h2,{id:"源码导读",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#源码导读",children:"#"}),"源码导读"]}),"\n",(0,n.jsx)(o.ZB,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/materials/form-materials/src/effects/provide-json-schema-outputs/index.ts"}),"\n",(0,n.jsx)(s.p,{children:"使用 CLI 命令可以复制源代码到本地："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsx)(s.code,{className:"language-bash",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" effects/provide-json-schema-outputs"})]})})})}),"\n",(0,n.jsxs)(s.h3,{id:"目录结构讲解",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#目录结构讲解",children:"#"}),"目录结构讲解"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-txt",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"provide-json-schema-outputs/"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"└── index.ts           # 主实现文件，导出 provideJsonSchemaOutputs 表单副作用"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"核心实现说明",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#核心实现说明",children:"#"}),"核心实现说明"]}),"\n",(0,n.jsxs)(s.h4,{id:"变量生成逻辑",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#变量生成逻辑",children:"#"}),"变量生成逻辑"]}),"\n",(0,n.jsxs)(s.p,{children:["provideJsonSchemaOutputs 使用 ",(0,n.jsx)(s.a,{href:"/guide/variable/variable-output.html",children:(0,n.jsx)(s.code,{children:"createEffectFromVariableProvider"})})," 工厂函数创建变量提供器。副作用内使用 ",(0,n.jsx)(s.code,{children:"JsonSchemaUtils.schemaToAST"})," 函数将表单中填写的 JSON Schema 转换为 AST。"]}),"\n",(0,n.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,n.jsx)(s.div,{className:"rspress-directive-title",children:"TIP"}),(0,n.jsx)(s.div,{className:"rspress-directive-content",children:(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"JsonSchemaUtils.schemaToAST"})," 递归解析 json schema 生成 AST，源码见 ",(0,n.jsx)(s.a,{href:"https://github.com/bytedance/flowgram.ai/blob/main/packages/variable-engine/json-schema/src/json-schema/utils.ts",rel:"noopener noreferrer",target:"_blank",children:"utils.ts"})]})})]}),"\n",(0,n.jsx)(s.p,{children:"变量生成流程时序图："}),"\n",(0,n.jsx)(a.Z,{code:"sequenceDiagram\n    participant Form as 表单系统\n    participant Parser as parse函数\n    participant AST as ASTFactory\n    participant Node as 当前节点\n    participant SchemaUtils as JsonSchemaUtils\n\n    Form->>Parser: 提供JSON Schema值\n    Parser->>Node: 获取节点信息\n    Node--\x3e>Parser: 返回节点ID和注册表\n    Parser->>SchemaUtils: 调用schemaToAST转换类型\n    SchemaUtils--\x3e>Parser: 返回转换后的AST类型\n    Parser->>AST: 创建变量声明\n    Parser->>Parser: 设置变量键名为节点ID\n    Parser->>Node: 获取表单标题\n    alt 表单有标题\n        Node--\x3e>Parser: 返回表单标题\n    else 表单无标题\n        Node--\x3e>Parser: 使用节点ID作为标题\n    end\n    Parser->>Node: 获取节点图标\n    Node--\x3e>Parser: 返回节点图标\n    AST--\x3e>Parser: 返回创建的变量声明\n    Parser--\x3e>Form: 返回变量声明数组",config:{}}),"\n",(0,n.jsxs)(s.h3,{id:"依赖梳理",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#依赖梳理",children:"#"}),"依赖梳理"]}),"\n",(0,n.jsxs)(s.h4,{id:"flowgram-api",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgram-api",children:"#"}),"flowgram API"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/variable/json-schema",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.strong,{children:"@flowgram.ai/json-schema"})})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/json-schema/modules/JsonSchemaUtils",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.code,{children:"JsonSchemaUtils"})}),": JSON Schema 工具类，用于将 Schema 转换为 AST"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/json-schema/interfaces/IJsonSchema",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.code,{children:"IJsonSchema"})}),": JSON Schema 接口定义"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/client/editor",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.strong,{children:"@flowgram.ai/editor"})})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/editor/types/EffectOptions",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.code,{children:"EffectOptions"})}),": 表单副作用选项类型"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/document/interfaces/FlowNodeRegistry-1",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.code,{children:"FlowNodeRegistry"})}),": 节点注册类型定义"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"/guide/variable/variable-output.html",children:(0,n.jsx)(s.code,{children:"createEffectFromVariableProvider"})}),": 从变量提供器创建表单副作用的工厂函数"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/client/editor",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.strong,{children:"@flowgram.ai/variable-core"})})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/editor/modules/ASTFactory",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.code,{children:"ASTFactory"})}),": AST 创建工厂，用于生成变量声明"]}),"\n"]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["zh%2Fmaterials%2Feffects%2Fprovide-json-schema-outputs.mdx"]={toc:[{id:"案例演示",text:"案例演示",depth:2},{id:"基本使用",text:"基本使用",depth:3},{id:"api-参考",text:"API 参考",depth:2},{id:"providejsonschemaoutputs",text:"provideJsonSchemaOutputs",depth:3},{id:"参数",text:"参数",depth:4},{id:"返回值",text:"返回值",depth:4},{id:"工作原理",text:"工作原理",depth:4},{id:"源码导读",text:"源码导读",depth:2},{id:"目录结构讲解",text:"目录结构讲解",depth:3},{id:"核心实现说明",text:"核心实现说明",depth:3},{id:"变量生成逻辑",text:"变量生成逻辑",depth:4},{id:"依赖梳理",text:"依赖梳理",depth:3},{id:"flowgram-api",text:"flowgram API",depth:4}],title:"provideJsonSchemaOutputs",headingTitle:"provideJsonSchemaOutputs",frontmatter:{}}},901737:function(e,s,r){r.d(s,{w:()=>h});var n=r(110239),i=r(908600),a=r(640898),o=r(236831),l=r(125812),c=r(132288);let t=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914"),r.e("227692"),r.e("838147"),r.e("135674"),r.e("942362"),r.e("254129"),r.e("260790"),r.e("46854"),r.e("795751"),r.e("84257")]).then(r.bind(r,929024)).then(e=>({default:e.JsonSchemaEditor}))),h=()=>(0,n.jsx)(c.y,{filterStartNode:!0,transformInitialNode:{end_0:e=>(e.data.inputsValues={success:{type:"constant",content:!0,schema:{type:"boolean"}},message:{type:"ref",content:["custom_0","name"]}},e)},formMeta:{render:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.p,{}),(0,n.jsx)(a.gNt,{name:"outputs",defaultValue:{type:"object",properties:{name:{type:"string"},age:{type:"number"}}},children:e=>{let{field:s}=e;return(0,n.jsx)(t,{value:s.value,onChange:e=>s.onChange(e)})}})]}),effect:{title:o.H,outputs:l.X}}})},132288:function(e,s,r){r.d(s,{p:()=>o,y:()=>l});var n=r(110239),i=r(908600);let a=i.lazy(()=>Promise.all([r.e("386212"),r.e("717802"),r.e("234079"),r.e("633566"),r.e("688975"),r.e("133914"),r.e("227692"),r.e("135674"),r.e("254129"),r.e("475509"),r.e("541460"),r.e("428647"),r.e("260790"),r.e("46854"),r.e("787220")]).then(r.bind(r,654296)).then(e=>({default:e.FreeFormMetaStoryBuilder}))),o=i.lazy(()=>Promise.all([r.e("386212"),r.e("717802"),r.e("234079"),r.e("633566"),r.e("688975"),r.e("133914"),r.e("227692"),r.e("135674"),r.e("254129"),r.e("475509"),r.e("541460"),r.e("428647"),r.e("260790"),r.e("46854"),r.e("787220")]).then(r.bind(r,654296)).then(e=>({default:e.FormHeader}))),l=e=>(0,n.jsx)("div",{style:{position:"relative",height:e.height||400},children:(0,n.jsx)(a,{...e})})},125812:function(e,s,r){r.d(s,{X:()=>a});var n=r(937643),i=r(950454);let a=(0,i.W2M)({parse:(e,s)=>{var r,a;return[i.qRT.createVariableDeclaration({key:`${s.node.id}`,meta:{title:(null==(r=s.node.form)?void 0:r.getValueIn("title"))||s.node.id,icon:null==(a=s.node.getNodeRegistry().info)?void 0:a.icon},type:n.Kz.schemaToAST(e)})]}})},236831:function(e,s,r){r.d(s,{H:()=>i});var n=r(950454);let i=[{event:n.zEJ.onValueChange,effect:e=>{let{value:s,context:r}=e;r.node.getData(n._J4).allScopes.forEach(e=>{e.output.variables.forEach(e=>{var n;e.updateMeta({...e.meta||{},title:s||r.node.id,icon:null==(n=r.node.getNodeRegistry().info)?void 0:n.icon})})})}}]}}]);