"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["680923"],{272892:function(e,t,n){n.d(t,{Z:()=>i});var o=n(908600);let i=(0,n(120410).A)(function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm7-11.12a1.5 1.5 0 0 1-1.47 1.52l-4 .07.07 4a1.5 1.5 0 0 1-3 .06l-.07-4-4 .07a1.5 1.5 0 0 1-.06-3l4-.07-.07-4a1.5 1.5 0 1 1 3-.06l.07 4 4-.07A1.5 1.5 0 0 1 19 11.88Z",fill:"currentColor"}))},"plus_circle")},916530:function(e,t,n){n.d(t,{f3M:()=>r.f3M,Dcz:()=>r.Dcz,qRT:()=>r.qRT,QUv:()=>r.QUv,fin:()=>r.fin,xFV:()=>r.xFV,Vro:()=>eJ,R6T:()=>r.R6T,kDE:()=>r.kDE,GAy:()=>r.GAy,pQ4:()=>r.pQ4,EU3:()=>r.EU3,eGM:()=>r.eGM,XDS:()=>r.XDS,gNt:()=>r.gNt,C$T:()=>r.C$T,rQR:()=>r.rQR,Rf1:()=>r.Rf1,OTb:()=>r.OTb,G2Z:()=>r.G2Z,g5f:()=>e0,M1y:()=>r.M1y,PVB:()=>e1,XM6:()=>ej,z2R:()=>r.z2R,SyX:()=>r.SyX,HoL:()=>r.HoL,sX$:()=>e8,cmt:()=>ec,Odm:()=>r.Odm,CMu:()=>r.CMu,JAk:()=>r.JAk,LzJ:()=>r.LzJ,XPE:()=>r.XPE,XQj:()=>r.XQj,cc3:()=>r.cc3,b2C:()=>r.b2C,oC4:()=>r.oC4,mh4:()=>r.mh4,gw0:()=>r.gw0,erw:()=>e2}),n(543789);var o,i,r=n(950454),l=n(461932),a=n(438024),d=n(579962),s=n(893740),u=n(832176);let p=function(e,t){for(var n,o=-1,i=e.length;++o<i;){var r=t(e[o]);void 0!==r&&(n=void 0===n?r:n+r)}return n};var c=0/0;let y=function(e,t){var n=null==e?0:e.length;return n?p(e,t)/n:c};var g=n(299367);let h=function(e){return y(e,g.Z)};var f=Object.defineProperty,v=Object.getOwnPropertyDescriptor,m={type:d.Sy.END,meta:{draggable:!1,isNodeEnd:!0,selectable:!1,copyDisable:!0},getLines:()=>[],getLabels:()=>[]},C={type:d.OT.DYNAMIC_SPLIT,meta:{hidden:!0,inlineSpacingAfter:e=>e.collapsed&&e.entity.collapsedChildren.length>1?21:0,spacing:e=>{let t=(0,d.yI)(e.entity,d.cc.NODE_SPACING);return 1===e.children.length?t:t/2}},getLabels:e=>e.isNodeEnd?[]:[{type:d.nx.ADDER_LABEL,offset:e.transform.outputPoint}],onCreate:(e,t)=>e.document.addInlineBlocks(e,t.blocks||[]),getInputPoint(e){var t;return(null==(t=e.firstChild)?void 0:t.inputPoint)||e.defaultInputPoint},getOutputPoint(e,t){var n;let o=d.XP.isVertical(t),i=1===e.children.length,r=null==(n=e.lastChild)?void 0:n.outputPoint,l=(0,d.yI)(e.entity,d.cc.NODE_SPACING);return o?{x:r?r.x:e.bounds.center.x,y:e.bounds.bottom+(i?l/2:0)}:{x:e.bounds.right+(i?l/2:0),y:r?r.y:e.bounds.center.y}},addChild(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{index:o}=n,i=e.document,r=`$inlineBlocks$${e.id}`,l=i.getNode(r);return l||(l=i.addNode({id:r,type:"inlineBlocks",originParent:e,parent:e})),i.addBlock(e,t,void 0,void 0,o)}},L={extend:d.OT.DYNAMIC_SPLIT,type:d.OT.STATIC_SPLIT,extendChildRegistries:[{type:d.Sy.INLINE_BLOCKS,getLabels:()=>[]}]},N={type:d.Sy.BLOCK,meta:{spacing:d.Lu.NULL,inlineSpacingAfter:d.Lu.INLINE_BLOCK_PADDING_BOTTOM,hidden:!0},getLines(e){let t=e.transform,{isVertical:n}=e.entity,o=[{type:d.IG.DIVERGE_LINE,from:t.parent.inputPoint,to:t.inputPoint,side:d.VH.NORMAL_BRANCH}];if(t&&t.entity.isInlineBlock&&e.renderData.draggable){var i,r,l,a,s,u,p,c,y,g;if(n){let e=t.firstChild?t.firstChild.bounds.right:t.bounds.right,n=((null==(i=t.next)?void 0:i.firstChild)?null==(l=t.next)||null==(r=l.firstChild.bounds)?void 0:r.left:null==(s=t.next)||null==(a=s.bounds)?void 0:a.left)||0,u=t.inputPoint.y;(null==t?void 0:t.next)&&o.push({type:d.IG.DRAGGING_LINE,from:t.parent.inputPoint,to:{x:(e+n)/2,y:u},side:d.VH.NORMAL_BRANCH})}else{let e=t.firstChild?t.firstChild.bounds.bottom:t.bounds.bottom,n=((null==(u=t.next)?void 0:u.firstChild)?null==(c=t.next)||null==(p=c.firstChild.bounds)?void 0:p.top:null==(g=t.next)||null==(y=g.bounds)?void 0:y.top)||0,i=t.inputPoint.x;(null==t?void 0:t.next)&&o.push({type:d.IG.DRAGGING_LINE,from:t.parent.inputPoint,to:{x:i,y:(e+n)/2},side:d.VH.NORMAL_BRANCH})}}return e.isNodeEnd||o.push({type:d.IG.MERGE_LINE,from:t.outputPoint,to:t.parent.outputPoint,side:d.VH.NORMAL_BRANCH}),o},getInputPoint(e){let t=e.firstChild;return t?t.inputPoint:e.defaultInputPoint},getOutputPoint(e,t){let n=d.XP.isVertical(t),o=e.lastChild;return n?{x:o?o.outputPoint.x:e.bounds.bottomCenter.x,y:e.bounds.bottom}:{x:e.bounds.right,y:o?o.outputPoint.y:e.bounds.rightCenter.y}},getLabels(e){let t=e.transform,{isVertical:n}=e.entity,o=[];if(t&&t.entity.isInlineBlock&&e.renderData.draggable){var i,r,l,a,s,u,p,c;if(n){let e=t.firstChild?t.firstChild.bounds.right:t.bounds.right,n=((null==(i=t.next)?void 0:i.firstChild)?null==(r=t.next.firstChild.bounds)?void 0:r.left:null==(a=t.next)||null==(l=a.bounds)?void 0:l.left)||0,s=t.inputPoint.y;(null==t?void 0:t.next)&&o.push({offset:{x:(e+n)/2,y:s},type:d.nx.BRANCH_DRAGGING_LABEL,width:n-e,props:{side:d.VH.NORMAL_BRANCH}})}else{let e=t.firstChild?t.firstChild.bounds.bottom:t.bounds.bottom,n=((null==(s=t.next)?void 0:s.firstChild)?null==(u=t.next.firstChild.bounds)?void 0:u.top:null==(c=t.next)||null==(p=c.bounds)?void 0:p.top)||0,i=t.inputPoint.x;(null==t?void 0:t.next)&&o.push({offset:{x:i,y:(e+n)/2},type:d.nx.BRANCH_DRAGGING_LABEL,width:n-e,props:{side:d.VH.NORMAL_BRANCH}})}}return[...o]},addChild(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{index:o}=n;return e.document.addNode({...t,...n,parent:e,index:"number"==typeof o?o+1:void 0})}},I={type:d.Sy.INLINE_BLOCKS,meta:{hidden:!0,spacing:e=>(0,d.yI)(e.entity,d.cc.NODE_SPACING),isInlineBlocks:!0,inlineSpacingPre:e=>(0,d.yI)(e.entity,d.cc.INLINE_BLOCKS_PADDING_TOP)||d.Lu.INLINE_BLOCKS_PADDING_TOP,inlineSpacingAfter:e=>(0,d.yI)(e.entity,d.cc.INLINE_BLOCKS_PADDING_BOTTOM)},getChildDelta(e,t){var n;let o=d.XP.isVertical(t),i=null==(n=e.entity.pre)?void 0:n.getData(d.eG);if(i){let{localBounds:t}=i;if(o){let n=i.size.width+i.originDeltaX,o=Math.max(e.parent.minInlineBlockSpacing-n,(0,d.yI)(e.entity,d.cc.BRANCH_SPACING)-e.originDeltaX);return{x:t.right+o,y:0}}{let n=i.size.height+i.originDeltaY,o=Math.max(e.parent.minInlineBlockSpacing-n,(0,d.yI)(e.entity,d.cc.BRANCH_SPACING)-e.originDeltaY);return{x:0,y:t.bottom+o}}}return{x:0,y:0}},getDelta(e,t){var n,o,i,r;let l=d.XP.isVertical(t),{pre:a,collapsed:s}=e;if(s)return{x:0,y:0};if(l){let t=a.localBounds.center.x,n=(null==(i=e.firstChild)?void 0:i.transform.position.x)||0;return{x:t-(((null==(r=e.lastChild)?void 0:r.transform.position.x)||0)-n)/2,y:0}}let u=a.localBounds.center.y,p=(null==(n=e.firstChild)?void 0:n.transform.position.y)||0;return{x:0,y:u-(((null==(o=e.lastChild)?void 0:o.transform.position.y)||0)-p)/2}},getLabels:e=>(function(e){var t;let{isVertical:n}=e.entity,o=e.transform;return o.collapsed?[{type:d.nx.COLLAPSE_LABEL,offset:u.E9.move(o.inputPoint,n?{y:10}:{x:10}),props:{activateNode:e.entity.pre}}]:[{type:d.nx.CUSTOM_LABEL,renderKey:a.kD.BRANCH_ADDER,offset:u.E9.move(o.inputPoint,n?{y:10}:{x:10}),props:{activated:e.entity.getData(d.Lz).activated,transform:o,node:null==(t=o.originParent)?void 0:t.entity}}]})(e),getLines:()=>[],getInputPoint(e,t){var n,o;return d.XP.isVertical(t)?{x:(null==(o=e.pre)?void 0:o.outputPoint.x)||0,y:e.bounds.top}:{x:e.bounds.left,y:(null==(n=e.pre)?void 0:n.outputPoint.y)||0}},getOutputPoint(e,t){var n,o;let i=d.XP.isVertical(t);return e.collapsed?e.inputPoint:i?{x:(null==(o=e.pre)?void 0:o.outputPoint.x)||0,y:e.bounds.bottom}:{x:e.bounds.right,y:(null==(n=e.pre)?void 0:n.outputPoint.y)||0}}},x={type:d.Sy.BLOCK_ICON,meta:{spacing:20,size:{width:250,height:84}},getLabels(e){let t=e.transform,{isVertical:n}=e.entity;if(e.entity.parent.collapsedChildren.length<=1)return[];let o=(0,d.yI)(e.entity,d.T4.COLLAPSED_SPACING);return[{type:d.nx.COLLAPSE_LABEL,offset:u.E9.move(t.outputPoint,n?{y:o}:{x:o}),props:{collapseNode:e.entity.parent,activateNode:e.entity}}]}},b={type:d.Sy.BLOCK_ORDER_ICON,meta:{spacing:40},getLabels(e){let t=e.transform,{isVertical:n}=e.entity,o=t.outputPoint,i=t.next,r=t.parent;if(e.entity.parent.collapsedChildren.length<=1)return[{offset:null==r?void 0:r.outputPoint,type:d.nx.ADDER_LABEL}];let l=(0,d.yI)(e.entity,d.T4.COLLAPSED_SPACING);return[{offset:i?u.E9.getMiddlePoint(o,i.inputPoint):u.E9.move(o,n?{y:l}:{x:l}),type:d.nx.COLLAPSE_ADDER_LABEL,props:{activateNode:e.entity,collapseNode:e.entity.parent}}]}},E={type:d.Sy.START,meta:{isStart:!0,draggable:!1,selectable:!1,deleteDisable:!0,copyDisable:!0,addDisable:!0}},P={extend:d.Sy.BLOCK,type:"catchBlock",meta:{hidden:!0,spacing:d.Lu.NULL},getLines(e){let t,{transform:n}=e,{isVertical:o}=e.entity,i=n.parent,{inputPoint:r,outputPoint:l}=n;t=o?{x:i.inputPoint.x,y:i.inputPoint.y-20}:{x:i.inputPoint.x-20,y:i.inputPoint.y};let a=[{type:d.IG.DIVERGE_LINE,from:t,to:r}];if(!e.isNodeEnd){let e;e=o?{x:i.outputPoint.x,y:i.bounds.bottom}:{x:i.bounds.right,y:i.outputPoint.y},a.push({type:d.IG.MERGE_LINE,from:l,to:e})}return a},getLabels:()=>[]},S={extend:d.Sy.INLINE_BLOCKS,type:"catchInlineBlocks",meta:{spacing:d.Lu.NULL,inlineSpacingPre:d.Lu.NULL},getDelta(){},getLines(e){let{transform:t}=e,n=t.parent,o=[{type:d.IG.DIVERGE_LINE,from:n.pre.outputPoint,to:t.inputPoint}];return t.entity.isNodeEnd||o.push({type:d.IG.MERGE_LINE,from:t.outputPoint,to:n.outputPoint}),o},getOriginDeltaX(e){let{firstChild:t}=e;return t?t.originDeltaX:0},getLabels(e){var t;let{inputPoint:n}=e.transform,{isVertical:o}=e.entity,i=e.transform,r={x:o?n.x:n.x-20,y:o?n.y-20:n.y};return i.collapsed?[]:[{type:d.nx.CUSTOM_LABEL,renderKey:a.kD.BRANCH_ADDER,offset:r,props:{activated:e.entity.getData(d.Lz).activated,transform:i,node:null==(t=i.originParent)?void 0:t.entity}}]},getInputPoint(e,t){let n=d.XP.isVertical(t),o=e.firstChild;return o?o.inputPoint:n?e.bounds.topCenter:e.bounds.rightCenter},getOutputPoint(e,t){let n=d.XP.isVertical(t);if(e.collapsed)return e.inputPoint;let o=e.firstChild;if(o){var i,r;return n?{x:null==(i=o.outputPoint)?void 0:i.x,y:e.bounds.bottom}:{x:e.bounds.right,y:null==(r=o.outputPoint)?void 0:r.y}}return n?e.bounds.bottomCenter:e.bounds.rightCenter}},D={extend:d.Sy.INLINE_BLOCKS,type:"mainInlineBlocks",meta:{inlineSpacingPre:20,inlineSpacingAfter:40},getLines(e){let{transform:t}=e,n=t.firstChild;return[{type:d.IG.STRAIGHT_LINE,from:n.outputPoint,to:t.originParent.outputPoint}]},getLabels(e){var t;let{transform:n}=e,{isVertical:o}=e.entity,i=n.children[1],r=o?(n.parent.outputPoint.x+i.inputPoint.x)/2:n.inputPoint.x-54,l=o?n.inputPoint.y-54:(n.parent.outputPoint.y+i.inputPoint.y)/2;return[{type:d.nx.TEXT_LABEL,renderKey:a.oC.TRY_START_TEXT,offset:{x:o?n.inputPoint.x:n.inputPoint.x+-20,y:o?n.inputPoint.y+-20:n.inputPoint.y}},{type:d.nx.TEXT_LABEL,renderKey:a.oC.TRY_END_TEXT,offset:{x:o?n.inputPoint.x:n.originParent.outputPoint.x+-20,y:o?n.originParent.outputPoint.y+-20:n.inputPoint.y}},{type:d.nx.CUSTOM_LABEL,renderKey:a.kD.TRY_CATCH_COLLAPSE,offset:{x:r,y:l},props:{node:null==(t=n.lastChild)?void 0:t.entity}}]},getInputPoint:e=>e.firstChild.inputPoint,getOutputPoint(e,t){let n=e.firstChild;return d.XP.isVertical(t)?{x:n.outputPoint.x,y:e.bounds.bottom+20}:{x:e.bounds.right+20,y:n.outputPoint.y}},getDelta(){},getChildDelta(e,t){var n;let o=null==(n=e.entity.pre)?void 0:n.getData(d.eG),i=d.XP.isVertical(t);if(o){let{localBounds:t}=o,n=0;return n=i?Math.max(e.parent.minInlineBlockSpacing,-e.originDeltaX+(0,d.yI)(e.entity,d.cc.BRANCH_SPACING)):Math.max(e.parent.minInlineBlockSpacing,-e.originDeltaY+(0,d.yI)(e.entity,d.cc.BRANCH_SPACING)),{x:i?t.right+n:0,y:i?0:t.bottom+n}}return{x:0,y:0}}},O={extend:d.Sy.BLOCK,type:"tryBlock",meta:{hidden:!0,spacing:d.Lu.NULL},getLines:()=>[],getLabels:()=>[]},_={type:"tryCatch",meta:{hidden:!0,inlineSpacingAfter:0},onCreate(e,t){let{document:n}=e,[o,...i]=t.blocks||[],r=[],l=n.addNode({id:`$tryCatchIcon$${e.id}`,type:d.Sy.BLOCK_ICON,originParent:e,parent:e}),a=n.addNode({id:`$mainInlineBlocks$${e.id}`,type:"mainInlineBlocks",originParent:e,parent:e}),s=n.addNode({id:o.id,type:o.type||"tryBlock",originParent:e,parent:a,data:o.data}),u=n.addNode({id:`$trySlot$${o.id}`,hidden:!0,type:"trySlot",originParent:e,parent:s}),p=n.addNode({id:`$catchInlineBlocks$${e.id}`,type:"catchInlineBlocks",originParent:e,parent:a});return r.push(l,a,s,u,p),(o.blocks||[]).forEach(e=>{n.addNode({...e,parent:s},r)}),i.forEach(t=>{n.addBlock(e,t,r)}),r},onBlockChildCreate(e,t,n){let o=e.document.getNode(`$catchInlineBlocks$${e.id}`),i=e.document.addNode({id:t.id,type:t.type||"catchBlock",originParent:e,parent:o,data:t.data}),r=e.document.addNode({id:`$blockOrderIcon$${t.id}`,type:d.Sy.BLOCK_ORDER_ICON,originParent:e,parent:i});return t.blocks&&e.document.addBlocksAsChildren(i,t.blocks||[],n),null==n||n.push(i,r),i},getInputPoint:e=>e.firstChild.inputPoint,getOutputPoint(e,t){let n=d.XP.isVertical(t),o=e.firstChild;return n?{x:o.inputPoint.x,y:e.bounds.bottom}:{x:e.bounds.right,y:o.inputPoint.y}},extendChildRegistries:[{type:d.Sy.BLOCK_ICON,meta:{spacing:54},getLabels:()=>[]},D,S,O,P,{type:"trySlot",meta:{inlineSpacingAfter:16,spacing:0,size:{width:16,height:0}},onAfterUpdateLocalTransform(e){e.entity.isVertical?e.data.size={width:16,height:0}:e.data.size={width:0,height:16},e.transform.update({size:e.data.size})},getLabels:e=>[{offset:e.transform.bounds.center,type:d.nx.ADDER_LABEL}]}]},B={SPACING:16,COLLAPSE_INLINE_SPACING_BOTTOM:60,[d.cc.INLINE_SPACING_BOTTOM]:48,MIN_INLINE_BLOCK_SPACING:280,HORIZONTAL_MIN_INLINE_BLOCK_SPACING:180,LEFT_EMPTY_BLOCK_WIDTH:80,EMPTY_BRANCH_SPACING:20,LOOP_BLOCK_ICON_SPACING:13,[d.cc.INLINE_BLOCKS_INLINE_SPACING_BOTTOM]:23,INLINE_BLOCKS_INLINE_SPACING_TOP:30},A={type:"loopLeftEmptyBlock",meta:{inlineSpacingAfter:0,spacing:0,size:{width:B.LEFT_EMPTY_BLOCK_WIDTH,height:0}},onAfterUpdateLocalTransform(e){e.entity.isVertical?e.data.size={width:B.LEFT_EMPTY_BLOCK_WIDTH,height:0}:e.data.size={width:0,height:B.LEFT_EMPTY_BLOCK_WIDTH},e.transform.update({size:e.data.size})},getLines:()=>[],getLabels:()=>[]},T={...N,type:"loopRightEmptyBlock",meta:{...N.meta,inlineSpacingAfter:0}},k={type:"loopEmptyBranch",meta:{inlineSpacingAfter:0,spacing:B.EMPTY_BRANCH_SPACING,size:{width:100,height:0}},getLabels(e){let{isVertical:t}=e.entity,n=e.transform;return t?[{type:d.nx.ADDER_LABEL,offset:{x:n.inputPoint.x,y:n.bounds.center.y+8}}]:[{type:d.nx.ADDER_LABEL,offset:{x:n.bounds.center.x+8,y:n.inputPoint.y}}]},onAfterUpdateLocalTransform(e){e.entity.isVertical?e.data.size={width:100,height:0}:e.data.size={width:0,height:100},e.transform.update({size:e.data.size})}},R={type:d.Sy.INLINE_BLOCKS,meta:{inlineSpacingPre:e=>(0,d.yI)(e.entity,d.cc.INLINE_BLOCKS_INLINE_SPACING_TOP,B.INLINE_BLOCKS_INLINE_SPACING_TOP),inlineSpacingAfter:e=>(0,d.yI)(e.entity,d.cc.INLINE_BLOCKS_INLINE_SPACING_BOTTOM,B.INLINE_BLOCKS_INLINE_SPACING_BOTTOM),minInlineBlockSpacing:e=>e.entity.isVertical?B.MIN_INLINE_BLOCK_SPACING:B.HORIZONTAL_MIN_INLINE_BLOCK_SPACING},getLines(e){let t=e.transform,n=t.parent,{isVertical:o}=e.entity,i=[{type:d.IG.STRAIGHT_LINE,from:t.outputPoint,to:n.outputPoint}];if(t.collapsed)return i;let[r]=t.children;return[...i,{type:d.IG.ROUNDED_LINE,from:t.outputPoint,to:r.outputPoint,vertices:[o?{x:r.inputPoint.x,y:t.bounds.bottom}:{x:t.bounds.right,y:r.inputPoint.y}]},{type:d.IG.ROUNDED_LINE,from:r.outputPoint,to:u.E9.move(t.inputPoint,o?{x:-12,y:10}:{x:10,y:-12}),vertices:[o?{x:r.inputPoint.x,y:t.bounds.top+10}:{x:t.bounds.left+10,y:r.inputPoint.y}],arrow:!0}]},getLabels(e){var t;let n=e.transform,{isVertical:o}=e.entity,i=[];if(n.collapsed)return i;let r=n.children[0],l=n.children[1];return(null==(t=e.entity.originParent)?void 0:t.id.startsWith("while_"))?i.push({type:d.nx.TEXT_LABEL,renderKey:a.oC.LOOP_WHILE_TEXT,rotate:o?"":"-90deg",offset:o?{x:(n.inputPoint.x+l.inputPoint.x)/2,y:n.inputPoint.y+10}:{x:n.inputPoint.x+10,y:(n.inputPoint.y+l.inputPoint.y)/2}}):i.push({type:d.nx.TEXT_LABEL,renderKey:a.oC.LOOP_TRAVERSE_TEXT,offset:o?{x:r.inputPoint.x,y:n.bounds.center.y+5}:{x:n.bounds.center.x+5,y:r.inputPoint.y}}),i}},M={type:"loop",meta:{hidden:!0,inlineSpacingAfter:e=>e.collapsed?B.COLLAPSE_INLINE_SPACING_BOTTOM:(0,d.yI)(e.entity,d.cc.INLINE_SPACING_BOTTOM,B.INLINE_SPACING_BOTTOM),spacing:B.SPACING},onCreate(e,t){let{document:n}=e,o=t.blocks||[],i=n.addNode({id:`$blockIcon$${e.id}`,type:d.Sy.BLOCK_ICON,originParent:e,parent:e}),r=n.addNode({id:`$inlineBlocks$${e.id}`,hidden:!0,type:d.Sy.INLINE_BLOCKS,originParent:e,parent:e}),l=n.addNode({id:`$loopLeftEmpty$${e.id}`,hidden:!0,type:"loopLeftEmptyBlock",originParent:e,parent:r}),a=n.addNode({id:`$block$${e.id}`,hidden:!0,type:d.Sy.BLOCK,originParent:e,parent:r}),s=n.addNode({id:`$loopRightEmpty$${e.id}`,hidden:!0,type:"loopEmptyBranch",originParent:e,parent:a}),u=[];return o.forEach(e=>n.addNode({...e,type:e.type,parent:a},u)),[i,l,r,a,s,...u]},getLabels(e){let t=e.transform,{isVertical:n}=e.entity;return[{type:d.nx.TEXT_LABEL,renderKey:a.oC.LOOP_END_TEXT,props:n?void 0:{style:{maxWidth:"20px",lineHeight:"12px",whiteSpace:"pre-wrap"}},offset:u.E9.move(t.outputPoint,n?{y:-26}:{x:-26})},{type:d.nx.ADDER_LABEL,offset:t.outputPoint}]},getInputPoint(e){var t,n,o,i;let{isVertical:r}=e.entity;return r?{x:(null==(o=e.pre)?void 0:o.outputPoint.x)||(null==(i=e.firstChild)?void 0:i.outputPoint.x)||0,y:e.bounds.top}:{x:e.bounds.left,y:(null==(t=e.pre)?void 0:t.outputPoint.y)||(null==(n=e.firstChild)?void 0:n.outputPoint.y)||0}},getOutputPoint(e){var t,n,o,i;let{isVertical:r}=e.entity;return r?{x:(null==(o=e.pre)?void 0:o.outputPoint.x)||(null==(i=e.firstChild)?void 0:i.outputPoint.x)||0,y:e.bounds.bottom}:{x:e.bounds.right,y:(null==(t=e.pre)?void 0:t.outputPoint.y)||(null==(n=e.firstChild)?void 0:n.outputPoint.y)||0}},extendChildRegistries:[{type:d.Sy.BLOCK_ICON,meta:{spacing:B.LOOP_BLOCK_ICON_SPACING}},A,k,T,R],addChild(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{index:o}=n,i=e.document;return i.addNode({...t,...n,parent:i.getNode(`$block$${e.id}`),index:"number"==typeof o?o+1:void 0})}},$={type:d.Sy.ROOT,meta:{spacing:d.Lu.NULL,hidden:!0},getInputPoint(e){var t;return(null==(t=e.firstChild)?void 0:t.inputPoint)||e.bounds.topCenter},getOutputPoint(e){var t;return(null==(t=e.firstChild)?void 0:t.outputPoint)||e.bounds.bottomCenter}},w={type:d.Sy.EMPTY,meta:{spacing:e=>(0,d.yI)(e.entity,d.cc.NODE_SPACING)/2,size:{width:0,height:0},hidden:!0},getLabels:e=>[{offset:e.transform.bounds,type:d.nx.ADDER_LABEL}]},G={type:d.OT.SIMPLE_SPLIT,extend:d.OT.DYNAMIC_SPLIT,onBlockChildCreate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],{document:o}=e,i=o.getNode(`$inlineBlocks$${e.id}`),r=o.addNode({...t,type:t.type||d.Sy.BLOCK,parent:i},n);return n.push(r),r}},V={type:d.Sy.BREAK,extend:d.Sy.END},H={type:d.Sy.INPUT,extend:d.Sy.BLOCK,meta:{hidden:!1},getLines(e,t){let n=e.transform,{isVertical:o}=e.entity,i=[];if(n&&n.entity.isInlineBlock&&e.renderData.draggable){var r,l,a,s,u,p,c,y,g,h;if(o){let e=n.firstChild?n.firstChild.bounds.right:n.bounds.right,t=((null==(r=n.next)?void 0:r.firstChild)?null==(a=n.next)||null==(l=a.firstChild.bounds)?void 0:l.left:null==(u=n.next)||null==(s=u.bounds)?void 0:s.left)||0,o=n.outputPoint.y;(null==n?void 0:n.next)&&i.push({type:d.IG.MERGE_LINE,isDraggingLine:!0,from:{x:(e+t)/2,y:o},to:n.parent.outputPoint,side:d.VH.NORMAL_BRANCH})}else{let e=n.firstChild?n.firstChild.bounds.bottom:n.bounds.bottom,t=((null==(p=n.next)?void 0:p.firstChild)?null==(y=n.next)||null==(c=y.firstChild.bounds)?void 0:c.top:null==(h=n.next)||null==(g=h.bounds)?void 0:g.top)||0,o=n.outputPoint.x;(null==n?void 0:n.next)&&i.push({type:d.IG.MERGE_LINE,isDraggingLine:!0,from:{x:o,y:(e+t)/2},to:n.parent.outputPoint,side:d.VH.NORMAL_BRANCH})}}return e.isNodeEnd||i.push({type:d.IG.MERGE_LINE,from:n.outputPoint,to:n.parent.outputPoint,side:d.VH.NORMAL_BRANCH}),i},getLabels(e){let t=e.transform,{isVertical:n}=e.entity,o=[];if(t&&t.entity.isInlineBlock&&e.renderData.draggable){var i,r,l,a,s,u,p,c;if(n){let e=t.firstChild?t.firstChild.bounds.right:t.bounds.right,n=((null==(i=t.next)?void 0:i.firstChild)?null==(r=t.next.firstChild.bounds)?void 0:r.left:null==(a=t.next)||null==(l=a.bounds)?void 0:l.left)||0,s=t.outputPoint.y;(null==t?void 0:t.next)&&o.push({offset:{x:(e+n)/2,y:s},type:d.nx.BRANCH_DRAGGING_LABEL,width:n-e,props:{side:d.VH.NORMAL_BRANCH}})}else{let e=t.firstChild?t.firstChild.bounds.bottom:t.bounds.bottom,n=((null==(s=t.next)?void 0:s.firstChild)?null==(u=t.next.firstChild.bounds)?void 0:u.top:null==(c=t.next)||null==(p=c.bounds)?void 0:p.top)||0,i=t.outputPoint.x;(null==t?void 0:t.next)&&o.push({offset:{x:i,y:(e+n)/2},type:d.nx.BRANCH_DRAGGING_LABEL,width:n-e,props:{side:d.VH.NORMAL_BRANCH}})}}return[...o]}},z={type:d.Sy.OUTPUT,extend:d.Sy.BLOCK,meta:{hidden:!1,isNodeEnd:!0}},K={type:d.Sy.MULTI_OUTPUTS,extend:d.OT.SIMPLE_SPLIT,meta:{isNodeEnd:!0},getLines:(e,t)=>{var n;return(null==(n=e.entity.parent)?void 0:n.flowNodeType)===d.Sy.INLINE_BLOCKS?N.getLines(e,t):[]},getLabels:(e,t)=>[...C.getLabels(e,t),...N.getLabels(e,t)],getOutputPoint(e,t){var n;let o=d.XP.isVertical(t),i=null==(n=e.lastChild)?void 0:n.outputPoint;return o?{x:i?i.x:e.bounds.center.x,y:e.bounds.bottom}:{x:e.bounds.right,y:i?i.y:e.bounds.center.y}},extendChildRegistries:[{type:d.Sy.BLOCK_ICON,meta:{}}]},U={type:d.Sy.MULTI_INPUTS,extend:d.OT.SIMPLE_SPLIT,extendChildRegistries:[{type:d.Sy.BLOCK_ICON,meta:{hidden:!0,spacing:0},getLines:()=>[],getLabels:()=>[]},{type:d.Sy.INLINE_BLOCKS,meta:{inlineSpacingPre:0},getLabels(e){var t,n;let o=e.entity.isVertical,i=e.transform,r=(0,d.yI)(e.entity,d.cc.INLINE_BLOCKS_PADDING_BOTTOM);return i.collapsed||0===e.entity.childrenLength?[{type:d.nx.CUSTOM_LABEL,renderKey:a.kD.BRANCH_ADDER,offset:u.E9.move(i.outputPoint,o?{y:r}:{x:r}),props:{activated:e.entity.getData(d.Lz).activated,transform:i,node:null==(n=i.originParent)?void 0:n.entity}}]:[{type:d.nx.CUSTOM_LABEL,renderKey:a.kD.BRANCH_ADDER,offset:u.E9.move(i.outputPoint,o?{y:-r/2}:{x:-r/2}),props:{activated:e.entity.getData(d.Lz).activated,transform:i,node:null==(t=i.originParent)?void 0:t.entity}}]}}],getLabels:()=>[]},F=a.kD.SLOT_ADDER,X=a.kD.SLOT_LABEL,Z=a.kD.SLOT_COLLAPSE,j="SLOT_START_DISTANCE",Y="SLOT_PORT_DISTANCE",J=((o=J||{})[o.Slot=d.Sy.SLOT]="Slot",o[o.SlotBlock=d.Sy.SLOT_BLOCK]="SlotBlock",o.SlotInlineBlocks="slotInlineBlocks",o.SlotBlockInlineBlocks="slotBlockInlineBlocks",o),Q=e=>{var t;return!!(null==e||null==(t=e.lastCollapsedChild)?void 0:t.blocks.length)},W=e=>{var t;return!!(null==e||null==(t=e.parent)?void 0:t.isTypeOrExtendType(J.SlotBlock))},q=e=>e.firstChild?q(e.firstChild):e,ee=e=>{if(!e)return{x:0,y:0};let t=(0,d.yI)(e.entity,j,16);return e.entity.isVertical?{x:(null==e?void 0:e.bounds.right)+t,y:null==e?void 0:e.bounds.center.y}:{x:null==e?void 0:e.bounds.center.x,y:(null==e?void 0:e.bounds.bottom)+t}},et=e=>{var t;let n=null==(t=e.transform.next)?void 0:t.inputPoint,o=e.transform.firstChild,i=e.transform.parent;return o&&i?(e.transform.next||(n=e.entity.isVertical?{x:o.outputPoint.x,y:i.outputPoint.y}:{x:i.outputPoint.x,y:o.outputPoint.y}),n||{x:0,y:0}):{x:0,y:0}},en=e=>{if(!e)return{x:0,y:0};let t=q(e);return{x:e.bounds.left,y:t.bounds.center.y}},eo=e=>e.firstChild?e.localBounds.top+eo(e.firstChild):e.localBounds.center.y,ei={type:d.Sy.BLOCK_ICON,meta:{defaultExpanded:!1,spacing:0},getLines:e=>[...Q(e.entity.parent)?(e=>{let t=(0,d.yI)(e.transform.entity,j,16);return[{type:d.IG.STRAIGHT_LINE,from:ee(e.transform),to:u.E9.move(ee(e.transform),e.entity.isVertical?{x:-t,y:0}:{x:0,y:-t}),style:{strokeDasharray:"5 5"}}]})(e):[]],getLabels:e=>[...Q(e.entity.parent)?(e=>{let t=e.transform;return[{type:d.nx.CUSTOM_LABEL,renderKey:Z,offset:ee(t),props:{node:e.entity.parent}}]})(e):[]],getDelta:e=>W(e.entity.parent)?e.entity.isVertical?{x:-e.originDeltaX,y:0}:{x:0,y:-e.originDeltaY}:{x:0,y:0}},er={type:"slotInlineBlocks",extend:d.Sy.BLOCK,meta:{spacing:0,inlineSpacingPre:0,inlineSpacingAfter:0,isInlineBlocks:e=>!e.isVertical},getLines:()=>[],getLabels:()=>[],getChildDelta(e,t){var n;if(e.entity.isVertical)return{x:0,y:0};let o=null==(n=e.entity.pre)?void 0:n.getData(d.eG);if(o){let{localBounds:e}=o;return{x:0,y:e.bottom+30}}return{x:0,y:0}},getDelta(e){if(!e.children.length)return{x:0,y:0};let t=e.pre;if(!t)return{x:0,y:0};let n=(0,d.yI)(e.entity,j,16),o=(0,d.yI)(e.entity,Y,100),i=(0,d.yI)(e.entity,"SLOT_BLOCK_PORT_DISTANCE",32.5);if(!e.entity.isVertical){var r,l;return(null==e||null==(l=e.children)||null==(r=l.every)?void 0:r.call(l,e=>!e.children.length))?{x:o-t.localBounds.width/2,y:t.localBounds.bottom+n}:{x:o+i-t.localBounds.width/2,y:t.localBounds.bottom+n}}return{x:t.localBounds.right+(n+o+i),y:-t.localBounds.height}}},el={type:J.SlotBlock,extend:d.Sy.BLOCK,meta:{inlineSpacingAfter:0,inlineSpacingPre:0,spacing:e=>e.entity.isVertical||0!==e.size.width?(0,d.yI)(e.entity,"SLOT_BLOCK_VERTICAL_SPACING",32.5):90,isInlineBlocks:e=>!e.isVertical},getLines(e){var t;let n=ee(null==(t=e.transform.parent)?void 0:t.pre),o=e.transform.inputPoint,i=(0,d.yI)(e.transform.entity,"SLOT_RADIUS",16),r=[{x:n.x,y:o.y}];if(e.entity.isVertical){let e=Math.abs(o.y-n.y),t=i,l=!1;e<2*i&&(l=!0,e<i&&(t=Math.sqrt(i**2-(i-e)**2))),r=[{x:n.x+t,y:n.y,radiusX:i,radiusY:i,radiusOverflow:"truncate"},{x:n.x+t,y:o.y,...l?{radiusX:0,radiusY:0}:{}}]}return 1===e.transform.children.length?[{type:d.IG.ROUNDED_LINE,from:n,to:en(e.transform.children[0]),vertices:r,style:{strokeDasharray:"5 5"},radius:i}]:[{type:d.IG.ROUNDED_LINE,from:n,to:o,vertices:r,style:{strokeDasharray:"5 5"},radius:i},...e.transform.children.map(e=>{let t=en(e);return{type:d.IG.ROUNDED_LINE,radius:i,from:o,to:t,vertices:[{x:o.x,y:t.y}],style:{strokeDasharray:"5 5"}}})]},getLabels(e){var t;let n=ee(null==(t=e.transform.parent)?void 0:t.pre),o=e.transform.inputPoint;return[{type:d.nx.CUSTOM_LABEL,renderKey:F,props:{node:e.entity},offset:o},{type:d.nx.CUSTOM_LABEL,renderKey:X,props:{node:e.entity},offset:{x:n.x+(0,d.yI)(e.entity,"SLOT_LABEL_DISTANCE",32),y:o.y},origin:[0,.5]}]},getInputPoint(e){var t;let n=ee(null==(t=e.parent)?void 0:t.pre),o=e.bounds.center.y;return e.children.length&&(o=h([en(e.firstChild).y,en(e.lastChild).y])),{x:n.x+(0,d.yI)(e.entity,Y,100),y:o}},getChildDelta(e,t){var n;let o=!!e.firstChild;if(e.entity.isVertical)return{x:o?0:-e.originDeltaX,y:0};let i=o?0:-e.originDeltaY,r=null==(n=e.entity.pre)?void 0:n.getData(d.eG);if(r){let{localBounds:e}=r;return{x:0,y:e.bottom+30+i}}return{x:0,y:i}},getChildLabels:()=>[],getChildLines:()=>[],getDelta:e=>({x:0,y:0})},ea={type:d.Sy.SLOT,extend:"block",meta:{draggable:e=>!W(e),hidden:!0,spacing:e=>(0,d.yI)(e.entity,"SLOT_SPACING",32),padding:e=>({left:0,right:e.collapsed?(0,d.yI)(e.entity,j,16):0,bottom:!W(e.entity)&&e.isLast?10:0,top:0}),copyDisable:!1,defaultExpanded:!1},onCreate:(e,t)=>{let{document:n}=e,o=[],i=n.addNode({id:`$slotIcon$${e.id}`,type:d.Sy.BLOCK_ICON,originParent:e,parent:e}),r=n.addNode({id:`$slotInlineBlocks$${e.id}`,type:"slotInlineBlocks",originParent:e,parent:e});return o.push(i),o.push(r),(t.blocks||[]).forEach(t=>{let i=n.addNode({type:J.SlotBlock,...t,originParent:e,parent:r});o.push(i),(t.blocks||[]).forEach(e=>{n.addNode({type:J.Slot,...e,parent:i},o)})}),o},getLines:e=>[...W(e.entity)?[]:(e=>{let t=e.transform.firstChild,n=et(e);return t?[{type:d.IG.STRAIGHT_LINE,from:t.outputPoint,to:n},{type:d.IG.STRAIGHT_LINE,from:t.inputPoint,to:e.transform.inputPoint}]:[]})(e)],getLabels:e=>[...W(e.entity)?[]:(e=>{var t,n;let o=et(e),i=e.transform.firstChild.outputPoint,r=e.entity.isVertical?{hoverHeight:o.y-i.y,hoverWidth:null==(t=e.transform.firstChild)?void 0:t.bounds.width}:{hoverHeight:null==(n=e.transform.firstChild)?void 0:n.bounds.height,hoverWidth:o.x-i.x};return[{offset:u.E9.getMiddlePoint(i,o),type:d.nx.ADDER_LABEL,props:r}]})(e)],getInputPoint:e=>{let t=e.firstChild;return t?e.entity.isVertical?t.inputPoint:{x:e.bounds.left,y:t.outputPoint.y}:{x:0,y:0}},getOutputPoint:e=>{let t=e.firstChild;return t?e.entity.isVertical?{x:t.outputPoint.x,y:e.bounds.bottom}:{x:e.bounds.right,y:t.outputPoint.y}:{x:0,y:0}},onAfterUpdateLocalTransform(e){let{isVertical:t}=e.entity;if(!t)return;let n=e.firstChild,o=e.lastChild;if(!n||!o)return;let i=n.localBounds.height,r=o.localBounds.height;if(e.collapsed||!o)return;let l=(e=>{if(!e.children.length)return e.localBounds.height/2;let t=[e.firstChild,e.lastChild].map(e=>(e=>{if(!e.children.length)return e.localBounds.top;let t=[e.firstChild,e.lastChild].map(e=>eo(e));return e.localBounds.top+h(t)})(e));return h(t)})(o);if(n.entity.clearMemoLocal(),o.entity.clearMemoLocal(),i/2+l>r||!o.children.length){n.transform.update({position:{x:n.transform.position.x,y:0}}),o.transform.update({position:{x:o.transform.position.x,y:Math.max(i/2-r/2,0)}});return}o.transform.update({position:{x:o.transform.position.x,y:0}}),null==n||n.transform.update({position:{x:n.transform.position.x,y:Math.max(l-i/2,0)}})},extendChildRegistries:[ei,er]},ed=class{registerDocument(e){e.registerFlowNodes($,E,C,L,G,N,I,x,b,_,m,M,w,V,K,U,H,z,ea,el),e.registerNodeDatas(d.Lz,d.Xr,d.eG)}registerRenderer(e){e.registerLayers(a.V7,a.Em,a.HW,a.Eq,s.wY)}onReady(){}onDispose(){}};ed=((e,t,n,o)=>{for(var i,r=o>1?void 0:o?v(t,n):t,l=e.length-1;l>=0;l--)(i=e[l])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&f(t,n,r),r})([(0,l.b2)()],ed);var es=new l.nZ(e=>{(0,u.KV)(e,ed,[d.Lw,a.OK,s.qY])}),eu=n(908600),ep=(0,s.M1)({onInit(e,t){!1!==t.enable&&e.playground.registerLayer(a.EU,{onDrop:t.onDrop?t.onDrop.bind(null,e):void 0,canDrop:t.canDrop?t.canDrop.bind(null,e):void 0})}});function ec(){let e=(0,s.Dc)().getLayer(a.EU);return(0,eu.useMemo)(()=>({startDrag:e?e.startDrag.bind(e):e=>{}}),[e])}var ey=n(324067),eg=n(938573),eh=n(66298),ef=n(57064),ev=n(952893),em=Object.defineProperty,eC=Object.getOwnPropertyDescriptor,eL=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?eC(t,n):t,l=e.length-1;l>=0;l--)(i=e[l])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&em(t,n,r),r},eN=class{init(e,t){t.nodeToJSON&&(this.nodeToJSON=t.nodeToJSON(e)),t.getNodeLabelById&&(this.getNodeLabelById=t.getNodeLabelById(e)),t.getNodeLabel&&(this.getNodeLabel=t.getNodeLabel(e)),t.getBlockLabel&&(this.getBlockLabel=t.getBlockLabel(e)),t.getNodeURI&&(this.getNodeURI=t.getNodeURI(e))}getParentName(e){return e?this.getNodeLabelById(e):"root"}constructor(){this.nodeToJSON=e=>e.toJSON(),this.getNodeLabelById=e=>e,this.getNodeLabel=e=>e.id,this.getBlockLabel=e=>e.id,this.getNodeURI=e=>`node:${e}`}};eN=eL([(0,l.b2)()],eN);var eI=class{setSource(e){this.historyService.context.source=e}registerOperationMetas(e){e.forEach(e=>{this.operationRegistry.registerOperationMeta(e)})}transact(e){this.historyService.transact(e)}async undo(){await this.historyService.undo()}async redo(){await this.historyService.redo()}canRedo(){return this.historyService.canRedo()}canUndo(){return this.historyService.canUndo()}pushHistoryOperation(e){return this.historyService.pushOperation(e)}getHistoryOperations(){return this.historyService.getHistoryOperations()}addFromNode(e,t){let n={fromId:"string"==typeof e?e:e.id,data:t};return this.historyService.pushOperation({type:d.C8.addFromNode,value:n,uri:this.config.getNodeURI(t.id)})}deleteNode(e){let{originParent:t,parent:n}=e,o=this.config.getNodeURI(e.id),i=this.config.nodeToJSON(e);if(i||(i={id:e.id,type:e.flowNodeType}),n){let r=n.children.findIndex(t=>t===e);if(t){let e=t.id;if(!e)return void console.warn("no parent found");let n={targetId:e,blockData:i};return r>=0&&(n.index=r),this.historyService.pushOperation({type:d.C8.deleteBlock,value:n,uri:o})}{let e={data:i,parentId:n.id};return r>=0&&(e.index=r),this.historyService.pushOperation({type:d.C8.deleteChildNode,value:e,uri:o})}}return e.pre?this.historyService.pushOperation({type:d.C8.deleteFromNode,value:{fromId:e.pre.id,data:i,uri:o}}):void console.warn("no pre found")}addChildNode(e,t,n,o){let i={data:e,parentId:null==t?void 0:t.id,originParentId:null==o?void 0:o.id,index:n};return this.historyService.pushOperation({type:d.C8.addChildNode,value:i,uri:this.config.getNodeURI(e.id)})}deleteNodes(e){0!==e.length&&this.historyService.transact(()=>{e.reverse().forEach(e=>{this.deleteNode(e)})})}addFromNodes(e,t){if(0!==t.length)return this.historyService.pushOperation({type:d.C8.addNodes,value:{fromId:e.id,nodes:t.map(e=>this.config.nodeToJSON(e)),uri:this.config.getNodeURI(t[0].id)}})}addBlock(e,t,n,o){let i={targetId:"string"==typeof e?e:e.id,blockData:t,index:o};return n&&(i.parentId=n.id),this.historyService.pushOperation({type:d.C8.addBlock,value:i,uri:this.config.getNodeURI(i.blockData.id)})}changeFormData(e,t){return this.historyService.pushOperation({type:d.C8.changeNode,value:{...t,id:e.id},uri:this.config.getNodeURI(e.id)},{noApply:!0})}moveNode(e,t){return this.fixedHistoryOperationService.dragNodes({dropNode:t,nodes:[e]})}};eL([(0,l.f3)(eh.qp)],eI.prototype,"historyService",2),eL([(0,l.f3)(eh.CD)],eI.prototype,"operationRegistry",2),eL([(0,l.f3)(d.VO)],eI.prototype,"fixedHistoryOperationService",2),eL([(0,l.f3)(d.pQ)],eI.prototype,"document",2),eL([(0,l.f3)(eN)],eI.prototype,"config",2),eI=eL([(0,l.b2)()],eI);var ex=class extends d.D9{apply(e){return this.historyService.pushOperation(e)}originApply(e){return super.apply(e)}transact(e){this.historyService.transact(e)}};eL([(0,l.f3)(eh.qp)],ex.prototype,"historyService",2),ex=eL([(0,l.b2)()],ex);var eb=class{resetCache(e,t){Object.keys(t).forEach(n=>{this.setCache(e,n,t[n])})}setCache(e,t,n){this._cache.has(e)||this._cache.set(e,new Map),this._cache.get(e).set(t,(0,ev.Z)(n))}getCache(e,t){if(this._cache.has(e))return this._cache.get(e).get(t)}getFormDataByNodeId(e){let t=this.document.getNode(e);if(t)return t.getData(ef.Ps)}getFormItemValue(e,t){let n=this.getFormItem(e,t);if(n)return n.value}setFormItemValue(e,t,n){let o=this.getFormItem(e,t);o&&(o.value=n,this._formValueChangeByHistoryEmitter.fire({formData:e,path:t,value:n}))}getFormItem(e,t){if(void 0!==t)return t.endsWith("/")&&(t=t.slice(0,-1)),t.startsWith("/")||(t="/"+t),e.getFormModel().getFormItemByPath(t)}dispose(){this._formValueChangeByHistoryEmitter.dispose(),this._cache.clear()}constructor(){this._cache=new Map,this._formValueChangeByHistoryEmitter=new u.Q5,this.onFormValueChangeByHistory=this._formValueChangeByHistoryEmitter.event}};eL([(0,l.f3)(d.pQ)],eb.prototype,"document",2),eb=eL([(0,l.b2)()],eb);var eE={apply:(e,t)=>t.get(d.VO).originApply(e)},eP={...eE,type:d.C8.addFromNode,inverse:e=>({...e,type:d.C8.deleteFromNode}),getLabel:(e,t)=>{let n=t.get(eN),{value:o}=e;return`Create ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(eN),{value:o}=e,i=n.getNodeLabel(o.data),r=n.getNodeLabelById(o.fromId);return`Create ${o.data.type} node ${i} after ${r}`}},eS={...eE,type:d.C8.ungroup,inverse:e=>({...e,type:d.C8.createGroup}),getLabel:(e,t)=>{let n=e.value;return`Ungroup ${n.groupId}`},getDescription:(e,t)=>{let n=e.value;return`Ungroup with nodes ${n.nodeIds.join(", ")}`}},eD={...eE,type:d.C8.moveNodes,inverse:e=>({...e,value:{...e.value,fromId:e.value.toId,toId:e.value.fromId}}),getLabel:(e,t)=>{let n=t.get(eN),o=e.value;return`${o.nodeIds.map(e=>`Move ${n.getNodeLabelById(e)}`).join(";")}`},getDescription:(e,t)=>{let n=t.get(eN),o=e.value;return`${o.nodeIds.map(e=>`Move ${n.getNodeLabelById(e)} to ${n.getNodeLabelById(o.toId)}`).join(";")}`},getURI:(e,t)=>{let n=t.get(eN),o=e.value.nodeIds;if(0!==o.length)return n.getNodeURI(o[0])}},eO={...eE,type:d.C8.moveChildNodes,inverse:e=>({...e,value:{...e.value,fromIndex:e.value.toIndex,toIndex:e.value.fromIndex,fromParentId:e.value.toParentId,toParentId:e.value.fromParentId}}),getLabel:(e,t)=>{let n=t.get(eN),o=e.value;return`Move ${o.nodeIds.map(e=>n.getNodeLabelById(e)).join(",")}`},getDescription:(e,t)=>{let n=t.get(eN),o=e.value,i=void 0!==o.toIndex?`position ${o.toIndex}`:"the end";return`Move nodes ${o.nodeIds.map(e=>n.getNodeLabelById(e)).join(",")} to ${i}`}},e_={...eE,type:d.C8.moveBlock,inverse:e=>({...e,value:{...e.value,fromIndex:e.value.toIndex,toIndex:e.value.fromIndex,fromParentId:e.value.toParentId,toParentId:e.value.fromParentId}}),getLabel:(e,t)=>{let n=t.get(eN),o=e.value;return`Move ${n.getNodeLabelById(o.nodeId)}`},getDescription:(e,t)=>{let n=t.get(eN),o=e.value,i=void 0!==o.toIndex?`position ${o.toIndex}`:"the end";return`Move branch ${n.getNodeLabelById(o.nodeId)} to ${i}`}},eB={...eE,type:d.C8.deleteNodes,inverse:e=>({...e,type:d.C8.addNodes}),getLabel:(e,t)=>{let n=t.get(eN);return e.value.nodes.map(e=>`Delete ${n.getNodeLabel(e)}`).join(";")},getDescription:(e,t)=>{let n=t.get(eN),o=e.value,i=n.getNodeLabelById(o.fromId);return o.nodes.map(e=>`Delete ${e.type} node ${n.getNodeLabel(e)} after ${i}`).join(";")},shouldMerge:(e,t,n)=>!!t&&Date.now()-n.getTimestamp()<500},eA={...eE,type:d.C8.deleteNode,inverse:e=>({...e,type:d.C8.addNode}),apply:(e,t)=>{let{value:{data:n}}=e;return t.get(d.VO).deleteNode(n.id)},getLabel:(e,t)=>{let n=t.get(eN),o=e.value;return`Create ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(eN),o=e.value,i=n.getNodeLabel(o.data),r=n.getParentName(o.parentId),l=void 0!==o.index?`position ${o.index}`:"the end";return`Delete ${o.data.type} node ${i} in ${r} at ${l}`}},eT={...eE,type:d.C8.deleteFromNode,inverse:e=>({...e,type:d.C8.addFromNode}),getLabel:(e,t)=>{let n=t.get(eN),o=e.value;return`Delete ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(eN),o=e.value,i=n.getNodeLabel(o.data),r=n.getNodeLabelById(o.fromId);return`Delete ${o.data.type} node ${i} after ${r}`}},ek={...eE,type:d.C8.deleteChildNode,inverse:e=>({...e,type:d.C8.addChildNode}),getLabel:(e,t)=>{let n=t.get(eN),o=e.value;return`Delete ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(eN),o=e.value,i=n.getNodeLabel(o.data),r=n.getParentName(o.parentId),l=void 0!==o.index?`position ${o.index}`:"the end";return`Delete ${o.data.type} node ${i} in ${r} at ${l}`}},eR={...eE,type:d.C8.deleteBlock,inverse:e=>({...e,type:d.C8.addBlock}),getLabel:(e,t)=>{let n=t.get(eN),o=e.value;return`Delete ${n.getBlockLabel(o.blockData)}`},getDescription:(e,t)=>{let n=t.get(eN),o=e.value,i=n.getBlockLabel(o.blockData),r=n.getNodeLabelById(o.targetId),l=void 0!==o.index?`position ${o.index}`:"the end";return`Delete branch ${i} in ${r} at ${l}`}},eM={...eE,type:d.C8.createGroup,inverse:e=>({...e,type:d.C8.ungroup}),getLabel:(e,t)=>{let n=e.value;return`Create group ${n.groupId} from ${n.targetId}`},getDescription:(e,t)=>{let n=e.value;return`Create group with nodes ${n.nodeIds.join(", ")}`}},e$={...eE,type:d.C8.changeNode,inverse:e=>({...e,value:{...e.value,value:e.value.oldValue,oldValue:e.value.value}}),apply:(e,t)=>{let n=t.get(eb),o=n.getFormDataByNodeId(e.value.id);o&&n.setFormItemValue(o,e.value.path,e.value.value)},shouldMerge:(e,t)=>{var n,o;return!!(t&&(null==t||null==(n=t.value)?void 0:n.path)===(null==(o=e.value)?void 0:o.path)&&(null==t?void 0:t.type)===d.C8.changeNode&&["string","number"].includes(typeof e.value.value))&&{type:d.C8.changeNode,value:{...e.value,oldValue:t.value.oldValue,value:e.value.value}}},getLabel:e=>{let t=e.value;return`\u5C06\u8282\u70B9${t.id}\u7684${t.path.split("/").filter(Boolean).join(".")}\u5C5E\u6027\u4FEE\u6539\u4E3A${t.value}`}},ew={...eE,type:d.C8.addNodes,inverse:e=>({...e,type:d.C8.deleteNodes}),getLabel:(e,t)=>{let n=t.get(eN),o=e.value;return`${o.nodes.map(e=>`Create ${n.getNodeLabel(e)}`).join(";")}`},getDescription:(e,t)=>{let n=t.get(eN),o=e.value,i=n.getNodeLabelById(o.fromId);return`${o.nodes.map(e=>`Create ${e.type} node ${n.getNodeLabel(e)} after ${i}`).join(";")}`}},eG={type:d.C8.addNode,inverse:e=>({...e,type:d.C8.deleteNode}),apply:(e,t)=>{let{value:{data:n,parentId:o,index:i,hidden:r}}=e;return t.get(d.VO).addNode(n,{parent:o,index:i,hidden:r})},getLabel:(e,t)=>{let n=t.get(eN),o=e.value;return`Create ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(eN),o=e.value,i=n.getNodeLabel(o.data),r=n.getParentName(o.parentId),l=void 0!==o.index?`position ${o.index}`:"the end";return`Create ${o.data.type} node ${i} in ${r} at ${l}`}},eV={...eE,type:d.C8.addChildNode,inverse:e=>({...e,type:d.C8.deleteChildNode}),getLabel:(e,t)=>{let n=t.get(eN),o=e.value;return`Create ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(eN),o=e.value,i=n.getNodeLabel(o.data),r=n.getParentName(o.parentId),l=void 0!==o.index?`position ${o.index}`:"the end";return`Create ${o.data.type} node ${i} in ${r} at ${l}`}},eH=[eT,eP,{...eE,type:d.C8.addBlock,inverse:e=>({...e,type:d.C8.deleteBlock}),getLabel:(e,t)=>{let n=t.get(eN),o=e.value;return`Create ${n.getBlockLabel(o.blockData)}`},getDescription:(e,t)=>{let n=t.get(eN),o=e.value,i=n.getBlockLabel(o.blockData),r=n.getNodeLabelById(o.targetId),l=void 0!==o.index?`position ${o.index}`:"the end";return`Create branch ${i} in ${r} at ${l}`}},eR,eM,eS,eD,eB,ew,e$,e_,eV,ek,eO,eG,eA],ez=class{registerOperationMeta(e){eH.forEach(t=>{e.registerOperationMeta(t)})}};ez=eL([(0,l.b2)()],ez);var eK=(0,s.M1)({onBind:e=>{let{bind:t,rebind:n}=e;(0,u.KV)(t,ez,[eh.FU]),t(eI).toSelf().inSingletonScope(),t(eb).toSelf().inSingletonScope(),t(eN).toSelf().inSingletonScope(),n(d.VO).to(ex).inSingletonScope()},onInit(e,t){let n=e.get(eI),o=e.get(eb);n.setSource(e);let i=e.get(d.pQ);(null==t?void 0:t.uri)&&(n.historyService.context.uri=t.uri),(null==t?void 0:t.getDocumentJSON)?n.historyService.config.getSnapshot=t.getDocumentJSON(e):n.historyService.config.getSnapshot=()=>i.toJSON(),n.config.init(e,t),(null==t?void 0:t.operationMetas)&&n.registerOperationMetas(t.operationMetas),t.onApply&&e.get(eh.f9).onApply(t.onApply.bind(null,e)),(null==t?void 0:t.enableChangeNode)&&i.onNodeCreate(e=>{let{node:t,data:i}=e,r=t.getData(ef.Ps);o.setCache(r,"/",i.data),r.formModel.onInitialized(()=>{r.onDetailChange(e=>{let{path:i,initialized:l}=e;"/"!==i&&i.split("/").filter(Boolean)[0];let a=o.getFormItemValue(r,i),d=o.getCache(r,i);(0,eg.Z)(a,d)||(l&&n.changeFormData(t,{path:i,value:a,oldValue:d}),o.setCache(r,i,a))})})})},containerModules:[eh.Xn]}),eU=n(875787),eF=Object.defineProperty,eX=Object.getOwnPropertyDescriptor,eZ=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?eX(t,n):t,l=e.length-1;l>=0;l--)(i=e[l])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&eF(t,n,r),r},ej=r.Zn3;(i||(i={})).DEFAULT={...r.nYJ.DEFAULT,scroll:{enableScrollLimit:!0}};var eY=e=>(t,n)=>{let o=e.filter(Boolean);return o.length?o.reduce((e,n)=>n(t,e),n):n},eJ=Symbol("FlowOperationService"),eQ=class extends r.D9C{createGroup(e){return this.groupService.createGroup(e)}ungroup(e){return this.groupService.ungroup(e)}setFormValue(e,t,n){var o;let i=this.toNodeEntity(e),l=null==i||null==(o=i.getData(r.Psq))?void 0:o.getFormModel();if(l)if((0,r.THq)(l))l.setValueIn(t,n);else{let e=l.getFormItemByPath(t);if(!e)return;e.value=n}}startTransaction(){}endTransaction(){}};eZ([(0,l.f3)(r.QUv)],eQ.prototype,"groupService",2),eQ=eZ([(0,l.b2)()],eQ);var eW=class extends eQ{init(){this.toDispose.push(this.onNodeAdd(this.handleNodeAdd.bind(this)))}addFromNode(e,t){return this.fixedHistoryService.addFromNode(e,t)}addBlock(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{parent:o,index:i}=n;return this.fixedHistoryService.addBlock(e,t,o,i)}deleteNode(e){let t=this.toNodeEntity(e);t&&this.fixedHistoryService.deleteNode(t)}deleteNodes(e){let t=e.map(e=>"string"==typeof e?this.document.getNode(e):e);return this.fixedHistoryService.deleteNodes(t)}startTransaction(){this.historyService.startTransaction()}endTransaction(){this.historyService.endTransaction()}apply(e){this.historyService.pushOperation(e)}doMoveNode(e,t,n){var o;if(!(null==(o=e.parent)?void 0:o.id))return;let i={nodeIds:[this.toId(e)],fromParentId:e.parent.id,toParentId:this.toId(t),fromIndex:this.getNodeIndex(e),toIndex:n};return this.historyService.pushOperation({type:r.C8.moveChildNodes,value:i})}handleNodeAdd(e){let{data:t}=e,{parent:n,index:o,hidden:i,originParent:l,...a}=t,d={data:a,parentId:null==n?void 0:n.id,index:o,hidden:i};return this.historyService.pushOperation({type:r.C8.addNode,value:d,uri:this.fixedHistoryService.config.getNodeURI(a.id)},{noApply:!0})}};eZ([(0,l.f3)(eI)],eW.prototype,"fixedHistoryService",2),eZ([(0,l.f3)(eh.qp)],eW.prototype,"historyService",2),eZ([(0,l.f3)(r.pQ4)],eW.prototype,"document",2),eZ([(0,l.zY)()],eW.prototype,"init",1),eW=eZ([(0,l.b2)()],eW);var eq=(0,s.M1)({onBind:(e,t)=>{var n;let{bind:o}=e;o(eJ).to((null==t||null==(n=t.history)?void 0:n.enable)?eW:eQ).inSingletonScope()},onDispose:e=>{e.container.get(eJ).dispose()}}),e0=(0,eu.forwardRef)(function(e,t){let{parentContainer:n,children:o,...l}=e,a=(0,eu.useMemo)(()=>{var e;return e=l,t=>{var n,o;let l=[eq(e={...i.DEFAULT,...e})];return l.push((0,r.cL)({registerShortcuts(n){var o;let i=t.get(r.z2R);if(n.addHandlers({commandId:r.mYg.Default.DELETE,shortcuts:["backspace","delete"],isEnabled:()=>i.selection.length>0&&!t.playground.config.readonlyOrDisabled,execute:()=>{let e=i.selection.filter(e=>e instanceof r.GAy);t.get(eJ).deleteNodes(e),i.selection=i.selection.filter(e=>!e.disposed)}}),null==e||null==(o=e.history)?void 0:o.enable){let o=t.get(eI);e.history.disableShortcuts||(n.addHandlers({commandId:r.mYg.Default.UNDO,shortcuts:["meta z","ctrl z"],isEnabled:()=>!0,execute:()=>{o.undo()}}),n.addHandlers({commandId:r.mYg.Default.REDO,shortcuts:["meta shift z","ctrl shift z"],isEnabled:()=>!0,execute:()=>{o.redo()}}))}}}),(0,ey.Y)({canSelect:e=>0===e.button&&!t.get(r.pQ4).renderState.config.nodeHoveredId,...e.selectBox||{}}),ep(e.dragdrop||{})),l=(0,r.Fu1)(e,l)(t),(null==(n=e.variableEngine)?void 0:n.enable)&&l.push((0,r.Ys9)({...e.variableEngine,layout:"fixed"})),(null==(o=e.history)?void 0:o.enable)&&l.push(eK(e.history)),l.push((0,r.d3V)({containerModules:[es],onBind(t){t.isBound(r.h3M)||t.bind(r.h3M).toConstantValue({...r.XsM,defaultLayout:e.defaultLayout,toNodeJSON:t=>(function(e,t){let n,o={};return t.document.traverse(t=>{if(t.id.startsWith("$"))return;let i=t.getData(r.Psq),l=i&&i.formModel&&i.formModel.initialized?i.toJSON():void 0,a={id:t.id,type:t.flowNodeType,data:i?l:t.getExtInfo(),blocks:[]};e.toNodeJSON&&(a=e.toNodeJSON(t,a)),n||(n=a);let{parent:d}=t;d&&d.id.startsWith("$")&&(d=d.originParent);let s=d?o[d.id]:void 0;if(s){var u;null==(u=s.blocks)||u.push(a)}o[t.id]=a},t),n})(e,t),fromNodeJSON:(t,n,o)=>(function(e,t,n,o){n=e.fromNodeJSON?e.fromNodeJSON(t,n,o):n;let i=t.getData(r.Psq);if(i){var l,a,d;let r=null==(a=e.nodeEngine)||null==(l=a.createDefaultFormMeta)?void 0:l.call(a,t),s=(null==(d=t.getNodeRegistry())?void 0:d.formMeta)||r;s&&(o?i.createForm(s,n.data):i.updateFormValues(n.data))}else n.data&&t.updateExtInfo(n.data)})(e,t,n,o),allNodesDefaultExpanded:e.allNodesDefaultExpanded})},onInit:t=>{var n,o,i;t.playground.registerLayers(r.Emw,r.V7e),e.formatNodeLines&&(t.document.options.formatNodeLines=eY([t.document.options.formatNodeLines,e.formatNodeLines])),e.formatNodeLabels&&(t.document.options.formatNodeLabels=eY([t.document.options.formatNodeLabels,e.formatNodeLabels])),(null==(n=e.scroll)?void 0:n.enableScrollLimit)&&t.playground.registerLayer(r.qq0),(null==(o=e.scroll)?void 0:o.disableScrollBar)||t.playground.registerLayer(r.lVg),(null==(i=e.scroll)?void 0:i.disableScroll)&&(t.playground.config.scrollDisable=!0),e.nodeRegistries&&t.document.registerFlowNodes(...e.nodeRegistries)}})),(0,r.esp)(e,l)(t)}},[]),d=(0,eu.useCallback)(e=>({...(0,r.FwO)(e),get document(){return e.get(r.pQ4)},get operation(){return e.get(eJ)},get clipboard(){return e.get(r.YvH)},get selection(){return e.get(r.z2R)},get history(){return e.get(eh.qp)},get tools(){return{fitView:t=>{let n=e.get(r.XQj).config,o=e.get(r.pQ4);return n.fitView(o.root.bounds,t,30)}}}}),[]);return eu.createElement(r.W6u,{ref:t,plugins:a,customPluginContext:d,parentContainer:n},o)});function e1(e){let t=e||(0,eu.useContext)(r.rQR),n=(0,eu.useRef)(),o=t.getData(r.LzJ),{expanded:i,dragging:l,activated:a}=o,{startDrag:d}=ec(),s=(0,r.Dcz)(),u=t.flowNodeType===r.SyX.BLOCK_ORDER_ICON,p=t.flowNodeType===r.SyX.BLOCK_ICON,[c,y]=(0,eu.useState)(0),g=(0,eu.useRef)(!1);g.current=!1;let h=(u||p?t.parent:t)||n.current;n.current=h;let f=(0,r.G2Z)(eJ),v=(0,eu.useCallback)(()=>{f.deleteNode(h)},[h,f]),m=(0,eu.useCallback)(e=>{d(e,{dragStartEntity:t},{dragOffsetX:30,dragOffsetY:30})},[t,d]),C=(0,eu.useCallback)(e=>{o.toggleMouseEnter()},[o]),L=(0,eu.useCallback)(e=>{o.toggleMouseLeave()},[o]),N=(0,eu.useCallback)(()=>{o.toggleExpand()},[o]),I=(0,eu.useCallback)(()=>h.getExtInfo(),[h]),x=(0,eu.useCallback)(e=>{h.updateExtInfo(e)},[h]),b=(0,eu.useMemo)(()=>(0,r.CMu)(h),[h]),E=(0,eU.Re)(null==b?void 0:b.state);(0,eu.useEffect)(()=>{let e;return(p||u)&&(e=t.parent.onExtInfoChange(()=>t.renderData.fireChange())),()=>null==e?void 0:e.dispose()},[t,p,u]),(0,eu.useEffect)(()=>{let e=null==b?void 0:b.onFormValuesChange(()=>{g.current&&y(e=>e+1)});return()=>null==e?void 0:e.dispose()},[b]);let P=s.config.readonly;return(0,eu.useMemo)(()=>({id:h.id,type:h.flowNodeType,get data(){if(b)return g.current=!0,b.values;return I()},updateData(e){b?b.updateFormValues(e):x(e)},node:h,isBlockOrderIcon:u,isBlockIcon:p,activated:a,readonly:P,expanded:i,dragging:l,startDrag:m,deleteNode:v,onMouseEnter:C,onMouseLeave:L,getExtInfo:I,updateExtInfo:x,toggleExpand:N,get form(){if(!b)return;return{...b,get values(){return g.current=!0,b.values},get state(){return E}}}}),[h,u,p,a,P,i,l,m,v,C,L,I,x,N,b,E,c])}function e2(e){let{maxZoom:t,minZoom:n}=e||{},o=(0,r.Dcz)(),i=(0,r.KUq)(),l=i.isBound(eh.qp)?i.get(eh.qp):void 0,a=(0,r.G2Z)(r.pQ4),[d,s]=(0,eu.useState)(1),[p,c]=(0,eu.useState)(a.layout),[y,g]=(0,eu.useState)(!1),[h,f]=(0,eu.useState)(!1),v=(0,eu.useCallback)((e,t,n)=>(n=n||30,o.config.fitView(a.root.bounds,e,n,t)),[a,o]),m=(0,eu.useCallback)(e=>{let t=a.getAllNodes();e=e||(a.layout.name===r.XPE.HORIZONTAL_FIXED_LAYOUT?r.XPE.VERTICAL_FIXED_LAYOUT:r.XPE.HORIZONTAL_FIXED_LAYOUT),t.map(e=>{e.getData(r.LzJ).node.classList.add("gedit-transition-ease")}),setTimeout(()=>{v()},10),setTimeout(()=>{t.map(e=>{e.getData(r.LzJ).node.classList.remove("gedit-transition-ease")})},500),a.setLayout(e),c(a.layout)},[a,o]),C=(0,eu.useCallback)(e=>{null==o||o.config.zoomout(e)},[d,o]),L=(0,eu.useCallback)(e=>{null==o||o.config.zoomin(e)},[d,o]),N=(0,eu.useCallback)((e,t,n)=>{o.config.updateZoom(e,t,n)},[o]),I=(0,eu.useCallback)(()=>null==l?void 0:l.undo(),[l]),x=(0,eu.useCallback)(()=>null==l?void 0:l.redo(),[l]);return(0,eu.useEffect)(()=>{let e=new u.K4;return o&&e.push(o.onZoom(e=>s(e))),l&&e.push(l.undoRedoService.onChange(()=>{g(l.canUndo()),f(l.canRedo())})),()=>e.dispose()},[o,l]),(0,eu.useEffect)(()=>{let e=o.config.config;o.config.updateConfig({maxZoom:void 0!==t?t:e.maxZoom,minZoom:void 0!==n?n:e.minZoom})},[o,t,n]),{zoomin:L,zoomout:C,fitView:v,updateZoom:N,zoom:d,isVertical:p.name===r.XPE.VERTICAL_FIXED_LAYOUT,changeLayout:m,canRedo:h,canUndo:y,undo:I,redo:x}}function e8(){return(0,r.G2Z)(r.Zn3)}},152440:function(e,t,n){n.d(t,{p:()=>w});var o=n(916530),i=n(908600),r=n(382959),l=n(261513),a=n(433210),d=n(245803),s=n(312278),u=n(315358);let p=function(e,t,n){for(var o=-1,i=e.length;++o<i;){var r=e[o],l=t(r);if(null!=l&&(void 0===a?l==l&&!(0,u.Z)(l):n(l,a)))var a=l,d=r}return d},c=function(e,t){return e<t};var y=n(299367),g=n(272892);function h(){return i.createElement("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("circle",{id:"Ellipse 465",cx:"4",cy:"4",r:"3",fill:"white",stroke:"#3370FF",strokeWidth:"2"}))}function f(e){return i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 48 48",...e},i.createElement("g",{fill:"none"},i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M22 8.01176C20.5 8.01193 16.0714 7.93811 15 13.0005C13.917 18.1177 9.85714 22.8477 8 24"}),i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M22 40C20.5 40.0003 16.0714 40.0628 15 35.0005C13.917 29.8833 9.85714 25.1522 8 23.9999"}),i.createElement("circle",{cx:"8",cy:"24",r:"4",fill:"currentColor"}),i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M8 24L22 24"}),i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M30 24.001H42"}),i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M30 8.00098H42"}),i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M30 40.001H42"})))}function v(e){let{color:t,circleColor:n}=e;return i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("circle",{cx:"8",cy:"8",r:"7",fill:n}),i.createElement("path",{fill:t,d:"M10.8281 9.4715C11.0883 9.21131 11.0885 8.78909 10.8291 8.52804C10.6413 8.33892 10.4536 8.14952 10.266 7.9601C9.66706 7.35551 9.06799 6.75079 8.46068 6.15496C8.20439 5.90352 7.7947 5.90352 7.53841 6.15496C6.93103 6.75085 6.33191 7.35564 5.73291 7.96029C5.5454 8.14957 5.3579 8.33884 5.17017 8.52782C4.91075 8.78895 4.91096 9.21099 5.17124 9.47127C5.43152 9.73155 5.85355 9.73176 6.11383 9.47148L7.99955 7.58576L9.88548 9.4717C10.1457 9.73189 10.5679 9.73169 10.8281 9.4715Z"}),i.createElement("path",{fill:t,d:"M0.888672 7.99997C0.888672 4.07261 4.07242 0.888855 7.99978 0.888855C11.9271 0.888855 15.1109 4.07261 15.1109 7.99997C15.1109 11.9273 11.9271 15.1111 7.99978 15.1111C4.07242 15.1111 0.888672 11.9273 0.888672 7.99997ZM13.818 7.99997C13.818 4.78667 11.2131 2.18178 7.99978 2.18178C4.78649 2.18178 2.1816 4.78667 2.1816 7.99997C2.1816 11.2133 4.78649 13.8181 7.99978 13.8181C11.2131 13.8181 13.818 11.2133 13.818 7.99997Z"}))}var m=l.ZP.div`
  width: 16px;
  height: 16px;
  font-size: 10px;
  border-radius: 9px;
  display: flex;
  color: #fff;
  cursor: pointer;
  justify-content: center;
  align-items: center;
  background: ${e=>e.hoverActivated?"#82A7FC":"#BBBFC4"};
  transform: ${e=>!e.isVertical&&e.isCollapse?"rotate(-90deg)":""};
`,C=function(e){let{collapseNode:t,activateNode:n,hoverActivated:r,style:l}=e,a=null==n?void 0:n.getData(o.LzJ),d=t.getData(o.eGM);if(!d)return i.createElement(i.Fragment,null);let s=()=>{setTimeout(()=>{var e,t;null==(t=o.XQj.getLatest())||t.scrollToView({position:null==n||null==(e=n.getData(o.eGM))?void 0:e.outputPoint,scrollToCenter:!0})},100)};if(d.collapsed){let e=t.allCollapsedChildren.filter(e=>!e.hidden&&e!==n).length;return i.createElement(m,{onClick:()=>{d.collapsed=!1,s()},hoverActivated:r,"aria-hidden":"true",style:l},e)}let u=r?"#82A7FC":"#BBBFC4";return i.createElement(m,{onClick:()=>{d.collapsed=!0,null==a||a.toggleMouseLeave(),s()},hoverActivated:r,isVertical:null==n?void 0:n.isVertical,isCollapse:!0,style:l,"aria-hidden":"true"},i.createElement(v,{color:u,circleColor:"var(--semi-color-white)"}))},L=l.ZP.div`
  width: 16px;
  height: 16px;
  border-radius: 100px;
  background-color: white;
  border: 1px dashed #b8bcc1;
`,N="hsl(252 62% 54.9%)",I="hsl(252deg 62% 55% / 9%)",x=l.ZP.div`
  position: relative;
  height: 32px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  cursor: pointer;
  font-size: 19px;
  border: 1px solid ${N};
  padding: 0 15px;
  &:hover: {
    background-color: ${I};
    color: ${N};
  }
`,b=l.ZP.div`
  position: absolute;
  top: -8px;
  right: -8px;
  text-align: center;
  line-height: 16px;
  width: 16px;
  height: 16px;
  border-radius: 8px;
  font-size: 12px;
  color: #fff;
  background-color: ${N};
`,E=l.ZP.div`
  display: flex;
  align-items: center;
`,P=(e,t)=>l.ZP.div`
    width: ${e}px;
    height: ${t}px;
    background: #3370ff;
  `,S=(e,t)=>{var n;return!e||e<0?0:!t||t<0?e:((n=[e,t]).length?p(n,y.Z,c):void 0)||0},D=l.ZP.div`
  width: 28px;
  height: 18px;
  background: ${e=>e.activated?"#82A7FC":"rgb(187, 191, 196)"};
  display: flex;
  border-radius: 9px;
  justify-content: space-evenly;
  align-items: center;
  color: #fff;
  font-size: 10px;
  font-weight: bold;
  transform: ${e=>e.isVertical?"":"rotate(90deg)"};
  div {
    display: flex;
    justify-content: center;
    align-items: center;
    svg {
      width: 12px;
      height: 12px;
    }
  }
`,O={nodes:[{type:"start",label:"Start",icon:i.createElement(function(e){return i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e},i.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"1.5",strokeWidth:"1.499"},i.createElement("path",{strokeDasharray:"2 2",d:"M16 2H8a6 6 0 0 0-6 6v8a6 6 0 0 0 6 6h8a6 6 0 0 0 6-6V8a6 6 0 0 0-6-6Z"}),i.createElement("path",{d:"M16 5H8a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3Z"})))},null)},{type:"dynamicSplit",label:"Split Branch",icon:i.createElement(f,null),blocks:()=>[{id:(0,a.x0)(5)},{id:(0,a.x0)(5)}]},{type:"end",label:"Branch End",icon:i.createElement(function(e){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"#888888",fillRule:"evenodd",d:"M11 13v-2H6.286C5.023 11 4 10.105 4 9s1.023-2 2.286-2H11V3a1 1 0 0 1 2 0v4h4.714C18.977 7 20 7.895 20 9s-1.023 2-2.286 2H13v2h3a2 2 0 1 1 0 4h-3v4a1 1 0 0 1-2 0v-4H8a2 2 0 1 1 0-4h3Z"}))},null),branchEnd:!0},{type:"loop",schemaType:"loop",label:"Loop",icon:i.createElement(function(e){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em",viewBox:"0 0 16 16",...e},i.createElement("g",{fill:"currentColor"},i.createElement("path",{d:"M1.161 8a6.84 6.84 0 1 0 6.842-6.84a.58.58 0 1 1 0-1.16a8 8 0 1 1-6.556 3.412l-.663-.577a.58.58 0 0 1 .227-.997l2.52-.69a.58.58 0 0 1 .728.633l-.332 2.592a.58.58 0 0 1-.956.364l-.643-.56A6.812 6.812 0 0 0 1.16 8z"}),i.createElement("path",{d:"M6.641 11.671V8.843h1.57l1.498 2.828h1.314L9.377 8.665c.897-.3 1.427-1.106 1.427-2.1c0-1.37-.943-2.246-2.456-2.246H5.5v7.352h1.141zm0-3.75V5.277h1.57c.881 0 1.416.499 1.416 1.32c0 .84-.504 1.324-1.386 1.324h-1.6z"})))},null)},{type:"tryCatch",schemaType:"tryCatch",label:"TryCatch",icon:i.createElement(f,null),blocks:()=>[{id:`try_${(0,a.x0)(5)}`},{id:`catch_${(0,a.x0)(5)}`},{id:`catch_${(0,a.x0)(5)}`}]},{type:"noop",label:"Noop Node",icon:i.createElement(function(e){return i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",...e},i.createElement("path",{fill:"currentColor",d:"M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773C16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593c.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318C1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"}))},null)},{type:"end",label:"End",icon:i.createElement(function(e){return i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 256 256",...e},i.createElement("path",{fill:"currentColor",d:"M128 236a108 108 0 1 1 108-108a108.1 108.1 0 0 1-108 108Zm0-192a84 84 0 1 0 84 84a84.1 84.1 0 0 0-84-84Z"}))},null)}],find:function(e){return O.nodes.find(t=>t.type===e)}},_=l.ZP.div`
  width: 100%;
  height: 32px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  cursor: pointer;
  font-size: 19px;
  padding: 0 15px;
  &:hover: {
    background-color: ${I};
    color: ${N};
  },
`,B=l.ZP.div`
  font-size: 12px;
  margin-left: 10px;
`,A=l.ZP.div`
  max-height: 500px;
  overflow: auto;
  &::-webkit-scrollbar {
    display: none;
  }
`;function T(e){return i.createElement(_,{onClick:e.onClick},i.createElement("div",{style:{fontSize:14}},e.icon),i.createElement(B,null,e.label))}var k=O.nodes.filter(e=>"start"!==e.type);function R(e){return i.createElement(A,{style:{width:180}},k.map((t,n)=>i.createElement(T,{key:n,icon:t.icon,label:t.label,onClick:()=>{var n;return null==(n=e.onSelect)?void 0:n.call(e,t)}})))}var M=l.ZP.div`
  width: ${e=>e.hovered?15:6}px;
  height: ${e=>e.hovered?15:6}px;
  background-color: rgb(143, 149, 158);
  color: #fff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
`,$=(0,l.ZP)(g.Z)`
  color: #3370ff;
  background-color: #fff;
  border-radius: 15px;
`,w={[o.kDE.ADDER]:function(e){let{from:t}=e,[n,r]=(0,i.useState)(!1),l=(0,o.Dcz)(),s=(0,o.G2Z)(o.Vro);return l.config.readonlyOrDisabled?null:i.createElement(d.J2,{visible:n,onVisibleChange:r,content:i.createElement(R,{onSelect:e=>{let n=s.addFromNode(t,{id:e.type+(0,a.x0)(5),type:e.type,blocks:e.blocks?e.blocks():void 0});setTimeout(()=>{l.scrollToView({bounds:n.getData(o.eGM).bounds,scrollToCenter:!0})},10)}}),placement:"right",trigger:"click",overlayStyle:{padding:0}},i.createElement(M,{hovered:e.hoverActivated,onMouseDown:e=>e.stopPropagation(),onClick:()=>{r(!0)}},e.hoverActivated?i.createElement($,null):null))},[o.kDE.COLLAPSE]:C,[o.kDE.TRY_CATCH_COLLAPSE]:function(e){let{node:t}=e,{baseColor:n,baseActivatedColor:l}=(0,o.XDS)(),a=t.getData(o.LzJ),d=t.getData(o.eGM),[s,u]=(0,i.useState)(!1);if(!d||!d.parent)return i.createElement(i.Fragment,null);let p=d.inputPoint.x-d.parent.inputPoint.x,c=()=>{setTimeout(()=>{var e,n;null==(n=o.XQj.getLatest())||n.scrollToView({position:null==t||null==(e=t.getData(o.eGM))?void 0:e.inputPoint,scrollToCenter:!0})},100)},y=()=>{d.collapsed=!0,a.activated=!1,c()},g=()=>{d.collapsed=!1,c()};return i.createElement("div",{onMouseEnter:()=>{u(!0),a.activated=!0},onMouseLeave:()=>{u(!1),a.activated=!1},style:{width:p,height:40,display:"flex",alignItems:"center",justifyContent:"center",gap:6}},i.createElement("div",{"data-label-id":e.labelId,style:{fontSize:12,color:s||a.lineActivated?l:n,textAlign:"center",whiteSpace:"nowrap",backgroundColor:"var(--g-editor-background)",lineHeight:"20px"}},t.getService(o.Rf1).getText(o.oC4.CATCH_TEXT)),(()=>{if(d.collapsed){let e=t.allCollapsedChildren.filter(e=>!e.hidden&&e!==t).length;return i.createElement("div",{onClick:g,style:{width:16,height:16,fontSize:10,borderRadius:9,display:"flex",color:"#fff",cursor:"pointer",justifyContent:"center",alignItems:"center",background:s||a.lineActivated?l:n},"aria-hidden":"true"},e)}return s?i.createElement("div",{onClick:y,style:{width:16,height:16,fontSize:10,borderRadius:9,display:"flex",color:"#fff",cursor:"pointer",justifyContent:"center",alignItems:"center",background:l},"aria-hidden":"true"},i.createElement(r.Z,null)):i.createElement(i.Fragment,null)})())},[o.kDE.BRANCH_ADDER]:function(e){var t;let{activated:n,node:r}=e,l=null==(t=r.firstChild)?void 0:t.getData(o.LzJ),d=(0,o.Dcz)(),u=(0,o.G2Z)(o.Vro),{isVertical:p}=r;return d.config.readonlyOrDisabled?null:i.createElement(D,{isVertical:p,activated:n||(null==l?void 0:l.hovered),onMouseEnter:()=>null==l?void 0:l.toggleMouseEnter(),onMouseLeave:()=>null==l?void 0:l.toggleMouseLeave()},i.createElement("div",{onClick:()=>{let e=u.addBlock(r,{id:(0,a.x0)(5)});setTimeout(()=>{d.scrollToView({bounds:e.getData(o.eGM).bounds,scrollToCenter:!0})},10)},"aria-hidden":"true",style:{flexGrow:1,textAlign:"center",cursor:"pointer"}},i.createElement(s.Z,null)))},[o.kDE.DRAG_NODE]:function(e){let{dragStart:t,dragNodes:n}=e,o=(n||[]).map(e=>e.allCollapsedChildren.length?e.allCollapsedChildren.filter(e=>!e.hidden).length:1).reduce((e,t)=>e+t,0);return i.createElement(x,null,null==t?void 0:t.id,o>1&&i.createElement(i.Fragment,null,i.createElement(b,null,o),i.createElement(x,{style:{position:"absolute",top:5,right:-5,left:5,bottom:-5,opacity:.5}})))},[o.kDE.DRAGGABLE_ADDER]:function(e){let t=(0,o.Dcz)().getLayer(o.EU3);return t&&(!t.options.canDrop||t.options.canDrop({dragNodes:t.dragEntities||[],dropNode:e.from,isBranch:!1}))?i.createElement(L,null):i.createElement(i.Fragment,null)},[o.kDE.DRAG_HIGHLIGHT_ADDER]:function(e){var t,n,r,l,a,d,s;let{node:u}=e,p=null==(t=u.getData(o.eGM))?void 0:t.bounds,{isVertical:c}=u;if(c){let e=((null==p?void 0:p.width)||0)-16,t=P(S(e,((null==u||null==(s=u.next)||null==(d=s.getData(o.eGM))||null==(a=d.bounds)?void 0:a.width)||0)-16),2);return i.createElement(E,null,i.createElement(h,null),i.createElement(t,null),i.createElement(h,null))}let y=((null==p?void 0:p.height)||0)-16,g=P(2,S(y,((null==u||null==(l=u.next)||null==(r=l.getData(o.eGM))||null==(n=r.bounds)?void 0:n.height)||0)-16));return i.createElement(E,{style:{flexDirection:"column"}},i.createElement(h,null),i.createElement(g,null),i.createElement(h,null))},[o.kDE.DRAG_BRANCH_HIGHLIGHT_ADDER]:h,[o.kDE.SLOT_COLLAPSE]:function(e){let{node:t}=e,[n,r]=(0,i.useState)(!1),l=t.firstChild,a=l.getData(o.LzJ).activated,d=l.getData(o.eGM).size.height,s=t.collapsed||n||a;return i.createElement("div",{style:{width:30,height:d||100,display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)},s&&i.createElement(C,{style:t.collapsed?{}:{transform:t.isVertical?"rotate(-90deg)":"rotate(90deg)"},node:t,activateNode:l,collapseNode:t,hoverActivated:n}))},[o.kDE.SLOT_ADDER]:function(e){var t;let{node:n}=e,r=null==(t=n.firstChild)?void 0:t.getData(o.LzJ),l=(0,o.G2Z)(o.pQ4);async function u(){l.addNode({id:(0,a.x0)(5),type:"custom",parent:n})}return i.createElement("div",{style:{display:"flex",background:"var(--semi-color-bg-0)"},onMouseEnter:()=>null==r?void 0:r.toggleMouseEnter(),onMouseLeave:()=>null==r?void 0:r.toggleMouseLeave()},i.createElement(d.zx,{onClick:()=>{u()},size:"small",icon:i.createElement(s.Z,null)}))}}}}]);