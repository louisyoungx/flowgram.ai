"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["731078"],{53029:function(e,t,r){r.d(t,{AO:()=>f,B:()=>c,D4:()=>s,Gj:()=>u,Kw:()=>a,Ue:()=>v,hi:()=>l,vH:()=>p});var n=r(216354),o=r(711294),i=r(138670),s=Symbol("event/silent");function a(e,t){return{type:"option",name:e,handler:t}}function l(e,t){return{type:"api",name:e,handler:t}}function c(e,t){return{type:"event",name:e,handler:t}}function u(e){return{type:"domEventHandler",name:e}}function f(e){return{type:"extension",extension:e}}var d=class{constructor(e){this.fn=e}compartment=new i.F6;extension;value;init(e){this.value=e;let t=this.fn(e);return this.compartment.of(t??[])}set(e){if(e===this.value)return;this.value=e;let t=this.fn(e);return this.compartment.reconfigure(t??[])}},h=class{cachedValues=Object.create(null);handlers=Object.create(null);add(e,t){this.handlers[e]=this.handlers[e]??[],this.handlers[e].push(t)}init(e){let t=[];return Object.keys(this.handlers).map(r=>{let n=e[r];this.cachedValues[r]=n;let o=this.handlers[r];o&&o.forEach(e=>{let r=e.init(n);r&&t.push(r)})}),t}get(e){return this.cachedValues[e]}set(e){let t=[];return Object.keys(e).map(r=>{let n=e[r];this.cachedValues[r]=n;let o=this.handlers[r];o&&o.forEach(e=>{let r=e.set(n);r&&t.push(r)})}),t}};function p(){let e=new i.F6,t=new i.F6,r=[],n=[];return{view:null,provideView(e){this.view=e},inject(o,i="tail"){let s="head"===i?e:t,a="head"===i?r:n;return a.push(o),queueMicrotask(()=>{this.view&&this.view.dispatch({effects:s.reconfigure(a)})}),()=>{let e=a.indexOf(o);~e&&a.splice(e,1),queueMicrotask(()=>{this.view&&this.view.dispatch({effects:s.reconfigure(a)})})}},getCompartment:o=>"head"===o?e.of(r):t.of(n)}}var m=class{#e=[];tap(e,t){this.#e.push([e,t])}call(...e){this.#e.forEach(t=>{let r=t[1];"function"==typeof r&&r(...e)})}};function g(){return new m}function v({plugins:e,injector:t=p()}){let r={extendAPI:g(),setupOption:g(),addExtension:g()},a={hooks:r},l=[],c=[];function u(e,{options:n,events:o}){l.forEach(e=>{r.setupOption.call({key:e,options:n})});let i=[];return r.addExtension.call({events:o,extensions:i}),[t.getCompartment("head"),...n.init(e),...i,t.getCompartment("tail")]}function f(){return new h}function m(){return(0,n.Z)()}function v({view:e,options:n,events:o}){function i(t){let r=n.set(t);0!==r.length&&e.dispatch({effects:r})}function s(e){return n.get(e)}let a=Object.create(null);return r.extendAPI.call({context:{view:e,set:i,get:s},api:a}),a.$view=e,a.$on=o.on.bind(o),a.$off=o.off.bind(o),a.$get=s,a.$set=i,a.$inject=t.inject.bind(t),a.$destroy=()=>{e.destroy(),o.off("*")},a}return e.forEach(e=>{switch(e.type){case"option":l.push(e.name),({apply(t){t.hooks.setupOption.tap("option",t=>{let{key:r,options:n}=t;r===e.name&&n.add(e.name,new d(e.handler))})}}).apply(a);break;case"api":({apply(t){t.hooks.extendAPI.tap("api",t=>{let{context:r,api:n}=t,o=e.handler(r);n[e.name]=o})}}).apply(a);break;case"event":c.push(e.name),({apply(t){t.hooks.addExtension.tap("event",t=>{let{events:r,extensions:n}=t;n.push(o.tk.updateListener.of(t=>{let n=e.handler(t);n!==s&&r.emit(e.name,n)}))})}}).apply(a);break;case"domEventHandler":c.push(e.name),({apply(t){t.hooks.addExtension.tap("domEventHandler",t=>{let{events:r,extensions:n}=t;n.push(o.tk.domEventHandlers({[e.name]:t=>{r.emit(e.name,t)}}))})}}).apply(a);break;case"extension":({apply(t){t.hooks.addExtension.tap("extension",t=>{let{extensions:r}=t;r.push(e.extension)})}}).apply(a)}}),{render:function(e){let{parent:r,root:n,defaultValue:s}=e,{extensions:a}=e;Array.isArray(a)||(a=[]);let l=f(),c=m(),d=u(e.options,{options:l,events:c}),h=new o.tk({parent:r,root:n,state:i.yy.create({doc:s??"",extensions:[...d,...a]})});return t.provideView(h),v({view:h,options:l,events:c})},getExtensions:u,createAPI:v,createOptions:f,createEvents:m,eventKeys:c}}o.tk.EDIT_CONTEXT=!1},389750:function(e,t,r){r.d(t,{E:()=>g,W:()=>f});var n,o=r(548306),i=r(711294),s=r(138670);function a(){return class extends i.l9{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.cssText=`
      height: 0;
    `,t.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content),"string"==typeof this.content?t.setAttribute("aria-label",`placeholder ${this.content}`):t.setAttribute("aria-hidden","true"),t}coordsAt(e){var t;let r=e.firstChild?3==(t=e.firstChild).nodeType?(function(e,t,r=t){let o=n||(n=document.createRange());return o.setEnd(e,r),o.setStart(e,0),o})(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]:[];if(!r.length)return null;let o=window.getComputedStyle(e.parentNode),i=function(e,t){let r=t?e.left:e.right;return{left:r,right:r,top:e.top,bottom:e.bottom}}(r[0],"rtl"!=o.direction),s=parseInt(o.lineHeight);return i.bottom-i.top>1.5*s?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}}var l=a(),c=s.r$.define({combine:o.wA.Last}),u=i.lg.fromClass(class{constructor(e){this.view=e;let t=e.state.facet(c);this.placeholder=this.getPlaceholder(t)}placeholder;content;update(e){let t=e.view.state.facet(c);this.content!==t&&(this.placeholder=this.getPlaceholder(t),this.content=t)}getPlaceholder(e){return e?i.p.set([i.p.widget({widget:new l(e),side:1}).range(0)]):i.p.none}get decorations(){return this.view.state.doc.length?i.p.none:this.placeholder}},{decorations:e=>e.decorations});function f(e){return[u,c.of(e)]}var d=a(),h=s.r$.define({combine:o.wA.Last}),p=i.lg.fromClass(class{decorations=i.p.none;constructor(e){e.hasFocus?this.decorations=m(e.state):this.decorations=i.p.none}update(e){if(!e.view.hasFocus){this.decorations=i.p.none;return}(e.selectionSet||e.docChanged)&&(this.decorations=m(e.state))}},{decorations:e=>e.decorations});function m(e){let t=e.selection.main.head;if(e.selection.main.empty){let r=e.doc.lineAt(t);if(r&&0===r.length){let t=e.facet(h);return i.p.set([i.p.widget({widget:new d(t),side:1}).range(r.from)])}}return i.p.none}var g=function(e){return[p,h.of(e)]}},638546:function(e,t,r){function n(e,t){let r={...e};for(let e=0;e<t.length;e++){let n=t[e];delete r[n]}return r}r.d(t,{ut:()=>j,U_:()=>g,Hw:()=>H,pt:()=>ee,cl:()=>O,Tz:()=>J,Gk:()=>Z,Cj:()=>x,T9:()=>_,j9:()=>z});var o=r(548306),i=r(711294),s=r(138670),a=r(57483),l=r(6903),c=r(363404),u=r(218364);let f=(0,u.Gv)({"{{ }}":u.pJ.separator}),d=c.WQ.deserialize({version:14,states:"!^QVOPOOO_QQO'#C^OOOO'#Cc'#CcQVOPOOOOQO'#Cd'#CdOgQQO,58xOOOO,58x,58xOOOO-E6a-E6aOOQO-E6b-E6bOOOO1G.d1G.d",stateData:"r~OZOS~ORPOUQO~OSSOTUO~OSSOTXO~OZS~",goto:"jXPPYPPPP^dTQORQRORVRQTPRWT",nodeNames:"âš  Template Interpolation {{ InterpolationContent }} Text",maxTerm:11,nodeProps:[["closedBy",3,"InterpolationEnd"],["openedBy",5,"InterpolationOpen"]],propSources:[f],skippedNodes:[0],repeatNodeCount:2,tokenData:"+hRRkOX!vX^'Y^p!vpq'Yq#o!v#o#p)W#p#q!v#q#r*`#r#y!v#y#z'Y#z$f!v$f$g'Y$g#BY!v#BY#BZ'Y#BZ$IS!v$IS$I_'Y$I_$I|!v$I|$JO'Y$JO$JT!v$JT$JU'Y$JU$KV!v$KV$KW'Y$KW&FU!v&FU&FV'Y&FV;'S!v;'S;=`'S<%lO!vR!}VUPSQO#o!v#o#p#d#p#q!v#q#r%[#r;'S!v;'S;=`'S<%lO!vR#iXSQO#o!v#o#p$U#p#q!v#q#r%[#r;'S!v;'S;=`'S<%l~!v~O!v~~&}Q$ZTSQO#q$U#q#r$j#r;'S$U;'S;=`%P<%lO$UQ$mUO#q$U#r;'S$U;'S;=`%P<%l~$U~O$U~~%VQ%SP;=`<%l$UQ%[OSQR%aXUPO#o!v#o#p#d#p#q!v#q#r%|#r;'S!v;'S;=`'S<%l~!v~O!v~~%VP&RTUPO#o%|#o#p&b#p;'S%|;'S;=`&w<%lO%|P&eUO#o%|#p;'S%|;'S;=`&w<%l~%|~O%|~~&}P&zP;=`<%l%|P'SOUPR'VP;=`<%l!vR'ckUPZQSQOX!vX^'Y^p!vpq'Yq#o!v#o#p#d#p#q!v#q#r%[#r#y!v#y#z'Y#z$f!v$f$g'Y$g#BY!v#BY#BZ'Y#BZ$IS!v$IS$I_'Y$I_$I|!v$I|$JO'Y$JO$JT!v$JT$JU'Y$JU$KV!v$KV$KW'Y$KW&FU!v&FU&FV'Y&FV;'S!v;'S;=`'S<%lO!vR)]XSQO#o!v#o#p)x#p#q!v#q#r%[#r;'S!v;'S;=`'S<%l~!v~O!v~~&}R*PTRPSQO#q$U#q#r$j#r;'S$U;'S;=`%P<%lO$UR*eXUPO#o!v#o#p#d#p#q!v#q#r+Q#r;'S!v;'S;=`'S<%l~!v~O!v~~%VR+XTTQUPO#o%|#o#p&b#p;'S%|;'S;=`&w<%lO%|",tokenizers:[0,1],topRules:{Template:[0,1]},tokenPrec:31});var h=(0,i.EY)({above:!1,markers:e=>(function(e,t){let r=[];return e.forEach(e=>{let n=t.doc.lineAt(e.from),o=t.doc.lineAt(e.to);if(n.number!==o.number){let i=[],s=e.from;for(let r=n.number;r<o.number;r++){let n=t.doc.line(r);i.push({from:s,to:n.to,className:e.className}),s=n.to+1}i.push({from:s,to:e.to,className:e.className}),r.push(...i)}else r.push(e)}),r})(function(e){let t=[];return(function(e){let t=new Map;return e.forEach(e=>{t.has(e.className)||t.set(e.className,[]),t.get(e.className).push(e)}),t})(e).forEach((e,r)=>{let n=function(e){let t=[],r=e.map(e=>({start:e.from,end:e.to}));r.sort((e,t)=>e.start-t.start);let n=r[0];for(let e=1;e<r.length;e++){let o=r[e];o.start<=n.end?n.end=Math.max(n.end,o.end):(t.push(n),n=o)}return t.push(n),t}(e);t.push(...n.map(e=>({from:e.start,to:e.end,className:r})))}),t}(e.state.facet(p).reduce((t,r)=>[...t,...r(e)],[])),e.state).map(t=>i.dc.forRange(e,t.className,s.jT.range(t.from,t.to))).reduce((e,t)=>[...e,...t],[]),update:e=>e.focusChanged||e.docChanged||e.selectionSet||e.viewportChanged||e.startState.facet(p)!==e.state.facet(p),class:"cm-backgroundDecoratorLayer"}),p=s.r$.define({enables:[h]}),m=s.Py.define();function g(e){e.dispatch({effects:m.of(null)})}var v=new Map;function w(e,t){let r=e.facet(b)??[],a=t.cursor(),l={highest:i.p.none,high:i.p.none,default:i.p.none,low:i.p.none,lowest:i.p.none},c=s.Xs.empty,u=[],f=e.doc.length;return(0,o.oO)(a,0,f,t=>{r.forEach(r=>{let o=r(t,e),s=[];Array.isArray(o)?s=o:o&&(s=[o]),s.forEach(e=>{let r=function(e,t,{decorations:r,backgroundDecorations:o,atomicRanges:s}){if(!t)return;let a=t.from??e.from,l=t.to??e.to,c=["type","from","to","atomicRange"],u=null;switch(t.type){case"className":var f;u=a===l?null:(f=t.className,!v.has(f)&&v.set(f,i.p.mark({class:f})),v.get(f)).range(a,l);break;case"replace":u=i.p.replace(n(t,c)).range(a,l);break;case"widget":u=i.p.widget(n(t,c)).range(a);break;case"background":o.push({from:t.from??e.from,to:t.to??e.to,className:t.className})}if(u){let e="className"===t.type?t.prec??"default":"default";r[e]&&(r[e]=r[e].update({add:[u],sort:!0}))}return"background"!==t.type&&u&&!0===t.atomicRange&&(s=s.update({add:[u],sort:!0})),{decorations:r,backgroundDecorations:o,atomicRanges:s}}(t,e,{decorations:l,backgroundDecorations:u,atomicRanges:c});r&&(u=r.backgroundDecorations,c=r.atomicRanges)})})}),{decorations:l,atomicRanges:c,backgroundDecorations:u}}var y=s.QQ.define({create:e=>w(e,(0,a.qz)(e)),update(e,t){let r=(0,a.qz)(t.state),n=t.effects.some(e=>e.is(m));return((0,a.qz)(t.startState)!==r||n)&&(e=w(t.state,r)),e},provide:e=>[s.Wl.highest(i.tk.decorations.compute([e],t=>t.field(e).decorations.highest)),s.Wl.high(i.tk.decorations.compute([e],t=>t.field(e).decorations.high)),s.Wl.default(i.tk.decorations.compute([e],t=>t.field(e).decorations.default)),s.Wl.low(i.tk.decorations.compute([e],t=>t.field(e).decorations.low)),s.Wl.lowest(i.tk.decorations.compute([e],t=>t.field(e).decorations.lowest)),i.tk.atomicRanges.of(t=>t.state.field(e).atomicRanges),p.of(t=>t.state.field(e).backgroundDecorations)]}),b=s.r$.define({enables:[y,h]}),C=class{constructor(e){this.view=e}classNameDecorationCache=new Map;decorations=i.p.none;backgroundDecorations=[];getClassDecoration(e){return this.classNameDecorationCache.has(e)||this.classNameDecorationCache.set(e,i.p.mark({class:e})),this.classNameDecorationCache.get(e)}update(e){if(e.focusChanged&&e.view.hasFocus||!e.startState.selection.eq(e.state.selection)){let t=(0,a.qz)(e.state),r=e.state.selection.main.head,n=e.state.facet(k),o=t.cursorAt(r,0),i=new s.f_,l=[];do n.forEach(t=>{let r,n=t(o,e.state);if(n){switch(n.type){case"className":r=this.getClassDecoration(n.className);break;case"background":l.push({from:n.from??o.from,to:n.to??o.to,className:n.className})}r&&i.add(n.from??o.from,n.to??o.to,r)}});while(o.parent());this.decorations=i.finish(),this.backgroundDecorations=l}e.focusChanged&&!e.view.hasFocus&&(this.decorations=i.p.none,this.backgroundDecorations=[])}},k=s.r$.define({enables:[i.lg.fromClass(C,{decorations:e=>e.decorations,provide:e=>[p.of(t=>{var r;return(null==(r=t.plugin(e))?void 0:r.backgroundDecorations)??[]})]})]}),x={whole:b,fromCursor:k};function S(e){let t=(0,a.qz)(e);console.groupCollapsed("Syntax Tree");let r=t.cursor();(0,o.oO)(r,0,t.length,t=>{console.group(`%c${t.name}(${t.from}:${t.to})`,"color: purple;"),console.log(e.sliceDoc(t.from,t.to)),console.groupEnd()}),console.groupEnd()}i.lg.fromClass(class{constructor(e){S(e.state)}update(e){e.docChanged&&S(e.state)}});var O=i.$f.of([{key:"ArrowLeft",run(e){let t=e.state.selection.main;if(!t.empty)return!1;let r=!1,n=t.from;for(let t of e.docView.children){for(let e of t.children)e.isWidget&&e.widget instanceof $&&e.posAtEnd===n&&(e.widget.focus(1),r=!0);if(r)break}return r}},{key:"ArrowRight",run(e){let t=e.state.selection.main;if(!t.empty)return!1;let r=!1,n=t.from;for(let t of e.docView.children){for(let e of t.children)if(e.isWidget&&e.widget instanceof $&&e.posAtStart===n){e.widget.focus(-1),r=!0;break}if(r)break}return r}}]),$=class extends i.l9{};function E(e,t){for(let r of e)if(t>=r.from&&t<=r.to)return r}var R=i.lg.fromClass(class{lastFocus=!1;constructor(e){this.lastFocus=e.hasFocus}update(e){let t=e.state.facet(T)??"select";if(e.transactions.some(e=>e.isUserEvent(t))){let t=this.lastFocus,r=e.startState.selection,{selection:n}=e.state,i=e.state.facet(M),a=function(e){if(0===e.length)return[];let t=[],r=e.map(e=>({from:e.from,to:e.to}));r.sort((e,t)=>e.from-t.from);let n=r[0];for(let e=1;e<r.length;e++){let o=r[e];o.from<=n.to?n.to=Math.max(n.to,o.to):(t.push(n),n=o)}return n&&t.push(n),t}((0,o.xH)(i.map(t=>t(e.view.state))).filter(Boolean)),l=E(a,n.main.from);n.main.empty&&l&&(!t||E(a,r.main.from)!==l||E(a,r.main.to)!==l)&&queueMicrotask(()=>{e.view.dispatch({selection:n.replaceRange(s.jT.range(l.from,l.to))})})}this.lastFocus!==e.view.hasFocus&&(this.lastFocus=e.view.hasFocus)}}),M=s.r$.define({enables:R}),T=s.r$.define({combine:o.wA.Last}),P=s.yy.transactionFilter.of(e=>{if(e.docChanged||e.newSelection.eq(e.startState.selection))return e;let t=e.startState.facet(N),r=(0,o.xH)(t.map(t=>t(e.startState))),{newSelection:n}=e;return n.ranges.forEach((e,t)=>{for(let i of r)if((0,o.A9)(e,i.source)){let r=e.head<e.anchor,o=Math.min(e.from,i.target.from),a=Math.max(e.to,i.target.to),l=r?s.jT.range(a,o,e.goalColumn,e.bidiLevel??void 0):s.jT.range(o,a,e.goalColumn,e.bidiLevel??void 0);n=n.replaceRange(l,t)}}),[e,{selection:n}]}),N=s.r$.define({enables:P}),A=s.yy.transactionFilter.of(e=>{let t=e.startState.facet(D),r=(0,o.xH)(t.map(t=>t(e.startState))),{length:n}=e.startState.doc,i=s.as.empty(n);e.changes.iterChanges((e,t,a,l)=>{if(a===l){for(let a of r)if((0,o.A9)({from:e,to:t},a.source)){let e=s.as.of([{...a.target,insert:""}],n);i=i.compose(e.map(i))}}});let a=i.map(e.changes);return a.empty?e:[e,{changes:a,sequential:!0}]}),D=s.r$.define({enables:A}),q="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),H=e=>{let t=(e??[]).map(({type:e,triggerCharacter:t,handler:r})=>{if("character"===e)return i.tk.inputHandler.of((e,n,o,i)=>{if((q?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let s=e.state.selection.main;return i===t&&n===s.from&&o===s.to&&r({view:e,state:e.state,from:n,to:o})})}).filter(e=>!!e);return s.Wl.high(t)};function j({name:e,outerLanguage:t,innerLanguage:r}){return a.qp.define({name:e,parser:d.configure({wrap:(0,l.FE)(e=>t&&e.type.isTop?{parser:t.parser,overlay:e=>"Text"===e.type.name}:r&&"InterpolationContent"===e.name?{parser:r.parser}:null)})})}var F=/^\s*/,L=e=>e.match(F)[0].length,U=i.p.mark({class:"cm-indentation-guide"}),Q=(function(e,t,r=1){if(null==t&&(t=e,e=0),!Number.isInteger(r)||0===r)throw Error("The step value must be a non-zero integer.");let n=Math.max(Math.ceil((t-e)/r),0),o=Array(n);for(let t=0;t<n;t++)o[t]=e+t*r;return o})(20).map(e=>i.p.line({class:`cm-indentation-level-${e}`})),I=class e extends i.l9{constructor(e){super(),this.indents=e}static create(t){return i.p.widget({widget:new e(t),side:1})}toDOM(){let e=document.createElement("span");for(let t of(e.className="cm-indentation-widget",this.indents)){let r=e.appendChild(document.createElement("span"));r.className="cm-indentation-guide",r.textContent=" ",e.append(" ".repeat(t-1))}return e}};function V(e,t,r,n,o){o.add(e,e,Q[r/n]);for(let i=e;i<Math.min(e+r,t);i+=n)o.add(i,i+1,U)}function Y(e){let t=new s.f_,r=Number(e.state.tabSize),{doc:n}=e.state,o=[],i=0;for(let{from:s,to:a}of e.visibleRanges){let e,l,c,u,f=s-1;for(;(e=f+1)<=a;){({from:l,to:f,length:c,text:u}=n.lineAt(e));let s=L(u),a=s===c,d=0===s,h="/"===u[s];if(a){o.push({from:l,to:f});continue}if(d){o.length=0;continue}let p=Math.ceil(s/r)*r;for(let{from:e,to:n}of(h||(i=p),o))V(e,n,i,r,t),0==n-e&&(r>2?t.add(n,n,I.create([r])):t.add(n,n,I.create([2,2*r])));o.length=0,V(l,f,p,r,t)}}return t.finish()}i.lg.fromClass(class{decorations;constructor(e){this.decorations=Y(e)}update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=Y(e.view))}},{decorations:e=>e.decorations}),i.tk.baseTheme({".cm-line":{paddingLeft:0,marginLeft:"2px"},".cm-indentation-guide":{position:"relative"},".cm-indentation-guide:after":{position:"absolute",content:"''",right:"0.9ch",height:"1.4em",borderLeft:"1px solid rgba(28, 31, 35, .08)"},...(e=>{let t=-1,r=null==e?0:e.length,n={};for(;++t<r;){let r=e[t];n[r[0]]=r[1]}return n})(Q.map((e,t)=>[`.cm-indentation-level-${t}`,{textIndent:`-${2*t}ch`,paddingLeft:`${2*t}ch`}]))});var B=class{constructor(e,t,r){this.lineNumber=e,this.contentHeight=t,this.scrollHeight=r}draw(){let e=document.createElement("div");return e.className="cm-empty-scroll-block-maker",this.adjust(e),e}update(e,t){return t.lineNumber===this.lineNumber&&t.contentHeight===this.contentHeight&&t.scrollHeight===this.scrollHeight}adjust(e){e.style.display="block",e.style.width="1px",this.lineNumber>1?e.style.height=`calc(${"number"==typeof this.scrollHeight?`${this.scrollHeight}px`:"100%"} + ${this.contentHeight}px)`:e.style.height="0"}eq(e){return this.lineNumber===e.lineNumber&&this.contentHeight===e.contentHeight&&this.scrollHeight===e.scrollHeight}},z=e=>[(0,i.EY)({above:!1,updateOnDocViewUpdate:!0,class:"cm-empty-marker-layer",update:e=>e.state.doc.lines!==e.startState.doc.lines,markers:t=>[new B(t.state.doc.lines,t.contentHeight,e)]}),i.tk.theme({"& .cm-empty-marker-layer":{height:"100%"}})],X={"(":")","{":"}","[":"]",")":"(","}":"{","]":"["},W=(e,t)=>{try{let r=e.doc.toString(),n=[],o=-1,i=-1;for(let e=t-1;e>=0;e--){let t=r[e];if(X[t])if([")","}","]"].includes(t))n.push(t);else{if(0===n.length){o=e;break}let r=n.pop();if(X[t]!==r)return null}}n=[];for(let e=t;e<r.length;e++){let t=r[e];if(X[t])if(["(","{","["].includes(t))n.push(t);else{if(0===n.length){i=e;break}let r=n.pop();if(X[t]!==r)return null}}if(-1!==o&&-1!==i)return[o,i];return null}catch(e){return console.error("findMatchingBracket failed",e),null}},G=e=>{let t=[];return t.push(i.p.mark({class:"cm-matchingBracket"}).range(e,e+1)),t},_=[s.QQ.define({create:()=>i.p.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let r=[];for(let e of t.state.selection.ranges){if(!e.empty)continue;let n=W(t.state,e.head);n&&(r=r.concat(G(n[0]),G(n[1])))}return i.p.set(r,!0)},provide:e=>i.tk.decorations.from(e)})],J=[i.lg.fromClass(class{decorations;constructor(e){this.decorations=this.getBracketDecorations(e)}update(e){(e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.getBracketDecorations(e.view))}getBracketDecorations(e){let{doc:t}=e.state,r=[],n=[],o=["Comment","String"],s=(0,a.qz)(e.state);for(let e=0;e<t.length;e+=1){let a=t.sliceString(e,e+1),l=s.resolveInner(e);if(!o.includes(l.type.name)){if("("===a||"["===a||"{"===a)n.push({type:a,from:e});else if(")"===a||"]"===a||"}"===a){let t=n.pop();if(t&&t.type===this.getMatchingBracket(a)){let o=n.length%3;r.push(i.p.mark({class:`colorization-bracket-${o}`}).range(t.from,t.from+1),i.p.mark({class:`colorization-bracket-${o}`}).range(e,e+1))}}}}return r.sort((e,t)=>e.from-t.from||e.startSide-t.startSide),i.p.set(r)}getMatchingBracket(e){switch(e){case")":return"(";case"]":return"[";case"}":return"{";default:return null}}},{decorations:e=>e.decorations}),i.tk.baseTheme({".colorization-bracket-0":{color:"#ffd700"},".colorization-bracket-0 > span":{color:"#ffd700"},".colorization-bracket-1":{color:"#da70d6"},".colorization-bracket-1 > span":{color:"#da70d6"},".colorization-bracket-2":{color:"#179fff"},".colorization-bracket-2 > span":{color:"#179fff"}})],Z=s.r$.define(),K=class{constructor(e,t){this.dom=e,this.rect=t}eq(e){return!!((!this.rect&&!e.rect||this.rect&&e.rect&&this.rect.left===e.rect.left&&this.rect.top===e.rect.top&&this.rect.width===e.rect.width&&this.rect.height===e.rect.height)&&this.dom===e.dom)}draw(){return this.adjust(this.dom),this.dom}update(){return this.adjust(this.dom),!0}adjust(e){e.style.pointerEvents="none",this.rect&&(e.style.left=`${this.rect.left}px`,e.style.top=`${this.rect.top}px`,e.style.width=`${this.rect.width}px`,e.style.height=`${this.rect.height}px`)}},ee=(0,i.EY)({above:!0,markers(e){let t=e.state.facet(Z);if(!t||0===t.length)return[];let r=function(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection===i.Nm.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}(e),n=[],o=[];for(let{dom:i,pos:s}of t){if(!i)continue;let t=-1;"function"==typeof s?t=s(e):"number"==typeof s?t=s:"head"===s?t=e.state.selection.main.head:"anchor"===s&&(t=e.state.selection.main.anchor);let a=e.coordsAtPos(t);if(a){n.push(a);let e=a.left-r.left-.5,t=a.top-r.top,s=a.bottom-a.top;o.push(new K(i,{left:e,top:t,width:1,height:s}))}else o.push(new K(i))}return o},update:e=>e.docChanged||e.selectionSet||e.viewportChanged||e.startState.facet(Z)!==e.state.facet(Z),class:"cm-positionReferenceLayer"}),et=new Map;s.r$.define({combine(e){let t=new s.f_;for(let r of function(e){let t=[];return(function(e){let t=new Map;return e.forEach(e=>{t.has(e.className)||t.set(e.className,[]),t.get(e.className).push(e)}),t})(e).forEach((e,r)=>{let n=function(e){let t=[],r=e.map(e=>({start:e.from,end:e.to}));r.sort((e,t)=>e.start-t.start);let n=r[0];for(let e=1;e<r.length;e++){let o=r[e];o.start<=n.end?n.end=Math.max(n.end,o.end):(t.push(n),n=o)}return t.push(n),t}(e);t.push(...n.map(e=>({from:e.start,to:e.end,className:r})))}),t.sort((e,t)=>e.from-t.from),t}(e.reduce((e,t)=>[...e,...t],[]))){let e=function(e){if(!et.has(e)){let t=i.p.mark({class:e});et.set(e,t)}return et.get(e)}(r.className);t.add(r.from,r.to,e)}return t.finish()},enables:e=>i.tk.decorations.compute([e],t=>t.facet(e))});var er=[s.yy.changeFilter.of(e=>{let t=e.startState.facet(en).reduce((t,r)=>[...t,...r(e.startState)],[]);return!Array.isArray(t)||t.reduce((e,t)=>[...e,t.from,t.to],[])}),s.yy.transactionFilter.of(e=>{let t=e.startState.doc.length,r=e.startState.facet(en).reduce((t,r)=>[...t,...r(e.state)],[]).filter(e=>e.from>=0&&e.from<t&&e.to>=0&&e.to<t),{newSelection:n}=e;return(n.ranges.forEach((e,t)=>{for(let i of r)if(e.empty&&e.from>i.from&&e.to<i.to&&(n=n.replaceRange(s.jT.cursor(e.assoc>0?i.from:i.to,e.assoc),t)),!e.empty&&(0,o.A9)(e,i)){let r=e.head<e.anchor;e.anchor<i.from?n=n.replaceRange(s.jT.range(e.anchor,i.from,e.goalColumn,e.bidiLevel??void 0),t):e.anchor>i.to?n=n.replaceRange(s.jT.range(e.anchor,i.to,e.goalColumn,e.bidiLevel??void 0),t):e.anchor>=i.from&&e.anchor<=i.to&&(n=r?n.replaceRange(s.jT.range(i.from,Math.min(e.head,i.from),e.goalColumn,e.bidiLevel??void 0),t):n.replaceRange(s.jT.range(i.to,Math.max(e.head,i.to),e.goalColumn,e.bidiLevel??void 0),t))}}),n.eq(e.newSelection))?e:[e,{selection:n}]})],en=s.r$.define({enables:()=>er})},329193:function(e,t,r){r.d(t,{m4:()=>ei,Iq:()=>I,GH:()=>ee,pf:()=>es});var n=r(908600);let o=Math.min,i=Math.max,s=Math.round,a=Math.floor,l=e=>({x:e,y:e});function c(){return"undefined"!=typeof window}function u(e){return h(e)?(e.nodeName||"").toLowerCase():"#document"}function f(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function d(e){var t;return null==(t=(h(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function h(e){return!!c()&&(e instanceof Node||e instanceof f(e).Node)}function p(e){return!!c()&&(e instanceof Element||e instanceof f(e).Element)}function m(e){return!!c()&&(e instanceof HTMLElement||e instanceof f(e).HTMLElement)}function g(e){return!!c()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof f(e).ShadowRoot)}let v=new Set(["inline","contents"]);function w(e){let{overflow:t,overflowX:r,overflowY:n,display:o}=b(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!v.has(o)}let y=new Set(["html","body","#document"]);function b(e){return f(e).getComputedStyle(e)}function C(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let o=function e(t){let r=function(e){if("html"===u(e))return e;let t=e.assignedSlot||e.parentNode||g(e)&&e.host||d(e);return g(t)?t.host:t}(t);return y.has(u(r))?t.ownerDocument?t.ownerDocument.body:t.body:m(r)&&w(r)?r:e(r)}(e),i=o===(null==(n=e.ownerDocument)?void 0:n.body),s=f(o);if(i){let e=k(s);return t.concat(s,s.visualViewport||[],w(o)?o:[],e&&r?C(e):[])}return t.concat(o,C(o,[],r))}function k(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function x(e){return p(e)?e:e.contextElement}function S(e){let t=x(e);if(!m(t))return l(1);let r=t.getBoundingClientRect(),{width:n,height:o,$:i}=function(e){let t=b(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,o=m(e),i=o?e.offsetWidth:r,a=o?e.offsetHeight:n,l=s(r)!==i||s(n)!==a;return l&&(r=i,n=a),{width:r,height:n,$:l}}(t),a=(i?s(r.width):r.width)/n,c=(i?s(r.height):r.height)/o;return a&&Number.isFinite(a)||(a=1),c&&Number.isFinite(c)||(c=1),{x:a,y:c}}let O=l(0);function $(e,t,r,n){var o;void 0===t&&(t=!1),void 0===r&&(r=!1);let i=e.getBoundingClientRect(),s=x(e),a=l(1);t&&(n?p(n)&&(a=S(n)):a=S(e));let c=(void 0===(o=r)&&(o=!1),n&&(!o||n===f(s))&&o)?function(e){let t=f(e);return"undefined"!=typeof CSS&&CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:O}(s):l(0),u=(i.left+c.x)/a.x,d=(i.top+c.y)/a.y,h=i.width/a.x,m=i.height/a.y;if(s){let e=f(s),t=n&&p(n)?f(n):n,r=e,o=k(r);for(;o&&n&&t!==r;){let e=S(o),t=o.getBoundingClientRect(),n=b(o),i=t.left+(o.clientLeft+parseFloat(n.paddingLeft))*e.x,s=t.top+(o.clientTop+parseFloat(n.paddingTop))*e.y;u*=e.x,d*=e.y,h*=e.x,m*=e.y,u+=i,d+=s,o=k(r=f(o))}}let{x:g,y:v,width:w,height:y}={width:h,height:m,x:u,y:d};return{width:w,height:y,top:v,left:g,right:g+w,bottom:v+y,x:g,y:v}}function E(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function R(e,t,r,n){let s;void 0===n&&(n={});let{ancestorScroll:l=!0,ancestorResize:c=!0,elementResize:u="function"==typeof ResizeObserver,layoutShift:f="function"==typeof IntersectionObserver,animationFrame:h=!1}=n,p=x(e),m=l||c?[...p?C(p):[],...C(t)]:[];m.forEach(e=>{l&&e.addEventListener("scroll",r,{passive:!0}),c&&e.addEventListener("resize",r)});let g=p&&f?function(e,t){let r,n=null,s=d(e);function l(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return!function c(u,f){void 0===u&&(u=!1),void 0===f&&(f=1),l();let d=e.getBoundingClientRect(),{left:h,top:p,width:m,height:g}=d;if(u||t(),!m||!g)return;let v=a(p),w=a(s.clientWidth-(h+m)),y={rootMargin:-v+"px "+-w+"px "+-a(s.clientHeight-(p+g))+"px "+-a(h)+"px",threshold:i(0,o(1,f))||1},b=!0;function C(t){let n=t[0].intersectionRatio;if(n!==f){if(!b)return c();n?c(!1,n):r=setTimeout(()=>{c(!1,1e-7)},1e3)}1!==n||E(d,e.getBoundingClientRect())||c(),b=!1}try{n=new IntersectionObserver(C,{...y,root:s.ownerDocument})}catch(e){n=new IntersectionObserver(C,y)}n.observe(e)}(!0),l}(p,r):null,v=-1,w=null;u&&(w=new ResizeObserver(e=>{let[n]=e;n&&n.target===p&&w&&(w.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var e;null==(e=w)||e.observe(t)})),r()}),p&&!h&&w.observe(p),w.observe(t));let y=h?$(e):null;return h&&function t(){let n=$(e);y&&!E(y,n)&&r(),y=n,s=requestAnimationFrame(t)}(),r(),()=>{var e;m.forEach(e=>{l&&e.removeEventListener("scroll",r),c&&e.removeEventListener("resize",r)}),null==g||g(),null==(e=w)||e.disconnect(),w=null,h&&cancelAnimationFrame(s)}}var M=r(855868),T=r(638546),P=r(89802);r(525390);var N=r(138670),A=r(711294);let D=0;function q(e){return e(this)}function H(e,t,r){return t(this,"function"==typeof r?r(e(this)):r)}function j(e,t=[]){let r=(0,M.G6)();(0,n.useLayoutEffect)(()=>e(r),[r,...t])}function F(e="div"){let[t]=(0,n.useState)(()=>document.createElement(e));return t}function L(e){let t=(0,n.useRef)(e);return t.current=e,t}r(669462),N.Py.define({map:(e,t)=>e.map(({from:e,to:r,...n})=>({from:t.mapPos(e),to:t.mapPos(r),...n}))}),N.Py.define(),N.Py.define(),N.r$.define(),N.QQ.define({create:e=>e.doc,update:(e,t)=>(t.docChanged&&(e=t.state.doc),e)}),N.r$.define(),N.QQ.define({create:e=>e.doc,update:(e,t)=>(t.docChanged&&(e=t.state.doc),e)}),N.r$.define(),N.r$.define();var U=r(389750),Q=r(548306);(0,n.forwardRef)(function({side:e,onChange:t,onVisibleChange:r},o){let i=(0,M.G6)(),s=(0,M.jE)(),[a]=(0,n.useState)(()=>document.createElement("div")),l=(0,n.useRef)(a);l.current=a;let c=(0,n.useRef)(t);c.current=t;let u=(0,n.useRef)(r);return u.current=r,(0,n.useImperativeHandle)(o,()=>l.current),(0,n.useLayoutEffect)(()=>i.inject([T.Gk.of({dom:l.current,pos:e}),T.pt]),[i,e]),(0,n.useEffect)(()=>{let e=document.createElement("div");document.body.appendChild(e);let t=R(l.current,e,()=>{"function"==typeof c.current&&c.current()},{animationFrame:!0});return()=>{document.body.removeChild(e),t()}},[]),(0,n.useEffect)(()=>{if(!s)return;let e=new IntersectionObserver(e=>{e.forEach(e=>{"function"==typeof u.current&&u.current(e.isIntersecting)})},{root:s.$view.scrollDOM,threshold:0});return e.observe(l.current),()=>{e.disconnect()}},[s]),null});var I=(0,n.forwardRef)(function({position:e,onChange:t,onVisibleChange:r},o){let i=(0,M.G6)(),s=(0,M.jE)(),[a]=(0,n.useState)(()=>{let e=document.createElement("div");return e.classList.add("cm-position-mirror"),e}),l=(0,n.useRef)(a);l.current=a;let c=(0,n.useRef)(t);c.current=t;let u=(0,n.useRef)(r);return u.current=r,(0,n.useImperativeHandle)(o,()=>l.current),(0,n.useLayoutEffect)(()=>i.inject([T.Gk.of({dom:l.current,pos:e}),T.pt]),[i,e]),(0,n.useEffect)(()=>{let e=document.createElement("div");document.body.appendChild(e);let t=R(l.current,e,()=>{"function"==typeof c.current&&c.current()},{animationFrame:!0});return()=>{document.body.removeChild(e),t()}},[]),(0,n.useEffect)(()=>{if(!s)return;let e=new IntersectionObserver(e=>{e.forEach(e=>{"function"==typeof u.current&&u.current(e.isIntersecting)})},{root:s.$view.scrollDOM,threshold:0});return e.observe(l.current),()=>{e.disconnect()}},[s]),null}),V=class extends N.uU{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}elementClass;destroy(e){}};V.prototype.elementClass="",V.prototype.toDOM=void 0,V.prototype.mapMode=N.gc.TrackBefore,V.prototype.startSide=V.prototype.endSide=-1,V.prototype.point=!0;var Y=N.r$.define(),B=N.r$.define(),z=N.r$.define(),X=N.r$.define({combine:e=>e.some(e=>e)});function W(e){return Array.isArray(e)?e:[e]}function G(e,t,r){for(;e.value&&e.from<=r;)e.from==r&&t.push(e.value),e.next()}A.lg.fromClass(class{constructor(e){for(let t of(this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(z).map(t=>new J(e,t)),this.gutters))this.dom.appendChild(t.dom);this.fixed=!e.state.facet(X),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.appendChild(this.dom)}gutters;dom;fixed;prevViewport;update(e){if(this.updateGutters(e)){let t=this.prevViewport,r=e.view.viewport,n=Math.min(t.to,r.to)-Math.max(t.from,r.from);this.syncGutters(n<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(X)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.previousSibling;e&&this.dom.remove();let r=N.Xs.iter(this.view.state.facet(Y),this.view.viewport.from),n=[],o=this.gutters.map(e=>new _(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(e.type)){let t=!0;for(let i of e.type)if(i.type==A.kH.Text&&t){for(let e of(G(r,n,i.from),o))e.line(this.view,i,n);t=!1}else if(i.widget)for(let e of o)e.widget(this.view,i)}else if(e.type==A.kH.Text)for(let t of(G(r,n,e.from),o))t.line(this.view,e,n);else if(e.widget)for(let t of o)t.widget(this.view,e);for(let e of o)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,(null==t?void 0:t.nextSibling)??null)}updateGutters(e){let t=e.startState.facet(z),r=e.state.facet(z),n=e.docChanged||e.heightChanged||e.viewportChanged||!N.Xs.eq(e.startState.facet(Y),e.state.facet(Y),e.view.viewport.from,e.view.viewport.to);if(t==r)for(let t of this.gutters)t.update(e)&&(n=!0);else{n=!0;let o=[];for(let n of r){let r=t.indexOf(n);r<0?o.push(new J(this.view,n)):(this.gutters[r].update(e),o.push(this.gutters[r]))}for(let e of this.gutters)e.dom.remove(),0>o.indexOf(e)&&e.destroy();for(let e of o)this.dom.appendChild(e.dom);this.gutters=o}return n}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>A.tk.scrollMargins.of(t=>{let r=t.plugin(e);return r&&0!=r.gutters.length&&r.fixed?t.textDirection==A.Nm.LTR?{left:r.dom.offsetWidth*t.scaleX}:{right:r.dom.offsetWidth*t.scaleX}:null})});var _=class{constructor(e,t,r){this.gutter=e,this.height=r,this.cursor=N.Xs.iter(e.markers,t.from)}cursor;i=0;addElement(e,t,r){let{gutter:n}=this,o=(t.top-this.height)/e.scaleY,i=t.height/e.scaleY;if(this.i==n.elements.length){let t=new Z(e,i,o,r);n.elements.push(t),n.dom.appendChild(t.dom)}else n.elements[this.i].update(e,i,o,r);this.height=t.bottom,this.i++}line(e,t,r){let n=[];G(this.cursor,n,t.from),r.length&&(n=n.concat(r));let o=this.gutter.config.lineMarker(e,t,n);o&&n.unshift(o);let i=this.gutter;(0!=n.length||i.config.renderEmptyElements)&&this.addElement(e,t,n)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),n=r?[r]:null;for(let r of e.state.facet(B)){let o=r(e,t.widget,t);o&&(n||(n=[])).push(o)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}},J=class{constructor(e,t){for(let r in this.view=e,this.config=t,this.dom=document.createElement("div"),this.dom.className="cm-right-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)this.dom.addEventListener(r,n=>{let o=n.target,i;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let e=o.getBoundingClientRect();i=(e.top+e.bottom)/2}else i=n.clientY;let s=e.lineBlockAtHeight(i-e.documentTop);t.domEventHandlers[r](e,s,n)&&n.preventDefault()});this.markers=W(t.markers(e)),t.initialSpacer&&(this.spacer=new Z(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}dom;elements=[];markers;spacer=null;update(e){let t=this.markers;if(this.markers=W(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let r=e.view.viewport;return!N.Xs.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}},Z=class{dom;height=-1;above=0;markers=[];constructor(e,t,r,n){this.dom=document.createElement("div"),this.dom.className="cm-rightGutterElement",this.update(e,t,r,n)}update(e,t,r,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),!function(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].compare(t[r]))return!1;return!0}(this.markers,n)&&this.setMarkers(e,n)}setMarkers(e,t){let r="cm-rightGutterElement",n=this.dom.firstChild;for(let o=0,i=0;;){let s=i,a=o<t.length?t[o++]:null,l=!1;if(a){let e=a.elementClass;e&&(r+=" "+e);for(let e=i;e<this.markers.length;e++)if(this.markers[e].compare(a)){s=e,l=!0;break}}else s=this.markers.length;for(;i<s;){let e=this.markers[i++];if(e.toDOM){e.destroy(n);let t=n.nextSibling;n.remove(),n=t}}if(!a)break;a.toDOM&&(l?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),l&&i++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}},K=new class extends V{elementClass="cm-activeLineRightGutter"};function ee({children:e}){let t=F("span");return j(e=>e.inject([(0,U.E)(()=>t)]),[]),(0,P.createPortal)(e,t)}Y.compute(["selection"],e=>{let t=[],r=-1;for(let n of e.selection.ranges){let o=e.doc.lineAt(n.head).from;o>r&&(r=o,t.push(K.range(o)))}return N.Xs.of(t)}),function(e,t){let r=`atom${++D}`,n={toString(){return this.debugLabel?r+":"+this.debugLabel:r}};"function"==typeof e?n.read=e:(n.init=e,n.read=q,n.write=H)}(N.r$.define()),(0,n.forwardRef)(({element:e},t)=>{let r=L(e);return(0,n.useImperativeHandle)(t,()=>r.current),null}).displayName="RefElement",N.Py.define();function et(e){return"function"==typeof e.trigger}var er=/^[\u4e00-\u9fa5a-zA-Z0-9_']*$/;function en(e){return er.test(e)}var eo=N.r$.define();function ei(e){for(let t of e.facet(eo)){let r=e.field(t,!1);if(r&&r.triggerContext&&"number"==typeof r.triggerContext.from&&"number"==typeof r.triggerContext.to)return{from:r.triggerContext.from,to:r.triggerContext.to}}}function es(e){let t=L(e);return j(r=>{let n={search:e.search,onOpenChange(...e){if("function"==typeof t.current.onOpenChange)return t.current.onOpenChange(...e)},onSearch(...e){if("function"==typeof t.current.onSearch)return t.current.onSearch(...e)},onTrigger(...e){if("function"==typeof t.current.onTrigger)return t.current.onTrigger(...e)}};return r.inject([function(e){let t=N.r$.define({combine:Q.wA.Last}),r=N.QQ.define({create:()=>({show:!1,triggerContext:void 0}),update(e,r){let n,o=r.startState.facet(t),{search:i=!0,onOpenChange:s,onSearch:a,onTrigger:l}=o,{show:c}=e;r.docChanged&&(Array.isArray(o.triggerCharacters)?r.changes.iterChanges((e,t,i,s,a)=>{let l=a.toString();e===t&&o.triggerCharacters.includes(l)&&(n={from:i,to:s,triggerCharacter:l,cursorPosition:r.state.selection.main.head})}):et(o)&&(n=o.trigger(r)),n&&"function"==typeof l&&l({triggerContext:{from:n.from,to:n.to,triggerCharacter:n.triggerCharacter}}));let u=r.isUserEvent("select"),f={show:e.show,triggerContext:e.triggerContext?{...e.triggerContext}:void 0};if(n)f.triggerContext=n,c=!0,"function"==typeof a&&a({value:""});else if(r.docChanged&&e.triggerContext&&i){if(f.triggerContext){let t=r.changes.mapPos(e.triggerContext.from,1,N.gc.TrackAfter),n=r.changes.mapPos(e.triggerContext.to,1,N.gc.Simple);"number"==typeof t&&"number"==typeof n?(f.triggerContext.from=t,f.triggerContext.to=n):c=!1}if(!0===c){let t="object"==typeof i?i.validFor:en,n=e.triggerContext.cursorPosition,o=r.state.selection.main.head;if(o>=n){let e=r.state.sliceDoc(n,o);t(e,n,o,r.state)?(c=!0,"function"==typeof a&&a({value:e})):c=!1}else c=!1}}else u&&(c=!1);return!1===c&&(f.triggerContext=void 0),c!==e.show&&(f.show=c,"function"==typeof s&&s({value:c,state:r.state,triggerContext:f.triggerContext?{from:f.triggerContext.from,to:f.triggerContext.to,triggerCharacter:f.triggerContext.triggerCharacter}:void 0})),f}});return[t.of(e),r,eo.of(r)]}(et(e)?{...n,trigger(e){if(et(t.current))return t.current.trigger(e)}}:{...n,triggerCharacters:e.triggerCharacters??[]})])}),null}var ea=class extends A.l9{constructor(e){super(),this.options=e}toDOM(){return this.options.dom}eq(e){return this.options.dom===e.options.dom}},el=N.Py.define();(0,n.forwardRef)(function({children:e},t){let r=F("div"),o=L(r),i=L((0,M.jE)());return(0,n.useImperativeHandle)(t,()=>({update({visible:e,line:t,side:r}){var n;null==(n=i.current)||n.$view.dispatch({effects:el.of({visible:e,line:t??1,side:r??"before"})})}})),j(e=>{let t=N.QQ.define({create:()=>({position:0,side:"before",decorations:A.p.none}),update(e,t){let r=t.changes.mapPos(e.position,-1,N.gc.Simple),n=e;if("number"==typeof r&&r!==e.position){let i=t.state.doc.lineAt(r),s=0;s="after"===e.side?i.to:i.from,n={...e,position:r,decorations:A.p.set([A.p.widget({widget:new ea({dom:o.current}),block:!0,side:"after"===e.side?1:-1}).range(s)])}}for(let e of t.effects)if(e.is(el)){let{visible:r,line:i,side:s}=e.value;if(!r)return{position:n.position,side:s,decorations:A.p.none};if(i<1||i>t.startState.doc.lines)continue;let a=t.startState.doc.line(i),l=0;return{position:l="after"===s?a.to:a.from,side:s,decorations:A.p.set([A.p.widget({widget:new ea({dom:o.current}),block:!0,side:"after"===n.side?1:-1}).range(l)])}}return n},provide:e=>A.tk.decorations.compute([e],t=>t.field(e).decorations)});return e.inject([t])},[]),(0,P.createPortal)(e,r)})},855868:function(e,t,r){r.d(t,{G6:()=>c,KU:()=>u,Th:()=>f,Us:()=>d,jE:()=>l});var n=r(908600),o=r(53029),i=(0,n.createContext)(null),s=(0,n.createContext)(null),a=(0,n.createContext)(void 0);function l(){return(0,n.useContext)(i)}function c(){let e=(0,n.useContext)(a);if(!e)throw Error("useInjector should be used in EditorProvider");return e}function u({children:e}){let[t,r]=(0,n.useState)(null),l=(0,n.useRef)(null);return l.current||(l.current=(0,o.vH)()),n.createElement(i.Provider,{value:t},n.createElement(s.Provider,{value:r},n.createElement(a.Provider,{value:l.current},e)))}function f(e){let{plugins:t,defaultValue:r,root:i,options:a,domProps:l={},extensions:u,didMount:f,children:d}=e,[h,p]=(0,n.useState)(),m=(0,n.useRef)(null),g=(0,n.useRef)(null),v=(0,n.useRef)(null),w=(0,n.useContext)(s),y=c();return v.current=e,(0,n.useEffect)(()=>{let{render:e,eventKeys:n}=(0,o.Ue)({plugins:t,injector:y}),s=e({parent:m.current,root:i,defaultValue:r,options:a??{},extensions:u});return g.current=s,n.forEach(e=>{s.$on(e,t=>{var r;let n=null==(r=v.current)?void 0:r[`on${e.charAt(0).toUpperCase()+e.substring(1)}`];"function"==typeof n&&n(t)})}),"function"==typeof f&&f(s),p(s),()=>{s.$destroy()}},[]),(0,n.useEffect)(()=>{h&&w&&w(h)},[h,w]),(0,n.useEffect)(()=>{g.current.$set(e.options??{})},[e.options]),n.createElement(n.Fragment,null,n.createElement("div",{...l,ref:m}),d)}function d(e,t){return function(r){let o=r.extensions,i=(0,n.useMemo)(()=>[...t??[],...o??[]],[o]);return n.createElement(f,{...r,extensions:i,plugins:e})}}},548306:function(e,t,r){r.d(t,{A9:()=>i,oO:()=>function e(t,r,o,i,s=!1){let{from:a,to:l}=t;if(a>=o||l<=r)return;i(t);let c=t.tree&&t.tree.prop(n.md.mounted);if(c&&c.overlay&&!s){let n=t.node.enter(c.overlay[0].from+a,1),u=t.firstChild();for(let f=0,d=a;;f++){let h=f<c.overlay.length?c.overlay[f]:null,p=h?h.from+a:l,m=Math.max(r,d),g=Math.min(o,p);if(m<g&&u)for(;t.from<g&&(e(t,m,g,i,s),!(t.to>=p)&&t.nextSibling()););if(!h||p>o)break;if((d=h.to+a)>r){let l=Math.max(r,h.from+a),c=Math.min(o,d);for(;t.from<c&&(e(t,Math.max(r,h.from+a),Math.min(o,d),i,!0),!(t.to>=c)&&t.nextSibling()););e(n.cursor(),l,c,i,s)}}u&&t.parent()}else if(t.firstChild()){do{if(t.to<=r)continue;if(t.from>=o)break;e(t,r,o,i,s)}while(t.nextSibling());t.parent()}},wA:()=>s,xH:()=>o});var n=r(6903);function o(e){return e.reduce((e,t)=>[...e,...t],[])}function i(e,t){return e.from===e.to?e.from>t.from&&e.from<t.to:e.from<=t.from&&e.to>t.from||e.to>=t.to&&e.from<t.to||e.from>=t.from&&e.to<=t.to}var s={Flatten:e=>e.reduce((e,t)=>[...e,...t],[]),First:e=>e[0],Last:e=>e[e.length-1]}},525390:function(e){function t(e,t){var r,n;if(0===t.length)return e;for(r=0,n=t.length;r<n;r++)e=(e<<5)-e+t.charCodeAt(r)|0;return e<0?-2*e:e}e.exports=function(e){for(var r=(function e(r,n,o,i){var s,a=t(t(t(r,o),(s=n,Object.prototype.toString.call(s))),typeof n);if(null===n)return t(a,"null");if(void 0===n)return t(a,"undefined");if("object"==typeof n||"function"==typeof n){if(-1!==i.indexOf(n))return t(a,"[Circular]"+o);i.push(n);var l=Object.keys(n).sort().reduce(function(t,r){return e(t,n[r],r,i)},a);if(!("valueOf"in n)||"function"!=typeof n.valueOf)return l;try{return t(l,String(n.valueOf()))}catch(e){return t(l,"[valueOf exception]"+(e.stack||e.message))}}return t(a,n.toString())})(0,e,"",[]).toString(16);r.length<8;)r="0"+r;return r}},669462:function(e,t,r){r.d(t,{v4:()=>s});for(var n,o=256,i=[];o--;)i[o]=(o+256).toString(16).substring(1);function s(){var e,t=0,r="";if(!n||o+16>256){for(n=Array(t=256);t--;)n[t]=256*Math.random()|0;t=o=0}for(;t<16;t++)e=n[o+t],6==t?r+=i[15&e|64]:8==t?r+=i[63&e|128]:r+=i[e],1&t&&t>1&&t<11&&(r+="-");return o++,r}},216354:function(e,t,r){r.d(t,{Z:()=>n});function n(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(e){e(r)}),(n=e.get("*"))&&n.slice().map(function(e){e(t,r)})}}}}}]);