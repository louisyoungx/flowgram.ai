"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["253709"],{778800:function(e,s,r){r.r(s),r.d(s,{default:()=>d});var i=r(110239),n=r(437562);function l(e){let s={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,n.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.h1,{id:"介绍",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#介绍",children:"#"}),"介绍"]}),"\n",(0,i.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,i.jsx)(s.div,{className:"rspress-directive-title",children:"WARNING"}),(0,i.jsx)(s.div,{className:"rspress-directive-content",children:(0,i.jsxs)(s.p,{children:["本文档的变量引擎属于 FlowGram ",(0,i.jsx)(s.strong,{children:"设计态"}),"，和运行态的变量引擎不同。"]})})]}),"\n",(0,i.jsxs)(s.h2,{id:"阅读路径",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#阅读路径",children:"#"}),"阅读路径"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"在这里先建立「变量是什么」以及「为什么需要变量引擎」的整体心智。"}),"\n",(0,i.jsxs)(s.li,{children:["接下来建议直接上手：",(0,i.jsx)(s.a,{href:"/guide/variable/variable-output.html",children:"输出变量"})," → ",(0,i.jsx)(s.a,{href:"/guide/variable/variable-consume.html",children:"消费变量"}),"，先学会如何在节点中产出变量，再去读取。"]}),"\n",(0,i.jsxs)(s.li,{children:["当在实践中遇到作用域或类型等疑问时，再回到",(0,i.jsx)(s.a,{href:"/guide/variable/concept.html",children:"核心概念"}),"查阅详细术语。"]}),"\n"]}),"\n",(0,i.jsxs)(s.h2,{id:"什么是变量",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#什么是变量",children:"#"}),"什么是变量？"]}),"\n",(0,i.jsxs)(s.p,{children:["想象一下，你在搭建一个复杂的乐高模型，每个模块都需要精确地连接在一起。在工作流（Workflow）的世界里，",(0,i.jsx)(s.strong,{children:"变量"}),"就扮演着类似“连接件”的角色。它们是用来在不同节点之间传递信息的“信使”。"]}),"\n",(0,i.jsx)(s.p,{children:"简单来说，变量就是一个带名字的容器，你可以往里面装各种东西，比如用户的输入、计算结果，或者从某个地方获取的数据。"}),"\n",(0,i.jsx)(s.p,{children:"一个变量通常由三部分组成："}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"名字（唯一标识符）"}),"：类似个人姓名，用于准确定位某个变量。例如 ",(0,i.jsx)(s.code,{children:"userName"}),"、",(0,i.jsx)(s.code,{children:"orderId"}),"。"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"值"}),"：容器里装的东西。它可以是数字 ",(0,i.jsx)(s.code,{children:"123"}),"，文字 ",(0,i.jsx)(s.code,{children:'"Hello FlowGram!"'}),"，或者一个开关状态 ",(0,i.jsx)(s.code,{children:"true"})," / ",(0,i.jsx)(s.code,{children:"false"}),"。"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"类型"}),"：规定了这个容器能装哪种东西。比如，有的只能装数字，有的只能装文字。"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.p,{children:"举个例子，在一个“智能问答”流程中："}),"\n",(0,i.jsxs)("div",{style:{display:"flex",gap:"20px"},children:[(0,i.jsx)("img",{style:{width:"50%"},loading:"lazy",src:"/variable/variable-biz-context-websearch-llm.png",alt:"智能问答流程"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{style:{marginTop:10},children:["1. ",(0,i.jsxs)(s.strong,{children:[(0,i.jsx)(s.code,{children:"WebSearch"})," 节点"]}),"：负责上网搜索，然后把搜到的知识（比如“今天天气怎么样？”的答案）放进一个名为 ",(0,i.jsx)(s.code,{children:"natural_language_desc"})," 的变量里。"]}),(0,i.jsxs)("p",{style:{marginTop:5},children:["2. ",(0,i.jsxs)(s.strong,{children:[(0,i.jsx)(s.code,{children:"LLM"})," 节点"]}),"：它会接过 ",(0,i.jsx)(s.code,{children:"natural_language_desc"})," 这个“信使”，读取里面的内容，然后用更自然、更友好的方式回答用户。"]}),(0,i.jsxs)("p",{style:{marginTop:5},children:["3. 在这个过程中，",(0,i.jsx)(s.code,{children:"natural_language_desc"})," 的类型就是“字符串”，因为它装的是文字内容。"]})]})]}),"\n",(0,i.jsxs)(s.h3,{id:"设计态定义-vs-运行态取值",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#设计态定义-vs-运行态取值",children:"#"}),"设计态定义 vs. 运行态取值"]}),"\n",(0,i.jsxs)(s.p,{children:["在",(0,i.jsx)(s.strong,{children:"设计态"}),"（绘制流程时），我们只需要确定变量的",(0,i.jsx)(s.strong,{children:"定义"}),"：名字、类型以及可选的元信息。变量引擎会把这些定义管理成结构化的数据。"]}),"\n",(0,i.jsxs)(s.p,{children:["到了",(0,i.jsx)(s.strong,{children:"运行态"}),"，FlowGram 会依据这些定义为每次执行赋值。因此在设计时，先关注结构与约束；在运行时，所有节点就能依赖这些定义稳定地读写实际数据。"]}),"\n",(0,i.jsxs)(s.h2,{id:"为什么需要变量引擎",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#为什么需要变量引擎",children:"#"}),"为什么需要变量引擎？"]}),"\n",(0,i.jsx)(s.p,{children:"随着工作流复杂度的提升，变量的数量和管理难度也随之增加。"}),"\n",(0,i.jsxs)(s.p,{children:["为了应对这一挑战，FlowGram 提供了强大的",(0,i.jsx)(s.strong,{children:"变量引擎"}),"。"]}),"\n",(0,i.jsx)(s.p,{children:"它如同一位专业的“数据管家”，能够系统化地管理所有变量，确保数据流的清晰与稳定。"}),"\n",(0,i.jsx)(s.p,{children:"启用变量引擎将为您带来以下核心优势："}),"\n",(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"25px"},children:[(0,i.jsxs)("div",{style:{gridColumn:"span 2"},children:[(0,i.jsx)("b",{children:"作用域约束：精准的数据访问控制"}),(0,i.jsx)("p",{className:"rs-tip",children:"变量引擎能够精确控制每个变量的有效范围（即作用域）。如同为不同房间配置专属钥匙，它确保了变量只在预期的节点中被访问，从而有效避免了数据污染和意外的逻辑错误。"}),(0,i.jsxs)("div",{style:{display:"flex",gap:"25px"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("img",{loading:"lazy",src:"/variable/variable-scope-feature-1.png",alt:"作用域约束示例 1"}),(0,i.jsxs)("p",{style:{marginTop:"10px"},children:[(0,i.jsx)(s.code,{children:"Start"})," 节点定义的 ",(0,i.jsx)(s.code,{children:"query"})," 变量，在它后面的 ",(0,i.jsx)(s.code,{children:"LLM"})," 和 ",(0,i.jsx)(s.code,{children:"End"})," 节点都能轻松访问。"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("img",{loading:"lazy",src:"/variable/variable-scope-feature-2.png",alt:"作用域约束示例 2"}),(0,i.jsxs)("p",{style:{marginTop:"10px"},children:[(0,i.jsx)(s.code,{children:"LLM"})," 节点处于 ",(0,i.jsx)(s.code,{children:"Condition"})," 分支，等同于位于独立空间；外部的 ",(0,i.jsx)(s.code,{children:"End"})," 节点无法访问其 ",(0,i.jsx)(s.code,{children:"result"})," 变量。"]})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"变量结构透视：轻松洞悉复杂数据"}),(0,i.jsx)("p",{className:"rs-tip",children:"当变量结构较复杂（例如包含多层嵌套的对象）时，变量引擎支持逐层展开，便于定位每一项数据。"}),(0,i.jsx)("img",{loading:"lazy",src:"/variable/variable-tree-management.gif",alt:"变量结构透视"}),(0,i.jsx)("p",{style:{marginTop:"10px"},children:"下图展示了所有节点的输出变量与层级关系，便于整体审视变量结构。"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"类型自动推导：心有灵犀一点通"}),(0,i.jsx)("p",{className:"rs-tip",children:"无需为每个变量逐一指定类型，变量引擎可依据上下文自动完成推导。"}),(0,i.jsx)("img",{loading:"lazy",src:"/variable/variable-batch-auto-infer.gif",alt:"类型自动推导"}),(0,i.jsxs)("p",{style:{marginTop:"10px"},children:["例如，当 ",(0,i.jsx)(s.code,{children:"Start"})," 节点中 ",(0,i.jsx)(s.code,{children:"arr"})," 变量的类型发生变更时，",(0,i.jsx)(s.code,{children:"Batch"})," 节点输出的 ",(0,i.jsx)(s.code,{children:"item"})," 类型也会自动同步更新，确保了类型的一致性。"]})]})]}),"\n",(0,i.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,i.jsx)(s.div,{className:"rspress-directive-title",children:"TIP"}),(0,i.jsx)(s.div,{className:"rspress-directive-content",children:(0,i.jsxs)(s.p,{children:["建议先把变量读写跑通；当你需要深入理解作用域链、AST、声明、表达式等底层模型时，再阅读",(0,i.jsx)(s.a,{href:"/guide/variable/concept.html",children:"变量概念"}),"。"]})})]}),"\n",(0,i.jsxs)(s.h2,{id:"如何开启变量引擎",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#如何开启变量引擎",children:"#"}),"如何开启变量引擎？"]}),"\n",(0,i.jsx)(s.p,{children:"您可以通过简单的配置来启用变量引擎，以体验其强大的功能。"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/editor/interfaces/VariablePluginOptions.html",rel:"noopener noreferrer",target:"_blank",children:"> 查看 API 详情"})}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"use-editor-props.ts",children:(0,i.jsxs)(s.code,{className:"language-tsx",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// 在 EditorProps 中开启变量引擎"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,i.jsxs)(s.span,{className:"line highlighted",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  variableEngine"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // 设置为 true 即可开启变量引擎"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    enable"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" true"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,i.jsxs)(s.h2,{id:"接下来可以看看推荐顺序",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#接下来可以看看推荐顺序",children:"#"}),"接下来可以看看（推荐顺序）"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"/guide/variable/variable-output.html",children:"输出变量"}),"：先学会在节点、插件、全局作用域中产出变量。"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"/guide/variable/variable-consume.html",children:"消费变量"}),"：再学习如何在节点、UI 中安全读取变量。"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"/guide/variable/concept.html",children:"变量概念"}),"：最后回顾作用域、AST、声明、类型等核心名词。"]}),"\n"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,n.a)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["zh%2Fguide%2Fvariable%2Fbasic.mdx"]={toc:[{id:"阅读路径",text:"阅读路径",depth:2},{id:"什么是变量",text:"什么是变量？",depth:2},{id:"设计态定义-vs-运行态取值",text:"设计态定义 vs. 运行态取值",depth:3},{id:"为什么需要变量引擎",text:"为什么需要变量引擎？",depth:2},{id:"如何开启变量引擎",text:"如何开启变量引擎？",depth:2},{id:"接下来可以看看推荐顺序",text:"接下来可以看看（推荐顺序）",depth:2}],title:"介绍",headingTitle:"介绍",frontmatter:{description:"介绍什么是变量，以及变量引擎的作用"}}}}]);