"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["395838"],{597801:function(e,n,i){i.r(n),i.d(n,{default:()=>o});var r=i(110239),a=i(437562),s=i(944529),l=i(262343);function t(e){let n={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"disabledeclarationplugin",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#disabledeclarationplugin",children:"#"}),"DisableDeclarationPlugin"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive note",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"NOTE"}),(0,r.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,r.jsxs)(n.p,{children:["In the design of the materials library, ",(0,r.jsx)(n.strong,{children:'"nodes themselves" are defined as VariableDeclaration'}),"."]}),(0,r.jsxs)(n.p,{children:["Components in the materials library such as ",(0,r.jsx)(n.a,{href:"/en/materials/components/variable-selector.html",children:(0,r.jsx)(n.code,{children:"VariableSelector"})}),", ",(0,r.jsx)(n.a,{href:"/en/materials/components/prompt-editor-with-variables.html",children:(0,r.jsx)(n.code,{children:"PromptEditorWithVariables"})}),", and ",(0,r.jsx)(n.a,{href:"/en/materials/components/sql-editor-with-variables.html",children:(0,r.jsx)(n.code,{children:"SQLEditorWithVariables"})})," all support selecting ",(0,r.jsx)(n.strong,{children:'"node"'})," by default."]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["DisableDeclarationPlugin can ",(0,r.jsx)(n.strong,{children:"disable variable declarations (only allowing drilling down)"}),' , making "node" unselectable.']}),"\n",(0,r.jsxs)(n.h2,{id:"demo",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#demo",children:"#"}),"Demo"]}),"\n",(0,r.jsxs)(n.h3,{id:"basic-usage",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#basic-usage",children:"#"}),"Basic Usage"]}),"\n",(0,r.jsx)(l.w,{}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"use-editor-props.tsx",children:(0,r.jsxs)(n.code,{className:"language-tsx",children:[(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" { createDisableDeclarationPlugin } "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line"}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  plugins"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"createDisableDeclarationPlugin"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"()]"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"}"})}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})})]})})}),"\n",(0,r.jsxs)(n.h2,{id:"api",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#api",children:"#"}),"API"]}),"\n",(0,r.jsxs)(n.h3,{id:"createdisabledeclarationplugin",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#createdisabledeclarationplugin",children:"#"}),"createDisableDeclarationPlugin"]}),"\n",(0,r.jsx)(n.p,{children:"Used to create a plugin that disables variable declarations. This plugin intercepts events from the variable engine and marks all variable declarations as disabled."}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsx)(n.code,{className:"language-ts",children:(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" const"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" createDisableDeclarationPlugin"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" definePluginCreator"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"void"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">({"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"});"})]})})})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Parameters"}),": None"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Return Value"}),": A plugin instance that can be directly added to the Editor's plugin list."]}),"\n",(0,r.jsxs)(n.h2,{id:"source-code-guide",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#source-code-guide",children:"#"}),"Source Code Guide"]}),"\n",(0,r.jsx)(s.ZB,{href:"https://github.com/bytedance/flowgram.ai/blob/main/packages/materials/form-materials/src/plugins/disable-declaration-plugin/create-disable-declaration-plugin.ts"}),"\n",(0,r.jsx)(n.p,{children:"You can copy the source code locally using the CLI command:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsx)(n.code,{className:"language-bash",children:(0,r.jsxs)(n.span,{className:"line",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" plugins/disable-declaration-plugin"})]})})})}),"\n",(0,r.jsxs)(n.h3,{id:"directory-structure",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#directory-structure",children:"#"}),"Directory Structure"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-plaintext",children:[(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{children:"packages/materials/form-materials/src/plugins/disable-declaration-plugin/"})}),"\n",(0,r.jsx)(n.span,{className:"line",children:(0,r.jsx)(n.span,{children:"└── create-disable-declaration-plugin.ts  # Main implementation file of the plugin"})})]})})}),"\n",(0,r.jsxs)(n.h3,{id:"core-implementation",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#core-implementation",children:"#"}),"Core Implementation"]}),"\n",(0,r.jsx)(n.p,{children:"The core implementation of DisableDeclarationPlugin is very concise, mainly including the following steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Plugin Initialization"}),": Create the plugin through ",(0,r.jsx)(n.code,{children:"definePluginCreator"})," and obtain the variable engine instance in the ",(0,r.jsx)(n.code,{children:"onInit"})," hook"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Event Listening"}),": Listen to the ",(0,r.jsx)(n.code,{children:"NewAST"})," and ",(0,r.jsx)(n.code,{children:"UpdateAST"})," events of the variable engine"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Processing Logic"}),": When a variable declaration type (",(0,r.jsx)(n.code,{children:"VariableDeclaration"}),") AST node is detected, set its ",(0,r.jsx)(n.code,{children:"meta.disabled"})," property to ",(0,r.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This implementation ensures that all newly created or updated variable declarations are automatically disabled, making them unselectable in variable selectors and other components."}),"\n",(0,r.jsxs)(n.h3,{id:"dependencies",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#dependencies",children:"#"}),"Dependencies"]}),"\n",(0,r.jsxs)(n.h4,{id:"flowgram-api",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgram-api",children:"#"}),"flowgram API"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/client/editor",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(n.strong,{children:"@flowgram.ai/editor"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://flowgram.ai/auto-docs/editor/modules/ASTMatch",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(n.code,{children:"ASTMatch"})}),": A utility class for matching and determining AST node types"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://flowgram.ai/auto-docs/core/functions/definePluginCreator",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(n.code,{children:"definePluginCreator"})}),": A function to define plugin creators"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://flowgram.ai/auto-docs/editor/interfaces/GlobalEventActionType",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(n.code,{children:"GlobalEventActionType"})}),": Type definitions for global event actions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://flowgram.ai/auto-docs/editor/classes/VariableEngine",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(n.code,{children:"VariableEngine"})}),": Variable engine responsible for managing and processing variable-related operations"]}),"\n"]})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["en%2Fmaterials%2Fcommon%2Fdisable-declaration-plugin.mdx"]={toc:[{id:"demo",text:"Demo",depth:2},{id:"basic-usage",text:"Basic Usage",depth:3},{id:"api",text:"API",depth:2},{id:"createdisabledeclarationplugin",text:"createDisableDeclarationPlugin",depth:3},{id:"source-code-guide",text:"Source Code Guide",depth:2},{id:"directory-structure",text:"Directory Structure",depth:3},{id:"core-implementation",text:"Core Implementation",depth:3},{id:"dependencies",text:"Dependencies",depth:3},{id:"flowgram-api",text:"flowgram API",depth:4}],title:"DisableDeclarationPlugin",headingTitle:"DisableDeclarationPlugin",frontmatter:{}}},262343:function(e,n,i){i.d(n,{w:()=>c});var r=i(110239),a=i(908600),s=i(640898),l=i(176332),t=i(132288);let o=a.lazy(()=>Promise.all([i.e("386212"),i.e("133914"),i.e("227692"),i.e("838147"),i.e("933451"),i.e("942362"),i.e("254129"),i.e("428647"),i.e("135691"),i.e("46854"),i.e("378665"),i.e("449290")]).then(i.bind(i,129148)).then(e=>({default:e.VariableSelector}))),c=()=>(0,r.jsx)(t.y,{filterEndNode:!0,plugins:()=>[(0,l.O)()],formMeta:{render:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{}),(0,r.jsx)(s.gNt,{name:"variable_selector",children:e=>{let{field:n}=e;return(0,r.jsx)(o,{value:n.value,onChange:e=>n.onChange(e)})}})]})}})},132288:function(e,n,i){i.d(n,{p:()=>l,y:()=>t});var r=i(110239),a=i(908600);let s=a.lazy(()=>Promise.all([i.e("386212"),i.e("133914"),i.e("227692"),i.e("933451"),i.e("254129"),i.e("428647"),i.e("135691"),i.e("46854"),i.e("690536")]).then(i.bind(i,654296)).then(e=>({default:e.FreeFormMetaStoryBuilder}))),l=a.lazy(()=>Promise.all([i.e("386212"),i.e("133914"),i.e("227692"),i.e("933451"),i.e("254129"),i.e("428647"),i.e("135691"),i.e("46854"),i.e("690536")]).then(i.bind(i,654296)).then(e=>({default:e.FormHeader}))),t=e=>(0,r.jsx)("div",{style:{position:"relative",height:e.height||400},children:(0,r.jsx)(s,{...e})})},176332:function(e,n,i){i.d(n,{O:()=>a});var r=i(950454);let a=(0,r.M1y)({onInit(e){let n=e.get(r.i2z),i=e=>{if(r.GwP.isVariableDeclaration(e.ast)){var n;(null==(n=e.ast.meta)?void 0:n.disabled)||e.ast.updateMeta({...e.ast.meta||{},disabled:!0})}};n.onGlobalEvent("NewAST",i),n.onGlobalEvent("UpdateAST",i)}})}}]);