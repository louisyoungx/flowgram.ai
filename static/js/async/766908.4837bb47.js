"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["766908"],{160892:function(e,t,n){n.d(t,{Z:()=>i});var o=n(908600);let i=(0,n(120410).A)(function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12a11 11 0 1 1-22 0 11 11 0 0 1 22 0Zm-11 9a9 9 0 1 0 0-18 9 9 0 0 0 0 18ZM8.11 8.11a1 1 0 0 1 1.42 0L12 10.6l2.47-2.48a1 1 0 1 1 1.42 1.42L13.4 12l2.48 2.47a1 1 0 0 1-1.42 1.42L12 13.4 9.53 15.9a1 1 0 0 1-1.42-1.42L10.6 12 8.1 9.53a1 1 0 0 1 0-1.42Z",fill:"currentColor"}))},"cross_circle_stroked")},951901:function(e,t,n){let o,i,r,s,a;n.r(t),n.d(t,{DemoFreeLayout:()=>iL});var l,d,c,u,p,h,g,m,x,y,f,v,j=n(110239),C=n(640898);n(324681),n(209427);var N=n(433210),b=((l={}).Start="start",l.End="end",l.LLM="llm",l.HTTP="http",l.Code="code",l.Variable="variable",l.Condition="condition",l.Loop="loop",l.BlockStart="block-start",l.BlockEnd="block-end",l.Comment="comment",l.Continue="continue",l.Break="break",l);let w="data:image/png;base64,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";var M=n(271060),A=n(261513);let S=A.ZP.span`
  font-size: 12px;
  color: red;
`,k=A.ZP.span`
  font-size: 12px;
  color: orange;
`,D=e=>{let{errors:t,warnings:n,invalid:o}=e,i=e=>e?e.map(e=>(0,j.jsx)("span",{children:e.message},e.name)):null;return(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{children:(0,j.jsx)(S,{children:i(t)})}),(0,j.jsx)("div",{children:(0,j.jsx)(k,{children:i(n)})})]})};var E=n(908600),I=n(658639),L=n(330893),T=n(773898),P=n(893740),z=n(461932),Z=n(832176),O=n(288216),R=n(201063),B=n(579962),V=Object.defineProperty,F=Object.getOwnPropertyDescriptor,Q=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?F(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&V(t,n,r),r},U=async()=>{await (0,O.gw)(20)},H=e=>(null==e?void 0:e.getNodeMeta().isContainer)??!1,J=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},n=e.node;if(H(n)){let{point:n}=e;return"input"===e.portType?new Z.Ae(n.x+t.x,n.y-50+t.y,300,100):new Z.Ae(n.x-300,n.y-50,300,100)}return n.getData(B.eG).bounds},Y=(e,t)=>void 0!==e&&void 0!==t&&e-t>1e-5,G=(e,t)=>void 0!==e&&void 0!==t&&t-e>1e-5,X=e=>{var t;let{nodeType:n,position:o,fromPort:i,toPort:r,containerNode:s,document:a,dragService:l}=e,d=a.getNodeRegistry(n),c=null==d||null==(t=d.meta)?void 0:t.size,u=o;return u=c?i&&r?{x:o.x,y:o.y-c.height/2}:i&&!r?"bottom"===i.location?{x:o.x,y:o.y}:{x:o.x+c.width/2,y:o.y-c.height/2}:!i&&r?{x:o.x-c.width/2,y:o.y-c.height/2}:o:o,l.adjustSubNodePosition(n,s,u)},q=e=>{var t,n;let{fromPort:o,node:i,toPort:r,linesManager:s}=e,a=i.getData(O.QW);if(!a)return;let l=(null==(t=a.inputPorts)?void 0:t.length)>0;if(o&&l){let e="bottom"===o.location,t=a.inputPorts.find(t=>!e||"top"===t.location)||a.inputPorts[0];s.createLine({from:o.node.id,fromPort:o.portID,to:i.id,toPort:t.portID})}let d=(null==(n=a.outputPorts)?void 0:n.length)>0;if(r&&d){let e=a.outputPorts[0];s.createLine({from:i.id,fromPort:e.portID,to:r.node.id,toPort:r.portID})}},W=e=>{let{fromPort:t,containerNode:n}=e;if(n)return n;let o=null==t?void 0:t.node,i=null==o?void 0:o.parent;return H(o)?o:i},K=e=>{let{node:t,fromPort:n,toPort:o,linesManager:i,historyService:r,dragService:s,containerNode:a,padding:l={x:100,y:100}}=e,d=(e=>{var t;let{node:n,fromPort:o,toPort:i,padding:r}=e,s=J(o),a=J(i),l=n.getData(B.eG),d=(null==(t=n.getNodeMeta())?void 0:t.size)??{width:l.bounds.width,height:l.bounds.height},c={x:d.width+r.x,y:d.height+r.y},u=((e,t)=>{let n=Math.abs(Math.min(e.right,t.right)-Math.max(e.left,t.left)),o=Math.abs(Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return Z.Ae.intersects(e,t)?{x:-n,y:-o}:{x:n,y:o}})(s,a),p={x:Y(u.x,c.x)?0:c.x-u.x,y:Y(u.y,c.y)?0:c.y-u.y};if(0===p.x||0===p.y)return;let h={vertical:Z.Ae.intersects(s,a,"horizontal"),horizontal:Z.Ae.intersects(s,a,"vertical")},g=0,m=0;return!h.horizontal&&(Y(a.center.y,s.center.y)?m=p.y:G(a.center.y,s.center.y)&&(m=-p.y)),!h.vertical&&(Y(a.center.x,s.center.x)?g=p.x:G(a.center.x,s.center.x)&&(g=-p.x)),{x:g,y:m}})({node:t,fromPort:n,toPort:o,padding:l});(e=>{let{node:t,subsequentNodes:n,fromPort:o,toPort:i,containerNode:r,offset:s,historyService:a,dragService:l}=e;if(!s||!i)return;let d=n.map(e=>{let t=e.getData(P.VO);return{x:t.position.x,y:t.position.y}});a.pushOperation({type:R.Nj.dragNodes,value:{ids:n.map(e=>e.id),value:d.map(e=>({x:e.x+s.x,y:e.y+s.y})),oldValue:d}});let c=J(o),u=J(i,s),p=t.getData(P.VO),h={x:(c.center.x+u.center.x)/2,y:(c.y+u.y)/2};r&&(h=l.adjustSubNodePosition(t.flowNodeType,r,h)),a.pushOperation({type:R.Nj.dragNodes,value:{ids:[t.id],value:[h],oldValue:[{x:p.position.x,y:p.position.y}]}})})({node:t,subsequentNodes:(e=>{var t;let{node:n,linesManager:o}=e;if(H(n))return[];let i=(null==(t=n.parent)?void 0:t.blocks)??[],r=new Set,s=new Map;o.getAllLines().forEach(e=>{var t,n;s.has(e.from.id)||s.set(e.from.id,[]),!(null==(t=e.to)?void 0:t.id)||H(e.to)||null==(n=s.get(e.from.id))||n.push(e.to.id)});let a=e=>{r.has(e)||(r.add(e),(s.get(e)??[]).forEach(a))};return a(n.id),i.filter(e=>r.has(e.id))})({node:o.node,linesManager:i}),fromPort:n,toPort:o,containerNode:a,offset:d,historyService:r,dragService:s})},_=class{dispose(){this.toDispose.dispose()}setCallNodePanel(e){this.callNodePanel=e}async call(e){let{panelPosition:t,fromPort:n,enableMultiAdd:o=!1,panelProps:i={},containerNode:r,afterAddNode:s}=e;if(!t||this.playgroundConfig.readonly)return;let a=[];return new Promise(l=>{this.callNodePanel({position:t,enableMultiAdd:o,panelProps:i,containerNode:W({fromPort:n,containerNode:r}),onSelect:async t=>{let n=await this.addNode(e,t);null==s||s(n),o?n&&a.push(n):l(n)},onClose:()=>{l(o?a:void 0)}})})}async singleSelectNodePanel(e){return new Promise(t=>{this.callNodePanel({...e,enableMultiAdd:!1,onSelect:async e=>{t(e)},onClose:()=>{t(void 0)}})})}async addNode(e,t){let{panelPosition:n,fromPort:o,toPort:i,canAddNode:r,autoOffsetPadding:s={x:100,y:100},enableBuildLine:a=!1,enableSelectPosition:l=!1,enableAutoOffset:d=!1,enableDragNode:c=!1}=e;if(!n||!t)return;let{nodeType:u,selectEvent:p,nodeJSON:h}=t,g=W({fromPort:o,containerNode:e.containerNode});if(r&&!r({nodeType:u,containerNode:g}))return;let m=this.playgroundConfig.getPosFromMouseEvent(p),x=e.customPosition?e.customPosition({nodeType:u,selectPosition:m}):X({nodeType:u,position:l?m:n,fromPort:o,toPort:i,containerNode:g,document:this.document,dragService:this.dragService}),y=this.document.createWorkflowNodeByType(u,x,h??{},null==g?void 0:g.id);if(y)return d&&o&&i&&K({node:y,fromPort:o,toPort:i,padding:s,containerNode:g,historyService:this.historyService,dragService:this.dragService,linesManager:this.linesManager}),(a||c)&&(await U(),a&&q({fromPort:o,node:y,toPort:i,linesManager:this.linesManager}),c&&(this.selectService.selectNode(y),this.dragService.startDragSelectedNodes(p))),y}constructor(){this.toDispose=new Z.K4,this.callNodePanel=async()=>void 0}};Q([(0,z.f3)(O.L4)],_.prototype,"document",2),Q([(0,z.f3)(O.iw)],_.prototype,"dragService",2),Q([(0,z.f3)(O.oJ)],_.prototype,"selectService",2),Q([(0,z.f3)(O.dm)],_.prototype,"linesManager",2),Q([(0,z.f3)(P.ER)],_.prototype,"playgroundConfig",2),Q([(0,z.f3)(R.qp)],_.prototype,"historyService",2),_=Q([(0,z.b2)()],_);var $=class extends P.mh{onReady(){this.service.setCallNodePanel(this.call.bind(this))}onZoom(e){this.node.style.transform=`scale(${e})`}render(){let e=this.options.renderer;return E.createElement(E.Fragment,null,Array.from(this.renderList.keys()).map(t=>{let n=this.renderList.get(t);return E.createElement(e,{key:t,...n})}))}async call(e){let t=(0,O.x0)(),{onSelect:n,onClose:o,enableMultiAdd:i=!1,panelProps:r={}}=e;return new Promise(s=>{let a=()=>{this.renderList.delete(t),this.render(),s()},l={...e,panelProps:r,onSelect:e=>{n(e),i||a()},onClose:()=>{a(),o()}};this.renderList.set(t,l),this.render()})}constructor(){super(),this.node=Z.xF.createDivWithClass("gedit-playground-layer gedit-node-panel-layer"),this.node.style.zIndex="9999",this.renderList=new Map}};$.type="WorkflowNodePanelLayer",Q([(0,z.f3)(_)],$.prototype,"service",2);var ee=(0,P.M1)({onBind(e){let{bind:t}=e;t(_).toSelf().inSingletonScope()},onInit:(e,t)=>{e.playground.registerLayer($,{renderer:t.renderer})},onDispose:e=>{e.get(_).dispose()}}),et=n(697495),en=n(148168),eo=n(438024),ei=n(661881),er=n(569517),es=n(27430),ea=Object.defineProperty,el=Object.getOwnPropertyDescriptor,ed=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?el(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&ea(t,n,r),r},ec=((d=ec||{}).In="in",d.Out="out",d),eu=async()=>{await new Promise(e=>requestAnimationFrame(e))},ep=e=>(null==e?void 0:e.getNodeMeta().isContainer)??!1,eh=e=>e.filter(e=>e.originParent?e.getNodeMeta().selectable&&e.originParent.getNodeMeta().selectable:e.getNodeMeta().selectable).filter(e=>ep(e)).sort((e,t)=>{let n=e.renderData.stackIndex;return t.renderData.stackIndex-n}).map(e=>e.transform),eg=e=>{let{targetRect:t,targetPoint:n,transforms:o,withPadding:i=!1,document:r}=e;return o.find(e=>{let{bounds:o,entity:s}=e,a=i?r.layout.getPadding(s):{left:0,right:0},l=new Z.Ae(o.x+a.left+a.right,o.y,o.width,o.height);if(t){let e=t.right>l.left&&t.left<l.right,n=t.bottom>l.top&&t.top<l.bottom;return e&&n}if(n)return n.x>=l.left&&n.x<=l.right&&n.y>=l.top&&n.y<=l.bottom;return!1})},em=class{init(){this.initState(),this.toDispose.push(this.emitter)}ready(){this.toDispose.push(this.listenDragToContainer())}dispose(){this.initState(),this.toDispose.dispose()}async moveOutContainer(e){var t;let{node:n}=e,o=n.parent,i=null==o?void 0:o.parent,r=this.document.toNodeJSON(n);if(!o||!i||!ep(o)||!(null==(t=r.meta)?void 0:t.position))return;let s=o.getData(P.VO);this.operationService.moveNode(n,{parent:i}),await eu(),s.fireChange(),this.operationService.updateNodePosition(n,{x:s.position.x+r.meta.position.x,y:s.position.y+r.meta.position.y}),this.emitter.fire({type:"out",node:n,sourceContainer:o,targetContainer:i})}canMoveOutContainer(e){let t=e.parent,n=null==t?void 0:t.parent;return!!t&&!!n&&!!ep(t)&&!!this.dragService.canDropToNode({dragNodeType:e.flowNodeType,dragNode:e,dropNodeType:null==n?void 0:n.flowNodeType,dropNode:n}).allowDrop}async clearInvalidLines(e){var t;let{dragNode:n,sourceParent:o}=e;n&&n.parent!==o&&(null==(t=n.parent)?void 0:t.flowNodeType)!==B.Sy.GROUP&&(null==o?void 0:o.flowNodeType)!==B.Sy.GROUP&&await this.removeNodeLines(n)}async removeNodeLines(e){this.linesManager.getAllLines().forEach(t=>{var n;(t.from.id===e.id||(null==(n=t.to)?void 0:n.id)===e.id)&&t.dispose()}),await eu()}initState(){this.state={isDraggingNode:!1,isSkipEvent:!1,transforms:void 0,dragNode:void 0,dropNode:void 0,sourceParent:void 0}}listenDragToContainer(){let e=e=>this.draggingNode(e),t=(0,ei.Z)(e,200);return this.dragService.onNodesDrag(async n=>{if(1===this.selectService.selectedNodes.length){if("onDragStart"===n.type){var o;if(this.state.isSkipEvent){this.state.isSkipEvent=!1;return}this.historyService.startTransaction(),this.state.isDraggingNode=!0,this.state.transforms=eh(this.document.getAllNodes()),this.state.dragNode=this.selectService.selectedNodes[0],this.state.dropNode=void 0,this.state.sourceParent=null==(o=this.state.dragNode)?void 0:o.parent,await this.dragOutContainer(n)}if("onDragging"===n.type&&t(n),"onDragEnd"===n.type){if(this.state.isSkipEvent)return;t.cancel(),e(n),await this.dropNodeToContainer(),await this.clearInvalidLines({dragNode:this.state.dragNode,sourceParent:this.state.sourceParent}),this.setDropNode(void 0),this.initState(),this.historyService.endTransaction()}}})}async dragOutContainer(e){let{dragNode:t}=this.state;(e.triggerEvent.metaKey||e.triggerEvent.ctrlKey)&&t&&this.canMoveOutContainer(t)&&(this.moveOutContainer({node:t}),this.state.isSkipEvent=!0,e.dragger.stop(e.dragEvent.clientX,e.dragEvent.clientY),await eu(),this.dragService.startDragSelectedNodes(e.triggerEvent))}setDropNode(e){var t,n,o,i;if(this.state.dropNode===e)return;if(this.state.dropNode){let e=null==(i=this.state.dropNode.getData(B.Lz).node)||null==(o=i.children)?void 0:o[0];e&&e.classList.remove("selected")}if(this.state.dropNode=e,!e)return;let r=null==(n=e.getData(B.Lz).node)||null==(t=n.children)?void 0:t[0];r&&r.classList.add("selected")}async dropNodeToContainer(){let{dropNode:e,dragNode:t,isDraggingNode:n}=this.state;if(n&&t&&e)return await this.moveIntoContainer({node:t,containerNode:e})}draggingNode(e){let{dragNode:t,isDraggingNode:n,transforms:o=[]}=this.state;if(!n||!t||!(null==o?void 0:o.length))return this.setDropNode(void 0);let i=this.playgroundConfig.getPosFromMouseEvent(e.dragEvent),r=eg({targetPoint:i,transforms:o.filter(e=>e.entity.id!==t.id),document:this.document}),s=null==r?void 0:r.entity;return this.canDropToContainer({dragNode:t,dropNode:s})?this.setDropNode(s):this.setDropNode(void 0)}canDropToContainer(e){let{dragNode:t,dropNode:n}=e,o=null==n?void 0:n.getNodeMeta().isContainer;return!(!n||!o||this.isParent(t,n))&&(t.flowNodeType!==B.Sy.GROUP||n.flowNodeType===B.Sy.GROUP)&&!!this.dragService.canDropToNode({dragNodeType:t.flowNodeType,dropNodeType:null==n?void 0:n.flowNodeType,dragNode:t,dropNode:n}).allowDrop}isParent(e,t){let n=e.parent;for(;n;){if(n.id===t.id)return!0;n=n.parent}return!1}async moveIntoContainer(e){let{node:t,containerNode:n}=e,o=t.parent;this.operationService.moveNode(t,{parent:n});let i=this.document.layout.getPadding(n),r=(e=>{let{targetNode:t,containerNode:n,containerPadding:o}=e;if(n.flowNodeType===B.Sy.ROOT)return t.transform.position;let i=t.transform.transform.worldTransform,r=n.transform.transform.worldTransform,s={x:i.tx,y:i.ty};return n.children&&0!==n.children.length?{x:s.x-r.tx,y:s.y-r.ty}:{x:0,y:o.top}})({targetNode:t,containerNode:n,containerPadding:i});this.operationService.updateNodePosition(t,r),await eu(),this.emitter.fire({type:"in",node:t,sourceContainer:o,targetContainer:n})}constructor(){this.emitter=new Z.Q5,this.toDispose=new Z.K4,this.on=this.emitter.event}};ed([(0,z.f3)(O.iw)],em.prototype,"dragService",2),ed([(0,z.f3)(O.L4)],em.prototype,"document",2),ed([(0,z.f3)(P.ER)],em.prototype,"playgroundConfig",2),ed([(0,z.f3)(O.xV)],em.prototype,"operationService",2),ed([(0,z.f3)(O.dm)],em.prototype,"linesManager",2),ed([(0,z.f3)(R.qp)],em.prototype,"historyService",2),ed([(0,z.f3)(O.oJ)],em.prototype,"selectService",2),em=ed([(0,z.b2)()],em);var ex=(0,P.M1)({onBind:e=>{let{bind:t}=e;t(em).toSelf().inSingletonScope()},onInit(e,t){e.get(em).init()},onReady(e,t){!0!==t.disableNodeIntoContainer&&e.get(em).ready()},onDispose(e){e.get(em).dispose()}}),ey=()=>{let e=(0,O.PF)(),{size:t={width:300,height:200},isContainer:n}=e.getNodeMeta(),o=e.getData(B.eG),[i,r]=(0,E.useState)(t.width),[s,a]=(0,E.useState)(t.height),l=()=>{if(0===e.blocks.length){r(t.width),a(t.height);return}r(o.bounds.width),a(o.bounds.height)};if((0,E.useEffect)(()=>{let t=o.onDataChange(()=>{l(),e.getData(O.QW).updateDynamicPorts()});return()=>t.dispose()},[o,i,s]),(0,E.useEffect)(()=>{l()},[]),n)return{width:i,height:s}},ef=A.ZP.div`
  width: 100%;
  height: 100%;
  inset: 56px 18px 18px;
  /* 背景色现在通过 style 属性动态设置 */
`,ev=()=>{let e=(0,O.PF)(),t={};try{t=(0,P.G2)(er.Xm)}catch(e){}let n=t.gridSize??20,o=t.dotSize??1,i=t.dotColor??"#eceeef",r=t.dotOpacity??.5,s=t.backgroundColor??"#f2f3f5",a=t.dotFillColor===i?"":t.dotFillColor,l=`sub-canvas-dot-pattern-${e.id}`;return E.createElement(ef,{className:"sub-canvas-background","data-flow-editor-selectable":"true",style:{backgroundColor:s}},E.createElement("svg",{width:"100%",height:"100%"},E.createElement("pattern",{id:l,width:n,height:n,patternUnits:"userSpaceOnUse"},E.createElement("circle",{cx:o,cy:o,r:o,stroke:i,fill:a,fillOpacity:r})),E.createElement("rect",{width:"100%",height:"100%",fill:`url(#${l})`,"data-node-panel-container":e.id})))},ej=A.ZP.div`
  pointer-events: none;

  position: relative;

  display: flex;
  align-items: center;

  width: 100%;
  height: 100%;

  background-color: transparent;
  border: 1px solid var(--coz-stroke-plus, rgba(6, 7, 9, 15%));
  border-color: var(--coz-bg-plus, rgb(249, 249, 249));
  border-style: solid;
  border-width: 8px;
  border-radius: 8px;

  &::before {
    content: '';

    position: absolute;
    z-index: 0;
    inset: -4px;

    background-color: transparent;
    border-color: var(--coz-bg-plus, rgb(249, 249, 249));
    border-style: solid;
    border-width: 4px;
    border-radius: 8px;
  }
`,eC=e=>{let{style:t,children:n}=e;return E.createElement(ej,{className:"sub-canvas-border",style:{...t}},n)},eN=A.ZP.div`
  width: 100%;
  height: 100%;
`,eb="workflow-move-into-sub-canvas-tip-visible",ew="false",eM=class e{static get instance(){return this._instance||(this._instance=new e),this._instance}isClosed(){return this.isCloseForever()||this.closed}close(){this.closed=!0}isCloseForever(){return localStorage.getItem(eb)===ew}closeForever(){localStorage.setItem(eb,ew)}constructor(){this.closed=!1}},eA=A.ZP.div`
  pointer-events: auto;
  position: absolute;
  top: 0;

  width: 100%;
  height: 28px;

  .container {
    height: 100%;
    background-color: #e4e6f5;
    border-radius: 4px 4px 0 0;

    .content {
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      justify-content: center;

      width: 100%;
      height: 100%;

      .text {
        font-size: 14px;
        font-weight: 400;
        font-style: normal;
        line-height: 20px;
        color: rgba(15, 21, 40, 82%);
        text-overflow: ellipsis;
      }

      .custom-content {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;

        /* 为自定义内容提供默认样式，但允许覆盖 */
        font-size: 14px;
        font-weight: 400;
        line-height: 20px;
        color: rgba(15, 21, 40, 82%);

        /* 确保自定义内容不会超出容器 */
        overflow: hidden;
      }

      .space {
        width: 128px;
      }
    }

    .actions {
      position: absolute;
      top: 0;
      right: 0;

      display: flex;
      gap: 8px;
      align-items: center;

      height: 28px;
      padding: 0 16px;

      .close-forever {
        cursor: pointer;

        padding: 0 3px;

        font-size: 12px;
        font-weight: 400;
        font-style: normal;
        line-height: 12px;
        color: rgba(32, 41, 69, 62%);
      }

      .close {
        display: flex;
        cursor: pointer;
        height: 100%;
        align-items: center;
      }
    }
  }
`,eS=/(Macintosh|MacIntel|MacPPC|Mac68K|iPad)/.test(navigator.userAgent),ek=()=>E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},E.createElement("path",{fill:"#060709",fillOpacity:"0.5",d:"M12.13 12.128a.5.5 0 0 0 .001-.706L8.71 8l3.422-3.423a.5.5 0 0 0-.001-.705.5.5 0 0 0-.706-.002L8.002 7.293 4.579 3.87a.5.5 0 0 0-.705.002.5.5 0 0 0-.002.705L7.295 8l-3.423 3.422a.5.5 0 0 0 .002.706c.195.195.51.197.705.001l3.423-3.422 3.422 3.422c.196.196.51.194.706-.001"})),eD=e=>{let{tipText:t,neverRemindText:n}=e,{visible:o,close:i,closeForever:r}=(()=>{let e=(0,O.PF)(),[t,n]=(0,E.useState)(!1),o=eM.instance,i=(0,P.G2)(em),r=(0,E.useCallback)(()=>{o.isClosed()||n(!0)},[o]),s=(0,E.useCallback)(()=>{o.close(),n(!1)},[o]),a=(0,E.useCallback)(()=>{o.closeForever(),s()},[s,o]);return(0,E.useEffect)(()=>{let t=i.on(t=>{"in"===t.type&&t.targetContainer===e&&r()}),o=i.on(t=>{"out"===t.type&&(t.sourceContainer!==e||e.blocks.length||n(!1))});return()=>{t.dispose(),o.dispose()}},[i,e,r,s,t]),{visible:t,close:s,closeForever:a}})(),s=t||es.o.t("Hold {{key}} to drag node out",{key:eS?"Cmd ⌘":"Ctrl"});return o?E.createElement(eA,{className:"sub-canvas-tips"},E.createElement("div",{className:"container"},E.createElement("div",{className:"content"},"string"==typeof s?E.createElement("p",{className:"text"},s):E.createElement("div",{className:"custom-content"},s),E.createElement("div",{className:"space",style:{width:0}})),E.createElement("div",{className:"actions"},E.createElement("p",{className:"close-forever",onClick:r},n||es.o.t("Never Remind")),E.createElement("div",{className:"close",onClick:i},E.createElement(ek,null))))):null},eE=e=>{let{className:t,style:n,offsetY:o=0,tipText:i}=e,r=ey(),s=(null==r?void 0:r.height)??0,a=(0,O.PF)();return(0,E.useLayoutEffect)(()=>{r&&(a.renderData.node.style.width=r.width+"px",a.renderData.node.style.height=r.height+"px")},[null==r?void 0:r.width,null==r?void 0:r.height]),E.createElement(eN,{className:`sub-canvas-render ${t??""}`,style:{height:s+o,...n},"data-flow-editor-selectable":"true",onDragStart:e=>{e.stopPropagation()}},E.createElement(eC,null,E.createElement(ev,null),E.createElement(eD,{tipText:i})))},eI=Object.defineProperty,eL=Object.getOwnPropertyDescriptor,eT=(e,t,n,o)=>{for(var i,r=o>1?void 0:o?eL(t,n):t,s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o?i(t,n,r):i(r))||r);return o&&r&&eI(t,n,r),r};(y||(y={})).validate=e=>{if(!e||!Array.isArray(e)||0===e.length||e.some(e=>e.flowNodeType===B.Sy.GROUP)||e.some(e=>{var t;return e&&(null==e||null==(t=e.parent)?void 0:t.flowNodeType)===B.Sy.GROUP}))return!1;let t=e[0].parent;return!!e.every(e=>e.parent===t)};var eP=Symbol("WorkflowGroupPluginOptions"),ez=class extends B.QU{ready(){this.toDispose.push(this.listenContainer())}dispose(){this.toDispose.dispose()}createGroup(e){var t;if(!y.validate(e))return;let n=e[0].parent??this.document.root,o=this.document.getNodeRegistry(B.Sy.GROUP),i=null==o||null==(t=o.onAdd)?void 0:t.call(o,this.context);this.opts.initGroupJSON&&(i=this.opts.initGroupJSON(i,e)),this.historyService.startTransaction(),this.document.createWorkflowNodeByType(B.Sy.GROUP,{x:0,y:0},i,n.id),e.forEach(e=>{this.freeOperationService.moveNode(e,{parent:i.id})}),this.historyService.endTransaction()}ungroup(e){let t=e.blocks.slice();if(!e.parent)return;let n=e.transform.position;this.historyService.startTransaction(),t.forEach(t=>{var n;this.freeOperationService.moveNode(t,{parent:null==(n=e.parent)?void 0:n.id})}),e.dispose(),t.forEach(e=>{let t=e.getData(P.VO),o={x:t.position.x+n.x,y:t.position.y+n.y};this.freeOperationService.updateNodePosition(e,o)}),this.historyService.endTransaction()}listenContainer(){return this.nodeIntoContainerService.on(e=>{var t,n;e.type===ec.Out&&(null==(t=e.sourceContainer)?void 0:t.flowNodeType)===B.Sy.GROUP&&(null==(n=e.sourceContainer)?void 0:n.blocks.length)===0&&e.sourceContainer.dispose()})}constructor(){super(...arguments),this.toDispose=new Z.K4}};eT([(0,z.f3)(O.L4)],ez.prototype,"document",2),eT([(0,z.f3)(O.xV)],ez.prototype,"freeOperationService",2),eT([(0,z.f3)(R.qp)],ez.prototype,"historyService",2),eT([(0,z.f3)(em)],ez.prototype,"nodeIntoContainerService",2),eT([(0,z.f3)(eP)],ez.prototype,"opts",2),eT([(0,z.f3)(C.bQo)],ez.prototype,"context",2),ez=eT([(0,z.b2)()],ez);var eZ=((c=eZ||{}).Group="group",c.Ungroup="ungroup",c),eO=class{async execute(){this.groupService.createGroup(this.selectService.selectedNodes),this.selectService.clear()}constructor(e){this.commandId="group",this.commandDetail={label:"Group"},this.shortcuts=["meta g","ctrl g"],this.selectService=e.get(O.oJ),this.groupService=e.get(ez),this.execute=this.execute.bind(this)}},eR=class{async execute(e){let t=e||this.selectService.activatedNode;t&&t.flowNodeType===B.Sy.GROUP&&(this.groupService.ungroup(t),this.selectService.clear())}constructor(e){this.commandId="ungroup",this.commandDetail={label:"Ungroup"},this.shortcuts=["meta shift g","ctrl shift g"],this.selectService=e.get(O.oJ),this.groupService=e.get(ez),this.execute=this.execute.bind(this)}},eB={type:B.Sy.GROUP,meta:{renderKey:B.Sy.GROUP,defaultPorts:[],isContainer:!0,disableSideBar:!0,size:{width:560,height:400},padding:()=>({top:80,bottom:40,left:65,right:65}),selectable:(e,t)=>!t||!e.getData(B.eG).bounds.contains(t.x,t.y),expandable:!1},formMeta:{render:()=>React.createElement(React.Fragment,null)},onAdd:()=>({type:B.Sy.GROUP,id:`group_${(0,O.x0)(5)}`,meta:{position:{x:0,y:0}},data:{}})},eV=(0,P.M1)({onBind(e,t){let{bind:n,rebind:o}=e;n(ez).toSelf().inSingletonScope(),n(eP).toConstantValue(t),o(B.QU).toService(ez)},onInit(e,t){let{groupNodeRender:n,disableGroupShortcuts:o=!1}=t;n&&e.get(eo.Rf).registerReactComponent(B.Sy.GROUP,n),o||e.get(en.Kg).addHandlers(new eO(e),new eR(e));let i=e.get(O.L4);i.getNodeRegistry(B.Sy.GROUP)||i.registerFlowNodes(eB)},onReady(e){e.get(ez).ready()},onDispose(e){e.get(ez).dispose()}});let eF=async(e,t)=>{let n=e.get(_),o=e.document,i=e.get(C.iwM),r=e.get(C.dmf),{fromPort:s,toPort:a,mousePos:l,line:d,originLine:c}=t;if(c||!d||a)return;let u=s.node.parent,p="bottom"===s.location,h=await n.singleSelectNodePanel({position:p?{x:l.x-165,y:l.y+60}:l,containerNode:u,panelProps:{enableNodePlaceholder:!0,enableScrollClose:!0}});if(!h)return;let{nodeType:g,nodeJSON:m}=h,x=X({nodeType:g,position:l,fromPort:s,toPort:a,containerNode:u,document:o,dragService:i}),y=o.createWorkflowNodeByType(g,x,m??{},null==u?void 0:u.id);await (0,C.gw0)(20),q({fromPort:s,node:y,linesManager:r})},eQ="flowgram-workflow-clipboard-data";var eU=((u={}).COPY="COPY",u.PASTE="PASTE",u.CUT="CUT",u.GROUP="GROUP",u.UNGROUP="UNGROUP",u.COLLAPSE="COLLAPSE",u.EXPAND="EXPAND",u.DELETE="DELETE",u.ZOOM_IN="ZOOM_IN",u.ZOOM_OUT="ZOOM_OUT",u.RESET_ZOOM="RESET_ZOOM",u.SELECT_ALL="SELECT_ALL",u.CANCEL_SELECT="CANCEL_SELECT",u);class eH{async execute(){this.playgroundConfig.zoom>1.9||this.playgroundConfig.zoomout()}constructor(e){this.commandId=eU.ZOOM_OUT,this.shortcuts=["meta -","ctrl -"],this.playgroundConfig=e.get(C.ERL),this.execute=this.execute.bind(this)}}class eJ{async execute(){this.playgroundConfig.zoom>1.9||this.playgroundConfig.zoomin()}constructor(e){this.commandId=eU.ZOOM_IN,this.shortcuts=["meta =","ctrl ="],this.playgroundConfig=e.get(C.ERL),this.execute=this.execute.bind(this)}}class eY{async execute(){let e=this.document.getAllNodes();this.playground.selectionService.selection=e}constructor(e){this.commandId=eU.SELECT_ALL,this.shortcuts=["meta a","ctrl a"],this.document=e.get(C.L4w),this.playground=e.playground,this.execute=this.execute.bind(this)}}var eG=n(245803);!function(e){e.traverseNodes=(n,o)=>{let{value:i}=n;if(i){if("[object Object]"===Object.prototype.toString.call(i))Object.entries(i).forEach(t=>{let[r,s]=t;return e.traverseNodes({value:s,container:i,key:r,parent:n},o)});else if(Array.isArray(i))for(let t=i.length-1;t>=0;t--){let r=i[t];e.traverseNodes({value:r,container:i,index:t,parent:n},o)}o(t({node:n}))}};let t=e=>{let{node:t}=e;return{node:t,setValue:e=>n(t,e),getParents:()=>o(t),getPath:()=>i(t),getStringifyPath:()=>r(t),deleteSelf:()=>s(t)}},n=(e,t)=>{if(!t||!e)return;e.value=t;let{container:n,key:o,index:i}=e;o&&n?n[o]=t:"number"==typeof i&&(n[i]=t)},o=e=>{let t=[],n=e;for(;n;)t.unshift(n),n=n.parent;return t},i=e=>{let t=[];return o(e).forEach(e=>{e.key?t.unshift(e.key):e.index&&t.unshift(e.index)}),t},r=e=>i(e).reduce((e,t)=>"string"!=typeof t?`${e}[${t}]`:/\W/g.test(t)?`${e}["${t}"]`:`${e}.${t}`,""),s=e=>{let{container:t,key:n,index:o}=e;n&&t?delete t[n]:"number"==typeof o&&t.splice(o,1)}}(f||(f={}));var eX=v||(v={});let eq=(0,N.kP)("1234567890",6);eX.getAllNodeIds=e=>{let t=new Set,n=e=>{var o;t.add(e.id),(null==(o=e.blocks)?void 0:o.length)&&e.blocks.forEach(e=>n(e))};return e.nodes.forEach(e=>n(e)),Array.from(t)},eX.generateNodeReplaceMap=(e,t)=>{let n=new Map;return e.forEach(e=>{if(t(e))n.set(e,e);else{let o;do o=eq();while(!t(o));n.set(e,o)}}),n},eX.replaceNodeId=(e,t)=>(((e,t)=>{let n=Array.isArray(t)?e=>{t.forEach(t=>t(e))}:t;return f.traverseNodes({value:e},n)})(e,e=>{if(!(e=>{var t,n,o,i,r,s,a;let{node:l}=e;return!!((null==l?void 0:l.key)&&["sourceNodeID","targetNodeID"].includes(l.key))&&(null==(n=l.parent)||null==(t=n.parent)?void 0:t.key)==="edges"||(null==l?void 0:l.key)==="id"&&null!=(null==(o=l.container)?void 0:o.type)&&null!=(null==(i=l.container)?void 0:i.meta)&&null!=(null==(r=l.container)?void 0:r.data)||(null==l?void 0:l.key)==="blockID"&&null!=(null==(s=l.container)?void 0:s.name)&&(null==(a=l.container)?void 0:a.source)==="block-output"})(e))return;let{node:n}=e;t.has(n.value)&&e.setValue(t.get(n.value))}),e);class eW{async execute(){if(this.readonly)return;let e=await this.tryReadClipboard();if(!e||!this.isValidData(e))return;let t=this.apply(e);return t.length>0&&(eG.FN.success({content:"Copy successfully",showClose:!1}),await this.nextTick(),this.scrollNodesToView(t)),t}apply(e){let{json:t}=e,n=(e=>{let{json:t,isUniqueId:n}=e,o=v.getAllNodeIds(t),i=v.generateNodeReplaceMap(o,n);return v.replaceNodeId(t,i)})({json:t,isUniqueId:e=>!this.entityManager.getEntityById(e)}),o=this.calcPasteOffset(e.bounds),i=this.getSelectedContainer();this.applyOffset({json:n,offset:o,parent:i});let{nodes:r}=this.document.renderJSON(n,{parent:i});return this.selectNodes(r),this.playground.node.focus(),r}get readonly(){return this.playgroundConfig.readonly}isValidData(e){if((null==e?void 0:e.type)!==eQ)return eG.FN.error({content:"Invalid clipboard data"}),!1;if(e.source.host!==window.location.host)return eG.FN.error({content:"Cannot paste nodes from different host"}),!1;let t=this.getSelectedContainer();for(let n of e.json.nodes){let e=this.dragService.canDropToNode({dragNodeType:n.type,dropNodeType:null==t?void 0:t.flowNodeType,dropNode:t});if(!e.allowDrop)return eG.FN.error({content:e.message??"Cannot paste nodes to invalid container"}),!1}return!0}async tryReadClipboard(){try{let e=await navigator.clipboard.readText()||"";return JSON.parse(e)}catch(e){return}}calcPasteOffset(e){let{x:t,y:n,width:o,height:i}=e,{center:r}=new C.AeJ(t,n,o,i),s=this.hoverService.hoveredPos;return{x:s.x-r.x,y:s.y-r.y}}applyOffset(e){let{json:t,offset:n,parent:o}=e;t.nodes.forEach(e=>{var t;if(!(null==(t=e.meta)?void 0:t.position))return;let i={x:e.meta.position.x+n.x,y:e.meta.position.y+n.y};o&&(i=this.dragService.adjustSubNodePosition(e.type,o,i)),e.meta.position=i})}getSelectedContainer(){let{activatedNode:e}=this.selectService;return(null==e?void 0:e.getNodeMeta().isContainer)?e:void 0}selectNodes(e){this.selectService.selection=e}async scrollNodesToView(e){let t=e.map(e=>e.getData(C.eGM).bounds);await this.document.playgroundConfig.scrollToView({bounds:C.AeJ.enlarge(t)})}async nextTick(){await (0,C.gw0)(16),await new Promise(e=>requestAnimationFrame(e))}constructor(e){this.commandId=eU.PASTE,this.shortcuts=["meta v","ctrl v"],this.playgroundConfig=e.playground.config,this.document=e.get(C.L4w),this.selectService=e.get(C.oJU),this.entityManager=e.get(C.v2K),this.hoverService=e.get(C.XHk),this.dragService=e.get(C.iwM),this.playground=e.playground,this.execute=this.execute.bind(this)}}class eK{async execute(){this.selectService.selectedNodes.forEach(e=>{e.renderData.expanded=!0})}constructor(e){this.commandId=eU.EXPAND,this.commandDetail={label:"Expand"},this.shortcuts=["meta alt closebracket","ctrl alt openbracket"],this.selectService=e.get(C.oJU),this.execute=this.execute.bind(this)}}class e_{async execute(e){if(this.readonly)return;let t=Array.isArray(e)?e:this.selectService.selection;this.isValid(t.filter(e=>e instanceof C.CTO))&&(this.historyService.startTransaction(),t.forEach(e=>{e instanceof C.CTO?this.removeNode(e):e instanceof C.e2M?this.removeLine(e):e.dispose()}),this.selectService.selection=this.selectService.selection.filter(e=>!e.disposed),this.historyService.endTransaction())}get readonly(){return this.playgroundConfig.readonly}isValid(e){return!e.some(e=>[b.Start,b.End].includes(e.flowNodeType))||(eG.FN.error({content:"Start or End node cannot be deleted",showClose:!1}),!1)}removeNode(e){var t;if(!this.document.canRemove(e))return;let n=e.getNodeMeta(),o=null==(t=n.subCanvas)?void 0:t.call(n,e);if(null==o?void 0:o.isCanvas)return void o.parentNode.dispose();e.dispose()}removeLine(e){this.document.linesManager.canRemove(e)&&e.dispose()}constructor(e){this.commandId=eU.DELETE,this.shortcuts=["backspace","delete"],this.playgroundConfig=e.playground.config,this.document=e.get(C.L4w),this.selectService=e.get(C.oJU),this.historyService=e.get(C.qpv),this.execute=this.execute.bind(this)}}class e${async execute(){if(this.readonly||await this.hasSelectedText()||!this.isValid(this.selectedNodes))return;let e=this.toClipboardData();await this.write(e)}toClipboardData(e){let t=this.getValidNodes(e||this.selectedNodes),n=this.toSource();return{type:eQ,source:n,json:this.toJSON(t),bounds:this.getEntireBounds(t)}}get readonly(){return this.playgroundConfig.readonly}async hasSelectedText(){var e,t;return!!(null==(e=window.getSelection())?void 0:e.toString())&&(await navigator.clipboard.writeText((null==(t=window.getSelection())?void 0:t.toString())??""),eG.FN.success({content:"Text copied"}),!0)}get selectedNodes(){return this.selectService.selection.filter(e=>e instanceof C.CTO)}isValid(e){return 0!==e.length||(eG.FN.warning({content:"No nodes selected"}),!1)}getValidNodes(e){return e.filter(e=>![b.Start,b.End].includes(e.flowNodeType)&&!e.getNodeMeta().copyDisable)}toSource(){return{host:window.location.host}}toJSON(e){return{nodes:this.getNodeJSONs(e),edges:this.getEdgeJSONs(e)}}getNodeJSONs(e){return e.map(e=>{var t;let n=this.document.toNodeJSON(e);if(!(null==(t=n.meta)?void 0:t.position))return n;let{bounds:o}=e.getData(C.VOn);return n.meta.position={x:o.x,y:o.y},n}).filter(Boolean)}getEdgeJSONs(e){let t=new Set,n=new Set(e.map(e=>e.id));return e.forEach(e=>{let o=e.getData(C.Z14);[...o.inputLines,...o.outputLines].forEach(e=>{var o;n.has(e.from.id)&&(null==(o=e.to)?void 0:o.id)&&n.has(e.to.id)&&t.add(e)})}),Array.from(t).map(e=>e.toJSON())}getEntireBounds(e){let t=e.map(e=>e.getData(C.VOn).bounds),n=C.AeJ.enlarge(t);return{x:n.x,y:n.y,width:n.width,height:n.height}}async write(e){try{await navigator.clipboard.writeText(JSON.stringify(e)),this.notifySuccess()}catch(e){console.error("Failed to write text: ",e)}}notifySuccess(){let e=[b.Start,b.End,b.BlockStart,b.BlockEnd];if(this.selectedNodes.some(t=>e.includes(t.flowNodeType)))return void eG.FN.warning({content:"The Start/End node cannot be duplicated, other nodes have been copied to the clipboard",showClose:!1});eG.FN.success({content:"Nodes have been copied to the clipboard",showClose:!1})}constructor(e){this.commandId=eU.COPY,this.shortcuts=["meta c","ctrl c"],this.playgroundConfig=e.playground.config,this.document=e.get(C.L4w),this.selectService=e.get(C.oJU),this.execute=this.execute.bind(this)}}class e0{async execute(){this.selectService.selectedNodes.forEach(e=>{e.renderData.expanded=!1})}constructor(e){this.commandId=eU.COLLAPSE,this.commandDetail={label:"Collapse"},this.shortcuts=["meta alt openbracket","ctrl alt openbracket"],this.selectService=e.get(C.oJU),this.execute=this.execute.bind(this)}}function e1(e,t){e.addHandlers(new e$(t),new eW(t),new eY(t),new e0(t),new eK(t),new e_(t),new eJ(t),new eH(t))}var e2=n(549207);class e3{save(){console.log(this.document.toJSON())}}(0,e2.gn)([(0,C.f3M)(C.bQo),(0,e2.w6)("design:type",void 0===C.bQo?Object:C.bQo)],e3.prototype,"ctx",void 0),(0,e2.gn)([(0,C.f3M)(C.z2R),(0,e2.w6)("design:type",void 0===C.z2R?Object:C.z2R)],e3.prototype,"selectionService",void 0),(0,e2.gn)([(0,C.f3M)(C.XQj),(0,e2.w6)("design:type",void 0===C.XQj?Object:C.XQj)],e3.prototype,"playground",void 0),(0,e2.gn)([(0,C.f3M)(C.L4w),(0,e2.w6)("design:type",void 0===C.L4w?Object:C.L4w)],e3.prototype,"document",void 0),e3=(0,e2.gn)([(0,C.b2C)()],e3);var e4=n(196130),e5=e4.ZP.record(e4.ZP.string(),e4.ZP.any()),e9=e4.ZP.object({id:e4.ZP.string(),nodeID:e4.ZP.string(),inputs:e5,outputs:e5.optional(),data:e5,branch:e4.ZP.string().optional()}),e6={status:e4.ZP.string(),terminated:e4.ZP.boolean(),startTime:e4.ZP.number(),endTime:e4.ZP.number().optional(),timeCost:e4.ZP.number()},e8=e4.ZP.object(e6),e7=e4.ZP.object({id:e4.ZP.string(),...e6,snapshots:e4.ZP.array(e9)}),te=e4.ZP.record(e4.ZP.string(),e7),tt=e4.ZP.object({id:e4.ZP.string(),type:e4.ZP.enum(["log","info","debug","error","warning"]),message:e4.ZP.string(),nodeID:e4.ZP.string().optional(),timestamp:e4.ZP.number()}),tn=e4.ZP.record(e4.ZP.enum(["log","info","debug","error","warning"]),e4.ZP.array(tt)),to=((p=to||{}).ServerInfo="ServerInfo",p.TaskRun="TaskRun",p.TaskReport="TaskReport",p.TaskResult="TaskResult",p.TaskCancel="TaskCancel",p.TaskValidate="TaskValidate",p),ti={name:"TaskValidate",method:"POST",path:"/task/validate",module:"Task",schema:{input:e4.ZP.object({schema:e4.ZP.string(),inputs:e5}),output:e4.ZP.object({valid:e4.ZP.boolean(),errors:e4.ZP.array(e4.ZP.string()).optional()})}},tr={name:"TaskRun",method:"POST",path:"/task/run",module:"Task",schema:{input:e4.ZP.object({schema:e4.ZP.string(),inputs:e5}),output:e4.ZP.object({taskID:e4.ZP.string()})}},ts={name:"TaskResult",method:"GET",path:"/task/result",module:"Task",schema:{input:e4.ZP.object({taskID:e4.ZP.string()}),output:e5}},ta={name:"TaskReport",method:"GET",path:"/task/report",module:"Task",schema:{input:e4.ZP.object({taskID:e4.ZP.string()}),output:e4.ZP.object({id:e4.ZP.string(),inputs:e5,outputs:e5,workflowStatus:e8,reports:te,messages:tn})}},tl={name:"TaskCancel",method:"PUT",path:"/task/cancel",module:"Task",schema:{input:e4.ZP.object({taskID:e4.ZP.string()}),output:e4.ZP.object({success:e4.ZP.boolean()})}};e4.ZP.undefined(),e4.ZP.object({name:e4.ZP.string(),runtime:e4.ZP.string(),version:e4.ZP.string(),time:e4.ZP.string()}),Symbol.for("Engine"),Symbol.for("Executor");var td=((h=td||{}).Pending="pending",h.Processing="processing",h.Succeeded="succeeded",h.Failed="failed",h.Canceled="canceled",h);Symbol.for("Validation");class tc{constructor(){}}to.TaskRun,to.TaskReport,to.TaskResult,to.TaskCancel,to.TaskValidate,tc=(0,e2.gn)([(0,C.b2C)(),(0,e2.w6)("design:type",Function),(0,e2.w6)("design:paramtypes",[])],tc);class tu{constructor(){this[o]=async e=>{let{TaskRunAPI:t}=await Promise.all([n.e("529974"),n.e("334122")]).then(n.bind(n,302953));return t(e)},this[i]=async e=>{let{TaskReportAPI:t}=await Promise.all([n.e("529974"),n.e("334122")]).then(n.bind(n,302953));return t(e)},this[r]=async e=>{let{TaskResultAPI:t}=await Promise.all([n.e("529974"),n.e("334122")]).then(n.bind(n,302953));return t(e)},this[s]=async e=>{let{TaskCancelAPI:t}=await Promise.all([n.e("529974"),n.e("334122")]).then(n.bind(n,302953));return t(e)},this[a]=async e=>{let{TaskValidateAPI:t}=await Promise.all([n.e("529974"),n.e("334122")]).then(n.bind(n,302953));return t(e)}}}o=to.TaskRun,i=to.TaskReport,r=to.TaskResult,s=to.TaskCancel,a=to.TaskValidate,tu=(0,e2.gn)([(0,C.b2C)(),(0,e2.w6)("design:type",Function),(0,e2.w6)("design:paramtypes",[])],tu);let tp={domain:"localhost",port:4e3,protocol:"http"};class th{init(e){this.config=e}async [to.TaskRun](e){return this.request(tr.path,tr.method,{body:e,errorMessage:"TaskRun failed"})}async [to.TaskReport](e){return this.request(ta.path,ta.method,{queryParams:{taskID:e.taskID},errorMessage:"TaskReport failed"})}async [to.TaskResult](e){return this.request(ts.path,ts.method,{queryParams:{taskID:e.taskID},errorMessage:"TaskResult failed",fallbackValue:{success:!1}})}async [to.TaskCancel](e){return await this.request(tl.path,tl.method,{body:e,errorMessage:"TaskCancel failed",fallbackValue:{success:!1}})??{success:!1}}async [to.TaskValidate](e){return this.request(ti.path,ti.method,{body:e,errorMessage:"TaskValidate failed"})}async request(e,t,n){try{let o=this.url(e,n.queryParams),i={method:t,redirect:"follow"};n.body&&(i.headers={"Content-Type":"application/json"},i.body=JSON.stringify(n.body));let r=await fetch(o,i),s=await r.json();if(this.isError(s))return console.error(n.errorMessage,s),n.fallbackValue;return s}catch(e){return console.error(e),n.fallbackValue}}url(e,t){let n=this.getURL(`/api${e}`);if(!t)return n;let o=new URLSearchParams(t);return`${n}?${o.toString()}`}isError(e){return!!e&&void 0!==e.code}getURL(e){let t=this.config.protocol??window.location.protocol,n=this.config.port?`${this.config.domain}:${this.config.port}`:this.config.domain;return`${t}://${n}${e}`}constructor(){this.config=tp}}th=(0,e2.gn)([(0,C.b2C)(),(0,e2.w6)("design:type",Function),(0,e2.w6)("design:paramtypes",[])],th);class tg{isFlowingLine(e){return this.runningNodes.some(t=>t.getData(C.Z14).inputLines.includes(e))}async taskRun(e){let t;if(this.taskID&&await this.taskCancel(),!await this.validateForm())return void this.resultEmitter.fire({errors:["Form validation failed"]});let n=this.document.toJSON(),o=await this.runtimeClient.TaskValidate({schema:JSON.stringify(n),inputs:e});if(!(null==o?void 0:o.valid))return void this.resultEmitter.fire({errors:(null==o?void 0:o.errors)??["Internal Server Error"]});this.reset();try{let o=await this.runtimeClient.TaskRun({schema:JSON.stringify(n),inputs:e});t=null==o?void 0:o.taskID}catch(e){this.resultEmitter.fire({errors:[null==e?void 0:e.message]});return}return t?(this.taskID=t,this.syncTaskReportIntervalID=setInterval(()=>{this.syncTaskReport()},500),this.taskID):void this.resultEmitter.fire({errors:["Task run failed"]})}async taskCancel(){this.taskID&&await this.runtimeClient.TaskCancel({taskID:this.taskID})}async validateForm(){let e=this.document.getAllNodes().map(e=>(0,C.CMu)(e));return(await Promise.all(e.map(async e=>null==e?void 0:e.validate()))).filter(e=>void 0!==e).every(e=>e)}reset(){this.taskID=void 0,this.nodeRunningStatus=new Map,this.runningNodes=[],this.syncTaskReportIntervalID&&clearInterval(this.syncTaskReportIntervalID),this.resetEmitter.fire({})}async syncTaskReport(){if(!this.taskID)return;let e=await this.runtimeClient.TaskReport({taskID:this.taskID});if(!e){clearInterval(this.syncTaskReportIntervalID),console.error("Sync task report failed");return}let{workflowStatus:t,inputs:n,outputs:o,messages:i}=e;if(t.terminated)if(clearInterval(this.syncTaskReportIntervalID),Object.keys(o).length>0)this.resultEmitter.fire({result:{inputs:n,outputs:o}});else{var r;this.resultEmitter.fire({errors:null==i||null==(r=i.error)?void 0:r.map(e=>e.nodeID?`${e.nodeID}: ${e.message}`:e.message)})}this.updateReport(e)}updateReport(e){let{reports:t}=e;this.runningNodes=[],this.document.getAllNodes().filter(e=>![b.BlockStart,b.BlockEnd].includes(e.flowNodeType)).forEach(e=>{let n=e.id,o=t[n];if(!o)return;o.status===td.Processing&&this.runningNodes.push(e);let i=this.nodeRunningStatus.get(n);i&&o.status===i.status&&o.snapshots.length===i.nodeResultLength?o.status===td.Processing&&this.reportEmitter.fire(o):(this.nodeRunningStatus.set(n,{nodeID:n,status:o.status,nodeResultLength:o.snapshots.length}),this.reportEmitter.fire(o),this.document.linesManager.forceUpdate())})}constructor(){this.runningNodes=[],this.reportEmitter=new C.Q5$,this.resetEmitter=new C.Q5$,this.resultEmitter=new C.Q5$,this.onNodeReportChange=this.reportEmitter.event,this.onReset=this.resetEmitter.event,this.onResultChanged=this.resultEmitter.event}}(0,e2.gn)([(0,C.f3M)(C.XQj),(0,e2.w6)("design:type",void 0===C.XQj?Object:C.XQj)],tg.prototype,"playground",void 0),(0,e2.gn)([(0,C.f3M)(C.L4w),(0,e2.w6)("design:type",void 0===C.L4w?Object:C.L4w)],tg.prototype,"document",void 0),(0,e2.gn)([(0,C.f3M)(tc),(0,e2.w6)("design:type",void 0===tc?Object:tc)],tg.prototype,"runtimeClient",void 0),tg=(0,e2.gn)([(0,C.b2C)()],tg);class tm extends C.mh4{onReady(){this.listenPlaygroundEvent("contextmenu",e=>{this.config.readonlyOrDisabled||(this.openNodePanel(e),e.preventDefault(),e.stopPropagation())})}openNodePanel(e){let t=this.getPosFromMouseEvent(e),n=this.getContainerNode(t);this.nodePanelService.callNodePanel({position:t,containerNode:n,panelProps:{},onSelect:async e=>{if(!e)return;let{nodeType:o,nodeJSON:i}=e,r=this.dragService.adjustSubNodePosition(o,n,t),s=this.ctx.document.createWorkflowNodeByType(o,r,i??{},null==n?void 0:n.id);this.selectService.select(s)},onClose:()=>{}})}getContainerNode(e){let t=eg({targetPoint:e,transforms:eh(this.document.getAllNodes()),document:this.document});return null==t?void 0:t.entity}}(0,e2.gn)([(0,C.f3M)(C.bQo),(0,e2.w6)("design:type",void 0===C.bQo?Object:C.bQo)],tm.prototype,"ctx",void 0),(0,e2.gn)([(0,C.f3M)(_),(0,e2.w6)("design:type",void 0===_?Object:_)],tm.prototype,"nodePanelService",void 0),(0,e2.gn)([(0,C.f3M)(C.XHk),(0,e2.w6)("design:type",void 0===C.XHk?Object:C.XHk)],tm.prototype,"hoverService",void 0),(0,e2.gn)([(0,C.f3M)(C.oJU),(0,e2.w6)("design:type",void 0===C.oJU?Object:C.oJU)],tm.prototype,"selectService",void 0),(0,e2.gn)([(0,C.f3M)(C.L4w),(0,e2.w6)("design:type",void 0===C.L4w?Object:C.L4w)],tm.prototype,"document",void 0),(0,e2.gn)([(0,C.f3M)(C.iwM),(0,e2.w6)("design:type",void 0===C.iwM?Object:C.iwM)],tm.prototype,"dragService",void 0),tm=(0,e2.gn)([(0,C.b2C)()],tm);let tx=(0,C.M1y)({onInit(e,t){e.playground.registerLayer(tm)}}),ty=(0,C.M1y)({onBind(e,t){let{bind:n,rebind:o}=e;n(tc).toSelf().inSingletonScope(),n(th).toSelf().inSingletonScope(),n(tu).toSelf().inSingletonScope(),"server"===t.mode?o(tc).to(th):o(tc).to(tu),n(tg).toSelf().inSingletonScope()},onInit(e,t){"server"===t.mode&&e.get(tc).init(t.serverConfig)}});var tf=n(800827);function tv(){let e=(0,C.G2Z)(C.fin),t=(0,C.JAk)(),n=e.getVar();if((0,E.useEffect)(()=>{let n=e.output.onVariableListChange(()=>{t()});return()=>{n.dispose()}},[]),!n)return;let o=n.type?M.Kz.astToSchema(n.type):{type:"object"};return(0,j.jsx)(M._R,{value:o,onChange:e=>n.updateType(M.Kz.schemaToAST(e))})}function tj(){let e=(0,M.VX)({});return(0,j.jsx)(eG.mp,{treeData:e})}var tC=n(578662);function tN(){let[e,t]=(0,E.useState)(!1);return(0,j.jsxs)("div",{className:tC.Z["panel-wrapper"],children:[(0,j.jsx)(eG.u,{content:"Toggle Variable Panel",children:(0,j.jsx)(eG.zx,{className:`${tC.Z["variable-panel-button"]} ${e?tC.Z.close:""}`,theme:e?"borderless":"light",onClick:()=>t(e=>!e),children:e?(0,j.jsx)(tf.Z,{}):(0,j.jsx)("img",{src:w,width:20,height:20})})}),(0,j.jsx)(eG.qq,{isOpen:e,children:(0,j.jsx)("div",{className:tC.Z["panel-container"],children:(0,j.jsxs)(eG.mQ,{children:[(0,j.jsx)(eG.mQ.TabPane,{itemKey:"variables",tab:"Variable List",children:(0,j.jsx)(tj,{})}),(0,j.jsx)(eG.mQ.TabPane,{itemKey:"global",tab:"Global Editor",children:(0,j.jsx)(tv,{})})]})})})]})}class tb extends C.mh4{onReady(){this.config.onDataChange(()=>{let{scrollX:e,scrollY:t}=this.config.config;C.xFV.setStyle(this.node,{position:"absolute",right:25-e,top:t+25})})}render(){return(0,j.jsx)(tN,{})}}tb=(0,e2.gn)([(0,C.b2C)()],tb);let tw=async()=>(await new Promise(e=>setTimeout(e,1e3)),{type:"object",properties:{userId:{type:"string"}}}),tM=(0,C.M1y)({onInit(e){e.playground.registerLayer(tb),tw().then(t=>{e.get(C.fin).setVar(C.qRT.createVariableDeclaration({key:"global",meta:{title:"Global",icon:w},type:M.Kz.schemaToAST(t)}))})}}),tA={render:e=>{let{form:t}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsxs)(nQ,{children:[(0,j.jsx)(nJ,{}),(0,j.jsx)(eG.iz,{}),(0,j.jsx)(M.LE,{displayFromScope:!0})]})]})},validateTrigger:C.C$T.onChange,validate:{title:e=>{let{value:t}=e;return t?void 0:"Title is required"},"inputsValues.*":e=>{var t;let{value:n,context:o,formValues:i,name:r}=e,s=r.replace(/^inputsValues\./,""),a=(null==(t=i.inputs)?void 0:t.required)||[];return(0,M.WY)(n,{node:o.node,required:a.includes(s),errorMessages:{required:`${s} is required`}})}},formatOnInit:(e,t)=>e,formatOnSubmit:(e,t)=>e,effect:{title:M.Hs,outputs:M.Xp,inputsValues:[...M.gB,...(0,M.Sd)({scope:"public"})],"inputsValues.*":(0,M.VZ)(e=>{console.log(`[${e.context.node.id}][${e.name}] Schema Of Ref Updated`)})}};var tS=n(929060),tk=n(253718),tD=n(478236),tE=n(875143);n(627806);var tI=((g={}).Title="title",g.Color="color",g);let tL=e=>{let{size:t}=e;return(0,j.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",style:{width:t,height:t},children:(0,j.jsx)("path",{id:"group",fill:"currentColor",fillRule:"evenodd",stroke:"none",d:"M 0.009766 10 L 0.009766 9.990234 L 0 9.990234 L 0 7.5 L 1 7.5 L 1 9 L 2.5 9 L 2.5 10 L 0.009766 10 Z M 3.710938 10 L 3.710938 9 L 6.199219 9 L 6.199219 10 L 3.710938 10 Z M 7.5 10 L 7.5 9 L 9 9 L 9 7.5 L 10 7.5 L 10 9.990234 L 9.990234 9.990234 L 9.990234 10 L 7.5 10 Z M 0 6.289063 L 0 3.800781 L 1 3.800781 L 1 6.289063 L 0 6.289063 Z M 9 6.289063 L 9 3.800781 L 10 3.800781 L 10 6.289063 L 9 6.289063 Z M 0 2.5 L 0 0.009766 L 0.009766 0.009766 L 0.009766 0 L 2.5 0 L 2.5 1 L 1 1 L 1 2.5 L 0 2.5 Z M 9 2.5 L 9 1 L 7.5 1 L 7.5 0 L 9.990234 0 L 9.990234 0.009766 L 10 0.009766 L 10 2.5 L 9 2.5 Z M 3.710938 1 L 3.710938 0 L 6.199219 0 L 6.199219 1 L 3.710938 1 Z"})})},tT=e=>{let{size:t}=e;return(0,j.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",style:{width:t,height:t},children:(0,j.jsx)("path",{id:"ungroup",fill:"currentColor",fillRule:"evenodd",stroke:"none",d:"M 9.654297 10.345703 L 8.808594 9.5 L 7.175781 9.5 L 7.175781 8.609375 L 7.917969 8.609375 L 1.390625 2.082031 L 1.390625 2.824219 L 0.5 2.824219 L 0.5 1.191406 L -0.345703 0.345703 L 0.283203 -0.283203 L 1.166016 0.599609 L 2.724609 0.599609 L 2.724609 1.490234 L 2.056641 1.490234 L 8.509766 7.943359 L 8.509766 7.275391 L 9.400391 7.275391 L 9.400391 8.833984 L 10.283203 9.716797 L 9.654297 10.345703 Z M 0.509766 9.5 L 0.509766 9.490234 L 0.5 9.490234 L 0.5 7.275391 L 1.390625 7.275391 L 1.390625 8.609375 L 2.724609 8.609375 L 2.724609 9.5 L 0.509766 9.5 Z M 3.802734 9.5 L 3.802734 8.609375 L 6.017578 8.609375 L 6.017578 9.5 L 3.802734 9.5 Z M 0.5 6.197266 L 0.5 3.982422 L 1.390625 3.982422 L 1.390625 6.197266 L 0.5 6.197266 Z M 8.509766 6.197266 L 8.509766 3.982422 L 9.400391 3.982422 L 9.400391 6.197266 L 8.509766 6.197266 Z M 8.509766 2.824219 L 8.509766 1.490234 L 7.175781 1.490234 L 7.175781 0.599609 L 9.390625 0.599609 L 9.390625 0.609375 L 9.400391 0.609375 L 9.400391 2.824219 L 8.509766 2.824219 Z M 3.802734 1.490234 L 3.802734 0.599609 L 6.017578 0.599609 L 6.017578 1.490234 L 3.802734 1.490234 Z"})})},tP=e=>{let{node:t,style:n}=e,o=(0,C.G2Z)(C.HoL);return(0,j.jsx)(eG.u,{content:"Ungroup",children:(0,j.jsx)("div",{className:"workflow-group-ungroup",style:n,children:(0,j.jsx)(eG.zx,{icon:(0,j.jsx)(tT,{size:14}),style:{height:30,width:30},theme:"borderless",type:"tertiary",onClick:()=>{o.executeCommand(eZ.Ungroup,t)}})})})};var tz=n(647314);let tZ=()=>{let[e,t]=(0,E.useState)(!1);return(0,j.jsx)(C.gNt,{name:tI.Title,children:n=>{let{field:o}=n;return e?(0,j.jsx)(eG.II,{autoFocus:!0,className:"workflow-group-title-input",size:"small",value:o.value,onChange:o.onChange,onMouseDown:e=>e.stopPropagation(),onBlur:()=>t(!1),draggable:!1,onEnterPress:()=>t(!1)}):(0,j.jsx)("p",{className:"workflow-group-title",onDoubleClick:()=>t(!0),children:o.value??"Group"})}})},tO="Blue",tR={Red:{50:"#fef2f2",300:"#fca5a5",400:"#f87171"},Orange:{50:"#fff7ed",300:"#fdba74",400:"#fb923c"},Amber:{50:"#fffbeb",300:"#fcd34d",400:"#fbbf24"},Yellow:{50:"#fef9c3",300:"#fde047",400:"#facc15"},Lime:{50:"#f7fee7",300:"#bef264",400:"#a3e635"},Green:{50:"#f0fdf4",300:"#86efac",400:"#4ade80"},Emerald:{50:"#ecfdf5",300:"#6ee7b7",400:"#34d399"},Teal:{50:"#f0fdfa",300:"#5eead4",400:"#2dd4bf"},Cyan:{50:"#ecfeff",300:"#67e8f9",400:"#22d3ee"},Sky:{50:"#ecfeff",300:"#7dd3fc",400:"#38bdf8"},Blue:{50:"#eff6ff",300:"#93c5fd",400:"#60a5fa"},Indigo:{50:"#eef2ff",300:"#a5b4fc",400:"#818cf8"},Violet:{50:"#f5f3ff",300:"#c4b5fd",400:"#a78bfa"},Purple:{50:"#faf5ff",300:"#d8b4fe",400:"#c084fc"},Fuchsia:{50:"#fdf4ff",300:"#f0abfc",400:"#e879f9"},Pink:{50:"#fdf2f8",300:"#f9a8d4",400:"#f472b6"},Rose:{50:"#fff1f2",300:"#fda4af",400:"#fb7185"},Gray:{50:"#f9fafb",300:"#d1d5db",400:"#9ca3af"}},tB=()=>(0,j.jsx)(C.gNt,{name:tI.Color,children:e=>{let{field:t}=e,n=t.value??tO;return(0,j.jsx)(eG.J2,{position:"top",mouseLeaveDelay:300,content:(0,j.jsx)("div",{className:"workflow-group-color-palette",children:Object.entries(tR).map(e=>{let[o,i]=e;return(0,j.jsx)(eG.u,{content:o,mouseEnterDelay:300,children:(0,j.jsx)("span",{className:"workflow-group-color-item",style:{backgroundColor:i["300"],borderColor:o===n?i["400"]:"#fff"},onClick:()=>t.onChange(o)},o)},o)})}),children:(0,j.jsx)("span",{className:"workflow-group-color",style:{backgroundColor:tR[n]["300"]}})})}}),tV=()=>(0,j.jsxs)("div",{className:"workflow-group-tools",children:[(0,j.jsx)(tz.Z,{className:"workflow-group-tools-drag"}),(0,j.jsx)(tZ,{}),(0,j.jsx)(tB,{})]}),tF="workflow-move-into-group-tip-visible",tQ="false";class tU{static get instance(){return this._instance||(this._instance=new tU),this._instance}isClosed(){return this.isCloseForever()||this.closed}close(){this.closed=!0}isCloseForever(){return localStorage.getItem(tF)===tQ}closeForever(){localStorage.setItem(tF,tQ)}constructor(){this.closed=!1}}let tH=A.ZP.div`
  position: absolute;
  top: 35px;

  width: 100%;
  height: 28px;
  white-space: nowrap;
  pointer-events: auto;

  .container {
    display: inline-flex;
    justify-content: center;
    height: 100%;
    width: 100%;
    background-color: rgb(255 255 255);
    border-radius: 8px 8px 0 0;

    .content {
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      justify-content: flex-start;

      width: fit-content;
      height: 100%;
      padding: 0 12px;

      .text {
        font-size: 14px;
        font-weight: 400;
        font-style: normal;
        line-height: 20px;
        color: rgba(15, 21, 40, 82%);
        text-overflow: ellipsis;
        margin: 0;
      }

      .space {
        width: 128px;
      }
    }

    .actions {
      display: flex;
      gap: 8px;
      align-items: center;

      height: 28px;
      padding: 0 12px;

      .close-forever {
        cursor: pointer;

        padding: 0 3px;

        font-size: 12px;
        font-weight: 400;
        font-style: normal;
        line-height: 12px;
        color: rgba(32, 41, 69, 62%);
        margin: 0;
      }

      .close {
        display: flex;
        cursor: pointer;
        height: 100%;
        align-items: center;
      }
    }
  }
`,tJ=/(Macintosh|MacIntel|MacPPC|Mac68K|iPad)/.test(navigator.userAgent),tY=()=>(0,j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,j.jsx)("path",{fill:"#060709",fillOpacity:"0.5",d:"M12.13 12.128a.5.5 0 0 0 .001-.706L8.71 8l3.422-3.423a.5.5 0 0 0-.001-.705.5.5 0 0 0-.706-.002L8.002 7.293 4.579 3.87a.5.5 0 0 0-.705.002.5.5 0 0 0-.002.705L7.295 8l-3.423 3.422a.5.5 0 0 0 .002.706c.195.195.51.197.705.001l3.423-3.422 3.422 3.422c.196.196.51.194.706-.001"})}),tG=()=>{let{visible:e,close:t,closeForever:n}=(()=>{let e=(0,C.PFB)(),[t,n]=(0,E.useState)(!1),o=tU.instance,i=(0,C.G2Z)(em),r=(0,E.useCallback)(()=>{o.isClosed()||n(!0)},[o]),s=(0,E.useCallback)(()=>{o.close(),n(!1)},[o]),a=(0,E.useCallback)(()=>{o.closeForever(),s()},[s,o]);return(0,E.useEffect)(()=>{let t=i.on(t=>{t.type===ec.In&&t.targetContainer===e&&r()}),o=i.on(t=>{t.type===ec.Out&&(t.sourceContainer!==e||e.blocks.length||n(!1))});return()=>{t.dispose(),o.dispose()}},[i,e,r,s,t]),{visible:t,close:s,closeForever:a}})();return e?(0,j.jsx)(tH,{className:"workflow-group-tips",children:(0,j.jsxs)("div",{className:"container",children:[(0,j.jsxs)("div",{className:"content",children:[(0,j.jsx)("p",{className:"text",children:`Hold ${tJ?"Cmd ⌘":"Ctrl"} to drag node out`}),(0,j.jsx)("div",{className:"space",style:{width:0}})]}),(0,j.jsxs)("div",{className:"actions",children:[(0,j.jsx)("p",{className:"close-forever",onClick:n,children:"Never Remind"}),(0,j.jsx)("div",{className:"close",onClick:t,children:(0,j.jsx)(tY,{})})]})]})}):null},tX=e=>{let{onDrag:t,onFocus:n,onBlur:o,children:i,style:r}=e,s=tR[(0,C.qoQ)(tI.Color)??tO];return(0,j.jsx)("div",{className:"workflow-group-header","data-flow-editor-selectable":"false",onMouseDown:t,onTouchStart:t,onFocus:n,onBlur:o,style:{...r,backgroundColor:s["50"],borderColor:s["300"]},children:i})},tq=e=>{let{node:t,style:n,selected:o}=e,i=tR[(0,C.qoQ)(tI.Color)??tO];return(0,E.useEffect)(()=>{let e=document.createElement("style");return e.textContent=`
      .workflow-group-render[data-group-id="${t.id}"] .workflow-group-background {
        border: 1px solid ${i["300"]};
      }

      .workflow-group-render.selected[data-group-id="${t.id}"] .workflow-group-background {
        border: 1px solid #4e40e5;
      }
    `,document.head.appendChild(e),()=>{e.remove()}},[i]),(0,j.jsx)("div",{className:"workflow-group-background","data-flow-editor-selectable":"true",style:{...n,backgroundColor:`${i["300"]}${o?"40":"29"}`}})},tW=()=>{let{node:e,selected:t,selectNode:n,nodeRef:o,startDrag:i,onFocus:r,onBlur:s}=(0,C.PVB)(),a=ey(),l=e.getData(C.Psq).getFormModel(),d=null==l?void 0:l.formControl,{height:c,width:u}=a??{},p=c??0;return(0,E.useEffect)(()=>{e.renderData.node.style.pointerEvents="none"},[e]),(0,j.jsx)("div",{className:`workflow-group-render ${t?"selected":""}`,ref:o,"data-group-id":e.id,"data-node-selected":String(t),onMouseDown:n,onClick:e=>{n(e)},style:{width:u,height:c},children:(0,j.jsx)(C.l09,{control:d,children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(tX,{onDrag:e=>{i(e)},onFocus:r,onBlur:s,style:{height:30},children:(0,j.jsx)(tV,{})}),(0,j.jsx)(tG,{}),(0,j.jsx)(tP,{node:e}),(0,j.jsx)(tq,{node:e,selected:t,style:{top:35,height:p-30-5}})]})})})},tK=e=>{let{bounds:t,children:n,flowSelectConfig:o,commandRegistry:i}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{style:{position:"absolute",left:t.right,top:t.top,transform:"translate(-100%, -100%)"},onMouseDown:e=>{e.stopPropagation()},children:(0,j.jsxs)(eG.hE,{size:"small",style:{display:"flex",flexWrap:"nowrap",height:24},children:[(0,j.jsx)(eG.u,{content:"Collapse",children:(0,j.jsx)(eG.zx,{icon:(0,j.jsx)(tS.Z,{}),style:{height:24},type:"primary",theme:"solid",onMouseDown:e=>{i.executeCommand(eU.COLLAPSE)}})}),(0,j.jsx)(eG.u,{content:"Expand",children:(0,j.jsx)(eG.zx,{icon:(0,j.jsx)(tk.Z,{}),style:{height:24},type:"primary",theme:"solid",onMouseDown:e=>{i.executeCommand(eU.EXPAND)}})}),(0,j.jsx)(eG.u,{content:"Create Group",children:(0,j.jsx)(eG.zx,{icon:(0,j.jsx)(tL,{size:14}),style:{height:24},type:"primary",theme:"solid",onClick:()=>{i.executeCommand(eZ.Group)}})}),(0,j.jsx)(eG.u,{content:"Copy",children:(0,j.jsx)(eG.zx,{icon:(0,j.jsx)(tD.Z,{}),style:{height:24},type:"primary",theme:"solid",onClick:()=>{i.executeCommand(eU.COPY)}})}),(0,j.jsx)(eG.u,{content:"Delete",children:(0,j.jsx)(eG.zx,{type:"primary",theme:"solid",icon:(0,j.jsx)(tE.Z,{}),style:{height:24},onClick:()=>{i.executeCommand(eU.DELETE)}})})]})}),(0,j.jsx)("div",{children:n})]})};var t_=n(211712),t$=n.n(t_),t0=n(120410);let t1=(0,t0.A)(function(e){return E.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),E.createElement("g",{clipPath:"url(#clip_spin)"},E.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2 3.79A8.5 8.5 0 0 0 5 16.81a1.5 1.5 0 1 1-2.48 1.7 11.5 11.5 0 1 1 20.6-3.53 1.5 1.5 0 0 1-2.91-.78A8.5 8.5 0 0 0 14.2 3.79Z",fill:"currentColor"})),E.createElement("defs",null,E.createElement("radialGradient",{cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(12 12) rotate(15) scale(9.5 9.51825)"},E.createElement("stop",null),E.createElement("stop",{offset:.301257,stopOpacity:0,stopColor:"currentColor"}),E.createElement("stop",{offset:.466753,stopOpacity:1,stopColor:"currentColor"})),E.createElement("clipPath",{id:"clip_spin"},E.createElement("rect",{width:24,height:24,fill:"currentColor"}))))},"spin");var t2=n(898803),t3=n(575975);let t4=e=>{let{header:t,defaultShowDetail:n,children:o,extraBtns:i=[]}=e,[r,s]=(0,E.useState)(n),{selectNode:a}=nO();return(0,j.jsxs)("div",{className:t3.Z["node-status-header"],onMouseDown:e=>e.stopPropagation(),children:[(0,j.jsxs)("div",{className:t$()(t3.Z["node-status-header-content"],r&&t3.Z["node-status-header-content-opened"]),onMouseDown:e=>e.stopPropagation(),onClick:e=>{e.stopPropagation(),a(e),s(!r)},children:[(0,j.jsxs)("div",{className:t3.Z["status-title"],children:[t,i.length>0?i:null]}),(0,j.jsx)("div",{className:t3.Z["status-btns"],children:(0,j.jsx)(t2.Z,{className:t$()({[t3.Z["is-show-detail"]]:r})})})]}),r?o:null]})};var t5=n(720403),t9=n(122017);let t6=e=>{let{label:t,value:n,level:o,isLast:i=!1}=e,[r,s]=(0,E.useState)(!0),a=e=>{navigator.clipboard.writeText(e),eG.FN.success("Copied")},l=e=>null!==e&&"object"==typeof e&&(Array.isArray(e)&&e.length>0||!Array.isArray(e)&&Object.keys(e).length>0);return(0,j.jsxs)("div",{className:t9.Z.treeNode,children:[(0,j.jsxs)("div",{className:t9.Z.treeNodeHeader,children:[l(n)?(0,j.jsx)("button",{className:t$()(t9.Z.expandButton,r?t9.Z.expanded:t9.Z.collapsed),onClick:()=>s(!r),children:"▶"}):(0,j.jsx)("span",{className:t9.Z.expandPlaceholder}),(0,j.jsx)("span",{className:t9.Z.nodeLabel,onClick:()=>a(JSON.stringify({[t]:n})),children:t}),!l(n)&&(0,j.jsx)("span",{className:t9.Z.nodeValue,children:(e=>{if(null===e)return(0,j.jsx)("span",{className:t$()(t9.Z.primitiveValue,t9.Z.null),children:"null"});if(void 0===e)return(0,j.jsx)("span",{className:t$()(t9.Z.primitiveValue,t9.Z.undefined),children:"undefined"});switch(typeof e){case"string":return(0,j.jsxs)("span",{children:[(0,j.jsx)("span",{className:t9.Z.primitiveValueQuote,children:'"'}),(0,j.jsx)("span",{className:t$()(t9.Z.primitiveValue,t9.Z.string),onDoubleClick:()=>a(e),children:e}),(0,j.jsx)("span",{className:t9.Z.primitiveValueQuote,children:'"'})]});case"number":return(0,j.jsx)("span",{className:t$()(t9.Z.primitiveValue,t9.Z.number),onDoubleClick:()=>a(String(e)),children:e});case"boolean":return(0,j.jsx)("span",{className:t$()(t9.Z.primitiveValue,t9.Z.boolean),onDoubleClick:()=>a(e.toString()),children:e.toString()});case"object":if(Array.isArray(e))return(0,j.jsx)("span",{className:t9.Z.primitiveValue,onDoubleClick:()=>a("[]"),children:"[]"});return(0,j.jsx)("span",{className:t9.Z.primitiveValue,onDoubleClick:()=>a("{}"),children:"{}"});default:return(0,j.jsx)("span",{className:t9.Z.primitiveValue,onDoubleClick:()=>a(String(e)),children:String(e)})}})(n)})]}),l(n)&&r&&(0,j.jsx)("div",{className:t9.Z.treeNodeChildren,children:(()=>{if(Array.isArray(n))return n.map((e,t)=>(0,j.jsx)(t6,{label:`${t+1}.`,value:e,level:o+1,isLast:t===n.length-1},t));{let e=Object.entries(n);return e.map((t,n)=>{let[i,r]=t;return(0,j.jsx)(t6,{label:`${i}:`,value:r,level:o+1,isLast:n===e.length-1},i)})}})()})]})},t8=e=>{let{data:t,level:n=0}=e;if(null==t||"object"!=typeof t)return(0,j.jsx)("div",{className:t9.Z.dataStructureViewer,children:(0,j.jsx)(t6,{label:"value",value:t,level:0})});let o=Object.entries(t);return(0,j.jsx)("div",{className:t9.Z.dataStructureViewer,children:o.map((e,t)=>{let[n,i]=e;return(0,j.jsx)(t6,{label:`${n}:`,value:i,level:0,isLast:t===o.length-1},n)})})};var t7=n(363273);let ne=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&Object.keys(e).length>0},nt=e=>{let{title:t,data:n,optional:o=!1,disableCollapse:i=!1}=e,r=ne(n),[s,a]=(0,E.useState)(!0);return o&&!r?null:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:t7.Z["node-status-group"],onClick:()=>r&&!i&&a(!s),children:[!i&&(0,j.jsx)(t5.Z,{className:t$()(t7.Z["node-status-group-icon"],{[t7.Z["node-status-group-icon-expanded"]]:s&&r})}),(0,j.jsxs)("span",{children:[t,":"]}),!r&&(0,j.jsx)(eG.Vp,{size:"small",className:t7.Z["node-status-group-tag"],children:"null"})]}),r&&s?(0,j.jsx)(t8,{data:n}):null]})},nn=e=>{let{className:t,style:n}=e;return(0,j.jsx)("svg",{className:t,style:n,width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8V13C13 13.5523 12.5523 14 12 14C11.4477 14 11 13.5523 11 13V8ZM11 16C11 15.4477 11.4477 15 12 15C12.5523 15 13 15.4477 13 16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16Z"})})},no=e=>{let{className:t,style:n}=e;return(0,j.jsxs)("svg",{className:t,style:n,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",viewBox:"0 0 20 20",children:[(0,j.jsxs)("g",{clipPath:"url(#icon-workflow-run-success_svg__a)",children:[(0,j.jsx)("path",{fill:"#3EC254",d:"M.833 10A9.166 9.166 0 0 0 10 19.168a9.166 9.166 0 0 0 9.167-9.166A9.166 9.166 0 0 0 10 .834a9.166 9.166 0 0 0-9.167 9.167"}),(0,j.jsx)("path",{fill:"#fff",d:"M6.077 9.755a.833.833 0 0 0 0 1.179l2.357 2.357a.833.833 0 0 0 1.179 0l4.714-4.714a.833.833 0 1 0-1.178-1.179l-4.125 4.125-1.768-1.768a.833.833 0 0 0-1.179 0"})]}),(0,j.jsx)("defs",{children:(0,j.jsx)("clipPath",{id:"icon-workflow-run-success_svg__a",children:(0,j.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]})};var ni=n(20535);let nr=e=>{let{report:t}=e,{status:n}=t,[o,i]=(0,E.useState)(0),r=t.snapshots||[],s=r[o]||r[0],a=n===td.Pending,l=n===td.Processing,d=n===td.Failed,c=n===td.Succeeded,u=n===td.Canceled,p=(0,E.useMemo)(()=>c?ni.Z.nodeStatusSucceed:d?ni.Z.nodeStatusFailed:l?ni.Z.nodeStatusProcessing:void 0,[c,d,l]);return t?(0,j.jsx)(t4,{header:(0,j.jsxs)(j.Fragment,{children:[l?(0,j.jsx)(t1,{spin:!0,className:t$()(ni.Z.icon,ni.Z.processing)}):c?(0,j.jsx)(no,{}):(0,j.jsx)(nn,{className:t$()(p,ni.Z.round)}),(()=>{let e=(()=>{if(l)return"Running";if(a)return"Run terminated";if(c)return"Succeed";if(d)return"Failed";if(u)return"Canceled"})();return e?(0,j.jsx)("p",{className:ni.Z.desc,children:e}):null})(),(0,j.jsx)(eG.Vp,{size:"small",className:p,children:(t.timeCost/1e3).toFixed(2)+"s"})]}),children:(0,j.jsxs)("div",{className:ni.Z.container,children:[d&&(null==s?void 0:s.error)&&(0,j.jsx)("div",{className:ni.Z.error,children:s.error}),(()=>{if(r.length<=1)return null;let e=(0,j.jsxs)("p",{className:ni.Z.count,children:["Total: ",r.length]});return r.length<=6?(0,j.jsxs)(j.Fragment,{children:[e,(0,j.jsx)("div",{className:ni.Z.snapshotNavigation,children:r.map((e,t)=>(0,j.jsx)(eG.zx,{size:"small",type:o===t?"primary":"tertiary",onClick:()=>i(t),className:t$()(ni.Z.snapshotButton,{[ni.Z.active]:o===t,[ni.Z.inactive]:o!==t}),children:t+1},t))})]}):(0,j.jsxs)(j.Fragment,{children:[e,(0,j.jsxs)("div",{className:ni.Z.snapshotNavigation,children:[r.slice(0,6).map((e,t)=>(0,j.jsx)(eG.zx,{size:"small",type:"tertiary",onClick:()=>i(t),className:t$()(ni.Z.snapshotButton,{[ni.Z.active]:o===t,[ni.Z.inactive]:o!==t}),children:t+1},t)),(0,j.jsx)(eG.Ph,{value:o>=6?o:void 0,onChange:e=>i(e),className:t$()(ni.Z.snapshotSelect,{[ni.Z.active]:o>=6,[ni.Z.inactive]:o<6}),size:"small",placeholder:"Select",children:r.slice(6).map((e,t)=>{let n=t+6;return(0,j.jsx)(eG.Ph.Option,{value:n,children:n+1},n)})})]})]})})(),(0,j.jsx)(nt,{title:"Inputs",data:null==s?void 0:s.inputs}),(0,j.jsx)(nt,{title:"Outputs",data:null==s?void 0:s.outputs}),(0,j.jsx)(nt,{title:"Branch",data:null==s?void 0:s.branch,optional:!0}),(0,j.jsx)(nt,{title:"Data",data:null==s?void 0:s.data,optional:!0})]})}):null},ns=()=>{let e=(()=>{let e=(0,C.PFB)(),[t,n]=(0,E.useState)(),o=(0,C.G2Z)(tg);return(0,E.useEffect)(()=>{let t=o.onNodeReportChange(t=>{t.id===e.id&&n(t)}),i=o.onReset(()=>{n(void 0)});return()=>{t.dispose(),i.dispose()}},[]),t})();return e?(0,j.jsx)(nr,{report:e}):null},na=E.createContext({}),nl=E.createContext({visible:!1,setNodeId:()=>{}}),nd=E.createContext(!1);var nc=n(2103);let nu=A.ZP.div`
  align-items: flex-start;
  background-color: #fff;
  border: 1px solid rgba(6, 7, 9, 0.15);
  border-radius: 8px;
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 12px 0 rgba(0, 0, 0, 0.02);
  display: flex;
  flex-direction: column;
  justify-content: center;
  position: relative;
  width: 360px;
  height: auto;

  &.selected {
    border: 1px solid #4e40e5;
  }
`,np=()=>(0,j.jsx)(nc.Z,{style:{position:"absolute",color:"red",left:-6,top:-6,zIndex:1,background:"white",borderRadius:8}}),nh=e=>{let{children:t,isScrollToView:n=!1}=e,o=nO(),{node:i,selected:r,startDrag:s,ports:a,selectNode:l,nodeRef:d,onFocus:c,onBlur:u,readonly:p}=o,[h,g]=(0,E.useState)(!1),m=(0,E.useContext)(nl),x=o.form,y=(0,C.sX$)(),f=nB(),v=i.getNodeMeta(),N=a.map(e=>(0,j.jsx)(C.Jbc,{entity:e,onClick:p?void 0:f},e.id));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(nu,{className:r?"selected":"",ref:d,draggable:!0,onDragStart:e=>{s(e),g(!0)},onTouchStart:e=>{s(e),g(!0)},onClick:e=>{l(e),!h&&(m.setNodeId(o.node.id),n&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:448,o=t.transform.bounds;e.playground.scrollToView({bounds:o,scrollDelta:{x:n/2,y:0},zoom:1,scrollToCenter:!0})}(y,o.node))},onMouseUp:()=>g(!1),onFocus:c,onBlur:u,"data-node-selected":String(r),style:{...v.wrapperStyle,outline:(null==x?void 0:x.state.invalid)?"1px solid red":"none"},children:t}),N]})},ng=e=>{let{node:t}=e,n=(0,C.PVB)(),o=n.form,i=(0,E.useCallback)(()=>t.renderData.node||document.body,[]);return(0,j.jsx)(eG.iV,{getPopupContainer:i,children:(0,j.jsxs)(na.Provider,{value:n,children:[(0,j.jsxs)(nh,{children:[(null==o?void 0:o.state.invalid)&&(0,j.jsx)(np,{}),null==o?void 0:o.render()]}),(0,j.jsx)(ns,{})]})})};n(860368);let nm=()=>(0,j.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsxs)("g",{id:"add",children:[(0,j.jsx)("path",{id:"background",fill:"#ffffff",fillRule:"evenodd",stroke:"none",d:"M 24 12 C 24 5.372583 18.627417 0 12 0 C 5.372583 0 -0 5.372583 -0 12 C -0 18.627417 5.372583 24 12 24 C 18.627417 24 24 18.627417 24 12 Z"}),(0,j.jsx)("path",{id:"content",fill:"currentColor",fillRule:"evenodd",stroke:"none",d:"M 22 12.005 C 22 6.482153 17.522848 2.004999 12 2.004999 C 6.477152 2.004999 2 6.482153 2 12.005 C 2 17.527847 6.477152 22.004999 12 22.004999 C 17.522848 22.004999 22 17.527847 22 12.005 Z"}),(0,j.jsx)("path",{id:"cross",fill:"#ffffff",stroke:"none",d:"M 11.411996 16.411797 C 11.411996 16.736704 11.675362 17 12.00023 17 C 12.325109 17 12.588474 16.736704 12.588474 16.411797 L 12.588474 12.58826 L 16.41201 12.58826 C 16.736919 12.58826 17.000216 12.324894 17.000216 12.000015 C 17.000216 11.675147 16.736919 11.411781 16.41201 11.411781 L 12.588474 11.411781 L 12.588474 7.588234 C 12.588474 7.263367 12.325109 7 12.00023 7 C 11.675362 7 11.411996 7.263367 11.411996 7.588234 L 11.411996 11.411781 L 7.588449 11.411781 C 7.263581 11.411781 7.000215 11.675147 7.000215 12.000015 C 7.000215 12.324894 7.263581 12.58826 7.588449 12.58826 L 11.411996 12.58826 L 11.411996 16.411797 Z"})]})}),nx=e=>{let{line:t,selected:n,hovered:o,color:i}=e,r=(e=>{let t=(0,C.Dcz)(),{line:n,selected:o=!1,hovered:i}=e;return!n.disposed&&!t.config.readonly&&(!!o||!!i)})({line:t,selected:n,hovered:o}),s=(0,C.G2Z)(_),a=(0,C.G2Z)(C.L4w),l=(0,C.G2Z)(C.iwM),d=(0,C.G2Z)(C.dmf),c=(0,C.G2Z)(C.qpv),{fromPort:u,toPort:p}=t,h=(0,E.useCallback)(async()=>{let e={x:(t.position.from.x+t.position.to.x)/2,y:(t.position.from.y+t.position.to.y)/2},n=u.node.parent,o=await s.singleSelectNodePanel({position:e,containerNode:n,panelProps:{enableScrollClose:!0}});if(!o)return;let{nodeType:i,nodeJSON:r}=o,h=X({nodeType:i,position:e,fromPort:u,toPort:p,containerNode:n,document:a,dragService:l}),g=a.createWorkflowNodeByType(i,h,r??{},null==n?void 0:n.id);u&&p&&K({node:g,fromPort:u,toPort:p,containerNode:n,historyService:c,dragService:l,linesManager:d}),await (0,C.gw0)(20),q({fromPort:u,node:g,toPort:p,linesManager:d}),t.dispose()},[]);return r?(0,j.jsx)("div",{className:"line-add-button",style:{transform:`translate(-50%, -50%) translate(${t.center.labelX}px, ${t.center.labelY}px)`,color:i},"data-testid":"sdk.workflow.canvas.line.add","data-line-id":t.id,onClick:h,children:(0,j.jsx)(nm,{})}):(0,j.jsx)(j.Fragment,{})},ny=()=>(0,j.jsx)("div",{className:"node-placeholder","data-testid":"workflow.detail.node-panel.placeholder",children:(0,j.jsx)(eG.Od,{className:"node-placeholder-skeleton",loading:!0,active:!0,placeholder:(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("div",{className:"node-placeholder-hd",children:[(0,j.jsx)(eG.Od.Avatar,{shape:"square",className:"node-placeholder-avatar"}),(0,j.jsx)(eG.Od.Title,{style:{width:141}})]}),(0,j.jsxs)("div",{className:"node-placeholder-content",children:[(0,j.jsxs)("div",{className:"node-placeholder-footer",children:[(0,j.jsx)(eG.Od.Title,{style:{width:85}}),(0,j.jsx)(eG.Od.Title,{style:{width:241}})]}),(0,j.jsx)(eG.Od.Title,{style:{width:220}})]})]})})}),nf=A.ZP.div`
  width: 100%;
  height: 32px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  cursor: pointer;
  font-size: 19px;
  padding: 0 15px;
  &:hover {
    background-color: hsl(252deg 62% 55% / 9%);
    color: hsl(252 62% 54.9%);
  }
`,nv=A.ZP.div`
  font-size: 12px;
  margin-left: 10px;
`;function nj(e){return(0,j.jsxs)(nf,{"data-testid":`demo-free-node-list-${e.label}`,onClick:e.disabled?void 0:e.onClick,style:e.disabled?{opacity:.3}:{},children:[(0,j.jsx)("div",{style:{fontSize:14},children:e.icon}),(0,j.jsx)(nv,{children:e.label})]})}let nC=A.ZP.div`
  max-height: 500px;
  overflow: auto;
  &::-webkit-scrollbar {
    display: none;
  }
`,nN=e=>{let{onSelect:t,containerNode:n}=e,o=(0,C.sX$)();return(0,j.jsx)(nC,{style:{width:180},children:oU.filter(e=>!1!==e.meta.nodePanelVisible).filter(e=>!e.meta.onlyInContainer||e.meta.onlyInContainer===(null==n?void 0:n.flowNodeType)).map(e=>{var n,i;return(0,j.jsx)(nj,{disabled:!((null==(n=e.canAdd)?void 0:n.call(e,o))??!0),icon:(0,j.jsx)("img",{style:{width:10,height:10,borderRadius:4},src:null==(i=e.info)?void 0:i.icon}),label:e.type,onClick:n=>((e,n)=>{var i;let r=null==(i=n.onAdd)?void 0:i.call(n,o);t({nodeType:n.type,selectEvent:e,nodeJSON:r})})(n,e)},e.type)})})};n(782917);let nb=e=>{let{onSelect:t,position:n,onClose:o,containerNode:i,panelProps:r={}}=e,{enableNodePlaceholder:s}=r;return(0,j.jsx)(eG.J2,{trigger:"click",visible:!0,onVisibleChange:e=>e?null:o(),content:(0,j.jsx)(nN,{onSelect:t,containerNode:i}),placement:"right",popupAlign:{offset:[30,0]},overlayStyle:{padding:0},children:(0,j.jsx)("div",{style:s?{position:"absolute",top:n.y-61.5,left:n.x,width:360,height:100}:{position:"absolute",top:n.y,left:n.x,width:0,height:0},children:s&&(0,j.jsx)(ny,{})})})};n(370984);var nw=((m={}).Size="size",m.Note="note",m),nM=((x={}).Change="change",x.MultiSelect="multiSelect",x.Select="select",x.Blur="blur",x);class nA{get value(){return this.innerValue}setValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.initialized&&e!==this.innerValue&&(this.innerValue=e,this.syncEditorValue(),this.emitter.fire({type:nM.Change,value:this.innerValue}))}set element(e){this.initialized||(this.editor=e)}get element(){return this.editor}setFocus(e){this.initialized&&(e&&!this.focused?this.editor.focus():!e&&this.focused&&(this.editor.blur(),this.deselect(),this.emitter.fire({type:nM.Blur})))}selectEnd(){if(!this.initialized)return;let e=this.editor.value.length;this.editor.setSelectionRange(e,e)}get focused(){return document.activeElement===this.editor}deselect(){let e=window.getSelection();e&&e.removeAllRanges()}get initialized(){return!!this.editor}syncEditorValue(){this.initialized&&(this.editor.value=this.innerValue)}constructor(){this.innerValue="",this.emitter=new C.Q5$,this.on=this.emitter.event}}var nS=n(940953);let nk=e=>{var t;let{node:n,deleteNode:o,updateTitleEdit:i}=e,[r,s]=(0,E.useState)(!0),a=(0,C.sX$)(),l=n.getNodeRegistry(),d=(0,C.G2Z)(em),c=(0,C.G2Z)(C.oJU),u=(0,C.G2Z)(C.iwM),p=d.canMoveOutContainer(n),h=(0,E.useCallback)(()=>{s(!1),requestAnimationFrame(()=>{s(!0)})},[]),g=(0,E.useCallback)(async e=>{e.stopPropagation();let t=n.parent;d.moveOutContainer({node:n}),await (0,C.gw0)(16),await d.clearInvalidLines({dragNode:n,sourceParent:t}),h(),c.selectNode(n),u.startDragSelectedNodes(e)},[d,n,h]),m=(0,E.useCallback)(e=>{let t=new e$(a),o=new eW(a),i=t.toClipboardData([n]);o.apply(i),e.stopPropagation()},[a,n]),x=(0,E.useCallback)(e=>{o(),e.stopPropagation()},[a,n]),y=(0,E.useCallback)(()=>{i(!0)},[i]);return r?(0,j.jsx)(eG.Lt,{trigger:"hover",position:"bottomRight",render:(0,j.jsxs)(eG.Lt.Menu,{children:[(0,j.jsx)(eG.Lt.Item,{onClick:y,children:"Edit Title"}),p&&(0,j.jsx)(eG.Lt.Item,{onClick:g,children:"Move out"}),(0,j.jsx)(eG.Lt.Item,{onClick:m,disabled:!0===l.meta.copyDisable,children:"Create Copy"}),(0,j.jsx)(eG.Lt.Item,{onClick:x,disabled:!!((null==(t=l.canDelete)?void 0:t.call(l,a,n))||l.meta.deleteDisable),children:"Delete"})]}),children:(0,j.jsx)(eG.hU,{color:"secondary",size:"small",theme:"borderless",icon:(0,j.jsx)(nS.Z,{}),onClick:e=>e.stopPropagation()})}):(0,j.jsx)(j.Fragment,{})},nD=e=>{let{node:t,focused:n,deleteNode:o}=e;return(0,j.jsx)("div",{className:`workflow-comment-more-button ${n?"workflow-comment-more-button-focused":""}`,children:(0,j.jsx)(nk,{node:t,deleteNode:o})})},nE=e=>{let{model:t,style:n,onChange:o}=e,i=(0,C.Dcz)(),r=(0,E.useRef)(null),s=t.value||t.focused?void 0:"Enter a comment...";return(0,E.useEffect)(()=>{let e=t.on(e=>{e.type===nM.Change&&(null==o||o(t.value))});return()=>e.dispose()},[t,o]),(0,E.useEffect)(()=>{r.current&&(t.element=r.current)},[r]),(0,j.jsxs)("div",{className:"workflow-comment-editor",children:[(0,j.jsx)("p",{className:"workflow-comment-editor-placeholder",children:s}),(0,j.jsx)("textarea",{className:"workflow-comment-editor-textarea",ref:r,style:n,readOnly:i.config.readonly,onChange:e=>{let{value:n}=e.target;t.setValue(n)},onFocus:()=>{t.setFocus(!0)},onBlur:()=>{t.setFocus(!1)}})]})},nI=e=>{let{model:t,stopEvent:n=!0,style:o}=e,i=(0,C.Dcz)(),{startDrag:r,onFocus:s,onBlur:a,selectNode:l}=(0,C.PVB)(),d=e=>{n&&(e.preventDefault(),e.stopPropagation()),t.setFocus(!1),r(e),l(e),i.node.focus()};return(0,j.jsx)("div",{className:"workflow-comment-drag-area","data-flow-editor-selectable":"false",draggable:!0,style:o,onMouseDown:d,onTouchStart:d,onFocus:s,onBlur:a})},nL=e=>{let{model:t,focused:n,overflow:o}=e,i=(0,C.Dcz)(),{selectNode:r}=(0,C.PVB)(),[s,a]=(0,E.useState)(!1);return(0,E.useEffect)(()=>{n||a(!1)},[n]),(0,j.jsx)("div",{className:"workflow-comment-content-drag-area",onMouseDown:e=>{if(s)return;e.preventDefault(),e.stopPropagation(),t.setFocus(!1),r(e),i.node.focus();let n=e.clientX,o=e.clientY,l=e=>{let t=e.clientX-n,i=e.clientY-o;5>Math.abs(t)&&5>Math.abs(i)&&a(!0),document.removeEventListener("mouseup",l),document.removeEventListener("click",l)};document.addEventListener("mouseup",l),document.addEventListener("click",l)},onWheel:e=>{let n=t.element;if(s||!o||!n)return;e.stopPropagation();let i=n.scrollHeight-n.clientHeight,r=Math.min(Math.max(n.scrollTop+e.deltaY,0),i);n.scroll(0,r)},style:{display:s?"none":void 0},children:(0,j.jsx)(nI,{style:{position:"relative",width:"100%",height:"100%"},model:t,stopEvent:!1})})},nT=e=>{let{focused:t,children:n,style:o}=e;return(0,j.jsx)("div",{className:"workflow-comment-container","data-flow-editor-selectable":"false",style:{outline:t?"1px solid #FF811A":"1px solid #F2B600",backgroundColor:t?"#FFF3EA":"#FFFBED",scrollbarWidth:"thin",scrollbarColor:"rgb(159 159 158 / 65%) transparent","&:WebkitScrollbar":{width:"4px"},"&::WebkitScrollbarTrack":{background:"transparent"},"&::WebkitScrollbarThumb":{backgroundColor:"rgb(159 159 158 / 65%)",borderRadius:"20px",border:"2px solid transparent"},...o},children:n})},nP=e=>{let{model:t,onResize:n,getDelta:o,style:i}=e,r=(0,C.Dcz)(),{selectNode:s}=(0,C.PVB)(),a=e=>{if(C.UJL.preventDefault(e),e.stopPropagation(),!n)return;let{resizing:i,resizeEnd:a}=n();t.setFocus(!1),s(e),r.node.focus();let{clientX:l,clientY:d}=C.UJL.getEventCoord(e),c=e=>{let{clientX:t,clientY:n}=C.UJL.getEventCoord(e),r=null==o?void 0:o({x:t-l,y:n-d});r&&i&&i(r)},u=()=>{a(),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u),document.removeEventListener("click",u),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",u),document.removeEventListener("touchcancel",u)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",u),document.addEventListener("click",u),document.addEventListener("touchmove",c,{passive:!1}),document.addEventListener("touchend",u),document.addEventListener("touchcancel",u)};return(0,j.jsx)("div",{className:"workflow-comment-resize-area",style:i,"data-flow-editor-selectable":"false",onMouseDown:a,onTouchStart:a})},nz=e=>{let{model:t,overflow:n,onResize:o}=e;return(0,j.jsxs)("div",{style:{zIndex:999},children:[(0,j.jsx)(nI,{style:{position:"absolute",left:-10,top:10,width:20,height:"calc(100% - 20px)"},model:t}),(0,j.jsx)(nI,{style:{position:"absolute",right:-10,top:10,height:"calc(100% - 20px)",width:n?10:20},model:t}),(0,j.jsx)(nI,{style:{position:"absolute",top:-10,left:10,width:"calc(100% - 20px)",height:20},model:t}),(0,j.jsx)(nI,{style:{position:"absolute",bottom:-10,left:10,width:"calc(100% - 20px)",height:20},model:t}),(0,j.jsx)(nP,{style:{position:"absolute",left:0,top:0,cursor:"nwse-resize"},model:t,getDelta:e=>{let{x:t,y:n}=e;return{top:n,right:0,bottom:0,left:t}},onResize:o}),(0,j.jsx)(nP,{style:{position:"absolute",right:0,top:0,cursor:"nesw-resize"},model:t,getDelta:e=>{let{x:t,y:n}=e;return{top:n,right:t,bottom:0,left:0}},onResize:o}),(0,j.jsx)(nP,{style:{position:"absolute",right:0,bottom:0,cursor:"nwse-resize"},model:t,getDelta:e=>{let{x:t,y:n}=e;return{top:0,right:t,bottom:n,left:0}},onResize:o}),(0,j.jsx)(nP,{style:{position:"absolute",left:0,bottom:0,cursor:"nesw-resize"},model:t,getDelta:e=>{let{x:t,y:n}=e;return{top:0,right:0,bottom:n,left:t}},onResize:o})]})},nZ=e=>{let{node:t}=e,n=(()=>{let e=(0,C.kmj)(),{selected:t}=(0,C.PVB)(),n=e.getData(C.Psq).getFormModel(),o=(0,E.useMemo)(()=>new nA,[]);return(0,E.useEffect)(()=>{t||o.setFocus(t)},[t,o]),(0,E.useEffect)(()=>{let e=n.getValueIn(nw.Note);o.setValue(e),o.selectEnd()},[n,o]),(0,E.useEffect)(()=>{let e=n.onFormValuesChange(e=>{let{name:t}=e;if(t!==nw.Note)return;let i=n.getValueIn(nw.Note);o.setValue(i)});return()=>e.dispose()},[n,o]),o})(),{selected:o,selectNode:i,nodeRef:r,deleteNode:s}=(0,C.PVB)(),a=t.getData(C.Psq).getFormModel(),l=null==a?void 0:a.formControl,{width:d,height:c,onResize:u}=(()=>{let e=(0,C.PFB)(),t=e.getNodeMeta(),n=(0,C.Dcz)(),o=(0,C.G2Z)(C.qpv),{size:i={width:240,height:150}}=t,r=e.getData(C.VOn),s=e.getData(C.Psq).getFormModel(),a=s.getValueIn(nw.Size),[l,d]=(0,E.useState)((null==a?void 0:a.width)??i.width),[c,u]=(0,E.useState)((null==a?void 0:a.height)??i.height);(0,E.useEffect)(()=>{s.getValueIn(nw.Size)||s.setValueIn(nw.Size,{width:l,height:c})},[s,l,c]),(0,E.useEffect)(()=>{let e=s.onFormValuesChange(e=>{let{name:t}=e;if(t!==nw.Size)return;let n=s.getValueIn(nw.Size);n&&(d(n.width),u(n.height))});return()=>e.dispose()},[s]);let p=(0,E.useCallback)(()=>{let t={width:l,height:c,originalWidth:l,originalHeight:c,positionX:r.position.x,positionY:r.position.y,offsetX:0,offsetY:0};return{resizing:e=>{if(!t)return;let{zoom:o}=n.config,i=e.top/o,s=e.right/o,a=e.bottom/o,l=e.left/o,c=Math.max(120,t.originalWidth+s-l),p=Math.max(80,t.originalHeight+a-i),h=(l>0||s<0)&&c<=120?t.offsetX:l/2+s/2,g=(i>0||a<0)&&p<=80?t.offsetY:i,m=t.positionX+h,x=t.positionY+g;t.width=c,t.height=p,t.offsetX=h,t.offsetY=g,d(c),u(p),r.update({position:{x:m,y:x}})},resizeEnd:()=>{o.transact(()=>{o.pushOperation({type:C.Nj8.dragNodes,value:{ids:[e.id],value:[{x:t.positionX+t.offsetX,y:t.positionY+t.offsetY}],oldValue:[{x:t.positionX,y:t.positionY}]}},{noApply:!0}),s.setValueIn(nw.Size,{width:t.width,height:t.height})})}}},[e,l,c,r,n,s,o]);return{width:l,height:c,onResize:p}})(),{overflow:p,updateOverflow:h}=(e=>{let{model:t,height:n}=e,o=(0,C.Dcz)(),[i,r]=(0,E.useState)(!1),s=(0,E.useCallback)(()=>!!t.element&&t.element.scrollHeight>t.element.clientHeight,[t,n,o]),a=(0,E.useCallback)(()=>{r(s())},[s]);return(0,E.useEffect)(()=>{a()},[n,a]),(0,E.useEffect)(()=>{let e=t.on(e=>{e.type===nM.Change&&a()});return()=>{e.dispose()}},[t,a]),{overflow:i,updateOverflow:a}})({model:n,height:c});return(0,j.jsx)("div",{className:"workflow-comment",style:{width:d,height:c},ref:r,"data-node-selected":String(o),onMouseEnter:h,onMouseDown:e=>{setTimeout(()=>{i(e)},20)},children:(0,j.jsx)(C.l09,{control:l,children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(nT,{focused:o,style:{height:c},children:(0,j.jsx)(C.gNt,{name:nw.Note,children:e=>{let{field:i}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(nE,{model:n,value:i.value,onChange:i.onChange}),(0,j.jsx)(nL,{model:n,focused:o,overflow:p}),(0,j.jsx)(nD,{node:t,focused:o,deleteNode:s})]})}})}),(0,j.jsx)(nz,{model:n,overflow:p,onResize:u})]})})})};function nO(){return(0,E.useContext)(na)}function nR(){return(0,E.useContext)(nd)}let nB=()=>{let e=(0,C.Dcz)(),t=(0,C.G2Z)(_),n=(0,C.G2Z)(C.L4w),o=(0,C.G2Z)(C.iwM),i=(0,C.G2Z)(C.dmf);return(0,E.useCallback)(async(r,s)=>{let a=e.config.getPosFromMouseEvent(r),l=s.node.parent,d=await t.singleSelectNodePanel({position:a,containerNode:l,panelProps:{enableScrollClose:!0}});if(!d)return;let{nodeType:c,nodeJSON:u}=d,p=X({nodeType:c,position:"bottom"===s.location?{x:a.x,y:a.y+100}:{x:a.x+100,y:a.y},fromPort:s,containerNode:l,document:n,dragService:o}),h=n.createWorkflowNodeByType(c,p,u??{},null==l?void 0:l.id);await (0,C.gw0)(20),q({fromPort:s,node:h,linesManager:i})},[])},nV=A.ZP.div`
  box-sizing: border-box;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 6px;
  background-color: rgb(251, 251, 251);
  border-radius: 0 0 8px 8px;
  padding: 0 12px 12px;
`,nF=A.ZP.div`
  color: var(--semi-color-text-2);
  font-size: 12px;
  line-height: 20px;
  padding: 0px 4px;
  word-break: break-all;
  white-space: break-spaces;
`;function nQ(e){var t;let{node:n,expanded:o}=nO(),i=nR(),r=n.getNodeRegistry();return(0,j.jsx)(nV,{children:(0,j.jsxs)(j.Fragment,{children:[i&&(0,j.jsx)(nF,{children:null==(t=r.info)?void 0:t.description}),(o||i)&&e.children]})})}n(763488);let{Text:nU}=eG.Sx;function nH(e){let{children:t,name:n,required:o,description:i,type:r,labelWidth:s,labelStyle:a,vertical:l,style:d}=e,c=(0,E.useCallback)(e=>(0,j.jsx)("div",{style:{width:"0",display:"flex",flex:"1"},children:(0,j.jsxs)(nU,{style:{width:"100%"},ellipsis:{showTooltip:!!e},children:[n,o&&(0,j.jsx)("span",{style:{color:"#f93920",paddingLeft:"2px"},children:"*"})]})}),[]);return(0,j.jsxs)("div",{style:{fontSize:12,marginBottom:6,width:"100%",position:"relative",display:"flex",gap:8,...l?{flexDirection:"column"}:{justifyContent:"center",alignItems:"center"},...d},children:[(0,j.jsxs)("div",{style:{justifyContent:"center",alignItems:"center",color:"var(--semi-color-text-0)",width:s||118,minWidth:s||118,maxWidth:s||118,position:"relative",display:"flex",columnGap:4,flexShrink:0,...a},children:[r&&(0,j.jsx)(M.s1,{value:{type:r}}),i?(0,j.jsx)(eG.u,{content:i,children:c()}):c(!0)]}),(0,j.jsx)("div",{style:{flexGrow:1,minWidth:0},children:t})]})}function nJ(){let{readonly:e}=nO();return(0,j.jsx)(C.gNt,{name:"inputs",children:t=>{var n,o;let{field:i}=t,r=(null==(n=i.value)?void 0:n.required)||[],s=null==(o=i.value)?void 0:o.properties;if(!s)return(0,j.jsx)(j.Fragment,{});let a=Object.keys(s).map(t=>{var n;let o=s[t],i=null==(n=o.extra)?void 0:n.formComponent,a=["prompt-editor"].includes(i||"");return(0,j.jsx)(C.gNt,{name:`inputsValues.${t}`,defaultValue:o.default,children:n=>{let{field:s,fieldState:l}=n;return(0,j.jsxs)(nH,{name:t,vertical:a,type:o.type,required:r.includes(t),children:["prompt-editor"===i&&(0,j.jsx)(M.B1,{value:s.value,onChange:s.onChange,readonly:e,hasError:Object.keys((null==l?void 0:l.errors)||{}).length>0}),!i&&(0,j.jsx)(M.XA,{value:s.value,onChange:s.onChange,readonly:e,hasError:Object.keys((null==l?void 0:l.errors)||{}).length>0,schema:o}),(0,j.jsx)(D,{errors:null==l?void 0:l.errors,warnings:null==l?void 0:l.warnings})]})}},t)});return(0,j.jsx)(j.Fragment,{children:a})}})}var nY=n(957436),nG=n(228013);let nX=A.ZP.div`
  box-sizing: border-box;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  width: 100%;
  column-gap: 8px;
  border-radius: 8px 8px 0 0;
  cursor: move;

  background: linear-gradient(#f2f2ff 0%, rgb(251, 251, 251) 100%);
  overflow: hidden;

  padding: 8px;
`,nq=A.ZP.div`
  font-size: 20px;
  flex: 1;
  width: 0;
`,nW=A.ZP.img`
  width: 24px;
  height: 24px;
  scale: 0.8;
  border-radius: 4px;
`,nK=A.ZP.div`
  display: flex;
  align-items: center;
  column-gap: 4px;
`,{Text:n_}=eG.Sx;function n$(e){let{readonly:t,titleEdit:n,updateTitleEdit:o}=e,i=(0,E.useRef)(),r=n&&!t;return(0,E.useEffect)(()=>{if(r){var e;null==(e=i.current)||e.focus()}},[r]),(0,j.jsx)(nq,{children:(0,j.jsx)(C.gNt,{name:"title",children:e=>{let{field:{value:t,onChange:n},fieldState:s}=e;return(0,j.jsxs)("div",{style:{height:24},children:[r?(0,j.jsx)(eG.II,{value:t,onChange:n,ref:i,onBlur:()=>o(!1)}):(0,j.jsx)(n_,{ellipsis:{showTooltip:!0},children:t}),(0,j.jsx)(D,{errors:null==s?void 0:s.errors})]})}})})}function n0(){let{node:e,expanded:t,toggleExpand:n,readonly:o}=nO(),[i,r]=(0,E.useState)(!1),s=(0,C.sX$)(),{setNodeId:a}=(0,E.useContext)(nl),l=nR();return(0,E.useEffect)(()=>{"loop"===e.flowNodeType&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transform.collapsed,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:54;if(!e.getNodeMeta().isContainer||!t===e.transform.collapsed)return;let o=e.bounds.clone(),i={x:e.transform.position.x,y:e.transform.position.y};e.transform.collapsed=!t,t?e.transform.transform.update({position:{x:i.x+e.transform.padding.left,y:i.y+e.transform.padding.top},origin:{x:0,y:0}}):(e.transform.transform.clearChildren(),e.transform.transform.update({position:{x:i.x-e.transform.padding.left,y:i.y-e.transform.padding.top},origin:{x:0,y:0}}),e.transform.size={width:o.width,height:n}),e.blocks.forEach(e=>{e.getData(C.Z14).allLines.forEach(e=>{e.updateUIState({style:t?{}:{display:"none"}})})})}(e,t)},[t]),(0,j.jsxs)(nX,{children:[(e=>{var t;let n=null==(t=e.getNodeRegistry().info)?void 0:t.icon;return n?(0,j.jsx)(nW,{src:n}):null})(e),(0,j.jsx)(n$,{readonly:o,updateTitleEdit:r,titleEdit:i}),e.renderData.expandable&&!l&&(0,j.jsx)(eG.zx,{type:"primary",icon:t?(0,j.jsx)(t5.Z,{}):(0,j.jsx)(nY.Z,{}),size:"small",theme:"borderless",onClick:e=>{n(),e.stopPropagation()}}),o?void 0:(0,j.jsx)(nK,{children:(0,j.jsx)(nk,{node:e,deleteNode:()=>{s.get(C.VDr).executeCommand(eU.DELETE,[e])},updateTitleEdit:r})}),l&&(0,j.jsx)(eG.zx,{type:"primary",icon:(0,j.jsx)(nG.Z,{}),size:"small",theme:"borderless",onClick:()=>{a(void 0)}})]})}let n1=e=>{let{form:t}=e,n=nR();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsx)(nQ,{children:n?(0,j.jsx)(M.H,{name:"assign"}):(0,j.jsx)(M.LE,{displayFromScope:!0})})]})},n2={render:e=>(0,j.jsx)(n1,{...e}),effect:tA.effect,plugins:[(0,M.n4)({assignKey:"assign",outputKey:"outputs"})]},n3=0,n4={type:b.Variable,info:{icon:w,description:"Variable Assign and Declaration"},meta:{size:{width:360,height:390}},onAdd:()=>({id:`variable_${(0,N.x0)(5)}`,type:"variable",data:{title:`Variable_${++n3}`,assign:[{operator:"declare",left:"sum",right:{type:"constant",content:0,schema:{type:"integer"}}}]}}),formMeta:n2},n5=n.p+"static/image/icon-start.8353312d.jpg",n9={render:e=>{let{form:t}=e;return nR()?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsx)(nQ,{children:(0,j.jsx)(C.gNt,{name:"outputs",render:e=>{let{field:{value:t,onChange:n}}=e;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(M._R,{value:t,onChange:e=>n(e)})})}})})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsx)(nQ,{children:(0,j.jsx)(M.LE,{displayFromScope:!0})})]})},validateTrigger:C.C$T.onChange,validate:{title:e=>{let{value:t}=e;return t?void 0:"Title is required"}},effect:{title:M.Hs,outputs:M.Xp}},n6={type:b.Start,meta:{isStart:!0,deleteDisable:!0,copyDisable:!0,nodePanelVisible:!1,defaultPorts:[{type:"output"}],size:{width:360,height:211}},info:{icon:n5,description:"The starting node of the workflow, used to set the information needed to initiate the workflow."},formMeta:n9,canAdd:()=>!1},n8=n.p+"static/image/icon-loop.89b07eed.jpg",n7={...tA,render:e=>{let{form:t}=e,n=nR(),{readonly:o}=nO(),i=(0,j.jsx)(C.gNt,{name:"loopFor",children:e=>{var t;let{field:n,fieldState:i}=e;return(0,j.jsxs)(nH,{name:"loopFor",type:"array",required:!0,children:[(0,j.jsx)(M.uA,{style:{width:"100%"},value:null==(t=n.value)?void 0:t.content,onChange:e=>n.onChange({type:"ref",content:e}),readonly:o,hasError:Object.keys((null==i?void 0:i.errors)||{}).length>0}),(0,j.jsx)(D,{errors:null==i?void 0:i.errors})]})}}),r=(0,j.jsx)(C.gNt,{name:"loopOutputs",children:e=>{let{field:t,fieldState:n}=e;return(0,j.jsxs)(nH,{name:"loopOutputs",type:"object",vertical:!0,children:[(0,j.jsx)(M.US,{style:{width:"100%"},value:t.value,onChange:e=>t.onChange(e),readonly:o,hasError:Object.keys((null==n?void 0:n.errors)||{}).length>0}),(0,j.jsx)(D,{errors:null==n?void 0:n.errors})]})}});return n?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsxs)(nQ,{children:[i,r]})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsxs)(nQ,{children:[i,(0,j.jsx)(eE,{offsetY:-85}),(0,j.jsx)(M.LE,{displayFromScope:!0})]})]})},effect:{loopFor:M.lz},plugins:[(0,M.FT)({outputKey:"loopOutputs"})]},oe=0,ot={type:b.Loop,info:{icon:n8,description:"Used to repeatedly execute a series of tasks by setting the number of iterations and logic."},meta:{isContainer:!0,size:{width:424,height:244},autoResizeDisable:!0,padding:()=>({top:120,bottom:60,left:60,right:60}),selectable:(e,t)=>!t||!e.getData(C.eGM).bounds.contains(t.x,t.y),wrapperStyle:{minWidth:"unset",width:"100%"}},onAdd:()=>({id:`loop_${(0,N.x0)(5)}`,type:b.Loop,data:{title:`Loop_${++oe}`},blocks:[{id:`block_start_${(0,N.x0)(5)}`,type:b.BlockStart,meta:{position:{x:-80,y:120}},data:{}},{id:`block_end_${(0,N.x0)(5)}`,type:b.BlockEnd,meta:{position:{x:80,y:120}},data:{}}]}),formMeta:n7},on=n.p+"static/image/icon-llm.de446995.jpg",oo=0,oi={type:b.LLM,info:{icon:on,description:"Call the large language model and use variables and prompt words to generate responses."},meta:{size:{width:360,height:390}},onAdd:()=>({id:`llm_${(0,N.x0)(5)}`,type:"llm",data:{title:`LLM_${++oo}`,inputsValues:{modelName:{type:"constant",content:"gpt-3.5-turbo"},apiKey:{type:"constant",content:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"},apiHost:{type:"constant",content:"https://mock-ai-url/api/v3"},temperature:{type:"constant",content:.5},systemPrompt:{type:"template",content:"# Role\nYou are an AI assistant.\n"},prompt:{type:"template",content:""}},inputs:{type:"object",required:["modelName","apiKey","apiHost","temperature","prompt"],properties:{modelName:{type:"string"},apiKey:{type:"string"},apiHost:{type:"string"},temperature:{type:"number"},systemPrompt:{type:"string",extra:{formComponent:"prompt-editor"}},prompt:{type:"string",extra:{formComponent:"prompt-editor"}}}},outputs:{type:"object",properties:{result:{type:"string"}}}}})};function or(){let{readonly:e}=nO();return(0,j.jsxs)("div",{children:[(0,j.jsx)(nH,{name:"Timeout(ms)",required:!0,style:{flex:1},type:"number",children:(0,j.jsx)(C.gNt,{name:"timeout.timeout",defaultValue:1e4,children:t=>{let{field:n}=t;return(0,j.jsx)(eG.Rn,{size:"small",value:n.value,onChange:e=>{n.onChange(e)},disabled:e,style:{width:"100%"},min:0})}})}),(0,j.jsx)(nH,{name:"Retry Times",required:!0,type:"number",children:(0,j.jsx)(C.gNt,{name:"timeout.retryTimes",defaultValue:1,children:t=>{let{field:n}=t;return(0,j.jsx)(eG.Rn,{size:"small",value:n.value,onChange:e=>{n.onChange(e)},disabled:e,style:{width:"100%"},min:0})}})})]})}function os(){let{readonly:e}=nO();return nR()?(0,j.jsx)(nH,{name:"params",type:"object",vertical:!0,children:(0,j.jsx)(C.gNt,{name:"paramsValues",children:t=>{let{field:n}=t;return(0,j.jsx)(M.PF,{value:n.value,onChange:e=>n.onChange(e),readonly:e})}})}):(0,j.jsx)(nH,{name:"params",type:"object",vertical:!0,children:(0,j.jsx)(C.gNt,{name:"paramsValues",children:e=>{let{field:t}=e;return(0,j.jsx)(M.y3,{value:t.value})}})})}function oa(){let{readonly:e}=nO();return nR()?(0,j.jsx)(nH,{name:"headers",type:"object",vertical:!0,children:(0,j.jsx)(C.gNt,{name:"headersValues",children:t=>{let{field:n}=t;return(0,j.jsx)(M.PF,{value:n.value,onChange:e=>n.onChange(e),readonly:e})}})}):(0,j.jsx)(nH,{name:"headers",type:"object",vertical:!0,children:(0,j.jsx)(C.gNt,{name:"headersValues",children:e=>{let{field:t}=e;return(0,j.jsx)(M.y3,{value:t.value})}})})}let ol=[{label:"None",value:"none"},{label:"JSON",value:"JSON"},{label:"Raw Text",value:"raw-text"}];function od(){let{readonly:e}=nO();return(0,j.jsx)(C.gNt,{name:"body.bodyType",defaultValue:"JSON",children:t=>{let{field:n}=t;return(0,j.jsx)("div",{style:{marginTop:5},children:(0,j.jsxs)(nH,{name:"Body",vertical:!0,type:"object",children:[(0,j.jsx)(eG.Ph,{value:n.value,onChange:e=>{n.onChange(e)},style:{width:"100%",marginBottom:10},disabled:e,size:"small",optionList:ol}),(t=>{switch(t){case"JSON":return(0,j.jsx)(C.gNt,{name:"body.json",children:t=>{var n;let{field:o}=t;return(0,j.jsx)(M.sb,{value:null==(n=o.value)?void 0:n.content,readonly:e,activeLinePlaceholder:"use var by '@'",onChange:e=>{o.onChange({type:"template",content:e})}})}});case"raw-text":return(0,j.jsx)(C.gNt,{name:"body.rawText",children:t=>{let{field:n}=t;return(0,j.jsx)(M.B1,{disableMarkdownHighlight:!0,readonly:e,style:{flexGrow:1},placeholder:"Input raw text, use var by '{'",onChange:e=>{n.onChange(e)}})}});default:return null}})(n.value)]})})}})}function oc(){let{readonly:e}=nO();return(0,j.jsx)("div",{children:(0,j.jsx)(nH,{name:"API",required:!0,vertical:!0,type:"string",children:(0,j.jsxs)("div",{style:{display:"flex",gap:5},children:[(0,j.jsx)(C.gNt,{name:"api.method",defaultValue:"GET",children:t=>{let{field:n}=t;return(0,j.jsx)(eG.Ph,{value:n.value,onChange:e=>{n.onChange(e)},style:{width:85,maxWidth:85,minWidth:85},size:"small",disabled:e,optionList:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"PATCH",value:"PATCH"},{label:"HEAD",value:"HEAD"}]})}}),(0,j.jsx)(C.gNt,{name:"api.url",children:t=>{let{field:n}=t;return(0,j.jsx)(M.B1,{disableMarkdownHighlight:!0,readonly:e,style:{flexGrow:1},placeholder:"Input URL, use var by '{'",value:n.value,onChange:e=>{n.onChange(e)}})}})]})})})}let ou=e=>{let{form:t}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsxs)(nQ,{children:[(0,j.jsx)(oc,{}),(0,j.jsx)(eG.iz,{}),(0,j.jsx)(oa,{}),(0,j.jsx)(eG.iz,{}),(0,j.jsx)(os,{}),(0,j.jsx)(eG.iz,{}),(0,j.jsx)(od,{}),(0,j.jsx)(eG.iz,{}),(0,j.jsx)(or,{}),(0,j.jsx)(eG.iz,{}),(0,j.jsx)(M.LE,{displayFromScope:!0})]})]})},op={render:e=>(0,j.jsx)(ou,{...e}),effect:tA.effect,plugins:[(0,M.kk)({sourceKey:"headersValues",targetKey:"headers"}),(0,M.kk)({sourceKey:"paramsValues",targetKey:"params"})]},oh=0,og={type:b.HTTP,info:{icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIiBmaWxsPSJub25lIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIKICAgIGQ9Ik0yMC4wMDYgNEMyMi4xNDUgNCAyMy45ODUzIDcuMzk4NTUgMjQuNzY1MSAxMi4yNDFIMTUuMjQ2OUMxNi4wMjY3IDcuMzk4NTUgMTcuODY3IDQgMjAuMDA2IDRaTTE1LjAyMSAyMC45MTE5QzE0LjkwOCAxOS44MDIzIDE0Ljg0MjQgMTguNjQ4NiAxNC44NDI0IDE3LjQ0MzZDMTQuODQyNCAxNi4yNDIxIDE0LjkwOCAxNS4wODQ4IDE1LjAyMSAxMy45NzUySDI0Ljk4MzdDMjUuMDk2NiAxNS4wODQ4IDI1LjE2MjMgMTYuMjQyMSAyNS4xNjIzIDE3LjQ0MzZDMjUuMTYyMyAxOC42NDUgMjUuMDk2NiAxOS43OTg3IDI0Ljk4MzcgMjAuOTExOUgxNS4wMjFaTTIzLjgwNDQgNC41NjE5OUMyNy42NTI1IDUuNzExOTkgMzAuNzY0NCA4LjU1OTQyIDMyLjMwMjIgMTIuMjQwOUgyNi40OTM2QzI2LjAxOTkgOS4xNTQ2MyAyNS4xMTYyIDYuMzk1MzcgMjMuODA0NCA0LjU2MTk5Wk0xNi4xOTcxIDQuNTYxOTlDMTIuMzU2MyA1LjcxMTk5IDkuMjM3MDEgOC41NTk0MiA3LjcwNjUyIDEyLjI0MDlIMTMuNTE1MUMxMy45ODE1IDkuMTU0NjMgMTQuODg1MiA2LjM5NTM3IDE2LjE5NzEgNC41NjE5OVpNMjYuNzExOSAxMy45NzUySDMyLjg3NzZDMzMuMTY5MSAxNS4wODQ4IDMzLjMzNjggMTYuMjQyMSAzMy4zMzY4IDE3LjQ0MzZDMzMuMzM2OCAxOC42NDUgMzMuMTY5MSAxOS43OTg3IDMyLjg3NCAyMC45MTE5SDI2LjcxMTlDMjYuODI0OSAxOS43NzY2IDI2Ljg5MDYgMTguNjA4MyAyNi44OTA2IDE3LjQ0MzZDMjYuODkwNiAxNi4yNzg5IDI2LjgyNDkgMTUuMTE0MiAyNi43MTE5IDEzLjk3NTJaTTEzLjEyMiAxNy40NDM2QzEzLjEyMiAxNi4yNzg5IDEzLjE4NzYgMTUuMTEwNSAxMy4zMDA2IDEzLjk3NTJINy4xMzEyN0M2LjgzOTc1IDE1LjA4ODUgNi42Njg0OCAxNi4yNDIxIDYuNjY4NDggMTcuNDQzNkM2LjY2ODQ4IDE4LjY0NSA2LjgzOTc1IDE5LjgwMjMgNy4xMzEyNyAyMC45MTJIMTMuMjkzM0MxMy4xODc2IDE5Ljc3NjcgMTMuMTIyIDE4LjYxMTkgMTMuMTIyIDE3LjQ0MzZaTTQgMjUuMzM3M0M0IDIzLjgwMDUgNS4yNDU4MiAyMi41NTQ3IDYuNzgyNjEgMjIuNTU0N0gzMy4yMTc0QzM0Ljc1NDIgMjIuNTU0NyAzNiAyMy44MDA1IDM2IDI1LjMzNzNWMzMuMjE3NEMzNiAzNC43NTQyIDM0Ljc1NDIgMzYgMzMuMjE3NCAzNkg2Ljc4MjYxQzUuMjQ1ODIgMzYgNCAzNC43NTQyIDQgMzMuMjE3NFYyNS4zMzczWk0xMC45MTA5IDI4LjE1NjlIOC40ODY2NlYyNS45MTYxSDYuNjY4NDhWMzIuNjM4OEg4LjQ4NjY2VjI5LjgzNzZIMTAuOTEwOVYzMi42Mzg4SDEyLjcyOTFWMjUuOTE2MUgxMC45MTA5VjI4LjE1NjlaTTEzLjk0MTIgMjcuNTk2OEgxNS43NTk0VjMyLjYzODhIMTcuNTc3NlYyNy41OTY4SDE5LjM5NThWMjUuOTE2MUgxMy45NDEyVjI3LjU5NjhaTTIwLjYwNzkgMjcuNTk2OEgyMi40MjZWMzIuNjM4OEgyNC4yNDQyVjI3LjU5NjhIMjYuMDYyNVYyNS45MTYxSDIwLjYwNzlWMjcuNTk2OFpNMzEuNTE2OSAyNS45MTYxSDI3LjI3NDZWMzIuNjM4OEgyOS4wOTI3VjMwLjM5NzlIMzEuNTE2OUMzMi41NDcyIDMwLjM5NzkgMzMuMzM1MSAyOS42Njk2IDMzLjMzNTEgMjguNzE3MlYyNy41OTY4QzMzLjMzNTEgMjYuNjQ0NSAzMi41NDcyIDI1LjkxNjEgMzEuNTE2OSAyNS45MTYxWk0zMS41MTY5IDI4LjcxNzJIMjkuMDkyN1YyNy41OTY4SDMxLjUxNjlWMjguNzE3MloiCiAgICBmaWxsPSIjMzM3MEZGIiAvPgo8L3N2Zz4K",description:"Call the HTTP API"},meta:{size:{width:360,height:390}},onAdd:()=>({id:`http_${(0,N.x0)(5)}`,type:"http",data:{title:`HTTP_${++oh}`,api:{method:"GET"},body:{bodyType:"JSON"},headers:{},params:{},outputs:{type:"object",properties:{body:{type:"string"},headers:{type:"object"},statusCode:{type:"integer"}}}}}),formMeta:op},om=0,ox={type:C.SyX.GROUP,meta:{renderKey:C.SyX.GROUP,defaultPorts:[],isContainer:!0,disableSideBar:!0,size:{width:560,height:400},padding:()=>({top:80,bottom:40,left:65,right:65}),selectable:(e,t)=>!t||!e.getData(C.eGM).bounds.contains(t.x,t.y),expandable:!1,nodePanelVisible:!1},formMeta:{render:()=>(0,j.jsx)(j.Fragment,{})},onAdd:()=>({type:C.SyX.GROUP,id:`group_${(0,C.x0q)(5)}`,meta:{position:{x:0,y:0}},data:{color:"Green",title:`Group_${++om}`}})},oy=n.p+"static/image/icon-end.ac3dc81e.jpg",of={...tA,render:()=>nR()?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsx)(nQ,{children:(0,j.jsx)(C.gNt,{name:"inputsValues",children:e=>{let{field:{value:t,onChange:n}}=e;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(M.PF,{value:t,onChange:e=>n(e)})})}})})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsx)(nQ,{children:(0,j.jsx)(C.gNt,{name:"inputsValues",children:e=>{let{field:{value:t}}=e;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(M.y3,{value:t})})}})})]}),plugins:[(0,M.kk)({sourceKey:"inputsValues",targetKey:"inputs"})]},ov={type:b.End,meta:{deleteDisable:!0,copyDisable:!0,nodePanelVisible:!1,defaultPorts:[{type:"input"}],size:{width:360,height:211}},info:{icon:oy,description:"The final node of the workflow, used to return the result information after the workflow is run."},formMeta:of,canAdd:()=>!1},oj=n.p+"static/image/icon-continue.4d103752.jpg",oC={...tA,render:()=>(nR(),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsx)(nQ,{})]}))},oN=0,ob={type:b.Continue,meta:{defaultPorts:[{type:"input"}],sidebarDisabled:!0,size:{width:360,height:54},expandable:!1,onlyInContainer:b.Loop},info:{icon:oj,description:"The final node of the workflow, used to return the result information after the workflow is run."},formMeta:oC,onAdd:()=>({id:`continue_${(0,N.x0)(5)}`,type:"continue",data:{title:`Continue_${++oN}`}})};var ow=n(160892),oM=n(312278);let oA=A.ZP.div`
  position: absolute;
  right: -12px;
  top: 50%;
`;function oS(){let{node:e,readonly:t}=nO();return(0,E.useLayoutEffect)(()=>{window.requestAnimationFrame(()=>{e.getData(C.QW0).updateDynamicPorts()})},[e]),(0,j.jsx)(C.F26,{name:"conditions",children:e=>{let{field:n}=e;return(0,j.jsxs)(j.Fragment,{children:[n.map((e,o)=>(0,j.jsx)(C.gNt,{name:e.name,children:e=>{let{field:i,fieldState:r}=e;return(0,j.jsxs)(nH,{name:"if",type:"boolean",required:!0,labelWidth:40,children:[(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,j.jsx)(M.iB,{readonly:t,style:{flexGrow:1},value:i.value.value,onChange:e=>i.onChange({value:e,key:i.value.key})}),!t&&(0,j.jsx)(eG.zx,{theme:"borderless",disabled:t,icon:(0,j.jsx)(ow.Z,{}),onClick:()=>n.delete(o)})]}),(0,j.jsx)(D,{errors:null==r?void 0:r.errors,invalid:null==r?void 0:r.invalid}),(0,j.jsx)(oA,{"data-port-id":i.value.key,"data-port-type":"output"})]})}},e.name)),!t&&(0,j.jsx)("div",{children:(0,j.jsx)(eG.zx,{theme:"borderless",icon:(0,j.jsx)(oM.Z,{}),onClick:()=>n.append({key:`if_${(0,N.x0)(6)}`,value:{type:"expression",content:""}}),children:C.oci.t("Add")})})]})}})}let ok={render:e=>{let{form:t}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsx)(nQ,{children:(0,j.jsx)(oS,{})})]})},validateTrigger:C.C$T.onChange,validate:{title:e=>{let{value:t}=e;return t?void 0:"Title is required"},"conditions.*":e=>{let{value:t}=e;if(!(null==t?void 0:t.value))return"Condition is required"}},effect:{conditions:M.gB}},oD={type:b.Condition,info:{icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDQiIGhlaWdodD0iNDUiIHZpZXdCb3g9IjAgMCA0NCA0NSIgZmlsbD0ibm9uZSIgY2xhc3M9ImluamVjdGVkLXN2ZyIgZGF0YS1zcmM9Imh0dHBzOi8vbGYzLXN0YXRpYy5ieXRlZG5zZG9jLmNvbS9vYmovZWRlbi1jbi91dnBhaHR2YWJoX2xtX3poaHdoL2xqaHdadGhsYXVramxrdWx6bHAvYWN0aXZpdHlfaWNvbnMvZXhjbHVzaXZlLXNwbGl0LTA1MTguc3ZnIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE2LjQ3MDUgMTQuMDE1MkMxNS4yOTkgMTIuODQzNiAxNS4yOTkgMTAuOTQ0IDE2LjQ3MDUgOS43NzI0NEwyMC43MTMxIDUuNTI5N0MyMS44ODQ2IDQuMzU4MSAyMy43ODQgNC4zNTgxIDI0Ljk1NTYgNS41Mjk3TDI5LjE5ODEgOS43NzI0NEMzMC4zNjk3IDEwLjk0NCAzMC4zNjk3IDEyLjg0MzYgMjkuMTk4MSAxNC4wMTUyTDI1LjEyMDYgMTguMDkyOUgzMi42Njc0QzM2LjUzMzQgMTguMDkyOSAzOS42Njc0IDIxLjIyNjkgMzkuNjY3NCAyNS4wOTI5VjMzLjE1NFYzMy4zMjcxVjM3LjE1NEMzOS42Njc0IDM4LjI1ODUgMzguNzcxOSAzOS4xNTQgMzcuNjY3NCAzOS4xNTRIMzMuNjY3NEMzMi41NjI4IDM5LjE1NCAzMS42Njc0IDM4LjI1ODUgMzEuNjY3NCAzNy4xNTRWMzMuMzI3MVYzMy4xNTRWMjYuMDkyOUgyMy41OTQ4SDE1LjY2NzRWMzMuMTMyN0wxNy4yNjg1IDMzLjEyNDRDMTguODM5NyAzMy4xMTYzIDE5LjYzMjIgMzUuMDE1NiAxOC41MjEyIDM2LjEyNjZMMTIuNzM3NCA0MS45MTAzQzEyLjA1MDYgNDIuNTk3MSAxMC45MzcxIDQyLjU5NzEgMTAuMjUwMyA0MS45MTAzTDQuNTI1ODggMzYuMTg1OUMzLjQyMTA3IDM1LjA4MTEgNC4xOTc5NyAzMy4xOTE3IDUuNzYwMzggMzMuMTgzN0w3LjY2NzM3IDMzLjE3MzlWMjUuMDkyOUM3LjY2NzM3IDIxLjIyNyAxMC44MDE0IDE4LjA5MjkgMTQuNjY3NCAxOC4wOTI5SDIwLjU0ODFMMTYuNDcwNSAxNC4wMTUyWiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzI3NTJfMTgzNzAyLTcpIi8+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjc1Ml8xODM3MDItNyIgeDE9IjM4LjUyIiB5MT0iNDMuMzkxNSIgeDI9IjguMDk2ODYiIHkyPSI0LjY5ODIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzMzNzBGRiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjAuOTk3OTA4IiBzdG9wLWNvbG9yPSIjMzNBOUZGIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KPC9zdmc+Cg==",description:"Connect multiple downstream branches. Only the corresponding branch will be executed if the set conditions are met."},meta:{defaultPorts:[{type:"input"}],useDynamicPort:!0,expandable:!1,size:{width:360,height:210}},formMeta:ok,onAdd:()=>({id:`condition_${(0,N.x0)(5)}`,type:"condition",data:{title:"Condition",conditions:[{key:`if_${(0,N.x0)(5)}`,value:{}},{key:`if_${(0,N.x0)(5)}`,value:{}}]}})},oE={type:b.Comment,meta:{sidebarDisabled:!0,nodePanelVisible:!1,defaultPorts:[],renderKey:b.Comment,size:{width:240,height:150}},formMeta:{render:()=>(0,j.jsx)(j.Fragment,{})},getInputPoints:()=>[],getOutputPoints:()=>[]};function oI(){let{readonly:e}=nO();return nR()?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(eG.iz,{}),(0,j.jsx)(nH,{name:"outputs",type:"object",vertical:!0,children:(0,j.jsx)(C.gNt,{name:"outputs",children:t=>{let{field:n}=t;return(0,j.jsx)(M._R,{readonly:e,value:n.value,onChange:e=>n.onChange(e)})}})})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(eG.iz,{}),(0,j.jsx)(C.gNt,{name:"outputs",children:e=>{let{field:t}=e;return(0,j.jsx)(M.LE,{value:t.value})}})]})}function oL(){let e=nR(),{readonly:t}=nO();return e?(0,j.jsx)(nH,{name:"inputs",type:"object",vertical:!0,children:(0,j.jsx)(C.gNt,{name:"inputsValues",children:e=>{let{field:n}=e;return(0,j.jsx)(M.PF,{value:n.value,onChange:e=>n.onChange(e),readonly:t})}})}):(0,j.jsx)(C.gNt,{name:"inputsValues",children:e=>{let{field:t}=e;return(0,j.jsx)(M.y3,{value:t.value})}})}function oT(){let e=nR(),{readonly:t}=nO();return e?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(eG.iz,{}),(0,j.jsx)(C.gNt,{name:"script.content",children:e=>{let{field:n}=e;return(0,j.jsx)(M.pq,{languageId:"typescript",value:n.value,onChange:e=>n.onChange(e),readonly:t})}})]}):null}let oP=e=>{let{form:t}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsxs)(nQ,{children:[(0,j.jsx)(oL,{}),(0,j.jsx)(oT,{}),(0,j.jsx)(oI,{})]})]})},oz={render:e=>(0,j.jsx)(oP,{...e}),effect:tA.effect,validate:tA.validate,plugins:[(0,M.kk)({sourceKey:"inputsValues",targetKey:"inputs"})]},oZ=0,oO=`// Here, you can retrieve input variables from the node using 'params' and output results using 'ret'.
// 'params' has been correctly injected into the environment.
// Here's an example of getting the value of the parameter named 'input' from the node input:
// const input = params.input;
// Here's an example of outputting a 'ret' object containing multiple data types:
// const ret = { "name": 'Xiaoming', "hobbies": ["Reading", "Traveling"] };

async function main({ params }) {
  // Build the output object
  const ret = {
    key0: params.input + params.input, // Concatenate the input parameter 'input' twice
    key1: ["hello", "world"], // Output an array
    key2: { // Output an Object
      key21: "hi"
    },
  };

  return ret;
}`,oR={type:b.Code,info:{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA3gSURBVHgB7d3Pc5PHGQfwZyUMTlJ7yJQ21CaJaJtBPgUfMPapzqT3pH9ADTnDTMKt6QW4NL2FTOBc7H8A8gdk8M1GPti91CLJFEFjYwotHnvCD4O1eR+BjAxClvTsvvvu7vczk5iAAyPxfLX77j7vvoosK87PFOgxjWuVfz9XrRaqShUU6b3JLxUI4LmKJrWa0zr5qv9ZzecWcvnqQnl4rEIWKbKgODczrin/kdLVjwmFDjKV5J9pUnqyfGRsmgwzFoDC/Pze3icbnyqtP9NEewnAvAqRPks9NG1qZBAHAIUPaUuKdjX5clH36K+kQRAFYKg0+2ny5QwKHxyp8IhQHhm7SF3qKgDFmeTCNq/+kfxwnADcq1CP/qCb0SBHHeJPfZVX84Tih+woqMdqfmh29jPqUEcjwNBc6Uutqx3/IQCpUepM+cjRs21/e7vfWCzN8pTnOAFk38XyyOgn7XxjWwE4VLo6n2xeHSYATySbagvXRo4O7/R9O14D8Cc/ih98wzX7bNbSUssAFOeuniZMe8Bfx5NFmy9bfcMrp0C82pOs758jAM+pKp1aHB1tWstNA8Dr/LzUiQ0uCAHvHCe7xsPN9gmaT4Hy6gqKH0JRq+XHqun1wEsBKJZmjhM6OCE84802yrZNgZ61OFwhBAACxFOhBz17DlaGh1frP7dtBFC78tzcViCAAPFUqHfj4bZRYGsEwIUvxODFUeD5CJCncRQ/hO7FUaBhCqROE0AElFKf1n9cCwDfw0uY+0MkeBR4VvPPRgCtjhFARLRWfGDD1hRonAAiklwMf1T7+mzt/zoBxKZHH8ypnhxanSFOj2k8pzerCABESZM6nNO53PsEECE+qjOXw/InxCqXezentcbuL0SJ9wN2EUaAzBncs4c+3rePRvr6aXD3ntrPLW08okt379Dc+jotPXpEYERhF0Fm9O/aRScGBmnirf0v/RqHggPBxT/13xWaWlkhkEMAMoKLf/LQEBVff73l93EQPn/7XerL5+nC0hKBTMdHI4Idf3n7nR2Lv9HJgQM0sX8/gQwCkAE8tfnTvl9RpzgE/XkM4hIIQAb8uctPcp4G8cUydA8ByICRvj7q1kh/P0H3EADHiq+/IZrGFF9r/7oBXoYAONafTGPAHQTAsU5WfprhDTLoHgLgWH2nt1vl+/cJuocAOCYeAdAWIYIAOFZ8QxaA8v2fCLqHADjE6/jSjaz1zSpB9xAAh4aSJVCpRYwAIgiAQ33CJVBMf+QQAIfkS6AbBDIIgEPFN2RToMWfMAJIIQAOHRDuAVx7gD0AKQTAIekUaO3JEwIZBMARvrNLqnz/AYEMAuCItAVifXOT1jYxAkghAI5Ipz9Y/zcDAXAETXDZgAA4gia4bEAAHJFeBGMX2AwEwAFugZAGAE1wZiAADgzu6SUpXASbgQA4MLh7N0lg+mNOFKcq1c7V/MXTo0fWkvXz8oP7Ti8is9gEl7X3KC1BB+DDN9+sHTTLJ6+9iJcRJ2/fost371LapE1wJguTzyQ6MXggc+9RWoINwN8O/rblcYP8KfzFwd/REH+9eZPSJG2CM9UF+vk77zY9ibrO5XuUliCvAXYq/kYTb/0mKYR3KE0De2TXAMsGjkLZqfgb8XvE72mIggtAJ8Vfx3/BH+59k9LAc23pfcDSJjg+T7Td4q/j9zTEEAQVgG6Kv+7k4CClIQtNcHyqdDdCDEEwAZAUP+MzOk3cpL7zn+O2CY5fp2QTLrQQBBEAafHXHXrtNbJNOgJIV4CKBl5jSCHwPgCmip+ZuEllJ9IRQNoFauo1hhICrwNgsvgZz69t42eBSUhXgEy+xhBC4G0ATBc/S6PFQN4GLdsFNn0fge8h8DIANoqfjxkvra+TTcUMnARXWl8zfiulzyHwLgA2ip9dvnuHbMtKE9zUym0yzdcQeBUAW8XPjV/nU3jmblaa4C4s/2jllkofQ+BNAGwVP099Tn7/HaUhS01wJ3/4zsrTZXwLgRcBsFn8x8qLqbX99udkh+GaPAqRX3PttUcegswHIJTiZ9KHYSwbLlaEIOMBCKn4TTwMw8ZJcLGHILMBCKn4mbTPyOZJcDGHIJMBCK34WdZPgos1BJkLQIjFz0y0QdsWYwgyFYBQi5+JR4CUHoYRWwgyE4CQi59Jm+DSfBhGTCHIRABCL37mugmu8z8vjhA4D0Acxe/n41BjCIHTAMRQ/Mznk+BCD4GzAMRS/Ez8LLAUVoBaCTkETgIQU/EzaRNcFh6GEWoIUg9AbMXPpE1wWXlNIYYg1QDEWPxM2gSXpdOgQwtBagGItfiz2gQnEVIIUglArMXPstwEJxFKCKwH4MTAgWiLn4X8OFTbIUjj0GKrAeBDmGycuelL8TMfmuAkbIaADy22fViZ1QBM/LqzE4jb4VPxM1+a4CRshoBPsrbJagBG+vvJJN+Kn/nUBCdhKwR/tHxsvdUASB8E0cjH4me+NcFJ2AiBiSdqtuLNsSjrTzZr//jE1yY4Cb5m8envyWoAlg1+evEn6WRxSLymnqbYHofK073JQ0PiUa/R0qOHZJPVAJTW1sgk30LgexNcJ2wUP1u03AdlNQDfrt4j03wKQQhNcO2wVfzswrLdIyvtjgDrazS1skKm+RKCUJrgWrFZ/FO3V6y/B9Yvgs9bOojVhxCE1ATXjM3i5wOLv7h5g2yzHgBeFZgo/yu6EITYBNfIdvHzcmoaUlkGjTEEoTbBsTSKf+1JOq89tX2A2EIQahNcSMXPUt0IiykEITbBhVb8LPWd4FhCEFoTXIjFz5y0QsQQgpCa4EItfuasFyj0EITSBBdy8TOnzXChhiCUJrjQi5857wYNMQQhNMHFUPwsE+3QoYXA9ya4WIqfZeZ+gJBC4HMTXEzFzzJ1Q0woIfC1CS624meZuyMshBD42AQXY/GzTN4S6XMIfGyCi7X4WWbvCfY1BL41wcVc/CzTN8X7GIIB4RJomuv/sRc/y/ypEL6FwMQIkAYU/1NeHItiOwRfv/cemTLQK+sCTasJ7uvfvxd98TN/zgWyGIKRvn6a2G/mGMcDwjboNJrg+LhBfs2m+Vb8zJsAMJshODlwgEzwoQnO1Gtt5GPxM68CwGyFgJcvR/r6SMKHJjj+5Dd94rKvxc+8CwCzFQJpAfvQBGd63u9z8TMvA8BshIBHAQnpJ2saTXDS19jI9+Jn3gaAmQ6BdAlS+umaRhOcqT6jEIqfeR0AZjIE0imI9Eb4NJrgljfkF9mhFD/zPgDMRAj4TPvS+jpJ+NAEx8dVSs7vD6n4WRABYNIQXFiSHcJqogluaSOd+4C7fa2hFT8LJgCs2xBcunun9o+EiRaItO4D6Ob1hlj8LKgAsHoIvr33/7a+/3JSCH//z02Skq6u2H4QxIv44Nl2Q8DPeQix+Jk/j1vpAIfg5A/f1541e2JwsOnFKc+DeSog/eSvE+8Ab6R7DAq/R3+9/m+aS657XvUecVs2v0d8THmoggxAXX2o591PLlD+lF5OphmLyXBufBNNeB+wq5PgGt8j3sgbSPYy+D3iQPIFc+iCDkAd/0Xa/sv0oQmulRiKvZngrgFcCeUkuNggAAaYaILz7fnHoUAADOjPy49ByerDMEKHABggXwHCp78rCIAB0h4gXx6HGiIEwAD5BTBGAFcQAANCfxxqyBAAIRNNcOubVQI3EAChoUAehhErBEBI2gSH6Y9bCICQb01wsB0CIORrExw8hQAI+d4EFzsEQEj8PLAAbzLxCQIgYKIJLu2HYcB2CICAtAku7YdhwMsQAAHp9Afr/+4hAAJogvMfAiCAJjj/IQAC0sNwsQvsHgLgEJrg3EMABBYFm1i8AoSLYPcQAIG5te6PEon1GJKsQQAE+ECpbtfxp1ZuEbiHAAjwNObC0jJ1ioMjPYodzEAAhKZu3+rouHE+ZdnEYbxgRhRHI9p2fvnH2vO9Jva/1XJzjA+ZvbC8hAa4DFHF0qwmMIL3BfiQ2Y9/uW9rj4A3u/gE5kv/u4ONrwziAFxPvhYIID6VnFJqlQAipIhWc8leZIUAYlSt3sjltL5BABHSSi3kNOkFAoiQSmo/R5s0TQAR0ruTEaA8NlYhXAdAfCrl4bFKbSc4uRr+hgDiMs3/qgVAK32ZAGKi9GTtS/2/h0qz95It4b0EEL5KeWT0IP9gqxlOa/0VAURBn63/aCsAvbt7z/HOGAEErFbjPc9XPrcCsDA8vIpRAEJXJZrk1Z/6f2+7HwCjAASuonr0ucaf2BYAHgWqis4SQJD02cZPf6aafVuxNHsl+TJOAOHYWvlp1PyWyE39CaZCEIqnF776g2a/1jQA3B6BqRAEo0ovTX3qXnlT/LUjo3xBjFUh8JvWZxdHR8+96pfVDv87Fa/OXCSljhGAb7SeLB8dO97qW3YMABsqXZ3XpA8TgCc0qYVrI0eHd/q+ts4FWuTfSD9tHgLIvKRW2yl+1vbBWLWhRGtcGEOm6eS6dadpT6OOToZLfuMzWtEpLJFC1nBNqiqdujYy+lmH/1/nijMzBcor3iwrEIB708k6/yevWupspasA1BVLM8eT3+I0IQjgQG0mkqzxt1rmbOP3kOHRQOUVDzvHcEMNpIELnzuXH+7uPVcZHhZNx8UBqHs6LeL+IYwIYIfJwm/4Pc0rzs2MJ0PT8WQD7Q+EMIBMJZlZfKOUvlw+MjZNhlkJQKPaFKknd1hvVg8rUu8noSgkm2o8VSoQwHOVpD5Wk6V27kO7wYdW8Z1b3VzYduJnTJUNZIUvs68AAAAASUVORK5CYII=",description:"Run the Script"},meta:{size:{width:360,height:390}},onAdd:()=>({id:`code_${(0,N.x0)(5)}`,type:"code",data:{title:`Code_${++oZ}`,inputsValues:{input:{type:"constant",content:""}},script:{language:"javascript",content:oO},outputs:{type:"object",properties:{key0:{type:"string"},key1:{type:"array",items:{type:"string"}},key2:{type:"object",properties:{key21:{type:"string"}}}}}}}),formMeta:oz},oB=n.p+"static/image/icon-break.362f1db9.jpg",oV={...tA,render:()=>(nR(),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n0,{}),(0,j.jsx)(nQ,{})]}))},oF=0,oQ={type:b.Break,meta:{defaultPorts:[{type:"input"}],sidebarDisabled:!0,size:{width:360,height:54},expandable:!1,onlyInContainer:b.Loop},info:{icon:oB,description:"The final node of the workflow, used to return the result information after the workflow is run."},formMeta:oV,onAdd:()=>({id:`break_${(0,N.x0)(5)}`,type:"break",data:{title:`Break_${++oF}`}})},oU=[oD,n6,ov,oi,ot,oE,{type:b.BlockStart,meta:{isStart:!0,deleteDisable:!0,copyDisable:!0,sidebarDisabled:!0,nodePanelVisible:!1,defaultPorts:[{type:"output"}],size:{width:100,height:100},wrapperStyle:{minWidth:"unset",width:"100%",borderWidth:2,borderRadius:12,cursor:"move"}},info:{icon:n5,description:"The starting node of the block."},formMeta:{render:e=>{let{form:t}=e;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{style:{width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,j.jsx)(eG.qE,{shape:"circle",style:{width:40,height:40,borderRadius:"50%",cursor:"move"},alt:"Icon",src:n5})})})}},canAdd:()=>!1},{type:b.BlockEnd,meta:{isNodeEnd:!0,deleteDisable:!0,copyDisable:!0,sidebarDisabled:!0,nodePanelVisible:!1,defaultPorts:[{type:"input"}],size:{width:100,height:100},wrapperStyle:{minWidth:"unset",width:"100%",borderWidth:2,borderRadius:12,cursor:"move"}},info:{icon:n5,description:"The final node of the block."},formMeta:{render:e=>{let{form:t}=e;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{style:{width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,j.jsx)(eG.qE,{shape:"circle",style:{width:40,height:40,borderRadius:"50%",cursor:"move"},alt:"Icon",src:oy})})})}},canAdd:()=>!1},og,oR,ob,oQ,n4,ox],oH={nodes:[{id:"start_0",type:"start",meta:{position:{x:180,y:573.7}},data:{title:"Start",outputs:{type:"object",properties:{query:{type:"string",default:"Hello Flow."},enable:{type:"boolean",default:!0},array_obj:{type:"array",items:{type:"object",properties:{int:{type:"number"},str:{type:"string"}}}}}}}},{id:"condition_0",type:"condition",meta:{position:{x:1100,y:510.20000000000005}},data:{title:"Condition",conditions:[{key:"if_0",value:{left:{type:"ref",content:["start_0","query"]},operator:"contains",right:{type:"constant",content:"Hello Flow."}}},{key:"if_f0rOAt",value:{left:{type:"ref",content:["start_0","enable"]},operator:"is_true"}}]}},{id:"end_0",type:"end",meta:{position:{x:3008,y:573.7}},data:{title:"End",inputsValues:{success:{type:"constant",content:!0,schema:{type:"boolean"}},query:{type:"ref",content:["start_0","query"]}}}},{id:"159623",type:"comment",meta:{position:{x:180,y:756.7}},data:{size:{width:240,height:150},note:"hi ~\n\nthis is a comment node\n\n- flowgram.ai"}},{id:"http_rDGIH",type:"http",meta:{position:{x:640,y:447.35}},data:{title:"HTTP_1",outputs:{type:"object",properties:{body:{type:"string"},headers:{type:"object"},statusCode:{type:"integer"}}},api:{method:"GET",url:{type:"template",content:""}},body:{bodyType:"JSON"},timeout:{timeout:1e4,retryTimes:1}}},{id:"loop_Ycnsk",type:"loop",meta:{position:{x:1480,y:90.00000000000003}},data:{title:"Loop_1",loopFor:{type:"ref",content:["start_0","array_obj"]},loopOutputs:{acm:{type:"ref",content:["llm_6aSyo","result"]}}},blocks:[{id:"llm_6aSyo",type:"llm",meta:{position:{x:344,y:0}},data:{title:"LLM_3",inputsValues:{modelName:{type:"constant",content:"gpt-3.5-turbo"},apiKey:{type:"constant",content:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"},apiHost:{type:"constant",content:"https://mock-ai-url/api/v3"},temperature:{type:"constant",content:.5},systemPrompt:{type:"template",content:"# Role\nYou are an AI assistant.\n"},prompt:{type:"template",content:""}},inputs:{type:"object",required:["modelName","apiKey","apiHost","temperature","prompt"],properties:{modelName:{type:"string"},apiKey:{type:"string"},apiHost:{type:"string"},temperature:{type:"number"},systemPrompt:{type:"string",extra:{formComponent:"prompt-editor"}},prompt:{type:"string",extra:{formComponent:"prompt-editor"}}}},outputs:{type:"object",properties:{result:{type:"string"}}}}},{id:"llm_ZqKlP",type:"llm",meta:{position:{x:804,y:0}},data:{title:"LLM_4",inputsValues:{modelName:{type:"constant",content:"gpt-3.5-turbo"},apiKey:{type:"constant",content:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"},apiHost:{type:"constant",content:"https://mock-ai-url/api/v3"},temperature:{type:"constant",content:.5},systemPrompt:{type:"template",content:"# Role\nYou are an AI assistant.\n"},prompt:{type:"template",content:""}},inputs:{type:"object",required:["modelName","apiKey","apiHost","temperature","prompt"],properties:{modelName:{type:"string"},apiKey:{type:"string"},apiHost:{type:"string"},temperature:{type:"number"},systemPrompt:{type:"string",extra:{formComponent:"prompt-editor"}},prompt:{type:"string",extra:{formComponent:"prompt-editor"}}}},outputs:{type:"object",properties:{result:{type:"string"}}}}},{id:"block_start_PUDtS",type:"block-start",meta:{position:{x:32,y:163.1}},data:{}},{id:"block_end_leBbs",type:"block-end",meta:{position:{x:1116,y:163.1}},data:{}}],edges:[{sourceNodeID:"block_start_PUDtS",targetNodeID:"llm_6aSyo"},{sourceNodeID:"llm_6aSyo",targetNodeID:"llm_ZqKlP"},{sourceNodeID:"llm_ZqKlP",targetNodeID:"block_end_leBbs"}]},{id:"group_nYl6D",type:"group",meta:{position:{x:1644,y:730.2}},data:{parentID:"root",blockIDs:["llm_8--A3","llm_vTyMa"]}},{id:"llm_8--A3",type:"llm",meta:{position:{x:180,y:0}},data:{title:"LLM_1",inputsValues:{modelName:{type:"constant",content:"gpt-3.5-turbo"},apiKey:{type:"constant",content:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"},apiHost:{type:"constant",content:"https://mock-ai-url/api/v3"},temperature:{type:"constant",content:.5},systemPrompt:{type:"template",content:"# Role\nYou are an AI assistant.\n"},prompt:{type:"template",content:"# User Input\nquery:{{start_0.query}}\nenable:{{start_0.enable}}"}},inputs:{type:"object",required:["modelName","apiKey","apiHost","temperature","prompt"],properties:{modelName:{type:"string"},apiKey:{type:"string"},apiHost:{type:"string"},temperature:{type:"number"},systemPrompt:{type:"string",extra:{formComponent:"prompt-editor"}},prompt:{type:"string",extra:{formComponent:"prompt-editor"}}}},outputs:{type:"object",properties:{result:{type:"string"}}}}},{id:"llm_vTyMa",type:"llm",meta:{position:{x:640,y:10}},data:{title:"LLM_2",inputsValues:{modelName:{type:"constant",content:"gpt-3.5-turbo"},apiKey:{type:"constant",content:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"},apiHost:{type:"constant",content:"https://mock-ai-url/api/v3"},temperature:{type:"constant",content:.5},systemPrompt:{type:"template",content:"# Role\nYou are an AI assistant.\n"},prompt:{type:"template",content:"# LLM Input\nresult:{{llm_8--A3.result}}"}},inputs:{type:"object",required:["modelName","apiKey","apiHost","temperature","prompt"],properties:{modelName:{type:"string"},apiKey:{type:"string"},apiHost:{type:"string"},temperature:{type:"number"},systemPrompt:{type:"string",extra:{formComponent:"prompt-editor"}},prompt:{type:"string",extra:{formComponent:"prompt-editor"}}}},outputs:{type:"object",properties:{result:{type:"string"}}}}}],edges:[{sourceNodeID:"start_0",targetNodeID:"http_rDGIH"},{sourceNodeID:"http_rDGIH",targetNodeID:"condition_0"},{sourceNodeID:"condition_0",targetNodeID:"llm_8--A3",sourcePortID:"if_f0rOAt"},{sourceNodeID:"condition_0",targetNodeID:"loop_Ycnsk",sourcePortID:"if_0"},{sourceNodeID:"llm_vTyMa",targetNodeID:"end_0"},{sourceNodeID:"loop_Ycnsk",targetNodeID:"end_0"},{sourceNodeID:"llm_8--A3",targetNodeID:"llm_vTyMa"}]};var oJ=n(993919),oY=n(623966);let oG=(0,t0.A)(function(e){return E.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),E.createElement("path",{d:"M5 2.9a1 1 0 0 1 1.57-.82l13.23 9.1a1 1 0 0 1 0 1.64l-13.23 9.1A1 1 0 0 1 5 21.1V2.9Z",fill:"currentColor"}))},"play"),oX=()=>{let e=(0,C.G2Z)(C.L4w);return(0,E.useMemo)(()=>{let t=[],n=(e=>{let t={type:"object",properties:{}},n=e.root.blocks.find(e=>e.flowNodeType===b.Start);if(!n)return t;let o=n.getData(C.Psq).getFormModel().getValueIn("outputs");return o||t})(e);return Object.entries(n.properties).forEach(e=>{var o,i;let[r,s]=e;t.push({type:s.type,name:r,defaultValue:s.default,required:(null==(o=n.required)?void 0:o.includes(r))??!1,itemsType:null==(i=s.items)?void 0:i.type})}),t},[e])},oq=e=>{let{formMeta:t,values:n,setValues:o}=e;(0,E.useEffect)(()=>{let e={};t.map(t=>{t.name in n||void 0===t.defaultValue||(e={...e,[t.name]:t.defaultValue})}),o({...n,...e})},[t])};var oW=n(721420);let oK=e=>{let{values:t,setValues:n}=e;return oq({formMeta:oX(),values:t,setValues:n}),(0,j.jsx)("div",{className:oW.Z["testrun-json-input"],children:(0,j.jsx)(M.pq,{languageId:"json",value:JSON.stringify(t,null,2),onChange:e=>n(JSON.parse(e))})})};var o_=n(233522);let o$=e=>{let{values:t,setValues:n}=e,o=oX(),i=(e=>{let{formMeta:t,values:n,setValues:o}=e;return t.map(e=>{let t=(()=>{let t=n[e.name]??e.defaultValue;return("object"===e.type||"array"===e.type)&&null!==t?JSON.stringify(t,null,2):t})();return{...e,value:t,onChange:t=>{"object"===e.type||"array"===e.type?o({...n,[e.name]:JSON.parse(t??"{}")}):o({...n,[e.name]:t})}}})})({formMeta:o,values:t,setValues:n});return(oq({formMeta:o,values:t,setValues:n}),0===i.length)?(0,j.jsx)("div",{className:o_.Z.formContainer,children:(0,j.jsxs)("div",{className:o_.Z.emptyState,children:[(0,j.jsx)("div",{className:o_.Z.emptyText,children:"Empty"}),(0,j.jsx)("div",{className:o_.Z.emptyText,children:"No inputs found in start node"})]})}):(0,j.jsx)("div",{className:o_.Z.formContainer,children:i.map(e=>(0,j.jsxs)("div",{className:o_.Z.fieldGroup,children:[(0,j.jsxs)("label",{htmlFor:e.name,className:o_.Z.fieldLabel,children:[e.name,e.required&&(0,j.jsx)("span",{className:o_.Z.requiredIndicator,children:"*"}),(0,j.jsx)("span",{className:o_.Z.fieldTypeIndicator,children:(0,j.jsx)(M.s1,{value:{type:e.type,items:e.itemsType?{type:e.itemsType}:void 0}})})]}),(e=>{switch(e.type){case"boolean":return(0,j.jsx)("div",{className:o_.Z.fieldInput,children:(0,j.jsx)(eG.rs,{checked:e.value,onChange:t=>e.onChange(t)})});case"integer":return(0,j.jsx)("div",{className:o_.Z.fieldInput,children:(0,j.jsx)(eG.Rn,{precision:0,value:e.value,onChange:t=>e.onChange(t),placeholder:"Please input integer"})});case"number":return(0,j.jsx)("div",{className:o_.Z.fieldInput,children:(0,j.jsx)(eG.Rn,{value:e.value,onChange:t=>e.onChange(t),placeholder:"Please input number"})});case"object":return(0,j.jsx)("div",{className:t$()(o_.Z.fieldInput,o_.Z.codeEditorWrapper),children:(0,j.jsx)(M.pq,{languageId:"json",value:e.value,onChange:t=>e.onChange(t)})});case"array":return(0,j.jsx)("div",{className:t$()(o_.Z.fieldInput,o_.Z.codeEditorWrapper),children:(0,j.jsx)(M.pq,{languageId:"json",value:e.value,onChange:t=>e.onChange(t)})});default:return(0,j.jsx)("div",{className:o_.Z.fieldInput,children:(0,j.jsx)(eG.II,{value:e.value,onChange:t=>e.onChange(t),placeholder:"Please input text"})})}})(e)]},e.name))})},o0=e=>{let{className:t,style:n}=e;return(0,j.jsxs)("svg",{className:t,style:n,width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,j.jsx)("path",{d:"M9.5 8C8.67157 8 8 8.67157 8 9.5V14.5C8 15.3284 8.67157 16 9.5 16H14.5C15.3284 16 16 15.3284 16 14.5V9.5C16 8.67157 15.3284 8 14.5 8H9.5Z"}),(0,j.jsx)("path",{d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z"})]})};var o1=n(458177);let o2=e=>{let{visible:t,onCancel:n}=e,o=(0,C.G2Z)(tg),{nodeId:i,setNodeId:r}=(0,E.useContext)(nl),[s,a]=(0,E.useState)(!1),[l,d]=(0,E.useState)({}),[c,u]=(0,E.useState)(),[p,h]=(0,E.useState)(),[g,m]=(0,E.useState)(()=>{let e=localStorage.getItem("testrun-input-json-mode");return!!e&&JSON.parse(e)}),x=async()=>{if(s)return void await o.taskCancel();h(void 0),u(void 0),await o.taskRun(l)&&a(!0)},y=async()=>{await o.taskCancel(),d({}),a(!1),n()};(0,E.useEffect)(()=>{r(void 0);let e=o.onResultChanged(e=>{let{result:t,errors:n}=e;a(!1),h(t),n?u(n):u(void 0)});return()=>e.dispose()},[]),(0,E.useEffect)(()=>{i&&n()},[i]);let f=(0,j.jsxs)("div",{className:o1.Z["testrun-panel-running"],children:[(0,j.jsx)(t1,{spin:!0,size:"large"}),(0,j.jsx)("div",{className:o1.Z.text,children:"Running..."})]}),v=(0,j.jsxs)("div",{className:o1.Z["testrun-panel-form"],children:[(0,j.jsxs)("div",{className:o1.Z["testrun-panel-input"],children:[(0,j.jsx)("div",{className:o1.Z.title,children:"Input Form"}),(0,j.jsx)("div",{children:"JSON Mode"}),(0,j.jsx)(eG.rs,{checked:g,onChange:e=>{m(e),localStorage.setItem("testrun-input-json-mode",JSON.stringify(e))},size:"small"})]}),g?(0,j.jsx)(oK,{values:l,setValues:d}):(0,j.jsx)(o$,{values:l,setValues:d}),null==c?void 0:c.map(e=>(0,j.jsx)("div",{className:o1.Z.error,children:e},e)),(0,j.jsx)(nt,{title:"Inputs Result",data:null==p?void 0:p.inputs,optional:!0,disableCollapse:!0}),(0,j.jsx)(nt,{title:"Outputs Result",data:null==p?void 0:p.outputs,optional:!0,disableCollapse:!0})]}),N=(0,j.jsx)(eG.zx,{onClick:x,icon:s?(0,j.jsx)(o0,{}):(0,j.jsx)(oG,{size:"small"}),className:t$()(o1.Z.button,{[o1.Z.running]:s,[o1.Z.default]:!s}),children:s?"Cancel":"Test Run"});return(0,j.jsx)(eG.Uu,{title:"Test Run",visible:t,mask:!1,motion:!1,onCancel:y,width:400,headerStyle:{display:"none"},bodyStyle:{padding:0},style:{background:"none",boxShadow:"none"},children:(0,j.jsxs)("div",{className:o1.Z["testrun-panel-container"],children:[(0,j.jsxs)("div",{className:o1.Z["testrun-panel-header"],children:[(0,j.jsx)("div",{className:o1.Z["testrun-panel-title"],children:"Test Run"}),(0,j.jsx)(eG.zx,{className:o1.Z["testrun-panel-title"],type:"tertiary",icon:(0,j.jsx)(nG.Z,{}),size:"small",theme:"borderless",onClick:y})]}),(0,j.jsx)("div",{className:o1.Z["testrun-panel-content"],children:s?f:v}),(0,j.jsx)("div",{className:o1.Z["testrun-panel-footer"],children:N})]})})};var o3=n(176334);function o4(e){let[t,n]=(0,E.useState)(0),o=(0,C.sX$)(),[i,r]=(0,E.useState)(!1),s=(0,E.useCallback)(()=>{n(o.document.getAllNodes().map(e=>(0,C.CMu)(e)).filter(e=>null==e?void 0:e.state.invalid).length)},[o]),a=(0,E.useCallback)(async()=>{let e=o.document.getAllNodes().map(e=>(0,C.CMu)(e));await Promise.all(e.map(async e=>null==e?void 0:e.validate())),console.log(">>>>> save data: ",o.document.toJSON()),r(!0)},[o]);(0,E.useEffect)(()=>{let e=e=>{let t=(0,C.CMu)(e);if(t){let n=t.onValidate(()=>s());e.onDispose(()=>n.dispose())}};o.document.getAllNodes().map(t=>e(t));let t=o.document.onNodeCreate(t=>{let{node:n}=t;return e(n)});return()=>t.dispose()},[o]);let l=0===t?(0,j.jsx)(eG.zx,{disabled:e.disabled,onClick:a,icon:(0,j.jsx)(oG,{size:"small"}),className:o3.Z.testrunSuccessButton,children:"Test Run"}):(0,j.jsx)(eG.Ct,{count:t,position:"rightTop",type:"danger",children:(0,j.jsx)(eG.zx,{type:"danger",disabled:e.disabled,onClick:a,icon:(0,j.jsx)(oG,{size:"small"}),className:o3.Z.testrunErrorButton,children:"\xa0 Test Run"})});return(0,j.jsxs)(j.Fragment,{children:[l,(0,j.jsx)(o2,{visible:i,onCancel:()=>r(!1)})]})}let o5=e=>{let t=(()=>{let e=(0,C.G2Z)(C.L4w),t=(0,C.G2Z)(_),n=(0,C.G2Z)(C.oJU),o=(0,C.Dcz)(),i=(()=>{let e=(0,C.Dcz)();return(0,E.useCallback)(t=>e.config.getPosFromMouseEvent({clientX:t.left+64,clientY:t.top-7}),[e])})(),r=(()=>{let e=(0,C.G2Z)(C.oJU);return(0,E.useCallback)(t=>{t&&e.selectNode(t)},[e])})();return(0,E.useCallback)(async o=>{let s=i(o),a=(e=>{let{activatedNode:t}=e;if(!t)return;let{isContainer:n}=t.getNodeMeta();if(n)return t;let o=t.parent;if(o&&o.flowNodeType!==C.SyX.ROOT)return o})(n);await new Promise(n=>{t.callNodePanel({position:s,enableMultiAdd:!0,containerNode:a,panelProps:{},onSelect:async t=>{if(!t)return;let{nodeType:n,nodeJSON:o}=t,i=a?(0,C.n2P)(e,{x:0,y:200}):void 0;r(e.createWorkflowNodeByType(n,i,o??{},null==a?void 0:a.id))},onClose:()=>{n()}})})},[i,t,o.config.zoom,e,r])})();return(0,j.jsx)(eG.zx,{"data-testid":"demo.free-layout.add-node",icon:(0,j.jsx)(oM.Z,{}),color:"highlight",style:{backgroundColor:"rgba(171,181,255,0.3)",borderRadius:"8px"},disabled:e.disabled,onClick:e=>{t(e.currentTarget.getBoundingClientRect())},children:"Add Node"})},o9=A.ZP.div`
  position: absolute;
  bottom: 16px;
  display: flex;
  justify-content: left;
  min-width: 360px;
  pointer-events: none;
  gap: 8px;

  z-index: 99;
`,o6=A.ZP.div`
  display: flex;
  align-items: center;
  background-color: #fff;
  border: 1px solid rgba(68, 83, 130, 0.25);
  border-radius: 10px;
  box-shadow: rgba(0, 0, 0, 0.04) 0px 2px 6px 0px, rgba(0, 0, 0, 0.02) 0px 4px 12px 0px;
  column-gap: 2px;
  height: 40px;
  padding: 0 4px;
  pointer-events: auto;
`,o8=A.ZP.span`
  padding: 4px;
  border-radius: 8px;
  border: 1px solid rgba(68, 83, 130, 0.25);
  font-size: 12px;
  width: 50px;
  cursor: pointer;
`,o7=A.ZP.div`
  position: absolute;
  bottom: 60px;
  width: 198px;
`,ie=(0,A.ZP)(()=>(0,j.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsxs)("g",{id:"g1",children:[(0,j.jsx)("path",{id:"path1",fill:"#000000",stroke:"none",d:"M 18.09091 6.883101 L 5.409091 6.883101 L 5.409091 16.746737 L 10.664648 16.746737 C 10.927091 17.116341 11.30353 17.422749 11.792977 17.611004 L 12.664289 17.946156 L 12.744959 18.155828 L 5.409091 18.155828 C 4.630871 18.155828 4 17.524979 4 16.746737 L 4 6.883101 C 4 6.104881 4.630871 5.47401 5.409091 5.47401 L 18.09091 5.47401 C 18.86915 5.47401 19.5 6.104881 19.5 6.883101 L 19.5 12.52348 C 19.247208 11.883823 18.730145 11.365912 18.09091 11.111994 L 18.09091 6.883101 Z M 18.09091 18.155828 L 17.881165 18.155828 L 19.469212 14.368896 C 19.479921 14.343321 19.490206 14.317817 19.5 14.292241 L 19.5 16.746737 C 19.5 17.524979 18.86915 18.155828 18.09091 18.155828 Z"}),(0,j.jsx)("path",{id:"path2",fill:"#000000",fillRule:"evenodd",stroke:"none",d:"M 18.494614 13.960189 C 18.982441 12.796985 17.813459 11.628003 16.650255 12.11576 L 12.133272 14.01 C 10.962248 14.501069 10.987188 16.168798 12.172375 16.62464 L 13.482055 17.128389 L 13.985805 18.438068 C 14.441646 19.623184 16.109375 19.648125 16.600443 18.477171 L 18.494614 13.960189 Z M 17.19515 13.415224 L 15.30098 17.932205 L 14.79723 16.622526 C 14.654066 16.250385 14.359989 15.956307 13.987918 15.813213 L 12.678168 15.309464 L 17.19515 13.415224 Z"})]})}))`
  color: ${e=>e.visible?void 0:"#060709cc"};
`,it=()=>{let e=(0,C.erw)({maxZoom:2,minZoom:.25}),t=(0,C.Dcz)(),[n,o]=(0,E.useState)(!1);return(0,j.jsx)(eG.Lt,{position:"top",trigger:"custom",visible:n,onClickOutSide:()=>o(!1),render:(0,j.jsxs)(eG.Lt.Menu,{children:[(0,j.jsx)(eG.Lt.Item,{onClick:()=>e.zoomin(),children:"Zoom in"}),(0,j.jsx)(eG.Lt.Item,{onClick:()=>e.zoomout(),children:"Zoom out"}),(0,j.jsx)(eG.iz,{layout:"horizontal"}),(0,j.jsx)(eG.Lt.Item,{onClick:()=>t.config.updateZoom(.5),children:"Zoom to 50%"}),(0,j.jsx)(eG.Lt.Item,{onClick:()=>t.config.updateZoom(1),children:"Zoom to 100%"}),(0,j.jsx)(eG.Lt.Item,{onClick:()=>t.config.updateZoom(1.5),children:"Zoom to 150%"}),(0,j.jsx)(eG.Lt.Item,{onClick:()=>t.config.updateZoom(2),children:"Zoom to 200%"})]}),children:(0,j.jsxs)(o8,{onClick:()=>o(!0),children:[Math.floor(100*e.zoom),"%"]})})},io=(0,j.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("path",{id:"switch-line",fill:"currentColor",stroke:"none",d:"M 12.728118 10.060962 C 13.064282 8.716098 14.272528 7.772551 15.65877 7.772343 L 17.689898 7.772343 C 18.0798 7.772343 18.39588 7.456264 18.39588 7.066362 C 18.39588 6.676458 18.0798 6.36038 17.689898 6.36038 L 15.659616 6.36038 C 13.62515 6.360315 11.851767 7.745007 11.358504 9.718771 C 11.02234 11.063635 9.814095 12.007183 8.427853 12.007389 L 7.101437 12.007389 C 6.711768 12.007389 6.395878 12.323277 6.395878 12.712947 C 6.395878 13.102616 6.711768 13.418506 7.101437 13.418506 L 8.426159 13.418506 C 9.812716 13.418323 11.021417 14.361954 11.357657 15.707124 C 11.850921 17.680887 13.624304 19.065578 15.65877 19.065516 L 17.689049 19.065516 C 18.078953 19.065516 18.395033 18.749435 18.395033 18.359533 C 18.395033 17.969631 18.078953 17.653551 17.689049 17.653551 L 15.65877 17.653551 C 14.272528 17.653345 13.064282 16.709797 12.728118 15.364932 C 12.454905 14.27114 11.774856 13.322707 10.826583 12.712947 C 11.774536 12.10303 12.454268 11.154617 12.727271 10.060962 Z"})}),ii=()=>{let e=(0,C.G2Z)(C.dmf),t=(0,E.useCallback)(()=>{e.switchLineType()},[e]);return(0,j.jsx)(eG.u,{content:"Switch Line",children:(0,j.jsx)(eG.hU,{type:"tertiary",theme:"borderless",onClick:t,icon:io})})};var ir=n(766868),is=n(231043);let ia=()=>{let e=(0,C.Dcz)(),t=(0,E.useCallback)(()=>{e.config.readonly=!e.config.readonly},[e]);return e.config.readonly?(0,j.jsx)(eG.u,{content:"Editable",children:(0,j.jsx)(eG.hU,{theme:"borderless",type:"tertiary",icon:(0,j.jsx)(ir.Z,{size:"default"}),onClick:t})}):(0,j.jsx)(eG.u,{content:"Readonly",children:(0,j.jsx)(eG.hU,{theme:"borderless",type:"tertiary",icon:(0,j.jsx)(is.Z,{size:"default"}),onClick:t})})},il=e=>{let{minimapVisible:t,setMinimapVisible:n}=e;return(0,j.jsx)(eG.u,{content:"Minimap",children:(0,j.jsx)(eG.hU,{type:"tertiary",theme:"borderless",icon:(0,j.jsx)(ie,{visible:t}),onClick:()=>n(!t)})})},id=e=>{let{visible:t}=e,n=(0,C.G2Z)(L.I5);return t?(0,j.jsx)(o7,{children:(0,j.jsx)(L.Zd,{service:n,panelStyles:{},containerStyles:{pointerEvents:"auto",position:"relative",top:"unset",right:"unset",bottom:"unset",left:"unset"},inactiveStyle:{opacity:1,scale:1,translateX:0,translateY:0}})}):(0,j.jsx)(j.Fragment,{})};function ic(e){let{width:t,height:n}=e;return(0,j.jsxs)("svg",{width:t||48,height:n||38,viewBox:"0 0 48 38",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,j.jsx)("rect",{x:"1.83317",y:"1.49998",width:"44.3333",height:"35",rx:"3.5",stroke:"currentColor",strokeOpacity:"0.8",strokeWidth:"2.33333"}),(0,j.jsx)("path",{d:"M14.6665 30.6667H33.3332",stroke:"currentColor",strokeOpacity:"0.8",strokeWidth:"2.33333",strokeLinecap:"round"})]})}let iu=()=>(0,j.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.8549 5H3.1451C3.06496 5 3 5.06496 3 5.1451V18.8549C3 18.935 3.06496 19 3.1451 19H20.8549C20.935 19 21 18.935 21 18.8549V5.1451C21 5.06496 20.935 5 20.8549 5ZM3.1451 3C1.96039 3 1 3.96039 1 5.1451V18.8549C1 20.0396 1.96039 21 3.1451 21H20.8549C22.0396 21 23 20.0396 23 18.8549V5.1451C23 3.96039 22.0396 3 20.8549 3H3.1451Z"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.99991 16C6.99991 15.4477 7.44762 15 7.99991 15H15.9999C16.5522 15 16.9999 15.4477 16.9999 16C16.9999 16.5523 16.5522 17 15.9999 17H7.99991C7.44762 17 6.99991 16.5523 6.99991 16Z"})]});function ip(e){let{width:t,height:n}=e;return(0,j.jsx)("svg",{width:t||34,height:n||52,viewBox:"0 0 34 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.9998 16.6666V35.3333C30.9998 37.5748 30.9948 38.4695 30.9 39.1895C30.2108 44.4247 26.0912 48.5443 20.856 49.2335C20.1361 49.3283 19.2413 49.3333 16.9998 49.3333C14.7584 49.3333 13.8636 49.3283 13.1437 49.2335C7.90847 48.5443 3.78888 44.4247 3.09965 39.1895C3.00487 38.4695 2.99984 37.5748 2.99984 35.3333V16.6666C2.99984 14.4252 3.00487 13.5304 3.09965 12.8105C3.78888 7.57528 7.90847 3.45569 13.1437 2.76646C13.7232 2.69017 14.4159 2.67202 15.8332 2.66785V9.86573C14.4738 10.3462 13.4998 11.6426 13.4998 13.1666V17.8332C13.4998 19.3571 14.4738 20.6536 15.8332 21.1341V23.6666C15.8332 24.3109 16.3555 24.8333 16.9998 24.8333C17.6442 24.8333 18.1665 24.3109 18.1665 23.6666V21.1341C19.5259 20.6536 20.4998 19.3572 20.4998 17.8332V13.1666C20.4998 11.6426 19.5259 10.3462 18.1665 9.86571V2.66785C19.5837 2.67202 20.2765 2.69017 20.856 2.76646C26.0912 3.45569 30.2108 7.57528 30.9 12.8105C30.9948 13.5304 30.9998 14.4252 30.9998 16.6666ZM0.666504 16.6666C0.666504 14.4993 0.666504 13.4157 0.786276 12.5059C1.61335 6.22368 6.55687 1.28016 12.8391 0.453085C13.7489 0.333313 14.8325 0.333313 16.9998 0.333313C19.1671 0.333313 20.2508 0.333313 21.1605 0.453085C27.4428 1.28016 32.3863 6.22368 33.2134 12.5059C33.3332 13.4157 33.3332 14.4994 33.3332 16.6666V35.3333C33.3332 37.5006 33.3332 38.5843 33.2134 39.494C32.3863 45.7763 27.4428 50.7198 21.1605 51.5469C20.2508 51.6666 19.1671 51.6666 16.9998 51.6666C14.8325 51.6666 13.7489 51.6666 12.8391 51.5469C6.55687 50.7198 1.61335 45.7763 0.786276 39.494C0.666504 38.5843 0.666504 37.5006 0.666504 35.3333V16.6666ZM15.8332 13.1666C15.8332 13.0011 15.8676 12.8437 15.9297 12.7011C15.9886 12.566 16.0722 12.4443 16.1749 12.3416C16.386 12.1305 16.6777 11.9999 16.9998 11.9999C17.6435 11.9999 18.1654 12.5212 18.1665 13.1646L18.1665 13.1666V17.8332L18.1665 17.8353C18.1665 17.8364 18.1665 17.8376 18.1665 17.8387C18.1661 17.9132 18.1588 17.986 18.1452 18.0565C18.0853 18.3656 17.9033 18.6312 17.6515 18.8011C17.4655 18.9266 17.2412 18.9999 16.9998 18.9999C16.3555 18.9999 15.8332 18.4776 15.8332 17.8332V13.1666Z",fill:"currentColor",fillOpacity:"0.8"})})}let ih=()=>(0,j.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 8C4.5 4.13401 7.63401 1 11.5 1H12.5C16.366 1 19.5 4.13401 19.5 8V17C19.5 20.3137 16.8137 23 13.5 23H10.5C7.18629 23 4.5 20.3137 4.5 17V8ZM11.2517 3.00606C8.60561 3.13547 6.5 5.32184 6.5 8V17C6.5 19.2091 8.29086 21 10.5 21H13.5C15.7091 21 17.5 19.2091 17.5 17V8C17.5 5.32297 15.3962 3.13732 12.7517 3.00622V5.28013C13.2606 5.54331 13.6074 6.06549 13.6074 6.66669V8.75759C13.6074 9.35879 13.2606 9.88097 12.7517 10.1441V11.4091C12.7517 11.8233 12.4159 12.1591 12.0017 12.1591C11.5875 12.1591 11.2517 11.8233 11.2517 11.4091V10.1457C10.7411 9.88298 10.3931 9.35994 10.3931 8.75759V6.66669C10.3931 6.06433 10.7411 5.5413 11.2517 5.27862V3.00606ZM12.0017 6.14397C11.7059 6.14397 11.466 6.38381 11.466 6.67968V8.74462C11.466 9.03907 11.7036 9.27804 11.9975 9.28031L12.0002 9.28032C12.0456 9.28032 12.0896 9.27482 12.1316 9.26447C12.3401 9.21256 12.5002 9.0386 12.5318 8.82287C12.5345 8.80149 12.5359 8.7797 12.5359 8.75759V6.66669C12.5359 6.64463 12.5345 6.62288 12.5318 6.60154C12.4999 6.38354 12.3368 6.20817 12.1252 6.15826C12.0856 6.14891 12.0442 6.14397 12.0017 6.14397Z"})});n(909699);let{Title:ig,Paragraph:im}=eG.Sx,ix=e=>{let{title:t,subTitle:n,icon:o,onChange:i,value:r,selected:s}=e;return(0,j.jsxs)("div",{className:`mouse-pad-option ${s?"mouse-pad-option-selected":""}`,onClick:()=>i(r),children:[(0,j.jsx)("div",{className:`mouse-pad-option-icon ${s?"mouse-pad-option-icon-selected":""}`,children:o}),(0,j.jsx)(ig,{heading:6,className:`mouse-pad-option-title ${s?"mouse-pad-option-title-selected":""}`,children:t}),(0,j.jsx)(im,{type:"tertiary",className:`mouse-pad-option-subTitle ${s?"mouse-pad-option-subTitle-selected":""}`,children:n})]})},iy=e=>{let{value:t,onChange:n,onPopupVisibleChange:o,containerStyle:i,iconStyle:r,arrowStyle:s}=e,[a,l]=(0,E.useState)(!1);return(0,j.jsx)(eG.J2,{trigger:"custom",position:"topLeft",closeOnEsc:!0,visible:a,onVisibleChange:e=>{null==o||o(e)},onClickOutSide:()=>{l(!1)},spacing:20,content:(0,j.jsxs)("div",{className:"ui-mouse-pad-selector-popover",children:[(0,j.jsx)(eG.Sx.Title,{heading:4,children:"Interaction mode"}),(0,j.jsxs)("div",{className:"ui-mouse-pad-selector-popover-options",children:[(0,j.jsx)(ix,{title:"Mouse-Friendly",subTitle:"Drag the canvas with the left mouse button, zoom with the scroll wheel.",value:"MOUSE",selected:"MOUSE"===t,icon:(0,j.jsx)(ip,{}),onChange:n}),(0,j.jsx)(ix,{title:"Touchpad-Friendly",subTitle:"Drag with two fingers moving in the same direction, zoom by pinching or spreading two fingers.",value:"PAD",selected:"PAD"===t,icon:(0,j.jsx)(ic,{}),onChange:n})]})]}),children:(0,j.jsx)("div",{className:`ui-mouse-pad-selector ${a?"ui-mouse-pad-selector-active":""}`,onClick:()=>{l(!a)},style:i,children:(0,j.jsx)("div",{className:"ui-mouse-pad-selector-icon",style:r,children:"MOUSE"===t?(0,j.jsx)(ih,{}):(0,j.jsx)(iu,{})})})})},iv="workflow_prefer_interactive_type",ij=/(Macintosh|MacIntel|MacPPC|Mac68K|iPad)/.test(navigator.userAgent),iC=()=>{let e=localStorage.getItem(iv);return e&&["MOUSE","PAD"].includes(e)?e:ij?"PAD":"MOUSE"},iN=()=>{let e=(0,C.erw)(),[t,n]=(0,E.useState)(!1),[o,i]=(0,E.useState)(()=>iC()),[r,s]=(0,E.useState)(!1);return(0,E.useEffect)(()=>{e.setMouseScrollDelta(e=>e/20);let t=iC();e.setInteractiveType(t)},[]),(0,j.jsx)(eG.J2,{trigger:"custom",position:"top",visible:t,onClickOutSide:()=>{n(!1)},children:(0,j.jsx)(eG.u,{content:"MOUSE"===o?"Mouse-Friendly":"Touchpad-Friendly",style:{display:r?"none":"block"},children:(0,j.jsx)("div",{className:"workflow-toolbar-interactive",children:(0,j.jsx)(iy,{value:o,onChange:t=>{i(t),localStorage.setItem(iv,t),e.setInteractiveType(t)},onPopupVisibleChange:s,containerStyle:{border:"none",height:"32px",width:"32px",justifyContent:"center",alignItems:"center",gap:"2px",padding:"4px",borderRadius:"var(--small, 6px)"},iconStyle:{margin:"0",width:"16px",height:"16px"},arrowStyle:{width:"12px",height:"12px"}})})})})},ib=()=>{let e=(0,C.erw)();return(0,j.jsx)(eG.u,{content:"FitView",children:(0,j.jsx)(eG.hU,{icon:(0,j.jsx)(tk.Z,{}),type:"tertiary",theme:"borderless",onClick:()=>e.fitView()})})},iw=e=>{let{style:t}=e;return(0,j.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",style:t,children:[(0,j.jsx)("path",{d:"M6.5 9C5.94772 9 5.5 9.44772 5.5 10V11C5.5 11.5523 5.94772 12 6.5 12H7.5C8.05228 12 8.5 11.5523 8.5 11V10C8.5 9.44772 8.05228 9 7.5 9H6.5zM11.5 9C10.9477 9 10.5 9.44772 10.5 10V11C10.5 11.5523 10.9477 12 11.5 12H12.5C13.0523 12 13.5 11.5523 13.5 11V10C13.5 9.44772 13.0523 9 12.5 9H11.5zM15.5 10C15.5 9.44772 15.9477 9 16.5 9H17.5C18.0523 9 18.5 9.44772 18.5 10V11C18.5 11.5523 18.0523 12 17.5 12H16.5C15.9477 12 15.5 11.5523 15.5 11V10z"}),(0,j.jsx)("path",{d:"M23 4C23 2.9 22.1 2 21 2H3C1.9 2 1 2.9 1 4V17.0111C1 18.0211 1.9 19.0111 3 19.0111H7.7586L10.4774 22C10.9822 22.5017 11.3166 22.6311 12 22.7009C12.414 22.707 13.0502 22.5093 13.5 22L16.2414 19.0111H21C22.1 19.0111 23 18.1111 23 17.0111V4ZM3 4H21V17.0111H15.5L12 20.6714L8.5 17.0111H3V4Z"})]})},iM=()=>{let e=(0,C.Dcz)(),t=(0,C.G2Z)(C.L4w),n=(0,C.G2Z)(C.oJU),o=(0,C.G2Z)(C.iwM),[i,r]=(0,E.useState)(!1),s=(0,E.useCallback)(t=>{let n=e.config.getPosFromMouseEvent(t);return{x:n.x,y:n.y-75}},[e]),a=(0,E.useCallback)(async e=>{r(!1);let i=s(e),a=t.createWorkflowNodeByType(b.Comment,i);await (0,C.gw0)(16),n.selectNode(a),0!==e.detail&&o.startDragSelectedNodes(e)},[n,s,t,o]);return(0,j.jsx)(eG.u,{trigger:"custom",visible:i,onVisibleChange:r,content:"Comment",children:(0,j.jsx)(eG.hU,{disabled:e.config.readonly,icon:(0,j.jsx)(iw,{style:{width:16,height:16}}),type:"tertiary",theme:"borderless",onClick:a,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)})})},iA=(0,j.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,j.jsx)("path",{fill:"currentColor",d:"M3 2C2.44772 2 2 2.44771 2 3V12C2 12.5523 2.44772 13 3 13H10C10.5523 13 11 12.5523 11 12V3C11 2.44772 10.5523 2 10 2H3zM4 11V4H9V11H4zM21 22C21.5523 22 22 21.5523 22 21V12C22 11.4477 21.5523 11 21 11H14C13.4477 11 13 11.4477 13 12V21C13 21.5523 13.4477 22 14 22H21zM20 13V20H15V13H20zM2 16C2 15.4477 2.44772 15 3 15H10C10.5523 15 11 15.4477 11 16V21C11 21.5523 10.5523 22 10 22H3C2.44772 22 2 21.5523 2 21V16zM4 20V17H9V20H4zM21 9C21.5523 9 22 8.55228 22 8V3C22 2.44772 21.5523 2 21 2H14C13.4477 2 13 2.44772 13 3V8C13 8.55228 13.4477 9 14 9H21zM20 4V7H15V4H20z"})}),iS=()=>{let e=(0,C.erw)(),t=(0,C.Dcz)(),n=(0,E.useCallback)(async()=>{await e.autoLayout()},[e]);return(0,j.jsx)(eG.u,{content:"Auto Layout",children:(0,j.jsx)(eG.hU,{disabled:t.config.readonly,type:"tertiary",theme:"borderless",onClick:n,icon:iA})})},ik=()=>{let{history:e,playground:t}=(0,C.sX$)(),[n,o]=(0,E.useState)(!1),[i,r]=(0,E.useState)(!1),[s,a]=(0,E.useState)(!0);(0,E.useEffect)(()=>{let t=e.undoRedoService.onChange(()=>{o(e.canUndo()),r(e.canRedo())});return()=>t.dispose()},[e]);let l=(0,C.JAk)();return(0,E.useEffect)(()=>{let e=t.config.onReadonlyOrDisabledChange(()=>l());return()=>e.dispose()},[t]),(0,j.jsx)(o9,{className:"demo-free-layout-tools",children:(0,j.jsxs)(o6,{children:[(0,j.jsx)(iN,{}),(0,j.jsx)(iS,{}),(0,j.jsx)(ii,{}),(0,j.jsx)(it,{}),(0,j.jsx)(ib,{}),(0,j.jsx)(il,{minimapVisible:s,setMinimapVisible:a}),(0,j.jsx)(id,{visible:s}),(0,j.jsx)(ia,{}),(0,j.jsx)(iM,{}),(0,j.jsx)(eG.u,{content:"Undo",children:(0,j.jsx)(eG.hU,{type:"tertiary",theme:"borderless",icon:(0,j.jsx)(oJ.Z,{}),disabled:!n||t.config.readonly,onClick:()=>e.undo()})}),(0,j.jsx)(eG.u,{content:"Redo",children:(0,j.jsx)(eG.hU,{type:"tertiary",theme:"borderless",icon:(0,j.jsx)(oY.Z,{}),disabled:!i||t.config.readonly,onClick:()=>e.redo()})}),(0,j.jsx)(eG.iz,{layout:"vertical",style:{height:"16px"},margin:3}),(0,j.jsx)(o5,{disabled:t.config.readonly}),(0,j.jsx)(eG.iz,{layout:"vertical",style:{height:"16px"},margin:3}),(0,j.jsx)(o4,{disabled:t.config.readonly})]})})};function iD(e){let{children:t}=e,[n,o]=(0,E.useState)();return(0,j.jsx)(nl.Provider,{value:{visible:!!n,nodeId:n,setNodeId:o},children:t})}function iE(e){var t;let{node:n}=e,o=(0,C.PVB)(n);return(0,j.jsx)(na.Provider,{value:o,children:(0,j.jsx)("div",{style:{background:"rgb(251, 251, 251)",height:"calc(100vh - 40px)",margin:"8px 8px 8px 0",borderRadius:8,border:"1px solid rgba(82,100,154, 0.13)"},children:null==(t=o.form)?void 0:t.render()})})}let iI=()=>{let{nodeId:e,setNodeId:t}=(0,E.useContext)(nl),{selection:n,playground:o,document:i}=(0,C.sX$)(),r=(0,C.JAk)(),s=(0,E.useCallback)(()=>{(0,E.startTransition)(()=>{t(void 0)})},[]),a=e?i.getNode(e):void 0;(0,E.useEffect)(()=>{let e=o.config.onReadonlyOrDisabledChange(()=>{s(),r()});return()=>e.dispose()},[o]),(0,E.useEffect)(()=>{let e=n.onSelectionChanged(()=>{0===n.selection.length?s():1===n.selection.length&&n.selection[0]!==a&&s()});return()=>e.dispose()},[n,s,a]),(0,E.useEffect)(()=>{if(a){let e=a.onDispose(()=>{t(void 0)});return()=>e.dispose()}return()=>{}},[a]);let l=(0,E.useMemo)(()=>{if(!a)return!1;let{sidebarDisabled:e=!1}=a.getNodeMeta();return!e},[a]);if(o.config.readonly)return null;let d=a&&l?(0,j.jsx)(C.rQR.Provider,{value:a,children:(0,j.jsx)(iE,{node:a})},a.id):null;return(0,j.jsx)(eG.Uu,{mask:!1,visible:l,onCancel:s,closable:!1,motion:!1,width:500,headerStyle:{display:"none"},bodyStyle:{padding:0},style:{background:"none",boxShadow:"none"},children:(0,j.jsx)(nd.Provider,{value:!0,children:d})})},iL=()=>{let e=(0,E.useMemo)(()=>({background:!0,playground:{preventGlobalGesture:!0},readonly:!1,initialData:oH,nodeRegistries:oU,getNodeDefaultRegistry:e=>({type:e,meta:{defaultExpanded:!0},formMeta:tA}),fromNodeJSON:(e,t)=>t,toNodeJSON:(e,t)=>t,lineColor:{hidden:"var(--g-workflow-line-color-hidden,transparent)",default:"var(--g-workflow-line-color-default,#4d53e8)",drawing:"var(--g-workflow-line-color-drawing, #5DD6E3)",hovered:"var(--g-workflow-line-color-hover,#37d0ff)",selected:"var(--g-workflow-line-color-selected,#37d0ff)",error:"var(--g-workflow-line-color-error,red)",flowing:"var(--g-workflow-line-color-flowing,#4d53e8)"},canAddLine(e,t,n){var o,i,r,s;return t.node!==n.node&&((null==(o=t.node.parent)?void 0:o.id)===(null==(i=n.node.parent)?void 0:i.id)||!![null==(r=t.node.parent)?void 0:r.flowNodeType,null==(s=n.node.parent)?void 0:s.flowNodeType].includes(C.SyX.GROUP))&&!t.node.getData(C.Z14).allInputNodes.includes(n.node)},canDeleteLine:(e,t,n,o)=>!0,canDeleteNode:(e,t)=>!0,canDropToNode:(e,t)=>{let{dragNodeType:n,dropNodeType:o}=t;return!([b.Start,b.End,b.BlockStart,b.BlockEnd].includes(n)||[b.Continue,b.Break].includes(n)&&o!==b.Loop)&&(n!==b.Loop||o!==b.Loop)},onDragLineEnd:eF,selectBox:{SelectorBoxPopover:tK},scroll:{enableScrollLimit:!1},materials:{components:{},renderDefaultNode:ng,renderNodes:{[b.Comment]:nZ}},nodeEngine:{enable:!0},variableEngine:{enable:!0},history:{enable:!0,enableChangeNode:!0},onContentChange:(0,I.Z)((e,t)=>{e.document.disposed||console.log("Auto Save: ",t,e.document.toJSON())},1e3),isFlowingLine:(e,t)=>e.get(tg).isFlowingLine(t),shortcuts:e1,onBind:e=>{let{bind:t}=e;t(e3).toSelf().inSingletonScope()},onInit(e){console.log("--- Playground init ---")},onAllLayersRendered(e){e.tools.fitView(!1),console.log("--- Playground rendered ---")},onDispose(){console.log("---- Playground Dispose ----")},i18n:{locale:navigator.language,languages:{"zh-CN":{"Never Remind":"不再提示","Hold {{key}} to drag node out":"按住 {{key}} 可以将节点拖出"},"en-US":{}}},plugins:()=>[(0,et.J2)({renderInsideLine:nx}),(0,L.qP)({disableLayer:!0,canvasStyle:{canvasWidth:182,canvasHeight:102,canvasPadding:50,canvasBackground:"rgba(242, 243, 245, 1)",canvasBorderRadius:10,viewportBackground:"rgba(255, 255, 255, 1)",viewportBorderRadius:4,viewportBorderColor:"rgba(6, 7, 9, 0.10)",viewportBorderWidth:1,viewportBorderDashLength:void 0,nodeColor:"rgba(0, 0, 0, 0.10)",nodeBorderRadius:2,nodeBorderWidth:.145,nodeBorderColor:"rgba(6, 7, 9, 0.10)",overlayColor:"rgba(255, 255, 255, 0.55)"},inactiveDebounceTime:1}),(0,T.Z)({edgeColor:"#00B2B2",alignColor:"#00B2B2",edgeLineWidth:1,alignLineWidth:1,alignCrossWidth:8}),ee({renderer:nb}),ex({}),eV({groupNodeRender:tW}),tx({}),ty({mode:"browser"}),tM({})]}),[]);return(0,j.jsx)("div",{className:"doc-free-feature-overview",children:(0,j.jsx)(C.EhS,{...e,children:(0,j.jsxs)(iD,{children:[(0,j.jsx)("div",{className:"demo-container",children:(0,j.jsx)(C.R6T,{className:"demo-editor"})}),(0,j.jsx)(ik,{}),(0,j.jsx)(iI,{})]})})})}}}]);