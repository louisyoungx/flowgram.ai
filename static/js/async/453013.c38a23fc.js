"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["453013"],{47522:function(e,s,r){r.r(s),r.d(s,{default:()=>t});var n=r(110239),i=r(437562),a=r(944529),l=r(367383);function o(e){let s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"syncvariabletitle",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#syncvariabletitle",children:"#"}),"syncVariableTitle"]}),"\n",(0,n.jsx)(s.p,{children:"syncVariableTitle 是一个表单副作用（Effect），用于同步节点的标题到该节点输出变量的元数据中。"}),"\n",(0,n.jsx)(s.p,{children:"当节点标题发生变化时，会自动更新所有输出变量的 title 和 icon 元数据。"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"引入前"}),(0,n.jsx)(s.th,{children:"引入后"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)("img",{loading:"lazy",src:"/materials/sync-variable-title-without-effect.gif",alt:"syncVariableTitle 没引入",style:{width:500}})," ",(0,n.jsx)(s.em,{children:"变量中的节点标题变化时，无法自动同步到变量中"})]}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)("img",{loading:"lazy",src:"/materials/sync-variable-title-with-effect.gif",alt:"syncVariableTitle 引入",style:{width:500}})," ",(0,n.jsx)(s.em,{children:"变量中的节点标题会自动同步"})]})]})})]}),"\n",(0,n.jsxs)(s.h2,{id:"案例演示",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#案例演示",children:"#"}),"案例演示"]}),"\n",(0,n.jsxs)(s.h3,{id:"基本使用",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#基本使用",children:"#"}),"基本使用"]}),"\n",(0,n.jsx)(l.w,{}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,n.jsxs)(s.code,{className:"language-tsx",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { syncVariableTitle } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"p"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">Please Edit Title below to sync to variables:</"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"p"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"string"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" undefined"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"title"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        {({ field }) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Input"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".value} "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{(value) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(value)} />"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        )}"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  effect"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // Sync the title to variables"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    title"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" syncVariableTitle"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    outputs"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" provideJsonSchemaOutputs"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsxs)(s.h2,{id:"api-参考",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#api-参考",children:"#"}),"API 参考"]}),"\n",(0,n.jsxs)(s.h3,{id:"syncvariabletitle-1",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#syncvariabletitle-1",children:"#"}),"syncVariableTitle"]}),"\n",(0,n.jsx)(s.p,{children:"提供一个表单副作用，用于同步节点的标题到该节点输出变量的元数据中。"}),"\n",(0,n.jsxs)(s.h4,{id:"参数",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#参数",children:"#"}),"参数"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"无直接参数，作为表单副作用直接使用在 formMeta.effect 中"}),"\n"]}),"\n",(0,n.jsxs)(s.h4,{id:"返回值",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#返回值",children:"#"}),"返回值"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"EffectOptions[]"}),": 表单副作用选项数组，用于 formMeta.effect 配置"]}),"\n"]}),"\n",(0,n.jsxs)(s.h4,{id:"工作原理",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#工作原理",children:"#"}),"工作原理"]}),"\n",(0,n.jsx)(s.p,{children:"该表单副作用会："}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["监听节点标题字段的 ",(0,n.jsx)(s.code,{children:"onValueChange"})," 事件"]}),"\n",(0,n.jsx)(s.li,{children:"当标题发生变化时，获取节点的所有输出变量"}),"\n",(0,n.jsx)(s.li,{children:"更新每个输出变量的元数据，包括标题和图标"}),"\n",(0,n.jsx)(s.li,{children:"如果标题为空，则使用节点 ID 作为标题"}),"\n"]}),"\n",(0,n.jsxs)(s.h2,{id:"源码导读",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#源码导读",children:"#"}),"源码导读"]}),"\n",(0,n.jsx)(a.ZB,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/materials/form-materials/src/effects/sync-variable-title"}),"\n",(0,n.jsx)(s.p,{children:"使用 CLI 命令可以复制源代码到本地："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsx)(s.code,{className:"language-bash",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" effects/sync-variable-title"})]})})})}),"\n",(0,n.jsxs)(s.h3,{id:"目录结构讲解",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#目录结构讲解",children:"#"}),"目录结构讲解"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-txt",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"sync-variable-title/"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"└── index.ts           # 主实现文件，导出 syncVariableTitle 表单副作用"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"同步逻辑",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#同步逻辑",children:"#"}),"同步逻辑"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"syncVariableTitle"})," 通过注册 ",(0,n.jsx)(s.code,{children:"DataEvent.onValueChange"})," 事件监听器，实现节点标题到变量元数据的实时同步。"]}),"\n",(0,n.jsxs)(s.h3,{id:"依赖梳理",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#依赖梳理",children:"#"}),"依赖梳理"]}),"\n",(0,n.jsxs)(s.h4,{id:"flowgram-api",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgram-api",children:"#"}),"flowgram API"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/client/editor",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.strong,{children:"@flowgram.ai/editor"})})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/editor/enums/DataEvent",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.code,{children:"DataEvent"})}),": 数据事件枚举，用于监听值变化事件"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/editor/types/Effect",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.code,{children:"Effect"})}),": 副作用函数类型定义"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/editor/interfaces/EffectOptions",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.code,{children:"EffectOptions"})}),": 副作用配置选项接口"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/document/interfaces/FlowNodeRegistry-1",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.code,{children:"FlowNodeRegistry"})}),": 节点注册类型定义"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/editor/classes/FlowNodeVariableData",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.code,{children:"FlowNodeVariableData"})}),": 节点变量数据类，提供节点变量管理功能"]}),"\n"]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["zh%2Fmaterials%2Feffects%2Fsync-variable-title.mdx"]={toc:[{id:"案例演示",text:"案例演示",depth:2},{id:"基本使用",text:"基本使用",depth:3},{id:"api-参考",text:"API 参考",depth:2},{id:"syncvariabletitle",text:"syncVariableTitle",depth:3},{id:"参数",text:"参数",depth:4},{id:"返回值",text:"返回值",depth:4},{id:"工作原理",text:"工作原理",depth:4},{id:"源码导读",text:"源码导读",depth:2},{id:"目录结构讲解",text:"目录结构讲解",depth:3},{id:"同步逻辑",text:"同步逻辑",depth:3},{id:"依赖梳理",text:"依赖梳理",depth:3},{id:"flowgram-api",text:"flowgram API",depth:4}],title:"syncVariableTitle",headingTitle:"syncVariableTitle",frontmatter:{}}},367383:function(e,s,r){r.d(s,{w:()=>d});var n=r(110239),i=r(908600),a=r(640898),l=r(236831),o=r(125812),t=r(132288);let c=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914")]).then(r.bind(r,653378)).then(e=>({default:e.Input}))),d=()=>(0,n.jsx)(t.y,{filterStartNode:!0,transformInitialNode:{end_0:e=>(e.data.inputsValues={success:{type:"constant",content:!0,schema:{type:"boolean"}},message:{type:"ref",content:["custom_0","name"]}},e),custom_0:e=>(e.data.outputs={type:"object",properties:{name:{type:"string"},age:{type:"number"}}},e)},formMeta:{render:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{}),(0,n.jsx)("p",{children:"Please Edit Title below to sync to variables:"}),(0,n.jsx)(a.gNt,{name:"title",children:e=>{let{field:s}=e;return(0,n.jsx)(c,{value:s.value,onChange:e=>s.onChange(e)})}})]}),effect:{title:l.H,outputs:o.X}}})},132288:function(e,s,r){r.d(s,{p:()=>l,y:()=>o});var n=r(110239),i=r(908600);let a=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914"),r.e("227692"),r.e("933451"),r.e("917828"),r.e("428647"),r.e("135691"),r.e("46854"),r.e("690536")]).then(r.bind(r,654296)).then(e=>({default:e.FreeFormMetaStoryBuilder}))),l=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914"),r.e("227692"),r.e("933451"),r.e("917828"),r.e("428647"),r.e("135691"),r.e("46854"),r.e("690536")]).then(r.bind(r,654296)).then(e=>({default:e.FormHeader}))),o=e=>(0,n.jsx)("div",{style:{position:"relative",height:e.height||400},children:(0,n.jsx)(a,{...e})})},125812:function(e,s,r){r.d(s,{X:()=>a});var n=r(937643),i=r(950454);let a=(0,i.W2M)({parse:(e,s)=>{var r,a;return[i.qRT.createVariableDeclaration({key:`${s.node.id}`,meta:{title:(null==(r=s.node.form)?void 0:r.getValueIn("title"))||s.node.id,icon:null==(a=s.node.getNodeRegistry().info)?void 0:a.icon},type:n.Kz.schemaToAST(e)})]}})},236831:function(e,s,r){r.d(s,{H:()=>i});var n=r(950454);let i=[{event:n.zEJ.onValueChange,effect:e=>{let{value:s,context:r}=e;r.node.getData(n._J4).allScopes.forEach(e=>{e.output.variables.forEach(e=>{var n;e.updateMeta({...e.meta||{},title:s||r.node.id,icon:null==(n=r.node.getNodeRegistry().info)?void 0:n.icon})})})}}]}}]);