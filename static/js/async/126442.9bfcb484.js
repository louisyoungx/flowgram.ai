"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["126442"],{484287:function(e,s,n){n.r(s),n.d(s,{default:()=>h});var r=n(110239),l=n(437562),i=n(441332),a=n(321896),o=n(747800);function c(e){let s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"dynamicvalueinput",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#dynamicvalueinput",children:"#"}),"DynamicValueInput"]}),"\n",(0,r.jsx)(s.p,{children:"DynamicValueInput 是一个动态值输入组件，支持常量和变量两种输入模式。它可以根据提供的 schema 自动选择合适的输入类型，并提供变量选择功能。组件能够智能地在常量输入和变量选择之间切换。"}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)("div",{children:(0,r.jsx)("img",{loading:"lazy",src:"/materials/dynamic-value-input.png",alt:"DynamicValueInput 组件",style:{width:"50%"}})}),"\n",(0,r.jsxs)(s.h2,{id:"案例演示",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#案例演示",children:"#"}),"案例演示"]}),"\n",(0,r.jsxs)(s.h3,{id:"基本使用",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#基本使用",children:"#"}),"基本使用"]}),"\n",(0,r.jsx)(o.w,{}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,r.jsxs)(s.code,{className:"language-tsx",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { DynamicValueInput } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"any"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"dynamic_value_input"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        {({ field }) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"DynamicValueInput"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" value"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".value} "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"onChange"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{(value) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(value)} />"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        )}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,r.jsxs)(s.h3,{id:"带-schema-约束",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#带-schema-约束",children:"#"}),"带 Schema 约束"]}),"\n",(0,r.jsx)(o.C,{}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,r.jsxs)(s.code,{className:"language-tsx",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { DynamicValueInput } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"any"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"dynamic_value_input"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        {({ field }) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"DynamicValueInput"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"            value"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".value}"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"            onChange"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{(value) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(value)}"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"            schema"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{ type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'string'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" }}"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          />"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        )}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,r.jsxs)(s.h2,{id:"api-参考",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#api-参考",children:"#"}),"API 参考"]}),"\n",(0,r.jsxs)(s.h3,{id:"dynamicvalueinput-props",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#dynamicvalueinput-props",children:"#"}),"DynamicValueInput Props"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"属性名"}),(0,r.jsx)(s.th,{children:"类型"}),(0,r.jsx)(s.th,{children:"默认值"}),(0,r.jsx)(s.th,{children:"描述"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"value"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"IFlowConstantRefValue"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"输入值，支持常量或变量引用"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"onChange"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"(value?: IFlowConstantRefValue) => void"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"值变化时的回调函数"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"readonly"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"boolean"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"false"})}),(0,r.jsx)(s.td,{children:"是否为只读模式"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"hasError"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"boolean"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"false"})}),(0,r.jsx)(s.td,{children:"是否显示错误状态"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"style"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"React.CSSProperties"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"自定义样式"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"schema"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"IJsonSchema"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"约束输入类型的 JSON Schema"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"constantProps"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ConstantInputProps"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"传递给常量输入组件的额外属性"})]})]})]}),"\n",(0,r.jsxs)(s.h2,{id:"源码导读",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#源码导读",children:"#"}),"源码导读"]}),"\n",(0,r.jsx)(a.ZB,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/materials/form-materials/src/components/dynamic-value-input"}),"\n",(0,r.jsx)(s.p,{children:"使用 CLI 命令可以复制源代码到本地："}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsx)(s.code,{className:"language-bash",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" components/dynamic-value-input"})]})})})}),"\n",(0,r.jsxs)(s.h3,{id:"目录结构讲解",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#目录结构讲解",children:"#"}),"目录结构讲解"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-txt",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{children:"dynamic-value-input/"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{children:"├── index.tsx           # 主组件实现，包含 DynamicValueInput 核心逻辑"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{children:"├── hooks.ts            # 自定义 Hooks，处理变量引用和 schema 选择"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{children:"└── styles.css          # 样式文件"})})]})})}),"\n",(0,r.jsxs)(s.h3,{id:"核心实现说明",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#核心实现说明",children:"#"}),"核心实现说明"]}),"\n",(0,r.jsxs)(s.h4,{id:"变量引用处理",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#变量引用处理",children:"#"}),"变量引用处理"]}),"\n",(0,r.jsxs)(s.p,{children:["通过 ",(0,r.jsx)(s.code,{children:"useRefVariable"})," Hook 获取变量引用信息："]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsx)(s.code,{className:"language-typescript",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" refVariable"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" useRefVariable"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(value);"})]})})})}),"\n",(0,r.jsxs)(s.h4,{id:"schema-选择管理",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#schema-选择管理",children:"#"}),"Schema 选择管理"]}),"\n",(0,r.jsxs)(s.p,{children:["通过 ",(0,r.jsx)(s.code,{children:"useSelectSchema"})," Hook 管理类型选择："]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-typescript",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"selectSchema"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" setSelectSchema"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"] "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" useSelectSchema"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  schemaFromProps"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  constantProps"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  value"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})})]})})}),"\n",(0,r.jsxs)(s.h4,{id:"模式切换逻辑",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#模式切换逻辑",children:"#"}),"模式切换逻辑"]}),"\n",(0,r.jsxs)(s.p,{children:["组件通过判断 ",(0,r.jsx)(s.code,{children:"value.type"})," 来决定渲染常量输入还是变量选择器："]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-typescript",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"value"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"?.type "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"==="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'ref'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:") {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  // 渲染变量选择器"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"InjectVariableSelector"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"} "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"else"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  // 渲染常量输入"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"ConstantInput"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,r.jsxs)(s.h3,{id:"整体流程",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#整体流程",children:"#"}),"整体流程"]}),"\n",(0,r.jsx)(i.Z,{code:"graph TD\n    A[DynamicValueInput 组件] --\x3e B{判断输入模式}\n    B --\x3e|常量模式| C[渲染常量输入]\n    B --\x3e|变量模式| D[渲染变量选择器]\n\n    C --\x3e E[根据 schema 选择输入类型]\n    D --\x3e F[显示可用变量列表]\n\n    E --\x3e G[用户输入值]\n    F --\x3e H[用户选择变量]\n\n    G --\x3e I[生成常量值]\n    H --\x3e J[生成变量引用]\n\n    I --\x3e K[onChange 回调]\n    J --\x3e K\n",config:{}}),"\n",(0,r.jsxs)(s.h3,{id:"使用到的-flowgram-api",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#使用到的-flowgram-api",children:"#"}),"使用到的 flowgram API"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/variable/json-schema",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(s.strong,{children:"@flowgram.ai/json-schema"})})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/json-schema/modules/JsonSchemaUtils",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(s.code,{children:"JsonSchemaUtils"})}),": JSON Schema 工具类"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/json-schema/interfaces/IJsonSchema",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(s.code,{children:"IJsonSchema"})}),": JSON Schema 类型定义"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/json-schema/functions/useTypeManager",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(s.code,{children:"useTypeManager"})}),": 类型管理器 Hook"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/variable/variable-engine/core",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(s.strong,{children:"@flowgram.ai/variable-core"})})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://flowgram.ai/auto-docs/variable-core/functions/useScopeAvailable",rel:"noopener noreferrer",target:"_blank",children:(0,r.jsx)(s.code,{children:"useScopeAvailable"})}),": 获取当前作用域的可用变量"]}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"依赖的其他物料",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#依赖的其他物料",children:"#"}),"依赖的其他物料"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"/materials/components/type-selector.html",children:(0,r.jsx)(s.strong,{children:"TypeSelector"})})," 类型选择器"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"/materials/components/constant-input.html",children:(0,r.jsx)(s.strong,{children:"ConstantInput"})})," 常量输入组件"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"/materials/components/variable-selector.html",children:(0,r.jsx)(s.strong,{children:"VariableSelector"})})," 变量选择器"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"InjectVariableSelector"}),": 依赖注入变量选择器"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"/materials/common/flow-value.html",children:(0,r.jsx)(s.strong,{children:"FlowValue"})})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"IFlowConstantRefValue"}),": 常量或变量引用值类型"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"/materials/common/inject-material.html",children:(0,r.jsx)(s.strong,{children:"InjectMaterial"})})," 可注入物料组件"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"createInjectMaterial"}),": 创建可注入的物料组件"]}),"\n"]})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,l.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["zh%2Fmaterials%2Fcomponents%2Fdynamic-value-input.mdx"]={toc:[{id:"案例演示",text:"案例演示",depth:2},{id:"基本使用",text:"基本使用",depth:3},{id:"带-schema-约束",text:"带 Schema 约束",depth:3},{id:"api-参考",text:"API 参考",depth:2},{id:"dynamicvalueinput-props",text:"DynamicValueInput Props",depth:3},{id:"源码导读",text:"源码导读",depth:2},{id:"目录结构讲解",text:"目录结构讲解",depth:3},{id:"核心实现说明",text:"核心实现说明",depth:3},{id:"变量引用处理",text:"变量引用处理",depth:4},{id:"schema-选择管理",text:"Schema 选择管理",depth:4},{id:"模式切换逻辑",text:"模式切换逻辑",depth:4},{id:"整体流程",text:"整体流程",depth:3},{id:"使用到的-flowgram-api",text:"使用到的 flowgram API",depth:3},{id:"依赖的其他物料",text:"依赖的其他物料",depth:3}],title:"DynamicValueInput",headingTitle:"DynamicValueInput",frontmatter:{}}},747800:function(e,s,n){n.d(s,{C:()=>h,w:()=>c});var r=n(110239),l=n(908600),i=n(640898),a=n(132288);let o=l.lazy(()=>Promise.all([n.e("386212"),n.e("133914"),n.e("227692"),n.e("838147"),n.e("135674"),n.e("942362"),n.e("254129"),n.e("428647"),n.e("260790"),n.e("46854"),n.e("795751"),n.e("461889")]).then(n.bind(n,929024)).then(e=>({default:e.DynamicValueInput}))),c=()=>(0,r.jsx)(a.y,{filterEndNode:!0,formMeta:{render:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.p,{}),(0,r.jsx)(i.gNt,{name:"dynamic_value_input",children:e=>{let{field:s}=e;return(0,r.jsx)(o,{value:s.value,onChange:e=>s.onChange(e)})}})]})}}),h=()=>(0,r.jsx)(a.y,{filterEndNode:!0,formMeta:{render:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.p,{}),(0,r.jsx)(i.gNt,{name:"dynamic_value_input",children:e=>{let{field:s}=e;return(0,r.jsx)(o,{value:s.value,onChange:e=>s.onChange(e),schema:{type:"string"}})}})]})}})},132288:function(e,s,n){n.d(s,{p:()=>a,y:()=>o});var r=n(110239),l=n(908600);let i=l.lazy(()=>Promise.all([n.e("386212"),n.e("717802"),n.e("234079"),n.e("633566"),n.e("688975"),n.e("133914"),n.e("227692"),n.e("135674"),n.e("254129"),n.e("475509"),n.e("541460"),n.e("428647"),n.e("260790"),n.e("46854"),n.e("787220")]).then(n.bind(n,654296)).then(e=>({default:e.FreeFormMetaStoryBuilder}))),a=l.lazy(()=>Promise.all([n.e("386212"),n.e("717802"),n.e("234079"),n.e("633566"),n.e("688975"),n.e("133914"),n.e("227692"),n.e("135674"),n.e("254129"),n.e("475509"),n.e("541460"),n.e("428647"),n.e("260790"),n.e("46854"),n.e("787220")]).then(n.bind(n,654296)).then(e=>({default:e.FormHeader}))),o=e=>(0,r.jsx)("div",{style:{position:"relative",height:e.height||400},children:(0,r.jsx)(i,{...e})})}}]);