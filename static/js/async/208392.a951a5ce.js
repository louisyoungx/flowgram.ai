"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["208392"],{243365:function(e,t,r){r.r(t),r.d(t,{PromptEditorWithInputs:()=>g});var n=r(868861),l=r(753113),i=r(908600),a=r(245803),o=r(855868),c=r(329193),s=r(374488),u=r(111886),f=r(950454);function m(e){let{inputsValues:t,onSelect:r}=e,n=(0,f.rVg)(),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return f.GwP.isArray(e.items)?o(e.items,t+1):{type:e.items,depth:t}},c=(e,t)=>{let r,n=null==e?void 0:e.type;if(f.GwP.isObject(n)&&(r=(n.properties||[]).map(e=>c(e,[...t,e.key])).filter(Boolean)),f.GwP.isArray(n)){let e=o(n);f.GwP.isObject(e.type)&&(r=(e.type.properties||[]).map(r=>c(r,[...t,...Array(e.depth).fill("[0]"),r.key])).filter(Boolean))}let l=t.map((e,t)=>"[0]"===e||0===t?e:`.${e}`).join("");return{key:l,label:(0,s.Z)(t),value:l,children:r}},m=(e,t)=>{let r=t.join(".");if(l.Ug.isFlowValue(e)){if(l.Ug.isRef(e)){let r=n.getByKeyPath(e.content||[]);if(r)return c(r,t)}return{key:r,value:r,label:(0,s.Z)(t)}}if((0,u.Z)(e))return{key:r,value:r,label:(0,s.Z)(t),children:Object.entries(e).map(e=>{let[r,n]=e;return m(n,[...t,r])}).filter(Boolean)}},p=(0,i.useMemo)(()=>Object.entries(t).map(e=>{let[t,r]=e;return m(r,[t])}).filter(Boolean),[]);return i.createElement(a.mp,{treeData:p,onSelect:e=>r(e)})}function p(e){let{inputsValues:t}=e,[r,n]=(0,i.useState)(""),[l,s]=(0,i.useState)(!1),[u,f]=(0,i.useState)(-1),p=(0,o.jE)();return(0,i.useEffect)(()=>{if(!p)return},[p,l]),i.createElement(i.Fragment,null,i.createElement(c.pf,{triggerCharacters:["{","{}","@"],onOpenChange:function(e){f(e.state.selection.main.head),s(e.value)}}),i.createElement(a.J2,{visible:l,trigger:"custom",position:"topLeft",rePosKey:r,content:i.createElement("div",{style:{width:300}},i.createElement(m,{inputsValues:t,onSelect:e=>{!function(e){let t=(0,c.m4)(p.$view.state);if(!t)return;let{from:r,to:n}=t;for(;"{"===p.$view.state.doc.sliceString(r-1,r);)r--;for(;"}"===p.$view.state.doc.sliceString(n,n+1);)n++;p.replaceText({...t,text:"{{"+e+"}}"}),s(!1)}(e)}}))},i.createElement(c.Iq,{position:u,onChange:()=>n(String(Math.random()))})))}function g(e){let{inputsValues:t,...r}=e;return i.createElement(n.Q,{...r},i.createElement(p,{inputsValues:t}))}}}]);