"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["161874"],{656195:function(e,r,n){n.r(r),n.d(r,{default:()=>o});var s=n(110239),i=n(437562),a=n(944529),l=n(367383);function t(e){let r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.h1,{id:"syncvariabletitle",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#syncvariabletitle",children:"#"}),"syncVariableTitle"]}),"\n",(0,s.jsx)(r.p,{children:"syncVariableTitle is a form effect used to synchronize the node's title to the metadata of its output variables."}),"\n",(0,s.jsx)(r.p,{children:"When the node title changes, it automatically updates the title and icon metadata of all output variables."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Before"}),(0,s.jsx)(r.th,{children:"After"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsxs)(r.td,{children:[(0,s.jsx)("img",{loading:"lazy",src:"/materials/sync-variable-title-without-effect.gif",alt:"syncVariableTitle not introduced",style:{width:500}})," ",(0,s.jsx)(r.em,{children:"When node title changes, it cannot automatically sync to variables"})]}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)("img",{loading:"lazy",src:"/materials/sync-variable-title-with-effect.gif",alt:"syncVariableTitle introduced",style:{width:500}})," ",(0,s.jsx)(r.em,{children:"Node title in variables will automatically sync"})]})]})})]}),"\n",(0,s.jsxs)(r.h2,{id:"example-demonstration",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#example-demonstration",children:"#"}),"Example Demonstration"]}),"\n",(0,s.jsxs)(r.h3,{id:"basic-usage",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#basic-usage",children:"#"}),"Basic Usage"]}),"\n",(0,s.jsx)(l.w,{}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,s.jsxs)(r.code,{className:"language-tsx",children:[(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" { syncVariableTitle } "}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,s.jsx)(r.span,{className:"line"}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,s.jsx)(r.span,{className:"line",children:(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:"p"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:">Please Edit Title below to sync to variables:</"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:"p"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"string"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" undefined"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"title"'}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"        {({ field }) "}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"          <"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"Input"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:" value"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:".value} "}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"onChange"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"{(value) "}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"(value)} />"})]}),"\n",(0,s.jsx)(r.span,{className:"line",children:(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"        )}"})}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,s.jsx)(r.span,{className:"line",children:(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  )"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  effect"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,s.jsx)(r.span,{className:"line",children:(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-comment)"},children:"    // Sync the title to variables"})}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"    title"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" syncVariableTitle"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"    outputs"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" provideJsonSchemaOutputs"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,s.jsx)(r.span,{className:"line",children:(0,s.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,s.jsxs)(r.h2,{id:"api-reference",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#api-reference",children:"#"}),"API Reference"]}),"\n",(0,s.jsxs)(r.h3,{id:"syncvariabletitle-1",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#syncvariabletitle-1",children:"#"}),"syncVariableTitle"]}),"\n",(0,s.jsx)(r.p,{children:"Provides a form effect for synchronizing the node's title to the metadata of its output variables."}),"\n",(0,s.jsxs)(r.h4,{id:"parameters",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#parameters",children:"#"}),"Parameters"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"No direct parameters, used directly in formMeta.effect as a form effect"}),"\n"]}),"\n",(0,s.jsxs)(r.h4,{id:"return-value",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#return-value",children:"#"}),"Return Value"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"EffectOptions[]"}),": Form effect options array for formMeta.effect configuration"]}),"\n"]}),"\n",(0,s.jsxs)(r.h4,{id:"working-principle",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#working-principle",children:"#"}),"Working Principle"]}),"\n",(0,s.jsx)(r.p,{children:"This form effect:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["Listens to the ",(0,s.jsx)(r.code,{children:"onValueChange"})," event of the node title field"]}),"\n",(0,s.jsx)(r.li,{children:"When the title changes, retrieves all output variables of the node"}),"\n",(0,s.jsx)(r.li,{children:"Updates the metadata of each output variable, including title and icon"}),"\n",(0,s.jsx)(r.li,{children:"If the title is empty, uses the node ID as the title"}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"source-code-guide",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#source-code-guide",children:"#"}),"Source Code Guide"]}),"\n",(0,s.jsx)(a.ZB,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/materials/form-materials/src/effects/sync-variable-title"}),"\n",(0,s.jsx)(r.p,{children:"Use the CLI command to copy the source code to your local machine:"}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,s.jsx)(r.code,{className:"language-bash",children:(0,s.jsxs)(r.span,{className:"line",children:[(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,s.jsx)(r.span,{style:{color:"var(--shiki-token-string)"},children:" effects/sync-variable-title"})]})})})}),"\n",(0,s.jsxs)(r.h3,{id:"directory-structure",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#directory-structure",children:"#"}),"Directory Structure"]}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,s.jsxs)(r.code,{className:"language-txt",children:[(0,s.jsx)(r.span,{className:"line",children:(0,s.jsx)(r.span,{children:"sync-variable-title/"})}),"\n",(0,s.jsx)(r.span,{className:"line",children:(0,s.jsx)(r.span,{children:"└── index.ts           # Main implementation file, exports syncVariableTitle form effect"})})]})})}),"\n",(0,s.jsxs)(r.h3,{id:"synchronization-logic",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#synchronization-logic",children:"#"}),"Synchronization Logic"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"syncVariableTitle"})," implements real-time synchronization from node title to variable metadata by registering a ",(0,s.jsx)(r.code,{children:"DataEvent.onValueChange"})," event listener."]}),"\n",(0,s.jsxs)(r.h3,{id:"dependency-overview",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#dependency-overview",children:"#"}),"Dependency Overview"]}),"\n",(0,s.jsxs)(r.h4,{id:"flowgram-api",children:[(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgram-api",children:"#"}),"flowgram API"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.a,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/client/editor",rel:"noopener noreferrer",target:"_blank",children:(0,s.jsx)(r.strong,{children:"@flowgram.ai/editor"})})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://flowgram.ai/auto-docs/editor/enums/DataEvent",rel:"noopener noreferrer",target:"_blank",children:(0,s.jsx)(r.code,{children:"DataEvent"})}),": Data event enumeration for listening to value change events"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://flowgram.ai/auto-docs/editor/types/Effect",rel:"noopener noreferrer",target:"_blank",children:(0,s.jsx)(r.code,{children:"Effect"})}),": Side effect function type definition"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://flowgram.ai/auto-docs/editor/interfaces/EffectOptions",rel:"noopener noreferrer",target:"_blank",children:(0,s.jsx)(r.code,{children:"EffectOptions"})}),": Side effect configuration options interface"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://flowgram.ai/auto-docs/document/interfaces/FlowNodeRegistry-1",rel:"noopener noreferrer",target:"_blank",children:(0,s.jsx)(r.code,{children:"FlowNodeRegistry"})}),": Node registration type definition"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://flowgram.ai/auto-docs/editor/classes/FlowNodeVariableData",rel:"noopener noreferrer",target:"_blank",children:(0,s.jsx)(r.code,{children:"FlowNodeVariableData"})}),": Node variable data class providing node variable management functionality"]}),"\n"]})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}={...(0,i.a)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["en%2Fmaterials%2Feffects%2Fsync-variable-title.mdx"]={toc:[{id:"example-demonstration",text:"Example Demonstration",depth:2},{id:"basic-usage",text:"Basic Usage",depth:3},{id:"api-reference",text:"API Reference",depth:2},{id:"syncvariabletitle",text:"syncVariableTitle",depth:3},{id:"parameters",text:"Parameters",depth:4},{id:"return-value",text:"Return Value",depth:4},{id:"working-principle",text:"Working Principle",depth:4},{id:"source-code-guide",text:"Source Code Guide",depth:2},{id:"directory-structure",text:"Directory Structure",depth:3},{id:"synchronization-logic",text:"Synchronization Logic",depth:3},{id:"dependency-overview",text:"Dependency Overview",depth:3},{id:"flowgram-api",text:"flowgram API",depth:4}],title:"syncVariableTitle",headingTitle:"syncVariableTitle",frontmatter:{}}},367383:function(e,r,n){n.d(r,{w:()=>d});var s=n(110239),i=n(908600),a=n(640898),l=n(236831),t=n(125812),o=n(132288);let c=i.lazy(()=>Promise.all([n.e("386212"),n.e("133914")]).then(n.bind(n,653378)).then(e=>({default:e.Input}))),d=()=>(0,s.jsx)(o.y,{filterStartNode:!0,transformInitialNode:{end_0:e=>(e.data.inputsValues={success:{type:"constant",content:!0,schema:{type:"boolean"}},message:{type:"ref",content:["custom_0","name"]}},e),custom_0:e=>(e.data.outputs={type:"object",properties:{name:{type:"string"},age:{type:"number"}}},e)},formMeta:{render:()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{}),(0,s.jsx)("p",{children:"Please Edit Title below to sync to variables:"}),(0,s.jsx)(a.gNt,{name:"title",children:e=>{let{field:r}=e;return(0,s.jsx)(c,{value:r.value,onChange:e=>r.onChange(e)})}})]}),effect:{title:l.H,outputs:t.X}}})},132288:function(e,r,n){n.d(r,{p:()=>l,y:()=>t});var s=n(110239),i=n(908600);let a=i.lazy(()=>Promise.all([n.e("386212"),n.e("133914"),n.e("227692"),n.e("933451"),n.e("254129"),n.e("428647"),n.e("135691"),n.e("46854"),n.e("690536")]).then(n.bind(n,654296)).then(e=>({default:e.FreeFormMetaStoryBuilder}))),l=i.lazy(()=>Promise.all([n.e("386212"),n.e("133914"),n.e("227692"),n.e("933451"),n.e("254129"),n.e("428647"),n.e("135691"),n.e("46854"),n.e("690536")]).then(n.bind(n,654296)).then(e=>({default:e.FormHeader}))),t=e=>(0,s.jsx)("div",{style:{position:"relative",height:e.height||400},children:(0,s.jsx)(a,{...e})})},125812:function(e,r,n){n.d(r,{X:()=>a});var s=n(937643),i=n(950454);let a=(0,i.W2M)({parse:(e,r)=>{var n,a;return[i.qRT.createVariableDeclaration({key:`${r.node.id}`,meta:{title:(null==(n=r.node.form)?void 0:n.getValueIn("title"))||r.node.id,icon:null==(a=r.node.getNodeRegistry().info)?void 0:a.icon},type:s.Kz.schemaToAST(e)})]}})},236831:function(e,r,n){n.d(r,{H:()=>i});var s=n(950454);let i=[{event:s.zEJ.onValueChange,effect:e=>{let{value:r,context:n}=e;n.node.getData(s._J4).allScopes.forEach(e=>{e.output.variables.forEach(e=>{var s;e.updateMeta({...e.meta||{},title:r||n.node.id,icon:null==(s=n.node.getNodeRegistry().info)?void 0:s.icon})})})}}]}}]);