"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["151657"],{328150:function(e,s,n){n.r(s),n.d(s,{default:()=>c});var r=n(110239),i=n(437562),l=n(441332),a=n(544372),o=n(321896);function t(e){let s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"autorenameref",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#autorenameref",children:"#"}),"autoRenameRef"]}),"\n",(0,r.jsx)(s.p,{children:"autoRenameRef is an automatic reference renaming effect that automatically updates all reference values and template values referencing that field when the key name of a form field changes."}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)("img",{loading:"lazy",src:"/materials/auto-rename-ref.gif",alt:"autoRenameRef Effect",style:{width:"80%"}}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"When the query variable name changes, automatically rename references in downstream inputs"})})]}),"\n",(0,r.jsxs)(s.h2,{id:"demo",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#demo",children:"#"}),"Demo"]}),"\n","\n",(0,r.jsxs)(s.h3,{id:"basic-usage",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#basic-usage",children:"#"}),"Basic Usage"]}),"\n",(0,r.jsx)(a.w,{}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,r.jsxs)(s.code,{className:"language-tsx",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { autoRenameRefEffect } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  effects"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "inputsValues"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" autoRenameRefEffect"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"any"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"inputsValues"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        {({ field }) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"InputsValues"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" value"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".value} "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"onChange"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{(value) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(value)} />"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        )}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,r.jsxs)(s.h3,{id:"usage-in-complex-forms",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#usage-in-complex-forms",children:"#"}),"Usage in Complex Forms"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,r.jsxs)(s.code,{className:"language-tsx",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { autoRenameRefEffect } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  effects"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // Apply automatic renaming effect to multiple fields"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "inputsValues"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" autoRenameRefEffect"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "outputsValues"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" autoRenameRefEffect"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    "config.data"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" autoRenameRefEffect"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"any"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"inputsValues"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> {"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"/* inputsValues implementation */"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"} </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"any"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"outputsValues"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> {"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"/* outputsValues implementation */"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"} </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"any"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"config.data"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> {"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"/* config.data implementation */"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"} </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,r.jsxs)(s.h2,{id:"api-reference",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#api-reference",children:"#"}),"API Reference"]}),"\n",(0,r.jsxs)(s.h3,{id:"supported-value-types",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#supported-value-types",children:"#"}),"Supported Value Types"]}),"\n",(0,r.jsx)(s.p,{children:"The automatic renaming of autoRenameEffect is only triggered when the data under the specified key meets the following conditions:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reference Value (ref)"}),": ",(0,r.jsx)(s.code,{children:"{ type: 'ref', content: ['field', 'path'] }"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Template Value (template)"}),": ",(0,r.jsx)(s.code,{children:"{ type: 'template', content: 'Hello {{user.name}}' }"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Complex Structure Containing Reference and Template Values"}),":","\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-json",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'  "a"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "type"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "ref"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "content"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"start_0"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "str"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'  "b"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "c"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'      "type"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "template"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'      "content"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "Hello {{a}}"'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"source-code-guide",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#source-code-guide",children:"#"}),"Source Code Guide"]}),"\n","\n",(0,r.jsx)(o.ZB,{href:"https://github.com/bytedance/flowgram/tree/main/packages/materials/form-materials/src/effects/auto-rename-ref"}),"\n",(0,r.jsx)(s.p,{children:"Copy source code locally using CLI command:"}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,r.jsx)(s.code,{className:"language-bash",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" effects/auto-rename-ref"})]})})})}),"\n",(0,r.jsxs)(s.h3,{id:"core-process",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#core-process",children:"#"}),"Core Process"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Listen to Rename Events"}),": Listen for field key name changes through ",(0,r.jsx)(s.code,{children:"VariableFieldKeyRenameService"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Traverse Reference Values"}),": Find all reference values and template values"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Match Key Paths"}),": Check if the reference path matches the path before the change"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Update References"}),": Update matching reference paths to the new key path"]}),"\n"]}),"\n",(0,r.jsx)(l.Z,{code:"graph TD\n    A[Listen to Rename Events] --\x3e B[renameService.onRename triggered]\n    B --\x3e C[Traverse all values traverseRef]\n\n    C --\x3e D{Value Type Judgment}\n\n    D --\x3e|ref type| E[Check path match\n    isKeyPathMatch]\n\n    D --\x3e|template type| F[Check template path match\n    traverse + isKeyPathMatch]\n\n    E --\x3e|Match| G[Update reference path\n    value.content = newPath]\n\n    E --\x3e|No match| I\n\n    F --\x3e|Match| H[Replace template content\n    value.content.replace]\n\n    F --\x3e|No match| I\n\n    G --\x3e I[Update form value\n    form.setValueIn]\n\n    H --\x3e I\n\n    I --\x3e J{More values to process?}\n    J --\x3e|Yes| C\n    J --\x3e|No| K[Complete]\n\n    style A fill:#e1f5fe\n    style K fill:#e8f5e8\n    style B fill:#fff3e0\n    style G fill:#ffebee\n    style H fill:#ffebee",config:{}}),"\n",(0,r.jsxs)(s.h3,{id:"core-apis-used",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#core-apis-used",children:"#"}),"Core APIs Used"]}),"\n",(0,r.jsxs)(s.h4,{id:"flowgramaivariable-core",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgramaivariable-core",children:"#"}),"@flowgram.ai/variable-core"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"VariableFieldKeyRenameService"}),": Field key name rename listener"]}),"\n"]}),"\n",(0,r.jsxs)(s.h4,{id:"flowgramainode",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgramainode",children:"#"}),"@flowgram.ai/node"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"DataEvent.onValueInit"}),": Value initialization event"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Effect"}),": Effect type definition"]}),"\n"]}),"\n",(0,r.jsxs)(s.h4,{id:"flowvalueutils",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#flowvalueutils",children:"#"}),"FlowValueUtils"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"FlowValueUtils.getTemplateKeyPaths()"}),": Extract all key paths from templates"]}),"\n"]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["en%2Fmaterials%2Feffects%2Fauto-rename-ref.mdx"]={toc:[{id:"demo",text:"Demo",depth:2},{id:"basic-usage",text:"Basic Usage",depth:3},{id:"usage-in-complex-forms",text:"Usage in Complex Forms",depth:3},{id:"api-reference",text:"API Reference",depth:2},{id:"supported-value-types",text:"Supported Value Types",depth:3},{id:"source-code-guide",text:"Source Code Guide",depth:2},{id:"core-process",text:"Core Process",depth:3},{id:"core-apis-used",text:"Core APIs Used",depth:3},{id:"flowgramaivariable-core",text:"@flowgram.ai/variable-core",depth:4},{id:"flowgramainode",text:"@flowgram.ai/node",depth:4},{id:"flowvalueutils",text:"FlowValueUtils",depth:4}],title:"autoRenameRef",headingTitle:"autoRenameRef",frontmatter:{}}},544372:function(e,s,n){n.d(s,{w:()=>c});var r=n(110239),i=n(908600),l=n(623631),a=n(916530),o=n(132288);let t=i.lazy(()=>Promise.all([n.e("386212"),n.e("443911"),n.e("767597"),n.e("942362"),n.e("800699"),n.e("533459"),n.e("666813"),n.e("174414"),n.e("289371"),n.e("466188")]).then(n.bind(n,694664)).then(e=>({default:e.InputsValues}))),c=()=>(0,r.jsx)(o.y,{filterEndNode:!0,formMeta:{effect:{inputsValues:l.g},render:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.p,{}),(0,r.jsx)(a.gNt,{name:"inputsValues",defaultValue:{a:{type:"ref",content:["start_0","str"]}},children:e=>{let{field:s}=e;return(0,r.jsx)(t,{value:s.value,onChange:e=>s.onChange(e)})}})]})}})},132288:function(e,s,n){n.d(s,{p:()=>a,y:()=>o});var r=n(110239),i=n(908600);let l=i.lazy(()=>Promise.all([n.e("386212"),n.e("443911"),n.e("737443"),n.e("767597"),n.e("800699"),n.e("541460"),n.e("428647"),n.e("533459"),n.e("666813"),n.e("534505")]).then(n.bind(n,417587)).then(e=>({default:e.FreeFormMetaStoryBuilder}))),a=i.lazy(()=>Promise.all([n.e("386212"),n.e("443911"),n.e("737443"),n.e("767597"),n.e("800699"),n.e("541460"),n.e("428647"),n.e("533459"),n.e("666813"),n.e("534505")]).then(n.bind(n,417587)).then(e=>({default:e.FormHeader}))),o=e=>(0,r.jsx)("div",{style:{position:"relative",height:e.height||400},children:(0,r.jsx)(l,{...e})})},623631:function(e,s,n){n.d(s,{g:()=>l});var r=n(950454),i=n(687252);let l=[{event:r.zEJ.onValueInit,effect:e=>{let{context:s,form:n,name:l}=e,o=s.node.getService(r.qmw).onRename(e=>{let{before:s,after:r}=e,o=[...s.parentFields.map(e=>e.key).reverse(),s.key],t=[...r.parentFields.map(e=>e.key).reverse(),r.key];var c=l,h=n.getValueIn(l),d=(e,s)=>{if("ref"===s.type){if(a(s.content,o)){var r;s.content=[...t,...null==(r=s.content||[])?void 0:r.slice(o.length)],n.setValueIn(e,s)}}else if("template"===s.type){let r=i.U.getTemplateKeyPaths(s),l=!1;r.forEach(e=>{if(a(e,o)){var n,r;l=!0;let i=[...t,...null==(n=e||[])?void 0:n.slice(o.length)];s.content=null==(r=s.content)?void 0:r.replace(`{{${e.join(".")}}`,`{{${i.join(".")}}`)}}),l&&n.setValueIn(e,{...s})}};for(let{value:e,path:s}of i.U.traverse(h,{includeTypes:["ref","template"],path:c}))d(s,e)});return()=>{o.dispose()}}}];function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;return s.every((s,n)=>s===e[n])}},687252:function(e,s,n){n.d(s,{U:()=>r});var r,i=n(111886),l=n(13721),a=n(721855),o=n(325486),t=n(937643),c=n(123387);let h=c.ZP.object({index:c.ZP.number().optional()}).optional(),d=c.ZP.object({type:c.ZP.literal("constant"),content:c.ZP.any().optional(),schema:c.ZP.any().optional(),extra:h}),p=c.ZP.object({type:c.ZP.literal("ref"),content:c.ZP.array(c.ZP.string()).optional(),extra:h}),x=c.ZP.object({type:c.ZP.literal("expression"),content:c.ZP.string().optional(),extra:h}),u=c.ZP.object({type:c.ZP.literal("template"),content:c.ZP.string().optional(),extra:h});!function(e){function s(e){return d.safeParse(e).success}function n(e){return p.safeParse(e).success}function r(e){return x.safeParse(e).success}function c(e){return u.safeParse(e).success}function h(e){return(null==e?void 0:e.schema)?e.schema:"string"==typeof e.content?{type:"string"}:"number"==typeof e.content?{type:"number"}:"boolean"==typeof e.content?{type:"boolean"}:(0,o.Z)(e.content)?{type:"object"}:void 0}e.isConstant=s,e.isRef=n,e.isExpression=r,e.isTemplate=c,e.isConstantOrRef=function(e){return s(e)||n(e)},e.isFlowValue=function(e){return s(e)||n(e)||r(e)||c(e)},e.traverse=function* e(a,o){let{includeTypes:t=["ref","template","expression","constant"],path:h="",pathArr:d=[]}=o||{};if((0,i.Z)(a)){if(n(a)&&t.includes("ref")||c(a)&&t.includes("template")||r(a)&&t.includes("expression")||s(a)&&t.includes("constant"))return void(yield{value:a,path:h,pathArr:d});for(let[s,n]of Object.entries(a))yield*e(n,{...o,path:h?`${h}.${s}`:s,pathArr:[...d,s]});return}if((0,l.Z)(a))for(let[s,n]of a.entries())yield*e(n,{...o,path:h?`${h}[${s}]`:`[${s}]`,pathArr:[...d,`[${s}]`]})},e.getTemplateKeyPaths=function(e){var s;return(0,a.Z)((null==(s=e.content)?void 0:s.match(/\{\{([^\}\{]+)\}\}/g))||[]).map(e=>e.slice(2,-2).split("."))},e.inferConstantJsonSchema=h,e.inferJsonSchema=function e(r,l){if((0,i.Z)(r)){if(s(r))return h(r);if(n(r)){let e=l.available.getByKeyPath(null==r?void 0:r.content);return(null==e?void 0:e.type)?t.Kz.astToSchema(null==e?void 0:e.type):void 0}return c(r)?{type:"string"}:{type:"object",properties:Object.keys(r).reduce((s,n)=>{let i=e(r[n],l);return i&&(s[n]=i),s},{})}}}}(r||(r={}))}}]);