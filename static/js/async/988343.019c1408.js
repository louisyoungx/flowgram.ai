"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["988343"],{348274:function(e,n,s){s.r(n),s.d(n,{default:()=>C});var i=s(110239),r=s(437562),o=s(944529),l=s(659722),t=s(423324),d=s(764897),a=s(938682),c=s(670703),h=s(818610),p=s(545917),x=s(983088),j=s(138359),u=s(761254),m=s(360771),g=s(310767),k=s(441909),y=s(917072),f=s(350491),v=s(363788),b=s(152097),w=s(805510),N=s(834698),E=s(992842),S=s(674626),F=s(699594),R=s(930570);function A(e){let n={a:"a",blockquote:"blockquote",code:"code",div:"div",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"free-layout",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#free-layout",children:"#"}),"Free Layout"]}),"\n","\n",(0,i.jsxs)(n.h2,{id:"step-0-install-dependencies",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-0-install-dependencies",children:"#"}),"Step 0: Install Dependencies"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Install the editor package"}),"\n"]}),"\n",(0,i.jsx)(o.SU,{command:{npm:"npm install @flowgram.ai/free-layout-editor",pnpm:"pnpm add @flowgram.ai/free-layout-editor",yarn:"yarn add @flowgram.ai/free-layout-editor",bun:"bun add @flowgram.ai/free-layout-editor"}}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Install styled-components (if not already installed)"}),"\n"]}),"\n",(0,i.jsx)(o.SU,{command:{npm:"npm install styled-components",pnpm:"pnpm add styled-components",yarn:"yarn add styled-components",bun:"bun add styled-components"}}),"\n",(0,i.jsxs)(n.h2,{id:"step-1-import-the-canvas-component",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-1-import-the-canvas-component",children:"#"}),"Step 1: Import the Canvas Component"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Import the stylesheet to ensure basic styles are applied:"}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsx)(n.code,{className:"language-tsx",children:(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/free-layout-editor/index.css'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:";"})]})})})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"FreeLayoutEditorProvider"})," to provide the editor context, and ",(0,i.jsx)(n.code,{children:"EditorRenderer"})," to render the canvas:"]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-tsx",children:[(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" FlowGramApp"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  <"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"FreeLayoutEditorProvider"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"EditorRenderer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  </"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"FreeLayoutEditorProvider"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:");"})})]})})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The remaining files can keep their default exports."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Expected result: After the page loads, only a blank canvas is displayed, with no nodes or edges."}),"\n"]}),"\n",(0,i.jsx)(l.G,{files:{"/App.tsx":t}}),"\n",(0,i.jsxs)(n.h2,{id:"step-2-implement-and-register-the-node-component",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-2-implement-and-register-the-node-component",children:"#"}),"Step 2: Implement and Register the Node Component"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Import hooks and components related to node rendering:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"useNodeRender"}),": Gets the node context (such as the form)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"WorkflowNodeProps"})," & ",(0,i.jsx)(n.code,{children:"WorkflowNodeRenderer"}),": Define and render the node shell."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create the ",(0,i.jsx)(n.code,{children:"NodeRender"})," component to customize node size and style:"]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-tsx",children:[(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" NodeRender"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" (props"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" WorkflowNodeProps"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"  const"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" { "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"form"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" } "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" useNodeRender"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"();"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"WorkflowNodeRenderer"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"      style"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{{ width"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" 280"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" height"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" 88"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" background"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '#fff'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" borderRadius"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:" 8"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:" ..."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" }}"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"      node"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"props"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:".node}"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    >"})}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"      {"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"form"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"?.render"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"()}"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"    </"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"WorkflowNodeRenderer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"  );"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"};"})})]})})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Register in ",(0,i.jsx)(n.code,{children:"FreeLayoutEditorProvider"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"materials.renderDefaultNode"})," specifies the default node renderer."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nodeRegistries"})," declares available node types (e.g., ",(0,i.jsx)(n.code,{children:"custom"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"initialData"})," provides an initial node at position ",(0,i.jsx)(n.code,{children:"{ x: 250, y: 100 }"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Expected result: A draggable, custom-styled node appears on the canvas."}),"\n"]}),"\n",(0,i.jsx)(l.G,{files:{"/App.tsx":d}}),"\n",(0,i.jsxs)(n.h2,{id:"step-3-add-multiple-nodes-and-edges",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-3-add-multiple-nodes-and-edges",children:"#"}),"Step 3: Add Multiple Nodes and Edges"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Add the ",(0,i.jsx)(n.code,{children:"onAllLayersRendered"})," callback. After all layers are rendered, call ",(0,i.jsx)(n.code,{children:"ctx.tools.fitView(false)"})," to make the canvas automatically fit the content."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Add ",(0,i.jsx)(n.code,{children:"canDeleteNode"})," & ",(0,i.jsx)(n.code,{children:"canDeleteLine"})," callbacks, returning ",(0,i.jsx)(n.code,{children:"true"})," to allow deleting nodes and edges."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Extend ",(0,i.jsx)(n.code,{children:"initialData"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Add another node of the same type at position ",(0,i.jsx)(n.code,{children:"{ x: 400, y: 0 }"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Add an edge in the ",(0,i.jsx)(n.code,{children:"edges"})," array to connect node ",(0,i.jsx)(n.code,{children:"1"})," and node ",(0,i.jsx)(n.code,{children:"2"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Expected result:"}),"\n",(0,i.jsx)(n.p,{children:"• The canvas displays two connected nodes and automatically centers/zooms to fit the view."}),"\n",(0,i.jsx)(n.p,{children:"• Select any node or edge, and press the Delete key to remove it."}),"\n"]}),"\n",(0,i.jsx)(l.G,{files:{"/App.tsx":a}}),"\n",(0,i.jsxs)(n.h2,{id:"step-4-import-plugins",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-4-import-plugins",children:"#"}),"Step 4: Import Plugins"]}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive info",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"INFO"}),(0,i.jsx)(n.div,{className:"rspress-directive-content",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@flowgram.ai/free-snap-plugin"}),": A node snapping plugin that aligns nodes to a grid."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@flowgram.ai/minimap-plugin"}),": A minimap plugin that provides a small map view of the canvas."]}),"\n"]})})]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Install plugin dependencies"}),"\n"]}),"\n",(0,i.jsx)(o.SU,{command:{npm:"npm install @flowgram.ai/free-snap-plugin @flowgram.ai/minimap-plugin",pnpm:"pnpm add @flowgram.ai/free-snap-plugin @flowgram.ai/minimap-plugin",yarn:"yarn add @flowgram.ai/free-snap-plugin @flowgram.ai/minimap-plugin",bun:"bun add @flowgram.ai/free-snap-plugin @flowgram.ai/minimap-plugin"}}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Import the plugin creation functions from their respective packages:"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"createFreeSnapPlugin"})," is used for node grid snapping."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"createMinimapPlugin"})," is used to generate the canvas minimap."]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["Register the plugins in the ",(0,i.jsx)(n.code,{children:"plugins"})," prop of ",(0,i.jsx)(n.code,{children:"FreeLayoutEditorProvider"}),":"]}),"\n"]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-tsx",children:[(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"plugins"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"{() => ["})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"  createMinimapPlugin"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"({})"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"  createFreeSnapPlugin"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"({})"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"]}"})})]})})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Expected result:"}),"\n",(0,i.jsx)(n.p,{children:"• A draggable and zoomable minimap appears in the upper-right corner of the canvas. Clicking or dragging the minimap allows for quick navigation of the main canvas."}),"\n",(0,i.jsx)(n.p,{children:"• When dragging a node, it will automatically snap to nearby nodes for easy alignment."}),"\n"]}),"\n",(0,i.jsx)(l.G,{files:{"/App.tsx":c}}),"\n",(0,i.jsxs)(n.h2,{id:"step-5-splitting-files",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-5-splitting-files",children:"#"}),"Step 5: Splitting Files"]}),"\n",(0,i.jsx)(n.p,{children:"To avoid having excessively long files, we need to split the editor configuration, node rendering, initial data, etc., which were originally in a single component, into separate files. This facilitates maintenance, reuse, and collaboration."}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-sh",children:[(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" use-editor-props.ts"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" # Canvas configuration"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" node-render.tsx"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" # Node rendering"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" initial-data.ts"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" # Initial data"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" node-registries.ts"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" # Node configuration"})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:" App.tsx"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" # Canvas entry point"})]})]})})}),"\n",(0,i.jsx)(n.p,{children:"File Responsibilities"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"use-editor-props.tsx"}),": Manages all props for FreeLayoutEditorProvider (plugins, view fitting, materials, node registration, and initial data)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"node-render.tsx"}),": Defines the custom node renderer NodeRender, responsible for its appearance and internal form rendering."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"initial-data.ts"}),": Provides the initial nodes and edges. The current example includes 5 ",(0,i.jsx)(n.code,{children:"custom"})," nodes and multiple connections."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"node-registries.tsx"}),": Declares the set of node types (the example only registers 'custom')."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"App.tsx"}),": The application entry point, which gets the configuration from useEditorProps and mounts EditorRenderer."]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Expected result: By splitting the files, the code structure becomes clearer, responsibilities are more defined, and the code is easier to extend in the future."}),"\n"]}),"\n",(0,i.jsx)(l.G,{files:{"/App.tsx":h,"/use-editor-props.tsx":x,"/initial-data.ts":p,"/node-registries.tsx":u,"/node-render.tsx":j}}),"\n",(0,i.jsxs)(n.h2,{id:"step-6-integrating-forms-and-history",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-6-integrating-forms-and-history",children:"#"}),"Step 6: Integrating Forms and History"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Node Registration and Port Configuration"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"start"}),": The starting node, which cannot be deleted and has only an output port by default."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"end"}),": The ending node, which cannot be deleted and has only an input port by default."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"custom"}),": A regular node, which has both input and output ports by default."]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Enable Forms and History"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.code,{children:"useEditorProps.tsx"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nodeEngine.enable = true"}),": Enables the node engine, allowing ",(0,i.jsx)(n.code,{children:"formMeta"})," to be configured for node types."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"history.enable = true"})," and ",(0,i.jsx)(n.code,{children:"history.enableChangeNode = true"}),": Enable undo/redo and listen for node data changes (e.g., form changes)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"getNodeDefaultRegistry(type)"}),": Provides a default configuration for types that are not explicitly registered:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"meta.defaultExpanded = true"}),": The node's internal content area is expanded by default."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"formMeta.render"}),": Renders the form. This example renders the title field using ",(0,i.jsx)(n.code,{children:'<Field<string> name="title">'}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Initialize Data and Rendering"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.code,{children:"initial-data.ts"}),", set ",(0,i.jsx)(n.code,{children:"data.title"})," for each node (e.g., ",(0,i.jsx)(n.code,{children:"Start Node"}),", ",(0,i.jsx)(n.code,{children:"Custom Node A/B/C"}),", ",(0,i.jsx)(n.code,{children:"End Node"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"form?.render()"})," in ",(0,i.jsx)(n.code,{children:"NodeRender"})," will render the form content into the node shell, displaying the title of each node."]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Expected result:"}),"\n",(0,i.jsxs)(n.p,{children:["• The canvas contains ",(0,i.jsx)(n.code,{children:"start"}),", multiple ",(0,i.jsx)(n.code,{children:"custom"}),", and ",(0,i.jsx)(n.code,{children:"end"})," nodes, with connections matching the initial data."]}),"\n",(0,i.jsxs)(n.p,{children:["• Each node displays its ",(0,i.jsx)(n.code,{children:"title"}),"; selecting a node can expand it to show more form fields and interactions."]}),"\n",(0,i.jsx)(n.p,{children:"• Undo/redo shortcuts are available and can be verified by deleting or moving nodes."}),"\n"]}),"\n",(0,i.jsx)(l.G,{activeFile:"/use-editor-props.tsx",files:{"/App.tsx":m,"/use-editor-props.tsx":k,"/initial-data.ts":g,"/node-registries.tsx":f,"/node-render.tsx":y}}),"\n",(0,i.jsxs)(n.h2,{id:"step-7-creating-a-toolbar",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-7-creating-a-toolbar",children:"#"}),"Step 7: Creating a Toolbar"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Import the Toolbar Component"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.code,{children:"App.tsx"}),", import ",(0,i.jsx)(n.code,{children:"<Tools />"})," and place it at the same level as ",(0,i.jsx)(n.code,{children:"<EditorRenderer />"})," inside ",(0,i.jsx)(n.code,{children:"FreeLayoutEditorProvider"}),", allowing it to access the editor context and tool methods."]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Control the Canvas with Tool Methods"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"usePlaygroundTools()"})," to get canvas manipulation methods: ",(0,i.jsx)(n.code,{children:"zoomin/zoomout"}),", ",(0,i.jsx)(n.code,{children:"fitView"}),", ",(0,i.jsx)(n.code,{children:"autoLayout"}),", ",(0,i.jsx)(n.code,{children:"switchLineType"}),", etc."]}),"\n",(0,i.jsxs)(n.li,{children:["Switch edge style: Use ",(0,i.jsx)(n.code,{children:"switchLineType"})," to toggle between ",(0,i.jsx)(n.code,{children:"LineType.BEZIER"})," and ",(0,i.jsx)(n.code,{children:"LineType.LINE_CHART"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Display real-time zoom ratio: Read ",(0,i.jsx)(n.code,{children:"tools.zoom"})," to show the current canvas zoom percentage."]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Integrate Undo/Redo State"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"useClientContext()"})," to get ",(0,i.jsx)(n.code,{children:"history"})," and listen to ",(0,i.jsx)(n.code,{children:"history.undoRedoService.onChange"})," to update the state of the ",(0,i.jsx)(n.code,{children:"canUndo/canRedo"})," buttons."]}),"\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.code,{children:"use-editor-props.tsx"}),", ensure history is enabled: ",(0,i.jsx)(n.code,{children:"history.enable = true"})," and ",(0,i.jsx)(n.code,{children:"history.enableChangeNode = true"}),", so that undo/redo works for node data changes."]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"Extend Components (Optional)"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Minimap: Pin the minimap to the bottom-right corner by customizing the ",(0,i.jsx)(n.code,{children:"MinimapRender"})," container style to improve navigation efficiency."]}),"\n",(0,i.jsxs)(n.li,{children:["AddNode: Provides a button to quickly add a new node. It uses ",(0,i.jsx)(n.code,{children:"WorkflowDocument.createWorkflowNodeByType"})," to create and select a node in the center of the canvas."]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Expected result:"}),"\n",(0,i.jsx)(n.p,{children:"• A toolbar appears in the bottom-right corner of the page, supporting common operations like Zoom In/Zoom Out, Fit View, Auto Layout, and displaying the real-time zoom ratio."}),"\n",(0,i.jsx)(n.p,{children:"• The edge style can be switched (Bezier/Polyline), and the undo/redo buttons are automatically enabled/disabled based on the history state."}),"\n",(0,i.jsx)(n.p,{children:"• Combined with the Minimap and AddNode components, it forms a complete editing tool area for more efficient operation."}),"\n"]}),"\n",(0,i.jsx)(l.G,{activeFile:"/tools.tsx",files:{"/App.tsx":v,"/use-editor-props.tsx":w,"/initial-data.ts":b,"/node-registries.tsx":E,"/tools.tsx":S,"/add-node.tsx":F,"/minimap.tsx":R,"/node-render.tsx":N}}),"\n",(0,i.jsxs)(n.h2,{id:"step-8-learn-more",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-8-learn-more",children:"#"}),"Step 8: Learn More"]}),"\n",(0,i.jsxs)(n.p,{children:["Click to learn more about ",(0,i.jsx)(n.a,{href:"/en/guide/free-layout/load.html",children:"Free Layout Usage"})]}),"\n",(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginTop:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.p,{children:"Learn more about Free Layout:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/en/guide/free-layout/load.html",children:"Loading and Saving"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/en/guide/free-layout/node.html",children:"Nodes"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/en/guide/free-layout/line.html",children:"Lines"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/en/guide/free-layout/port.html",children:"Ports"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/en/guide/free-layout/sub-canvas.html",children:"Sub-canvas"})}),"\n"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.p,{children:"Learn more about other FlowGram.AI features:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/en/guide/form/form.html",children:"Form"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/en/guide/variable/basic.html",children:"Variable"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/en/materials/introduction.html",children:"Materials"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/en/guide/runtime/introduction.html",children:"Runtime"})}),"\n"]})]})]})]})}function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(A,{...e})}):A(e)}C.__RSPRESS_PAGE_META={},C.__RSPRESS_PAGE_META["en%2Fguide%2Fgetting-started%2Ffree-layout.mdx"]={toc:[{id:"step-0-install-dependencies",text:"Step 0: Install Dependencies",depth:2},{id:"step-1-import-the-canvas-component",text:"Step 1: Import the Canvas Component",depth:2},{id:"step-2-implement-and-register-the-node-component",text:"Step 2: Implement and Register the Node Component",depth:2},{id:"step-3-add-multiple-nodes-and-edges",text:"Step 3: Add Multiple Nodes and Edges",depth:2},{id:"step-4-import-plugins",text:"Step 4: Import Plugins",depth:2},{id:"step-5-splitting-files",text:"Step 5: Splitting Files",depth:2},{id:"step-6-integrating-forms-and-history",text:"Step 6: Integrating Forms and History",depth:2},{id:"step-7-creating-a-toolbar",text:"Step 7: Creating a Toolbar",depth:2},{id:"step-8-learn-more",text:"Step 8: Learn More",depth:2}],title:"Free Layout",headingTitle:"Free Layout",frontmatter:{}}}}]);