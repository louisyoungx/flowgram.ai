"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["27461"],{845925:function(t,e,o){o.r(e),o.d(e,{DemoFixedLayout:()=>I});var n=o(110239),d=o(916530);o(505247),o(808102);var i=o(129034);let a=[{type:"condition",extend:"dynamicSplit",meta:{},onAdd:()=>({id:`condition_${(0,i.x0)(5)}`,type:"condition",data:{title:"Condition"},blocks:[{id:(0,i.x0)(5),type:"block",data:{title:"If_0"}},{id:(0,i.x0)(5),type:"block",data:{title:"If_1"}}]})},{type:"custom",meta:{},onAdd:()=>({id:`custom_${(0,i.x0)(5)}`,type:"custom",data:{title:"Custom",content:"this is custom content"}})}],l={nodes:[{id:"start_0",type:"start",data:{title:"Start",content:"start content"},blocks:[]},{id:"condition_0",type:"condition",data:{title:"Condition",content:"condition content"},blocks:[{id:"branch_0",type:"block",data:{title:"Branch 0",content:"branch 1 content"},blocks:[{id:"custom_0",type:"custom",data:{title:"Custom",content:"custom content"}}]},{id:"branch_1",type:"block",data:{title:"Branch 1",content:"branch 1 content"},blocks:[{id:"break_0",type:"break",data:{title:"Break",content:"Break content"}}]},{id:"branch_2",type:"block",data:{title:"Branch 2",content:"branch 2 content"},blocks:[]}]},{id:"end_0",type:"end",data:{title:"End",content:"end content"}}]};var s=o(908600),c=o(330893),r=o(945874),u=o(653378),p=o(633988);function y(t){var e;let{node:o}=t,a=null==(e=o.firstChild)?void 0:e.getData(d.LzJ),l=(0,d.G2Z)(d.pQ4);async function s(){l.addNode({id:(0,i.x0)(5),type:"custom",parent:o,data:{title:"Custom",content:"custom content"}})}return(0,n.jsx)("div",{style:{display:"flex",background:"var(--semi-color-bg-0)"},onMouseEnter:()=>null==a?void 0:a.toggleMouseEnter(),onMouseLeave:()=>null==a?void 0:a.toggleMouseLeave(),children:(0,n.jsx)(u.Button,{onClick:()=>{s()},size:"small",icon:(0,n.jsx)(p.Z,{})})})}var m=o(726488);let h=()=>{let t=(0,d.Dcz)(),e=(0,d.G2Z)(d.Vro);return{handleAdd:(o,n)=>{let d=o.blocks?o.blocks:void 0,i=e.addFromNode(n,{...o,blocks:d});return setTimeout(()=>{t.scrollToView({bounds:i.bounds,scrollToCenter:!0})},10),i},handleAddBranch:(t,o)=>{let n=o.index+1;return e.addBlock(o.originParent,t,{index:n})}}},b=t=>{let{from:e,hoverActivated:o}=t,i=(0,d.Dcz)(),l=(0,d.sX$)(),{handleAdd:s}=h();return i.config.readonlyOrDisabled?null:(0,n.jsx)(u.Dropdown,{render:(0,n.jsx)(u.Dropdown.Menu,{children:a.map(t=>(0,n.jsx)(u.Dropdown.Item,{onClick:()=>{s(null==t?void 0:t.onAdd(l,e),e)},children:t.type},t.type))}),children:(0,n.jsx)("div",{style:{width:o?15:6,height:o?15:6,backgroundColor:"rgb(143, 149, 158)",color:"#fff",borderRadius:"50%",cursor:"pointer"},children:o?(0,n.jsx)(m.Z,{style:{color:"#3370ff",backgroundColor:"#fff",borderRadius:15}}):null})})};function _(t){let{activated:e,node:o}=t,a=o.firstChild.renderData,{operation:l,playground:s}=(0,d.sX$)(),{isVertical:c}=o;if(s.config.readonlyOrDisabled)return null;let r=["demo-fixed-adder",c?"":"isHorizontal",e?"activated":""].join(" ");return(0,n.jsx)("div",{className:r,onMouseEnter:()=>null==a?void 0:a.toggleMouseEnter(),onMouseLeave:()=>null==a?void 0:a.toggleMouseLeave(),children:(0,n.jsx)("div",{onClick:()=>{let t;t="multiOutputs"===o.flowNodeType?l.addBlock(o,{id:`output_${(0,i.x0)(5)}`,type:"output",data:{title:"New Ouput",content:""}}):"multiInputs"===o.flowNodeType?l.addBlock(o,{id:`input_${(0,i.x0)(5)}`,type:"input",data:{title:"New Input",content:""}}):l.addBlock(o,{id:`branch_${(0,i.x0)(5)}`,type:"block",data:{title:"New Branch",content:""}}),setTimeout(()=>{s.scrollToView({bounds:t.bounds,scrollToCenter:!0})},10)},"aria-hidden":"true",style:{flexGrow:1,textAlign:"center"},children:(0,n.jsx)(p.Z,{})})})}var g=o(714456);let k=t=>{let{node:e}=t,o=(0,d.sX$)(),i=(0,d.PVB)(),a=i.form;return(0,n.jsxs)("div",{className:"demo-fixed-node",onMouseEnter:i.onMouseEnter,onMouseLeave:i.onMouseLeave,onMouseDown:t=>{i.startDrag(t),t.stopPropagation()},style:{opacity:i.dragging?.3:1,...i.isBlockOrderIcon||i.isBlockIcon?{width:260}:{}},children:[!i.readonly&&(0,n.jsx)(g.Z,{style:{position:"absolute",right:4,top:4},onClick:()=>o.operation.deleteNode(i.node)}),null==a?void 0:a.render()]})},x={nodes:[{id:"start_0",type:"start",data:{title:"Start"},blocks:[]},{id:"tryCatch_0",type:"tryCatch",data:{title:"TryCatch"},blocks:[{id:"tryBlock_0",type:"tryBlock",blocks:[]},{id:"catchBlock_0",type:"catchBlock",data:{title:"Catch Block 1"},blocks:[]},{id:"catchBlock_1",type:"catchBlock",data:{title:"Catch Block 2"},blocks:[]}]},{id:"end_0",type:"end",data:{title:"End"}}]},f={nodes:[{id:"start_0",type:"start",data:{title:"Start",content:"start content"},blocks:[]},{id:"slot_0",type:"slot",data:{title:"Slot",content:"Slot content"},blocks:[{id:"slot_port_1",type:"slotBlock",data:{title:"Slot 1",content:"slot 1 content"},blocks:[{id:"custom_1",type:"custom",data:{title:"Custom",content:"custom content"}}]},{id:"slot_port_2",type:"slotBlock",data:{title:"Slot 2",content:"slot 2 content"},blocks:[{id:"custom_2",type:"custom",data:{title:"Custom",content:"custom content"}}]},{id:"slot_port_3",type:"slotBlock",data:{title:"Slot 3",content:"slot 3 content"},blocks:[{id:"custom_3",type:"custom",data:{title:"Custom",content:"custom content"}},{id:"custom_4",type:"custom",data:{title:"Custom",content:"custom content"}}]}]},{id:"end_0",type:"end",data:{title:"End",content:"end content"}}]},v={nodes:[{id:"start_0",type:"start",data:{title:"Start"},blocks:[]},{id:"multiOutputs_0",type:"multiOutputs",data:{title:"MultiOutputs"},blocks:[{id:"output_0",type:"output",data:{title:"output_0"}},{id:"output_1",type:"output",data:{title:"output_1"}},{id:"output_2",type:"output",data:{title:"output_2"}}]}]},C={nodes:[{id:"multiInputs_0",type:"multiInputs",blocks:[{id:"input_0",type:"input",data:{title:"input_0"}},{id:"input_1",type:"input",data:{title:"input_1"}},{id:"input_3",type:"input",data:{title:"input_3"}}]},{id:"end_0",type:"end",data:{title:"End"}}]},j={nodes:[{id:"start_0",type:"start",data:{title:"Start"},blocks:[]},{id:"loop_0",type:"loop",data:{title:"Loop"},blocks:[{id:"branch_0",type:"block",data:{title:"Branch 0"},blocks:[{id:"custom",type:"custom",data:{title:"Custom"}}]}]},{id:"end_0",type:"end",data:{title:"End"}}]},B={nodes:[{id:"start_0",type:"start",data:{title:"Start"},blocks:[]},{id:"dynamicSplit_0",type:"dynamicSplit",data:{title:"DynamicSplit"},blocks:[{id:"branch_0",type:"block",data:{title:"Branch 0"}},{id:"branch_1",type:"block",data:{title:"Branch 1"},blocks:[]}]},{id:"end_0",type:"end",data:{title:"End"}}]},N={condition:l,mindmap:{...{nodes:[{id:"multiInputs_0",type:"multiInputs",blocks:[{id:"input_0",type:"input",data:{title:"input_0"}},{id:"input_1",type:"input",data:{title:"input_1"}},{id:"input_3",type:"input",data:{title:"input_3"}}]},{id:"multiOutputs_0",type:"multiOutputs",data:{title:"mindNode_0"},blocks:[{id:"output_0",type:"output",data:{title:"output_0"}},{id:"multiOutputs_1",type:"multiOutputs",data:{title:"mindNode_1"},blocks:[{id:"output_1",type:"output",data:{title:"output_1"}},{id:"output_2",type:"output",data:{title:"output_2"}},{id:"output_3",type:"output",data:{title:"output_3"}}]},{id:"output_4",type:"output",data:{title:"output_4"}}]}]},defaultLayout:d.XPE.HORIZONTAL_FIXED_LAYOUT},tryCatch:x,dynamicSplit:B,loop:j,multiInputs:C,multiOutputs:v,slot:f};var w=o(184066),D=o(950731);function S(){let{history:t,playground:e}=(0,d.sX$)(),o=(0,d.erw)(),i=(0,d.JAk)(),[a,l]=(0,s.useState)(!1),[c,r]=(0,s.useState)(!1),p=(0,s.useCallback)(()=>{e.config.readonly=!e.config.readonly},[e]);return(0,s.useEffect)(()=>{let e=t.undoRedoService.onChange(()=>{l(t.canUndo()),r(t.canRedo())});return()=>e.dispose()},[t]),(0,s.useEffect)(()=>{let t=e.config.onReadonlyOrDisabledChange(()=>i());return()=>t.dispose()},[e]),(0,n.jsxs)(u.Space,{style:{position:"absolute",zIndex:10,bottom:16,left:16,display:"flex",gap:8},children:[(0,n.jsx)("button",{onClick:()=>o.zoomin(),children:"ZoomIn"}),(0,n.jsx)("button",{onClick:()=>o.zoomout(),children:"ZoomOut"}),(0,n.jsx)("button",{onClick:()=>o.fitView(),children:"Fitview"}),(0,n.jsx)("button",{onClick:()=>o.changeLayout(),children:"ChangeLayout"}),(0,n.jsx)("button",{onClick:()=>t.undo(),disabled:!a,children:"Undo"}),(0,n.jsx)("button",{onClick:()=>t.redo(),disabled:!c,children:"Redo"}),e.config.readonly?(0,n.jsx)(u.IconButton,{theme:"borderless",type:"tertiary",icon:(0,n.jsx)(w.Z,{}),onClick:p}):(0,n.jsx)(u.IconButton,{theme:"borderless",type:"tertiary",icon:(0,n.jsx)(D.Z,{}),onClick:p}),(0,n.jsxs)("span",{children:[Math.floor(100*o.zoom),"%"]})]})}let E=t=>{let{startDrag:e}=(0,d.cmt)(),{handleAdd:o,handleAddBranch:l}=h();return(0,n.jsxs)("div",{className:"demo-fixed-sidebar",children:[a.map(t=>{let d=t.type;return(0,n.jsx)("div",{className:"demo-fixed-card",onMouseDown:n=>(n.stopPropagation(),e(n,{dragJSON:t.onAdd(),onCreateNode:async(t,e)=>o(t,e)},{disableDragScroll:!0})),children:d},d)}),(0,n.jsx)("div",{className:"demo-fixed-card",onMouseDown:t=>(t.stopPropagation(),e(t,{dragJSON:{id:`branch_${(0,i.x0)(5)}`,type:"block",data:{title:"New Branch",content:""}},isBranch:!0,onCreateNode:async(t,e)=>l(t,e)},{disableDragScroll:!0})),children:"branch"},"branch")]})},O=()=>(0,n.jsx)("div",{style:{position:"absolute",left:16,bottom:51,zIndex:100,width:198},children:(0,n.jsx)(c.Zd,{containerStyles:{pointerEvents:"auto",position:"relative",top:"unset",right:"unset",bottom:"unset",left:"unset"},inactiveStyle:{opacity:1,scale:1,translateX:0,translateY:0}})}),L=new window.URL(window.location.href);function T(){let[t,e]=(0,s.useState)(L.searchParams.get("demo")??"condition"),o=(0,d.sX$)();return(0,s.useEffect)(()=>{let e=N[t];e&&(o.history.stop(),o.history.clear(),o.document.fromJSON(e),console.log(o.document.toString(!0)),o.history.start(),o.document.setLayout(e.defaultLayout||d.XPE.VERTICAL_FIXED_LAYOUT),L.searchParams.get("demo")&&(L.searchParams.set("demo",t),window.history.pushState({},"",`/?${L.searchParams.toString()}`)),setTimeout(()=>{o.playground.config.fitView(o.document.root.bounds,!0,40)},20))},[t]),(0,n.jsxs)("div",{style:{position:"absolute",zIndex:100},children:[(0,n.jsx)("label",{style:{marginRight:12},children:"Select Demo:"}),(0,n.jsx)("select",{style:{width:"180px",height:"32px",fontSize:16},onChange:t=>e(t.target.value),value:t,children:Object.keys(N).map(t=>(0,n.jsx)("option",{value:t,children:t},t))})]})}let I=t=>{var e;let o=(e=t.demo?N[t.demo]:l,(0,s.useMemo)(()=>({background:!0,readonly:!1,initialData:e,nodeRegistries:a,getNodeDefaultRegistry:t=>({type:t,meta:{defaultExpanded:!0},formMeta:{render:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.gNt,{name:"title",children:t=>{let{field:e}=t;return(0,n.jsx)("div",{className:"demo-fixed-node-title",children:e.value})}}),(0,n.jsx)("div",{className:"demo-fixed-node-content",children:(0,n.jsx)(d.gNt,{name:"content",children:(0,n.jsx)("input",{})})})]})}}),materials:{components:{...r.p,[d.kDE.ADDER]:b,[d.kDE.BRANCH_ADDER]:_,[d.kDE.SLOT_ADDER]:y},renderDefaultNode:k,renderTexts:{[d.oC4.LOOP_END_TEXT]:"loop end",[d.oC4.LOOP_TRAVERSE_TEXT]:"looping"}},dragdrop:{onDrop:(t,e)=>{},canDrop:(t,e)=>(console.log(">>> canDrop: ",e.isBranch,e.dropNode.id,e.dragNodes),!0)},nodeEngine:{enable:!0},history:{enable:!0,enableChangeNode:!0,onApply(t,e){console.log("auto save: ",t.document.toJSON(),e)}},onInit:t=>{console.log("---- Playground Init ----")},onAllLayersRendered:t=>{setTimeout(()=>{t.playground.config.fitView(t.document.root.bounds.pad(30))},10)},onDispose:()=>{console.log("---- Playground Dispose ----")},fromNodeJSON:(t,e)=>e,toNodeJSON:(t,e)=>e,plugins:()=>[(0,c.qP)({disableLayer:!0,enableDisplayAllNodes:!0,canvasStyle:{canvasWidth:182,canvasHeight:102,canvasPadding:50,canvasBackground:"rgba(245, 245, 245, 1)",canvasBorderRadius:10,viewportBackground:"rgba(235, 235, 235, 1)",viewportBorderRadius:4,viewportBorderColor:"rgba(201, 201, 201, 1)",viewportBorderWidth:1,viewportBorderDashLength:2,nodeColor:"rgba(255, 255, 255, 1)",nodeBorderRadius:2,nodeBorderWidth:.145,nodeBorderColor:"rgba(6, 7, 9, 0.10)",overlayColor:"rgba(255, 255, 255, 0)"}})]}),[]));return(0,n.jsxs)(d.g5f,{...o,children:[(0,n.jsx)("div",{className:"demo-fixed-container",children:(0,n.jsxs)("div",{className:"demo-fixed-layout",children:[t.hideTools?null:(0,n.jsx)(E,{}),(0,n.jsx)(d.R6T,{className:"demo-fixed-editor"})]})}),t.hideTools?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S,{}),(0,n.jsx)(T,{}),(0,n.jsx)(O,{})]})]})}}}]);