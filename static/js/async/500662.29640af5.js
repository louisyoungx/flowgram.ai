"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["500662"],{54721:function(e,s,r){r.r(s),r.d(s,{default:()=>c});var n=r(110239),i=r(437562),l=r(441332),a=r(321896),o=r(284128);function d(e){let s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",span:"span",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"jsoneditorwithvariables",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#jsoneditorwithvariables",children:"#"}),"JsonEditorWithVariables"]}),"\n",(0,n.jsxs)(s.p,{children:["JsonEditorWithVariables 是一个增强版的 JSON 编辑器，支持在 JSON 中插入变量引用。它基于 JsonCodeEditor 构建，集成了变量选择器和变量标签注入功能，使用户能够在 JSON 字符串中使用 ",(0,n.jsx)(s.code,{children:"{{variable}}"})," 语法引用变量。"]}),"\n",(0,n.jsxs)(s.h2,{id:"案例演示",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#案例演示",children:"#"}),"案例演示"]}),"\n",(0,n.jsxs)(s.h3,{id:"基本使用",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#基本使用",children:"#"}),"基本使用"]}),"\n",(0,n.jsx)(o.w,{}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"form-meta.tsx",children:(0,n.jsxs)(s.code,{className:"language-tsx",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { JsonEditorWithVariables } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <>"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FormHeader"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"any"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"> "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"name"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"json_editor_with_variables"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" defaultValue"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'`{ "a": {{start_0.str}} }`'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}>"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        {({ field }) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"JsonEditorWithVariables"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"            value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".value}"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"            onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{(value) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(value)}"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          />"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        )}"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Field"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </>"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"带变量的-json-示例",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#带变量的-json-示例",children:"#"}),"带变量的 JSON 示例"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-json",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'  "user_info"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "name"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "{{start_0.name}}"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'    "email"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "{{start_0.email}}"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"变量插入",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#变量插入",children:"#"}),"变量插入"]}),"\n",(0,n.jsxs)(s.p,{children:["在编辑器中输入 ",(0,n.jsx)(s.code,{children:"@"})," 字符可以触发变量选择器。"]}),"\n",(0,n.jsxs)(s.p,{children:["输入 ",(0,n.jsx)(s.code,{children:"@"})," 后会显示可用的变量列表，选择变量后会自动插入为 ",(0,n.jsx)(s.code,{children:"{{variable.name}}"})," 格式。"]}),"\n",(0,n.jsxs)(s.h2,{id:"api-参考",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#api-参考",children:"#"}),"API 参考"]}),"\n",(0,n.jsxs)(s.h3,{id:"jsoneditorwithvariables-props",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#jsoneditorwithvariables-props",children:"#"}),"JsonEditorWithVariables Props"]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"属性名"}),(0,n.jsx)(s.th,{children:"类型"}),(0,n.jsx)(s.th,{children:"默认值"}),(0,n.jsx)(s.th,{children:"描述"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"value"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"JSON 字符串内容"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"onChange"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"(value: string) => void"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"内容变化时的回调函数"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"theme"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"'dark' | 'light'"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"'light'"})}),(0,n.jsx)(s.td,{children:"编辑器主题"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"placeholder"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"占位符文本"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"activeLinePlaceholder"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"'按 @ 选择变量'"})}),(0,n.jsx)(s.td,{children:"当前行的占位提示"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"readonly"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"boolean"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"false"})}),(0,n.jsx)(s.td,{children:"是否为只读模式"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"options"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"Options"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"CodeMirror 配置选项"})]})]})]}),"\n",(0,n.jsxs)(s.h3,{id:"变量语法",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#变量语法",children:"#"}),"变量语法"]}),"\n",(0,n.jsx)(s.p,{children:"在 JSON 字符串中使用双花括号语法引用变量："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-json",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'  "key"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "{{variable.path}}"'})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsx)(s.p,{children:"支持的变量格式："}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"{{start_0.name}}"})," - 简单变量"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"{{start_0.address.city}}"})," - 嵌套属性"]}),"\n"]}),"\n",(0,n.jsxs)(s.h2,{id:"源码导读",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#源码导读",children:"#"}),"源码导读"]}),"\n",(0,n.jsx)(a.ZB,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/materials/form-materials/src/components/json-editor-with-variables"}),"\n",(0,n.jsx)(s.p,{children:"使用 CLI 命令可以复制源代码到本地："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsx)(s.code,{className:"language-bash",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" components/json-editor-with-variables"})]})})})}),"\n",(0,n.jsxs)(s.h3,{id:"目录结构讲解",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#目录结构讲解",children:"#"}),"目录结构讲解"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-txt",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"json-editor-with-variables/"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── index.tsx           # 懒加载导出文件"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── editor.tsx          # 主组件实现"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"└── README.md          # 组件说明文档"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"核心实现说明",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#核心实现说明",children:"#"}),"核心实现说明"]}),"\n",(0,n.jsxs)(s.h4,{id:"变量语法解析",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#变量语法解析",children:"#"}),"变量语法解析"]}),"\n",(0,n.jsx)(s.p,{children:"通过正则表达式解析 JSON 中的变量引用："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsx)(s.code,{className:"language-typescript",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" matches"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" findAllMatches"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(originalSource"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" /\\{\\{(["}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"^"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"\\}]"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:")\\}\\}/"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"g"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})]})})})}),"\n",(0,n.jsxs)(s.h4,{id:"变量选择器集成",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#变量选择器集成",children:"#"}),"变量选择器集成"]}),"\n",(0,n.jsxs)(s.p,{children:["集成 ",(0,n.jsx)(s.code,{children:"EditorVariableTree"})," 和 ",(0,n.jsx)(s.code,{children:"EditorVariableTagInject"})," 扩展："]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-typescript",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"EditorVariableTree triggerCharacters"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{TRIGGER_CHARACTERS} "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/>"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"EditorVariableTagInject "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/>"})]})]})})}),"\n",(0,n.jsxs)(s.h4,{id:"触发字符",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#触发字符",children:"#"}),"触发字符"]}),"\n",(0,n.jsxs)(s.p,{children:["使用 ",(0,n.jsx)(s.code,{children:"@"})," 作为变量选择的触发字符："]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsx)(s.code,{className:"language-typescript",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" TRIGGER_CHARACTERS"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"];"})]})})})}),"\n",(0,n.jsxs)(s.h3,{id:"使用到的-flowgram-api",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#使用到的-flowgram-api",children:"#"}),"使用到的 flowgram API"]}),"\n",(0,n.jsxs)(s.h4,{id:"flowgramaicoze-editor",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgramaicoze-editor",children:"#"}),"@flowgram.ai/coze-editor"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"JsonCodeEditor"}),": JSON 代码编辑器"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"transformerCreator"}),": 语法转换器创建器"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"EditorVariableTree"}),": 变量树选择器"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"EditorVariableTagInject"}),": 变量标签注入器"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Text"}),": 文本处理工具"]}),"\n"]}),"\n",(0,n.jsxs)(s.h4,{id:"flowgramaii18n",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#flowgramaii18n",children:"#"}),"@flowgram.ai/i18n"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"I18n"}),": 国际化支持"]}),"\n"]}),"\n",(0,n.jsxs)(s.h4,{id:"coze-editor-extensions-物料",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#coze-editor-extensions-物料",children:"#"}),"coze-editor-extensions 物料"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"EditorVariableTree"}),": 变量树选择触发"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"EditorVariableTagInject"}),": 变量标签展示"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"整体流程",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#整体流程",children:"#"}),"整体流程"]}),"\n",(0,n.jsx)(l.Z,{code:"graph TD\n    A[JsonEditorWithVariables 组件] --\x3e B[渲染 JsonCodeEditor]\n    B --\x3e C[加载 JSON 语法高亮]\n    B --\x3e D[集成变量扩展]\n\n    D --\x3e E[EditorVariableTree]\n    D --\x3e F[EditorVariableTagInject]\n\n    E --\x3e G[监听 @ 触发]\n    F --\x3e H[处理变量标签]\n\n    G --\x3e I[显示变量列表]\n    I --\x3e J[选择并插入变量]\n\n    H --\x3e L[渲染变量标签样式]\n\n    J --\x3e M[更新编辑器内容]",config:{}}),"\n",(0,n.jsxs)(s.h4,{id:"自定义触发字符",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#自定义触发字符",children:"#"}),"自定义触发字符"]}),"\n",(0,n.jsx)(s.p,{children:"可以通过扩展支持更多触发字符："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-typescript",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" CUSTOM_TRIGGERS"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '#'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '$'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"];"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"JsonCodeEditor"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  options"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    transformer"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" customTransformer"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"EditorVariableTree triggerCharacters"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{CUSTOM_TRIGGERS} "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/>"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"</"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"JsonCodeEditor"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})]})})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["zh%2Fmaterials%2Fcomponents%2Fjson-editor-with-variables.mdx"]={toc:[{id:"案例演示",text:"案例演示",depth:2},{id:"基本使用",text:"基本使用",depth:3},{id:"带变量的-json-示例",text:"带变量的 JSON 示例",depth:3},{id:"变量插入",text:"变量插入",depth:3},{id:"api-参考",text:"API 参考",depth:2},{id:"jsoneditorwithvariables-props",text:"JsonEditorWithVariables Props",depth:3},{id:"变量语法",text:"变量语法",depth:3},{id:"源码导读",text:"源码导读",depth:2},{id:"目录结构讲解",text:"目录结构讲解",depth:3},{id:"核心实现说明",text:"核心实现说明",depth:3},{id:"变量语法解析",text:"变量语法解析",depth:4},{id:"变量选择器集成",text:"变量选择器集成",depth:4},{id:"触发字符",text:"触发字符",depth:4},{id:"使用到的-flowgram-api",text:"使用到的 flowgram API",depth:3},{id:"flowgramaicoze-editor",text:"@flowgram.ai/coze-editor",depth:4},{id:"flowgramaii18n",text:"@flowgram.ai/i18n",depth:4},{id:"coze-editor-extensions-物料",text:"coze-editor-extensions 物料",depth:4},{id:"整体流程",text:"整体流程",depth:3},{id:"自定义触发字符",text:"自定义触发字符",depth:4}],title:"JsonEditorWithVariables",headingTitle:"JsonEditorWithVariables",frontmatter:{}}},284128:function(e,s,r){r.d(s,{w:()=>d});var n=r(110239),i=r(908600),l=r(916530),a=r(132288);let o=i.lazy(()=>Promise.all([r.e("386212"),r.e("443911"),r.e("767597"),r.e("838147"),r.e("942362"),r.e("800699"),r.e("428647"),r.e("533459"),r.e("666813"),r.e("174414"),r.e("289371"),r.e("642876")]).then(r.bind(r,694664)).then(e=>({default:e.JsonEditorWithVariables}))),d=()=>(0,n.jsx)(a.y,{filterEndNode:!0,formMeta:{render:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.p,{}),(0,n.jsx)(l.gNt,{name:"json_editor_with_variables",defaultValue:'{ "a": {{start_0.str}}}',children:e=>{let{field:s}=e;return(0,n.jsx)(o,{value:s.value,onChange:e=>s.onChange(e)})}})]})}})},132288:function(e,s,r){r.d(s,{p:()=>a,y:()=>o});var n=r(110239),i=r(908600);let l=i.lazy(()=>Promise.all([r.e("386212"),r.e("443911"),r.e("737443"),r.e("767597"),r.e("800699"),r.e("541460"),r.e("428647"),r.e("533459"),r.e("666813"),r.e("534505")]).then(r.bind(r,417587)).then(e=>({default:e.FreeFormMetaStoryBuilder}))),a=i.lazy(()=>Promise.all([r.e("386212"),r.e("443911"),r.e("737443"),r.e("767597"),r.e("800699"),r.e("541460"),r.e("428647"),r.e("533459"),r.e("666813"),r.e("534505")]).then(r.bind(r,417587)).then(e=>({default:e.FormHeader}))),o=e=>(0,n.jsx)("div",{style:{position:"relative",height:e.height||400},children:(0,n.jsx)(l,{...e})})}}]);