"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["475385"],{591718:function(e,t,r){r.r(t),r.d(t,{InputsPicker:()=>p,InputsTree:()=>m});var i=r(110239),n=r(908600),l=r(374488),s=r(111886),a=r(950454),o=r(11611),u=r(414682),c=r(617704),f=r(687252);function p(e){let{inputsValues:t,onSelect:r}=e,o=(0,a.rVg)(),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a.GwP.isArray(e.items)?u(e.items,t+1):{type:e.items,depth:t}},p=(e,t)=>{let r,i=null==e?void 0:e.type;if(a.GwP.isObject(i)&&(r=(i.properties||[]).map(e=>p(e,[...t,e.key])).filter(Boolean)),a.GwP.isArray(i)){let e=u(i);a.GwP.isObject(e.type)&&(r=(e.type.properties||[]).map(r=>p(r,[...t,...Array(e.depth).fill("[0]"),r.key])).filter(Boolean))}let n=t.map((e,t)=>"[0]"===e||0===t?e:`.${e}`).join("");return{key:n,label:(0,l.Z)(t),value:n,children:r}},h=(e,t)=>{let r=t.join(".");if(f.U.isFlowValue(e)){if(f.U.isRef(e)){let r=o.getByKeyPath(e.content||[]);if(r)return p(r,t)}return{key:r,value:r,label:(0,l.Z)(t)}}if((0,s.Z)(e))return{key:r,value:r,label:(0,l.Z)(t),children:Object.entries(e).map(e=>{let[r,i]=e;return h(i,[...t,r])}).filter(Boolean)}},m=(0,n.useMemo)(()=>Object.entries(t).map(e=>{let[t,r]=e;return h(r,[t])}).filter(Boolean),[]);return(0,i.jsx)(c.mp,{treeData:m,onSelect:e=>r(e)})}let h=["{","{}","@"];function m(e){let{inputsValues:t,triggerCharacters:r=h}=e,[l,s]=(0,n.useState)(""),[a,f]=(0,n.useState)(!1),[m,d]=(0,n.useState)(-1),g=(0,o.jE)();return(0,n.useEffect)(()=>{if(!g)return},[g,a]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.pf,{triggerCharacters:r,onOpenChange:function(e){d(e.state.selection.main.head),f(e.value)}}),(0,i.jsx)(c.J2,{visible:a,trigger:"custom",position:"topLeft",rePosKey:l,content:(0,i.jsx)("div",{style:{width:300,maxHeight:300,overflowY:"auto"},children:(0,i.jsx)(p,{inputsValues:t,onSelect:e=>{!function(e){let t=(0,u.m4)(g.$view.state);if(!t)return;let{from:r,to:i}=t;for(;"{"===g.$view.state.doc.sliceString(r-1,r);)r--;for(;"}"===g.$view.state.doc.sliceString(i,i+1);)i++;g.replaceText({...t,text:"{{"+e+"}}"}),f(!1)}(e)}})}),children:(0,i.jsx)(u.Iq,{position:m,onChange:()=>s(String(Math.random()))})})]})}}}]);