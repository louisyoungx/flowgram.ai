"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["540579"],{956738:function(e,s,r){r.r(s),r.d(s,{default:()=>d});var n=r(110239),i=r(437562),l=r(944529),a=r(259239),o=r(427183);function c(e){let s={a:"a",code:"code",div:"div",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"cozeeditorextensions",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#cozeeditorextensions",children:"#"}),"CozeEditorExtensions"]}),"\n",(0,n.jsxs)(s.p,{children:["CozeEditorExtensions 是一组基于 ",(0,n.jsx)(s.a,{href:"https://github.com/coze-dev/rush-arch/tree/main/packages/text-editor",rel:"noopener noreferrer",target:"_blank",children:"coze-editor"})," 的功能扩展，提供变量、Inputs 选择器与变量标签回显能力。"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"EditorVariableTree"}),"：监听 ",(0,n.jsx)(s.code,{children:"@"}),"/",(0,n.jsx)(s.code,{children:"{"})," 等触发字符，弹出可用变量树并将选中项写入编辑器。"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"EditorVariableTagInject"}),"：对 ",(0,n.jsx)(s.code,{children:"{{variable.path}}"})," 文本进行标记渲染，展示变量图标、标题与回显提示。"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"EditorInputsTree"}),"：基于节点 ",(0,n.jsx)(s.code,{children:"inputsValues"})," 构造层级树，支持在提示词中插入 ",(0,n.jsx)(s.code,{children:"{{inputs.xxx}}"})," 引用。"]}),"\n"]}),"\n",(0,n.jsxs)(s.h2,{id:"案例演示",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#案例演示",children:"#"}),"案例演示"]}),"\n",(0,n.jsxs)(s.h3,{id:"变量树--标签回显",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#变量树--标签回显",children:"#"}),"变量树 + 标签回显"]}),"\n",(0,n.jsx)(a.w,{}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"prompt-editor-with-extensions.tsx",children:(0,n.jsxs)(s.code,{className:"language-tsx",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  PromptEditor"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  EditorVariableTree"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  EditorVariableTagInject"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  EditorInputsTree"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"} "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" formMeta"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  render"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"PromptEditor"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{value} "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{onChange}>"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"EditorVariableTree"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" triggerCharacters"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"TRIGGER_CHARACTERS"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"} />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"EditorVariableTagInject"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"PromptEditor"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  );"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,n.jsx)(s.div,{className:"rspress-directive-title",children:"触发方式"}),(0,n.jsx)(s.div,{className:"rspress-directive-content",children:(0,n.jsxs)(s.p,{children:["\n",(0,n.jsx)(s.code,{children:"EditorVariableTree"})," 默认监听 ",(0,n.jsx)(s.code,{children:"{"}),"、",(0,n.jsx)(s.code,{children:"{{"})," 和 ",(0,n.jsx)(s.code,{children:"@"}),"，你可以通过 ",(0,n.jsx)(s.code,{children:"triggerCharacters"})," 自定义触发字符。"]})})]}),"\n",(0,n.jsxs)(s.h3,{id:"节点-inputs-引用",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#节点-inputs-引用",children:"#"}),"节点 Inputs 引用"]}),"\n",(0,n.jsx)(o.w,{}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"prompt-editor-with-extensions.tsx",children:(0,n.jsxs)(s.code,{className:"language-tsx",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  PromptEditor"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  EditorVariableTree"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  EditorVariableTagInject"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  EditorInputsTree"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"} "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" function"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" PromptEditorWithExtensions"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"({ value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" inputsValues }) {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"PromptEditor"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{value} "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"onChange"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{onChange}>"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"EditorInputsTree"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" inputsValues"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{inputsValues} />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"PromptEditor"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  );"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"渲染键与二次扩展",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#渲染键与二次扩展",children:"#"}),"渲染键与二次扩展"]}),"\n",(0,n.jsxs)(s.p,{children:["CozeEditorExtensions 通过 ",(0,n.jsx)(s.a,{href:"/materials/common/inject-material.html",children:(0,n.jsx)(s.code,{children:"createInjectMaterial"})})," 声明了固定的 ",(0,n.jsx)(s.code,{children:"renderKey"}),"："]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"EditorVariableTree.renderKey = 'EditorVariableTree'"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"EditorVariableTagInject.renderKey = 'EditorVariableTagInject'"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"EditorInputsTree.renderKey = 'EditorInputsTree'"})}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["你可以在 ",(0,n.jsx)(s.code,{children:"use-editor-props"})," 中注册同名渲染器，以替换默认行为。例如自定义变量选择面板："]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",title:"override-variable-tree.tsx",children:(0,n.jsxs)(s.code,{className:"language-tsx",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { useEditorProps } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/editor'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { EditorVariableTree } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@flowgram.ai/form-materials'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { CustomVariableTree } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" './custom-variable-tree'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:";"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" function"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" useCustomEditorProps"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"() {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" useEditorProps"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"({"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    materials"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      components"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        ["}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"EditorVariableTree"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".renderKey"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"]"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" CustomVariableTree"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      }"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  });"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsxs)(s.h2,{id:"api-参考",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#api-参考",children:"#"}),"API 参考"]}),"\n",(0,n.jsxs)(s.h3,{id:"editorvariabletree-props",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#editorvariabletree-props",children:"#"}),"EditorVariableTree Props"]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"属性名"}),(0,n.jsx)(s.th,{children:"类型"}),(0,n.jsx)(s.th,{children:"默认值"}),(0,n.jsx)(s.th,{children:"描述"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"triggerCharacters"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string[]"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"['{', '{}', '@']"})}),(0,n.jsx)(s.td,{children:"触发变量树弹出的字符集"})]})})]}),"\n",(0,n.jsxs)(s.h3,{id:"editorvariabletaginject-props",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#editorvariabletaginject-props",children:"#"}),"EditorVariableTagInject Props"]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"属性名"}),(0,n.jsx)(s.th,{children:"类型"}),(0,n.jsx)(s.th,{children:"默认值"}),(0,n.jsx)(s.th,{children:"描述"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.em,{children:"无"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsx)(s.td,{children:"组件无额外属性，渲染即生效"})]})})]}),"\n",(0,n.jsxs)(s.h3,{id:"editorinputstree-props",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#editorinputstree-props",children:"#"}),"EditorInputsTree Props"]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"属性名"}),(0,n.jsx)(s.th,{children:"类型"}),(0,n.jsx)(s.th,{children:"默认值"}),(0,n.jsx)(s.th,{children:"描述"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"inputsValues"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"IInputsValues"})}),(0,n.jsx)(s.td,{children:"-"}),(0,n.jsxs)(s.td,{children:["节点 Inputs 的键值数据，支持 ",(0,n.jsx)(s.code,{children:"FlowValue"})," 引用"]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"triggerCharacters"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"string[]"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"['{', '{}', '@']"})}),(0,n.jsx)(s.td,{children:"触发 Inputs 选择器的字符集"})]})]})]}),"\n",(0,n.jsxs)(s.h2,{id:"源码导读",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#源码导读",children:"#"}),"源码导读"]}),"\n",(0,n.jsx)(l.ZB,{href:"https://github.com/bytedance/flowgram.ai/tree/main/packages/materials/form-materials/src/components/coze-editor-extensions"}),"\n",(0,n.jsx)(s.p,{children:"使用 CLI 命令可以复制源代码到本地："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsx)(s.code,{className:"language-bash",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"npx"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" @flowgram.ai/cli@latest"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" materials"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:" components/coze-editor-extensions"})]})})})}),"\n",(0,n.jsxs)(s.h3,{id:"目录结构讲解",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#目录结构讲解",children:"#"}),"目录结构讲解"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables has-highlighted",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",children:(0,n.jsxs)(s.code,{className:"language-txt",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"coze-editor-extensions/"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── index.tsx                 # 导出可注入物料"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"├── extensions/"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"│   ├── inputs-tree.tsx       # Inputs Tree 实现"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"│   ├── variable-tag.tsx      # 变量标签渲染"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"│   └── variable-tree.tsx     # 变量树选择器"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"└── styles.css                # 标签样式与弹窗样式"})})]})})}),"\n",(0,n.jsxs)(s.h3,{id:"核心实现说明",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#核心实现说明",children:"#"}),"核心实现说明"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"EditorVariableTree"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["弹窗定位与滚动同步：",(0,n.jsx)(s.code,{children:"Mention"})," + ",(0,n.jsx)(s.code,{children:"PositionMirror"})," 组合确保 Popover 始终贴合光标位置，滚动时会通过 ",(0,n.jsx)(s.code,{children:"rePosKey"})," 触发重新定位"]}),"\n",(0,n.jsxs)(s.li,{children:["变量树数据来源：",(0,n.jsx)(s.code,{children:"useVariableTree"})," 读取 ",(0,n.jsx)(s.code,{children:"Scope.available"})," 中注册的变量，自动应用 schema 过滤、禁用状态和图标"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"EditorVariableTagInject"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["标签渲染与订阅：使用 CodeMirror ",(0,n.jsx)(s.code,{children:"MatchDecorator"})," 将 ",(0,n.jsx)(s.code,{children:"{{xxx}}"})," 文本替换为 ",(0,n.jsx)(s.code,{children:"Tag"})," 小部件，并订阅变量标题/Icon 更新，实现实时回显"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"EditorInputsTree"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Inputs 树构造：支持 ",(0,n.jsx)(s.code,{children:"FlowValue"})," 与普通对象，递归生成层级节点，并在插入前统一格式化为 ",(0,n.jsx)(s.code,{children:"{{path}}"})]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"依赖梳理",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#依赖梳理",children:"#"}),"依赖梳理"]}),"\n",(0,n.jsxs)(s.h4,{id:"其他物料",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#其他物料",children:"#"}),"其他物料"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"/materials/common/inject-material.html",children:(0,n.jsx)(s.strong,{children:"InjectMaterial"})})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"createInjectMaterial"}),": 创建可注入的物料组件"]}),"\n"]}),"\n",(0,n.jsxs)(s.h4,{id:"第三方库",children:[(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#第三方库",children:"#"}),"第三方库"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://github.com/coze-dev/rush-arch/tree/main/packages/text-editor",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.strong,{children:"coze-editor"})})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"基础编辑器组件"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://codemirror.net/docs/ref/#search.MatchDecorator",rel:"noopener noreferrer",target:"_blank",children:(0,n.jsx)(s.strong,{children:"CodeMirror MatchDecorator"})})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"用于变量标签的文本匹配和替换"}),"\n"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["zh%2Fmaterials%2Fcomponents%2Fcoze-editor-extensions.mdx"]={toc:[{id:"案例演示",text:"案例演示",depth:2},{id:"变量树--标签回显",text:"变量树 + 标签回显",depth:3},{id:"节点-inputs-引用",text:"节点 Inputs 引用",depth:3},{id:"渲染键与二次扩展",text:"渲染键与二次扩展",depth:3},{id:"api-参考",text:"API 参考",depth:2},{id:"editorvariabletree-props",text:"EditorVariableTree Props",depth:3},{id:"editorvariabletaginject-props",text:"EditorVariableTagInject Props",depth:3},{id:"editorinputstree-props",text:"EditorInputsTree Props",depth:3},{id:"源码导读",text:"源码导读",depth:2},{id:"目录结构讲解",text:"目录结构讲解",depth:3},{id:"核心实现说明",text:"核心实现说明",depth:3},{id:"依赖梳理",text:"依赖梳理",depth:3},{id:"其他物料",text:"其他物料",depth:4},{id:"第三方库",text:"第三方库",depth:4}],title:"CozeEditorExtensions",headingTitle:"CozeEditorExtensions",frontmatter:{}}},259239:function(e,s,r){r.d(s,{S:()=>h,w:()=>d});var n=r(110239),i=r(908600),l=r(640898),a=r(132288);let o=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914"),r.e("227692"),r.e("838147"),r.e("933451"),r.e("942362"),r.e("917828"),r.e("428647"),r.e("135691"),r.e("46854"),r.e("232558"),r.e("673693"),r.e("263869")]).then(r.bind(r,261548)).then(e=>({default:e.PromptEditorWithVariables}))),c=i.lazy(()=>Promise.all([r.e("386212"),r.e("133914"),r.e("227692"),r.e("838147"),r.e("933451"),r.e("942362"),r.e("917828"),r.e("428647"),r.e("135691"),r.e("46854"),r.e("232558"),r.e("673693"),r.e("263869")]).then(r.bind(r,261548)).then(e=>({default:e.VariableSelectorProvider}))),d=()=>(0,n.jsx)(a.y,{filterEndNode:!0,formMeta:{render:()=>(0,n.jsxs)("div",{style:{width:400},children:[(0,n.jsx)(a.p,{}),(0,n.jsx)(l.gNt,{name:"prompt_editor",defaultValue:{type:"template",content:`# Role
You are a helpful assistant

# Query
{{start_0.str}}`},children:e=>{let{field:s}=e;return(0,n.jsx)(o,{value:s.value,onChange:e=>s.onChange(e)})}})]})}}),t={type:"string"},h=()=>(0,n.jsx)(a.y,{filterEndNode:!0,formMeta:{render:()=>(0,n.jsxs)("div",{style:{width:400},children:[(0,n.jsx)(a.p,{}),(0,n.jsx)(c,{includeSchema:t,children:(0,n.jsx)(l.gNt,{name:"prompt_editor",defaultValue:{type:"template",content:`# Role
You are a helpful assistant`},children:e=>{let{field:s}=e;return(0,n.jsx)(o,{value:s.value,onChange:e=>s.onChange(e)})}})})]})}})}}]);