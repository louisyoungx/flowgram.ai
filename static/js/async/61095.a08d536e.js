"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["61095"],{862107:function(e,t,o){o.r(t),o.d(t,{DemoFixedLayout:()=>t3});var i,n=o(110239),r=o(916530),l=o(433210),a=o(261513);let s=a.ZP.span`
  font-size: 12px;
  color: red;
`,d=a.ZP.span`
  font-size: 12px;
  color: orange;
`,c=e=>{let{errors:t,warnings:o}=e,i=e=>e?e.map(e=>(0,n.jsx)("span",{children:e.message},e.name)):null;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)(s,{children:i(t)})}),(0,n.jsx)("div",{children:(0,n.jsx)(d,{children:i(o)})})]})};var g=o(908600),u=o(658639),p=o(330893),A=o(579962),M=o(461932),y=o(438024),x=o(893740),j=o(832176),I=Object.defineProperty,h=Object.getOwnPropertyDescriptor,m=(e,t,o,i)=>{for(var n,r=i>1?void 0:i?h(t,o):t,l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i?n(t,o,r):n(r))||r);return i&&r&&I(t,o,r),r},N={paddingWithNote:50,padding:10,paddingWithAddLabel:20,headerHeight:20},D=e=>{let{groupNode:t,GroupNode:o,GroupBoxHeader:i}=e,n=(0,x.km)().getData(A.Lz).node,r=(0,x.G2)(A.pQ),l=A.Uy.create(t),[a,s]=(0,g.useState)(0),[d,c]=(0,g.useState)(!0),[u,p]=(0,g.useState)((null==l?void 0:l.collapsed)??!1),M=(0,g.useCallback)(async()=>{c(!0),s(a+1),await (0,j.gw)(50),s(a+1),c(!1)},[a]);if((0,g.useEffect)(()=>{let e=r.renderTree.onTreeChange(()=>{(null==l?void 0:l.collapsed)!==u&&(p((null==l?void 0:l.collapsed)??!1),M())});return()=>{e.dispose()}},[a]),(0,g.useEffect)(()=>{l&&!l.collapsed&&M()},[]),!l)return g.createElement(g.Fragment,null);let y=g.createElement(o,{key:a,groupNode:t,groupController:l}),I=g.createElement(i,{key:a,groupController:l,groupNode:t});if(l.collapsed)return Object.assign(n.style,{display:"block",zIndex:"0",width:"auto",height:"auto"}),y;if(d)return g.createElement(g.Fragment,null);{let e=l.bounds,t={width:`${e.width}px`};return Object.assign(n.style,t),I}},C=e=>{let{groupNode:t}=e,o=A.Uy.create(t),i=o.bounds,{hover:n,ref:r}=(()=>{let e=(0,g.useRef)(null),[t,o]=(0,g.useState)(!1),i=t=>{if(!e.current)return;let{left:i,top:n,right:r,bottom:l}=e.current.getBoundingClientRect();o(t.clientX>=i&&t.clientX<=r&&t.clientY>=n&&t.clientY<=l)};return(0,g.useEffect)(()=>(window.addEventListener("mousemove",i),()=>{window.removeEventListener("mousemove",i)}),[]),{hover:t,ref:e}})(),l={position:"absolute",left:i.left,top:i.top,width:i.width,height:i.height},a={borderRadius:10,zIndex:-1,outline:`${n?3:1}px solid rgb(97, 69, 211)`,backgroundColor:"rgb(236 233 247)"},s=e.backgroundStyle?e.backgroundStyle(o):a;return((0,g.useEffect)(()=>{o.hovered=n},[n]),!o||o.collapsed)?g.createElement(g.Fragment,null):g.createElement("div",{className:"gedit-group-box","data-group-id":t.id},g.createElement("div",{className:"gedit-group-background",ref:r,style:{...l,...s}}))},b=class extends x.mh{onZoom(e){this.node.style.transform=`scale(${e})`}render(){return this.documentTransformer.loading?g.createElement(g.Fragment,null):(this.documentTransformer.refresh(),g.createElement(g.Fragment,null,this.renderGroups()))}renderGroups(){let e=this.renderer||C;return g.createElement(g.Fragment,null,this.groups.map(t=>g.createElement(e,{key:t.groupNode.id,groupNode:t.groupNode,backgroundStyle:this.options.groupBoxStyle})))}get groups(){return this.groupService.getAllGroups()}get renderer(){var e;return null==(e=this.rendererRegistry.tryToGetRendererComponent("group_box"))?void 0:e.renderer}constructor(){super(),this.className="gedit-groups-layer",this.node=j.xF.createDivWithClass(this.className),this.node.style.zIndex="0"}};m([(0,M.f3)(A.pQ)],b.prototype,"document",2),m([(0,M.f3)(y.Rf)],b.prototype,"rendererRegistry",2),m([(0,M.f3)(A.QU)],b.prototype,"groupService",2),m([(0,x.O0)(A.Vl)],b.prototype,"documentTransformer",2),m([(0,x.aI)(A.GA,A.Lz)],b.prototype,"renderStates",2),m([(0,x.aI)(A.GA,A.eG)],b.prototype,"transforms",2),b=m([(0,M.b2)()],b);var T={type:A.Sy.GROUP,meta:{exportJSON:!0,renderKey:"group_render",positionConfig:N,padding:e=>{let t=A.Uy.create(e.entity);return!t||t.collapsed||0===t.nodes.length?{top:0,bottom:0,left:0,right:0}:e.entity.isVertical?{top:N.paddingWithNote,bottom:N.paddingWithAddLabel,left:N.padding,right:N.padding}:{top:N.paddingWithNote,bottom:N.padding,left:N.padding,right:N.paddingWithAddLabel}}},getLines(e){let{transform:t}=e,o=[];return t.firstChild&&o.push({type:A.IG.STRAIGHT_LINE,from:t.inputPoint,to:t.firstChild.inputPoint}),t.next?o.push({type:A.IG.STRAIGHT_LINE,from:t.outputPoint,to:t.next.inputPoint}):o.push({type:A.IG.STRAIGHT_LINE,from:t.outputPoint,to:t.parent.outputPoint}),o},getDelta(e){let t=A.Uy.create(e.entity);if(t&&!t.collapsed)return e.entity.isVertical?{x:0,y:N.paddingWithNote}:{x:N.padding,y:0}},getInputPoint(e){let t=e.firstChild;return t?e.entity.isVertical?{x:t.inputPoint.x,y:e.bounds.topCenter.y}:{x:e.bounds.leftCenter.x,y:t.inputPoint.y}:e.defaultInputPoint},getOutputPoint(e){let t=e.lastChild;return t?e.entity.isVertical?{x:t.outputPoint.x,y:t.outputPoint.y+N.paddingWithAddLabel/2}:{x:t.outputPoint.x+N.paddingWithAddLabel/2,y:t.outputPoint.y}:e.defaultOutputPoint},getLabels(e){let{transform:t}=e;return t.next?t.entity.isVertical?[{offset:j.E9.getMiddlePoint(j.E9.move(t.outputPoint,{x:0,y:N.paddingWithAddLabel/2}),t.next.inputPoint),type:A.nx.ADDER_LABEL}]:[{offset:j.E9.getMiddlePoint(j.E9.move(t.outputPoint,{x:N.paddingWithAddLabel/2,y:0}),t.next.inputPoint),type:A.nx.ADDER_LABEL}]:[{offset:t.parent.outputPoint,type:A.nx.ADDER_LABEL}]},getOriginDeltaY(e){let{children:t}=e;return 0===t.length?-e.size.height*e.origin.y:-e.size.height*e.origin.y-N.paddingWithNote}},f={registerGroupNode:e=>{e.get(A.pQ).registerFlowNodes(T)},registerRender:(e,t)=>{e.get(y.Rf).registerReactComponent("group_render",e=>g.createElement(D,{groupNode:e.node,GroupNode:t.components.GroupNode,GroupBoxHeader:t.components.GroupBoxHeader}))},registerLayer:(e,t)=>{e.playground.registerLayer(b,t)},registerCleanGroups:(e,t)=>{let o=e.get(A.QU);e.get(A.pQ).originTree.onTreeChange(()=>{setTimeout(()=>{o.getAllGroups().forEach(e=>{(null==e?void 0:e.nodes.length)===0&&e.groupNode.pre&&o.deleteGroup(e.groupNode)})},0)})}},v=(0,x.M1)({onInit:(e,t)=>{let{registers:o={}}=t;Object.entries(f).forEach(i=>{let[n,r]=i,l=o[n];if(!1!==l){if("function"==typeof l)return void l(e,t);r(e,t)}})}}),z=o(152440),w=o(245803);let L=async e=>{let t="";t=await e.readText()||"";try{return JSON.parse(t)}catch(e){return""}},E=async(e,t)=>{let o=JSON.stringify(e);if(await navigator.clipboard.readText()!==o){if(navigator.clipboard&&window.isSecureContext){await navigator.clipboard.writeText(o);let e=new Event("onchange");e.value=o,navigator.clipboard.dispatchEvent(e)}else{let e=document.createElement("textarea");e.value=o,e.style.display="absolute",e.style.left="-99999999px",document.body.prepend(e),e.select();try{document.execCommand("copy")}catch(e){console.log(e)}finally{e.remove()}}t.writeText(o)}};var Q=((i={}).COPY="COPY",i.PASTE="PASTE",i.CUT="CUT",i.GROUP="GROUP",i.UNGROUP="UNGROUP",i.COLLAPSE="COLLPASE",i.EXPAND="EXPAND",i.DELETE="DELETE",i.ZOOM_IN="ZOOM_IN",i.ZOOM_OUT="ZOOM_OUT",i.RESET_ZOOM="RESET_ZOOM",i.SELECT_ALL="SELECT_ALL",i.CANCEL_SELECT="CANCEL_SELECT",i);let k=[e=>{let t=e.selection,o=e.clipboard;return{commandId:Q.COPY,shortcuts:["meta c","ctrl c"],isEnabled:o=>((null==t?void 0:t.selection.length)>0||o instanceof r.GAy)&&!e.playground.config.readonlyOrDisabled,execute:e=>{E((e instanceof r.GAy?[e]:t.selection.filter(e=>e instanceof r.GAy)).map(e=>({...e.toJSON(),id:`${e.flowNodeType}_${(0,l.x0)()}`})),o),w.FN.success({content:"Copied. You can move to any [+] to paste."})}}},e=>{let t=e.selection,o=e.get(r.HoL);return{commandId:Q.CUT,commandDetail:{label:"Cut"},shortcuts:["meta x","ctrl x"],isEnabled:()=>t.selection.length>0&&!e.playground.config.readonlyOrDisabled,execute:()=>{w.FN.success({content:"Cut. You can move to any [+] to paste."}),o.executeCommand(Q.DELETE)}}},e=>({commandId:Q.SELECT_ALL,commandDetail:{label:"Select All"},shortcuts:["meta a","ctrl a"],isEnabled:()=>!e.playground.config.readonlyOrDisabled,execute:()=>{let t=(e.document.root.children||[]).filter(e=>"start"!==e.flowNodeType&&"end"!==e.flowNodeType);e.playground.selectionService.selection=t}}),e=>({commandId:Q.CANCEL_SELECT,commandDetail:{label:"Cancel Select"},shortcuts:["esc"],execute:()=>{e.playground.selectionService.selection=[]}}),e=>{let t=e.playground.config;return{commandId:Q.ZOOM_IN,shortcuts:["meta =","ctrl ="],execute:()=>{t.zoomin()}}},e=>{let t=e.playground.config;return{commandId:Q.ZOOM_OUT,shortcuts:["meta -","ctrl -"],execute:()=>{t.zoomout()}}},e=>({commandId:Q.RESET_ZOOM,commandDetail:{label:"Reset Zoom"},shortcuts:["meta 0","ctrl 0"],execute:()=>{e.playground.config.updateZoom(1)}}),e=>({commandId:Q.GROUP,commandDetail:{label:"Create Group"},shortcuts:["meta g","ctrl g"],isEnabled:()=>!e.playground.config.readonlyOrDisabled,execute:()=>{let t=e.get(r.QUv),o=e.playground.selectionService;t.createGroup(o.selection.filter(e=>e instanceof r.GAy)),e.playground.selectionService.selection=[]}}),e=>({commandId:Q.COLLAPSE,commandDetail:{label:"Collapse"},shortcuts:["meta alt openbracket","ctrl alt openbracket"],isEnabled:()=>!e.playground.config.readonlyOrDisabled,execute:()=>{e.selection.selection.filter(e=>e instanceof r.GAy).map(e=>[e,...e.allCollapsedChildren]).flat().forEach(e=>{let t=e.getData(r.LzJ);e.firstChild&&[r.SyX.BLOCK_ICON,r.SyX.BLOCK_ORDER_ICON].includes(e.firstChild.flowNodeType)&&(e.collapsed=!0),t.expanded=!1})}}),e=>({commandId:Q.EXPAND,commandDetail:{label:"Expand"},shortcuts:["meta alt closebracket","ctrol alt openbracket"],isEnabled:()=>!e.playground.config.readonlyOrDisabled,execute:()=>{e.selection.selection.filter(e=>e instanceof r.GAy).map(e=>[e,...e.allCollapsedChildren]).flat().forEach(e=>{let t=e.getData(r.LzJ);e.firstChild&&[r.SyX.BLOCK_ICON,r.SyX.BLOCK_ORDER_ICON].includes(e.firstChild.flowNodeType)&&(e.collapsed=!1),t.expanded=!0})}})];var O=o(549207);class S{save(){console.log(this.document.toJSON())}}(0,O.gn)([(0,r.f3M)(r.XM6),(0,O.w6)("design:type",void 0===r.XM6?Object:r.XM6)],S.prototype,"ctx",void 0),(0,O.gn)([(0,r.f3M)(r.z2R),(0,O.w6)("design:type",void 0===r.z2R?Object:r.z2R)],S.prototype,"selectionService",void 0),(0,O.gn)([(0,r.f3M)(r.XQj),(0,O.w6)("design:type",void 0===r.XQj?Object:r.XQj)],S.prototype,"playground",void 0),(0,O.gn)([(0,r.f3M)(r.pQ4),(0,O.w6)("design:type",void 0===r.pQ4?Object:r.pQ4)],S.prototype,"document",void 0),S=(0,O.gn)([(0,r.b2C)()],S);var Z=o(647314),B=o(253718),Y=o(929060),P=o(478236),R=o(875143),G=o(297225);let U=e=>(0,g.forwardRef)((t,o)=>(0,n.jsx)(G.ZPm,{svg:e,...t,ref:o})),V=U((0,n.jsx)(()=>(0,n.jsx)("svg",{className:"icon",width:"16px",height:"16px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M341.333333 341.333333v170.666667h213.333334V341.333333H341.333333M42.666667 42.666667h170.666666v42.666666h597.333334V42.666667h170.666666v170.666666h-42.666666v597.333334h42.666666v170.666666h-170.666666v-42.666666H213.333333v42.666666H42.666667v-170.666666h42.666666V213.333333H42.666667V42.666667m170.666666 768v42.666666h597.333334v-42.666666h42.666666V213.333333h-42.666666V170.666667H213.333333v42.666666H170.666667v597.333334h42.666666M256 256h384v170.666667h128v341.333333H341.333333v-170.666667H256V256m384 341.333333h-213.333333v85.333334h256v-170.666667h-42.666667v85.333333z"})}),{})),F=U((0,n.jsx)(()=>(0,n.jsx)("svg",{className:"icon",width:"16px",height:"16px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M85.333333 85.333333 256 85.333333 256 128 554.666667 128 554.666667 85.333333 725.333333 85.333333 725.333333 256 682.666667 256 682.666667 384 768 384 768 341.333333 938.666667 341.333333 938.666667 512 896 512 896 768 938.666667 768 938.666667 938.666667 768 938.666667 768 896 512 896 512 938.666667 341.333333 938.666667 341.333333 768 384 768 384 682.666667 256 682.666667 256 725.333333 85.333333 725.333333 85.333333 554.666667 128 554.666667 128 256 85.333333 256 85.333333 85.333333M768 512 768 469.333333 682.666667 469.333333 682.666667 554.666667 725.333333 554.666667 725.333333 725.333333 554.666667 725.333333 554.666667 682.666667 469.333333 682.666667 469.333333 768 512 768 512 810.666667 768 810.666667 768 768 810.666667 768 810.666667 512 768 512M554.666667 256 554.666667 213.333333 256 213.333333 256 256 213.333333 256 213.333333 554.666667 256 554.666667 256 597.333333 384 597.333333 384 512 341.333333 512 341.333333 341.333333 512 341.333333 512 384 597.333333 384 597.333333 256 554.666667 256M512 512 469.333333 512 469.333333 597.333333 554.666667 597.333333 554.666667 554.666667 597.333333 554.666667 597.333333 469.333333 512 469.333333 512 512Z"})}),{})),H=e=>{let{groupNode:t,groupController:o,visible:i,style:l={}}=e,a=(0,r.G2Z)(r.QUv),{operation:s,playground:d,clipboard:c}=(0,r.sX$)(),{startDrag:g}=(0,r.cmt)(),u={cursor:"pointer",height:24};return d.config.readonly?null:(0,n.jsx)("div",{style:{display:"flex",opacity:+!!i,gap:5,paddingBottom:5,color:"rgb(97, 69, 211)",...l},onMouseDown:e=>{e.stopPropagation()},children:(0,n.jsxs)(w.hE,{size:"small",theme:"borderless",style:{display:"flex",flexWrap:"nowrap"},children:[(0,n.jsx)(w.u,{content:"Drag",children:(0,n.jsx)(w.zx,{style:{...u,cursor:"grab"},icon:(0,n.jsx)(Z.Z,{}),type:"primary",theme:"borderless",onMouseDown:e=>{e.stopPropagation(),g(e,{dragStartEntity:t,dragEntities:[t]})}})}),(0,n.jsx)(w.u,{content:(null==o?void 0:o.collapsed)?"Expand":"Collapse",children:(0,n.jsx)(w.zx,{style:u,icon:(null==o?void 0:o.collapsed)?(0,n.jsx)(B.Z,{}):(0,n.jsx)(Y.Z,{}),type:"primary",theme:"borderless",onClick:e=>{o&&(e.stopPropagation(),o.collapsed?o.expand():o.collapse())}})}),(0,n.jsx)(w.u,{content:"Ungroup",children:(0,n.jsx)(w.zx,{style:u,icon:(0,n.jsx)(F,{}),type:"primary",theme:"borderless",onClick:()=>{a.ungroup(t)}})}),(0,n.jsx)(w.u,{content:"Copy",children:(0,n.jsx)(w.zx,{icon:(0,n.jsx)(P.Z,{}),style:u,type:"primary",theme:"borderless",onClick:()=>{E([t.toJSON()],c),w.FN.success({content:"Copied. You can move to any [+] to paste."})}})}),(0,n.jsx)(w.u,{content:"Delete",children:(0,n.jsx)(w.zx,{style:u,type:"primary",theme:"borderless",icon:(0,n.jsx)(R.Z,{}),onClick:()=>{s.deleteNode(t)}})})]})})},W=e=>{let{value:t,onChange:o,onBlur:i,editing:r,onFocus:l,autoSize:a=!0,...s}=e,[d,c]=(0,g.useState)(t),u=(0,g.useRef)(null),p=(0,g.useCallback)(()=>{o(d),null==i||i()},[d,o]);return(0,g.useEffect)(()=>{c(t)},[t]),(0,g.useEffect)(()=>{if(u.current&&r){var e;null==(e=u.current)||e.focus()}},[r]),(0,n.jsx)(w.Kx,{...s,ref:u,value:d,onChange:e=>{c(e)},onEnterPress:p,onBlur:()=>{null==i||i(),null==p||p()},onFocus:l,autosize:a,rows:1,className:"base-textarea"})};o(311053);let J=a.ZP.div`
  width: 100%;
`,X=e=>{let{value:t,onChange:o,onEditingChange:i,readonly:r,autoSize:l,placeholder:a="",style:s={}}=e,[d,c]=(0,g.useState)(!1),u=(0,g.useRef)(null),p=(0,g.useRef)(null),A=(0,g.useCallback)(()=>{r||(c(!0),null==i||i(!0),setTimeout(()=>{var e;null==(e=u.current)||e.focus()},0))},[r]),M=(0,g.useCallback)(()=>{c(!1),null==i||i(!1)},[]);return(0,n.jsx)(J,{className:"multilang-textarea-editor",children:d&&!r?(0,n.jsx)(W,{ref:u,value:t,onChange:o,editing:d,onBlur:M,onSubmit:M,placeholder:a,autoSize:l}):(0,n.jsx)("div",{ref:p,className:"node-description",onClick:A,style:r?{paddingLeft:0,...s}:s,children:t||a})})},K=e=>{let{groupController:t,containerStyle:o={},textStyle:i={},autoSize:l=!0,enableTooltip:a=!1}=e,[s,d]=(0,g.useState)(""),c=(0,g.useRef)(null),[u,p]=(0,g.useState)(!1),{playground:A}=(0,r.sX$)(),[M,y]=(0,g.useState)(!1);return t?(0,n.jsx)("div",{className:"gedit-group-note",ref:c,style:o,onMouseEnter:()=>{if(!s||!a||M){u&&p(!1);return}p(!0)},onMouseLeave:()=>{p(!1)},children:(0,n.jsx)(w.u,{className:"gedit-group-note-tooltip",trigger:"custom",visible:u,content:s,children:(0,n.jsx)(X,{value:s,onChange:e=>{d(e||"")},readonly:A.config.readonly,placeholder:"Please enter note",style:i,autoSize:l,onEditingChange:e=>{e&&p(!1),y(e)}})})}):(0,n.jsx)(n.Fragment,{})},q=e=>{let{groupNode:t,groupController:o}=e;return!o||o.collapsed?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)("div",{className:"gedit-group-container",style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",padding:10,zIndex:10},children:[(0,n.jsx)(K,{containerStyle:{width:"48%",transform:"translateY(-6px)"},textStyle:{wordBreak:"break-all",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",height:o.positionConfig.headerHeight},groupNode:t,groupController:o}),(0,n.jsx)(H,{groupNode:t,groupController:o,visible:o.hovered})]})},_=e=>{let{groupNode:t,groupController:o}=e;return o&&o.collapsed?(0,n.jsxs)("div",{style:{border:"1px solid rgb(97, 69, 211)",backgroundColor:"rgb(236 233 247)",borderRadius:10,width:200,height:"auto",padding:10,display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"flex-start"},children:[(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,n.jsx)("div",{style:{width:"2rem",height:"2rem",borderRadius:"1rem",background:"rgb(198 188 241)",color:"rgb(97, 69, 211)",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)("p",{style:{margin:0},children:o.nodes.length})}),(0,n.jsx)(H,{groupNode:t,groupController:o,visible:!0})]}),(0,n.jsx)(K,{groupNode:t,groupController:o,containerStyle:{paddingTop:10,width:"100%"}})]}):(0,n.jsx)(n.Fragment,{})},$=(0,r.M1y)({async onInit(e){let t=e.clipboard;t.writeText(await L(t));let o=e=>{t.writeText(e.value)};navigator.clipboard.addEventListener("onchange",o),e.playground.toDispose.onDispose(()=>{navigator.clipboard.removeEventListener("onchange",o)})}});var ee=o(271060);let et="data:image/png;base64,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";var eo=o(800827);function ei(){let e=(0,r.G2Z)(r.fin),t=(0,r.JAk)(),o=e.getVar();if((0,g.useEffect)(()=>{let o=e.output.onVariableListChange(()=>{t()});return()=>{o.dispose()}},[]),!o)return;let i=o.type?ee.Kz.astToSchema(o.type):{type:"object"};return(0,n.jsx)(ee._R,{value:i,onChange:e=>o.updateType(ee.Kz.schemaToAST(e))})}function en(){let e=(0,ee.VX)({});return(0,n.jsx)(w.mp,{treeData:e})}var er=o(220083);function el(){let[e,t]=(0,g.useState)(!1);return(0,n.jsxs)("div",{className:er.Z["panel-wrapper"],children:[(0,n.jsx)(w.u,{content:"Toggle Variable Panel",children:(0,n.jsx)(w.zx,{className:`${er.Z["variable-panel-button"]} ${e?er.Z.close:""}`,theme:e?"borderless":"light",onClick:()=>t(e=>!e),children:e?(0,n.jsx)(eo.Z,{}):(0,n.jsx)("img",{src:et,width:20,height:20})})}),(0,n.jsx)(w.qq,{isOpen:e,children:(0,n.jsx)("div",{className:er.Z["panel-container"],children:(0,n.jsxs)(w.mQ,{children:[(0,n.jsx)(w.mQ.TabPane,{itemKey:"variables",tab:"Variable List",children:(0,n.jsx)(en,{})}),(0,n.jsx)(w.mQ.TabPane,{itemKey:"global",tab:"Global Editor",children:(0,n.jsx)(ei,{})})]})})})]})}class ea extends r.mh4{onReady(){this.config.onDataChange(()=>{let{scrollX:e,scrollY:t}=this.config.config;r.xFV.setStyle(this.node,{position:"absolute",right:25-e,top:t+25})})}render(){return(0,n.jsx)(el,{})}}ea=(0,O.gn)([(0,r.b2C)()],ea);let es=async()=>(await new Promise(e=>setTimeout(e,1e3)),{type:"object",properties:{userId:{type:"string"}}}),ed=(0,r.M1y)({onInit(e){e.playground.registerLayer(ea),es().then(t=>{e.get(r.fin).setVar(r.qRT.createVariableDeclaration({key:"global",meta:{title:"Global",icon:et},type:ee.Kz.schemaToAST(t)}))})}}),ec=e=>{var t,o;let{bounds:i,children:l,flowSelectConfig:a,commandRegistry:s}=e,d=a.selectedNodes,{startDrag:c}=(0,r.cmt)(),u=null==(o=d[0])||null==(t=o.getData(r.LzJ))?void 0:t.draggable,p=!(0,g.useMemo)(()=>{if(!d||0===d.length)return!1;let e=t=>t.some(t=>t.flowNodeType===r.SyX.GROUP||!!t.blocks&&!!t.blocks.length&&e(t.blocks));return e(d)},[d])&&r.QUv.validate(d);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{position:"absolute",left:i.right,top:i.top,transform:"translate(-100%, -100%)"},onMouseDown:e=>{e.stopPropagation()},children:(0,n.jsxs)(w.hE,{size:"small",style:{display:"flex",flexWrap:"nowrap",height:24},children:[u&&(0,n.jsx)(w.u,{content:"Drag",children:(0,n.jsx)(w.zx,{style:{cursor:"grab",height:24},icon:(0,n.jsx)(Z.Z,{}),type:"primary",theme:"solid",onMouseDown:e=>{e.stopPropagation(),c(e,{dragStartEntity:d[0],dragEntities:d})}})}),(0,n.jsx)(w.u,{content:"Collapse",children:(0,n.jsx)(w.zx,{icon:(0,n.jsx)(Y.Z,{}),style:{height:24},type:"primary",theme:"solid",onMouseDown:e=>{s.executeCommand(Q.COLLAPSE)}})}),(0,n.jsx)(w.u,{content:"Expand",children:(0,n.jsx)(w.zx,{icon:(0,n.jsx)(B.Z,{}),style:{height:24},type:"primary",theme:"solid",onMouseDown:e=>{s.executeCommand(Q.EXPAND)}})}),(0,n.jsx)(w.u,{content:"Group",children:(0,n.jsx)(w.zx,{icon:(0,n.jsx)(V,{}),type:"primary",theme:"solid",style:{display:p?"inherit":"none",height:24},onClick:()=>{s.executeCommand(Q.GROUP)}})}),(0,n.jsx)(w.u,{content:"Copy",children:(0,n.jsx)(w.zx,{icon:(0,n.jsx)(P.Z,{}),style:{height:24},type:"primary",theme:"solid",onClick:()=>{s.executeCommand(Q.COPY)}})}),(0,n.jsx)(w.u,{content:"Delete",children:(0,n.jsx)(w.zx,{type:"primary",theme:"solid",icon:(0,n.jsx)(R.Z,{}),style:{height:24},onClick:()=>{s.executeCommand(Q.DELETE)}})})]})}),(0,n.jsx)("div",{style:{cursor:u?"grab":"auto"},onMouseDown:e=>{e.stopPropagation(),c(e,{dragStartEntity:d[0],dragEntities:d})},children:l})]})};var eg=o(272892),eu=o(120410);let ep=(0,eu.A)(function(e){return g.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),g.createElement("path",{d:"M9 2a2 2 0 0 0-2 2v1h9c2 0 3 1 3 3v9h1a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H9Z",fill:"currentColor"}),g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 9c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Zm6 2a1 1 0 1 1 2 0v2h2a1 1 0 1 1 0 2h-2v2a1 1 0 1 1-2 0v-2H7a1 1 0 1 1 0-2h2v-2Z",fill:"currentColor"}))},"copy_add"),eA=a.ZP.div`
  width: 100%;
  height: 32px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  cursor: pointer;
  font-size: 19px;
  padding: 0 15px;
  &:hover {
    background-color: hsl(252deg 62% 55% / 9%);
    color: hsl(252 62% 54.9%);
  },
`,eM=a.ZP.div`
  font-size: 12px;
  margin-left: 10px;
`;function ey(e){return(0,n.jsxs)(eA,{onClick:e.disabled?void 0:e.onClick,style:e.disabled?{opacity:.3}:{},children:[(0,n.jsx)("div",{style:{fontSize:14},children:e.icon}),(0,n.jsx)(eM,{children:e.label})]})}let ex=a.ZP.div`
  max-height: 500px;
  overflow: auto;
  &::-webkit-scrollbar {
    display: none;
  }
`;function ej(e){let t=(0,r.sX$)();return(0,n.jsx)(ex,{style:{width:180},children:tK.filter(e=>{var t;return!(null==(t=e.meta)?void 0:t.addDisable)}).map(o=>{var i;return(0,n.jsx)(ey,{disabled:!((null==(i=o.canAdd)?void 0:i.call(o,t,e.from))??!0),icon:(0,n.jsx)("img",{style:{width:10,height:10,borderRadius:4},src:o.info.icon}),label:o.type,onClick:()=>(o=>{var i;let n=o.onAdd(t,e.from);null==(i=e.onSelect)||i.call(e,n)})(o)},o.type)})})}let eI=e=>`${e.type||e.flowNodeType}_${(0,l.x0)()}`,eh=a.ZP.div`
  position: absolute;
  width: 15px;
  height: 15px;
  color: #3370ff;
  display: flex;
  justify-content: center;
  align-items: center;
`,em=a.ZP.div`
  position: relative;
  width: 6px;
  height: 6px;
  background-color: rgb(143, 149, 158);
  color: #fff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  svg: {
    transform: scale(0.7);
  }
`,eN=e=>e.blocks?{...e,id:eI(e),blocks:e.blocks.map(e=>eN(e))}:{...e,id:eI(e)};function eD(e){let{from:t}=e,o=t.isVertical,[i,l]=(0,g.useState)(!1),{playground:a,operation:s,clipboard:d}=(0,r.sX$)(),[c,u]=(0,g.useState)(!1),p=(0,g.useMemo)(()=>e.hoverActivated&&!a.config.readonly,[e.hoverActivated,a.config.readonly]),A=(0,g.useCallback)(async e=>{try{e.stopPropagation();let o=await L(d);if(!o)return void w.FN.error({content:"The clipboard content has been updated, please copy the node again."});o.reverse().forEach(e=>{let o=eN(e);s.addFromNode(t,o)}),w.FN.success({content:"Paste successfully!"})}catch(e){console.error(e),w.FN.error({content:(0,n.jsx)(w.Sx.Text,{children:"Paste failed, please check if you have permission to read the clipboard,"})})}},[]);return a.config.readonly?null:(0,n.jsx)(w.J2,{visible:i,onVisibleChange:l,content:(0,n.jsx)(ej,{onSelect:e=>{let o=e.blocks?e.blocks:void 0,i=s.addFromNode(t,{...e,blocks:o});setTimeout(()=>{a.scrollToView({bounds:i.bounds,scrollToCenter:!0})},10),l(!1)},from:t}),placement:"right",trigger:"click",popupAlign:{offset:[30,0]},overlayStyle:{padding:0},children:(0,n.jsxs)(em,{style:e.hoverActivated?{width:15,height:15}:{},onMouseDown:e=>e.stopPropagation(),children:[e.hoverActivated?(0,n.jsx)(eg.Z,{onClick:()=>{l(!0)},onMouseEnter:()=>{u(!!d.readText())},style:{backgroundColor:"#fff",color:"#3370ff",borderRadius:15}}):"",p&&c&&(0,n.jsx)(w.J2,{position:"top",showArrow:!0,content:"Paste",children:(0,n.jsx)(eh,{onClick:A,style:o?{right:-25,top:0}:{right:0,top:-20},children:(0,n.jsx)(ep,{style:{backgroundColor:"var(--semi-color-bg-0)",borderRadius:15}})})})]})})}var eC=o(312278);let eb="data:image/png;base64,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",eT={render:e=>{let{form:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tv,{}),(0,n.jsxs)(ty,{children:[(0,n.jsx)(th,{}),(0,n.jsx)(tx,{})]})]})},validateTrigger:r.C$T.onChange,validate:{"inputsValues.*":e=>{var t;let{value:o,context:i,formValues:n,name:r}=e,l=r.replace(/^inputsValues\./,"");if(((null==(t=n.inputs)?void 0:t.required)||[]).includes(l)&&(""===o||void 0===o||(null==o?void 0:o.content)===""))return`${l} is required`}}},ef=3,ev={type:"catchBlock",meta:{copyDisable:!0,addDisable:!0},info:{icon:eb,description:"Execute the catch branch when the condition is met."},canAdd:()=>!1,canDelete:(e,t)=>t.parent.blocks.length>=2,onAdd:(e,t)=>({id:`Catch_${(0,l.x0)(5)}`,type:"catchBlock",data:{title:`Catch Block ${ef++}`,inputs:{type:"object",required:["condition"],inputsValues:{condition:""},properties:{condition:{type:"string"}}}}}),formMeta:eT},ez={render:e=>{let{form:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tv,{}),(0,n.jsxs)(ty,{children:[(0,n.jsx)(th,{}),(0,n.jsx)(tx,{})]})]})},validateTrigger:r.C$T.onChange,validate:{"inputsValues.*":e=>{var t;let{value:o,context:i,formValues:n,name:r}=e,l=r.replace(/^inputsValues\./,"");if(((null==(t=n.inputs)?void 0:t.required)||[]).includes(l)&&(""===o||void 0===o||(null==o?void 0:o.content)===""))return`${l} is required`}}},ew=2,eL={type:"case",extend:"block",meta:{copyDisable:!0,addDisable:!0},info:{icon:eb,description:"Execute the branch when the condition is met."},canDelete:(e,t)=>t.parent.blocks.length>=3,onAdd:(e,t)=>({id:`Case_${(0,l.x0)(5)}`,type:"case",data:{title:`Case_${ew++}`,inputs:{type:"object",required:["condition"],inputsValues:{condition:""},properties:{condition:{type:"string"}}}}}),formMeta:ez},eE=a.ZP.div`
  width: 28px;
  height: 18px;
  background: ${e=>e.activated?"#82A7FC":"rgb(187, 191, 196)"};
  display: flex;
  border-radius: 9px;
  justify-content: space-evenly;
  align-items: center;
  color: #fff;
  font-size: 10px;
  font-weight: bold;
  transform: ${e=>e.isVertical?"":"rotate(90deg)"};
  div {
    display: flex;
    justify-content: center;
    align-items: center;
    svg {
      width: 12px;
      height: 12px;
    }
  }
`;function eQ(e){let{activated:t,node:o}=e,i=o.firstChild.renderData,l=(0,r.sX$)(),{operation:a,playground:s}=l,{isVertical:d}=o;return s.config.readonlyOrDisabled?null:(0,n.jsx)(eE,{isVertical:d,activated:t,onMouseEnter:()=>null==i?void 0:i.toggleMouseEnter(),onMouseLeave:()=>null==i?void 0:i.toggleMouseLeave(),children:(0,n.jsx)("div",{onClick:()=>{let e=a.addBlock(o,"switch"===o.flowNodeType?eL.onAdd(l,o):ev.onAdd(l,o),{index:0});setTimeout(()=>{s.scrollToView({bounds:e.bounds,scrollToCenter:!0})},10)},"aria-hidden":"true",style:{flexGrow:1,textAlign:"center"},children:(0,n.jsx)(eC.Z,{})})})}let ek=g.createContext({}),eO=g.createContext({visible:!1,setNodeId:()=>{}}),eS=g.createContext(!1);var eZ=o(2103);let eB=a.ZP.div`
  align-items: flex-start;
  background-color: #fff;
  border: 1px solid rgba(6, 7, 9, 0.15);
  border-radius: 8px;
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 12px 0 rgba(0, 0, 0, 0.02);
  display: flex;
  flex-direction: column;
  justify-content: center;
  position: relative;
  width: 360px;
  &.activated {
    border: 1px solid #82a7fc;
  }
`,eY=()=>(0,n.jsx)(eZ.Z,{style:{position:"absolute",color:"red",left:-6,top:-6,zIndex:1,background:"white",borderRadius:8}}),eP=e=>{let{node:t}=e,o=(0,r.PVB)(),i=o.form,l=(0,g.useCallback)(()=>t.renderData.node||document.body,[]),a=(0,g.useContext)(eO);return(0,n.jsxs)(w.iV,{getPopupContainer:l,children:[(null==i?void 0:i.state.invalid)&&(0,n.jsx)(eY,{}),(0,n.jsx)(eB,{onMouseEnter:o.onMouseEnter,onMouseLeave:o.onMouseLeave,className:o.activated?"activated":"",onClick:()=>{o.dragging||a.setNodeId(o.node.id)},style:{...(o.isBlockOrderIcon||o.isBlockIcon,{}),...o.node.getNodeRegistry().meta.style,opacity:o.dragging?.3:1,outline:(null==i?void 0:i.state.invalid)?"1px solid red":"none"},children:(0,n.jsx)(ek.Provider,{value:o,children:null==i?void 0:i.render()})})]})},eR=w.Sx.Text;function eG(e){let{node:t}=e,o="Default";switch(t.flowNodeType){case"agentMemory":o="Memory";break;case"agentLLM":o="LLM";break;case"agentTools":o="Tools"}return(0,n.jsx)(eR,{ellipsis:{showTooltip:!0},style:{maxWidth:65,fontSize:12,textAlign:"center",padding:"2px",backgroundColor:"var(--g-editor-background)",color:"#8F959E"},children:o})}var eU=o(993919),eV=o(623966);let eF=a.ZP.div`
  position: absolute;
  bottom: 16px;
  display: flex;
  justify-content: left;
  min-width: 360px;
  pointer-events: none;
  gap: 8px;

  z-index: 99;
`,eH=a.ZP.div`
  display: flex;
  align-items: center;
  background-color: #fff;
  border: 1px solid rgba(68, 83, 130, 0.25);
  border-radius: 10px;
  box-shadow: rgba(0, 0, 0, 0.04) 0px 2px 6px 0px, rgba(0, 0, 0, 0.02) 0px 4px 12px 0px;
  column-gap: 2px;
  height: 40px;
  padding: 0 4px;
  pointer-events: auto;
`,eW=a.ZP.span`
  padding: 2px;
  border-radius: 8px;
  border: 1px solid rgba(68, 83, 130, 0.25);
  font-size: 12px;
  width: 40px;
`,eJ=a.ZP.div`
  position: absolute;
  bottom: 60px;
  width: 198px;
`,eX=()=>{let e=(0,r.erw)({maxZoom:2,minZoom:.25}),[t,o]=(0,g.useState)(!1);return(0,n.jsx)(w.Lt,{position:"top",trigger:"custom",visible:t,onClickOutSide:()=>o(!1),render:(0,n.jsxs)(w.Lt.Menu,{children:[(0,n.jsx)(w.Lt.Item,{onClick:()=>e.zoomin(),children:"Zoomin"}),(0,n.jsx)(w.Lt.Item,{onClick:()=>e.zoomout(),children:"Zoomout"}),(0,n.jsx)(w.iz,{layout:"horizontal"}),(0,n.jsx)(w.Lt.Item,{onClick:()=>e.updateZoom(.5),children:"50%"}),(0,n.jsx)(w.Lt.Item,{onClick:()=>e.updateZoom(1),children:"100%"}),(0,n.jsx)(w.Lt.Item,{onClick:()=>e.updateZoom(1.5),children:"150%"}),(0,n.jsx)(w.Lt.Item,{onClick:()=>e.updateZoom(2),children:"200%"})]}),children:(0,n.jsxs)(eW,{onClick:()=>o(!0),children:[Math.floor(100*e.zoom),"%"]})})},eK=(0,eu.A)(function(e){return g.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Zm6 2.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0ZM2 15c0-1.1.9-2 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5Zm6 2.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z",fill:"currentColor"}))},"server"),eq=()=>{let e=(0,r.erw)();return(0,n.jsx)(w.u,{content:e.isVertical?"Horizontal Layout":"Vertical Layout",children:(0,n.jsx)(w.zx,{theme:"borderless",size:"small",onClick:()=>e.changeLayout(),icon:(0,n.jsx)(eK,{style:{transform:e.isVertical?"rotate(90deg)":"",transition:"transform .3s ease"}}),type:"tertiary"})})};function e_(e){let[t,o]=(0,g.useState)(0),i=(0,r.sX$)(),l=(0,g.useCallback)(()=>{o(i.document.getAllNodes().map(e=>(0,r.CMu)(e)).filter(e=>null==e?void 0:e.state.invalid).length)},[i]),a=(0,g.useCallback)(async()=>{let e=i.document.getAllNodes().map(e=>(0,r.CMu)(e));await Promise.all(e.map(async e=>null==e?void 0:e.validate())),console.log(">>>>> save data: ",i.document.toJSON())},[i]);return((0,g.useEffect)(()=>{let e=e=>{let t=(0,r.CMu)(e);if(t){let o=t.onValidate(()=>l());e.onDispose(()=>o.dispose())}};i.document.getAllNodes().map(t=>e(t));let t=i.document.onNodeCreate(t=>{let{node:o}=t;return e(o)});return()=>t.dispose()},[i]),0===t)?(0,n.jsx)(w.zx,{disabled:e.disabled,onClick:a,children:"Save"}):(0,n.jsx)(w.Ct,{count:t,position:"rightTop",type:"danger",children:(0,n.jsx)(w.zx,{type:"danger",disabled:e.disabled,onClick:a,children:"Save"})})}let e$=document.createElement("style"),e0="rgb(78, 64, 229)";function e3(){let[e,t]=(0,g.useState)(!1),o=(0,r.sX$)(),i=(0,r.Dcz)(),l=async()=>{t(!0),i.config.readonly=!0;let e=o.document.root.blocks.slice();for(;e.length>0;){var n=e.shift().id;let t=function e(t,o){let i=[];return t&&(i.push(t.id),o&&i.push(...t.allChildren.map(e=>e.id)),t.parent&&i.push(t.parent.id),t.pre&&i.push(...e(t.pre,!0)),t.parent&&t.parent.pre&&i.push(...e(t.parent.pre,!0))),i}(o.document.getNode(n),!0);if(0===t.length)e$.innerText="";else{let e=t.map(e=>`
      path[data-line-id$="${e}"] {
        animation: flowingDash 0.5s linear infinite;
        stroke-dasharray: 8, 5;
        stroke: ${e0} !important;
      }
      marker[data-line-id$="${e}"] path {
        fill: ${e0} !important;
      }
      [data-node-id$="${e}"] {
        border: 1px dashed ${e0} !important;
        border-radius: 8px;
      }
      [data-label-id$="${e}"] {
        color: ${e0} !important;
      }
    `).join("\n");e$.innerText=`
   @keyframes flowingDash {
    to {
      stroke-dashoffset: -13;
    }
  }
  ${e}
  `}e$.parentNode||document.body.appendChild(e$),await (0,r.gw0)(1e3)}i.config.readonly=!1,e$.innerText="",t(!1)};return(0,n.jsx)(w.zx,{onClick:l,loading:e,children:"Run"})}var e4=o(766868),e1=o(231043);let e2=()=>{let e=(0,r.Dcz)(),t=(0,g.useCallback)(()=>{e.config.readonly=!e.config.readonly},[e]);return e.config.readonly?(0,n.jsx)(w.hU,{theme:"borderless",type:"tertiary",icon:(0,n.jsx)(e4.Z,{}),onClick:t}):(0,n.jsx)(w.hU,{theme:"borderless",type:"tertiary",icon:(0,n.jsx)(e1.Z,{}),onClick:t})},e6=(0,eu.A)(function(e){return g.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 7a3 3 0 0 1 3-3h16a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H4a3 3 0 0 1-3-3V7Zm9.5 0H5a1 1 0 0 0-1 1v2.5h6.5V7Zm3 0v3.5H20V8a1 1 0 0 0-1-1h-5.5Zm6.5 6.5h-6.5V17H19a1 1 0 0 0 1-1v-2.5ZM10.5 17v-3.5H4V16a1 1 0 0 0 1 1h5.5Z",fill:"currentColor"}))},"grid-rectangle"),e5=e=>{let{minimapVisible:t,setMinimapVisible:o}=e;return(0,n.jsx)(w.u,{content:"Minimap",children:(0,n.jsx)(w.hU,{theme:"borderless",icon:(0,n.jsx)(e6,{style:{color:t?void 0:"#060709cc"}}),onClick:()=>{o(!t)}})})},e9=e=>{let{visible:t}=e,o=(0,r.G2Z)(p.I5);return t?(0,n.jsx)(eJ,{children:(0,n.jsx)(p.Zd,{service:o,panelStyles:{},containerStyles:{pointerEvents:"auto",position:"relative",top:"unset",right:"unset",bottom:"unset",left:"unset"},inactiveStyle:{opacity:1,scale:1,translateX:0,translateY:0}})}):(0,n.jsx)(n.Fragment,{})},e8=e=>(0,n.jsx)(w.u,{content:"FitView",children:(0,n.jsx)(w.hU,{icon:(0,n.jsx)(B.Z,{}),type:"tertiary",theme:"borderless",onClick:()=>e.fitView()})}),e7=()=>{let e=(0,r.erw)(),[t,o]=(0,g.useState)(!1),i=(0,r.Dcz)(),l=(0,r.JAk)();return(0,g.useEffect)(()=>{let e=i.config.onReadonlyOrDisabledChange(()=>l());return()=>e.dispose()},[i]),(0,n.jsx)(eF,{className:"fixed-demo-tools",children:(0,n.jsxs)(eH,{children:[(0,n.jsx)(eq,{}),(0,n.jsx)(eX,{}),(0,n.jsx)(e8,{fitView:e.fitView}),(0,n.jsx)(e5,{minimapVisible:t,setMinimapVisible:o}),(0,n.jsx)(e9,{visible:t}),(0,n.jsx)(e2,{}),(0,n.jsx)(w.u,{content:"Undo",children:(0,n.jsx)(w.hU,{theme:"borderless",icon:(0,n.jsx)(eU.Z,{}),disabled:!e.canUndo||i.config.readonly,onClick:()=>e.undo()})}),(0,n.jsx)(w.u,{content:"Redo",children:(0,n.jsx)(w.hU,{theme:"borderless",icon:(0,n.jsx)(eV.Z,{}),disabled:!e.canRedo||i.config.readonly,onClick:()=>e.redo()})}),(0,n.jsx)(e_,{disabled:i.config.readonly}),(0,n.jsx)(e3,{})]})})},te=a.ZP.div`
  box-sizing: border-box;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  width: 100%;
  column-gap: 8px;
  border-radius: 8px 8px 0 0;

  background: linear-gradient(#f2f2ff 0%, rgb(251, 251, 251) 100%);
  overflow: hidden;

  padding: 8px;
`,tt=a.ZP.div`
  font-size: 20px;
  flex: 1;
  width: 0;
`,to=a.ZP.img`
  width: 24px;
  height: 24px;
  scale: 0.8;
  border-radius: 4px;
`,ti=a.ZP.div`
  display: flex;
  align-items: center;
  column-gap: 4px;
`,tn="hsl(252 62% 54.9%)",tr=a.ZP.div`
  position: relative;
  height: 32px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  column-gap: 8px;
  cursor: pointer;
  font-size: 19px;
  border: 1px solid ${tn};
  padding: 0 15px;
  &:hover: {
    background-color: ${"hsl(252deg 62% 55% / 9%)"};
    color: ${tn};
  }
`,tl=a.ZP.div`
  position: absolute;
  top: -8px;
  right: -8px;
  text-align: center;
  line-height: 16px;
  width: 16px;
  height: 16px;
  border-radius: 8px;
  font-size: 12px;
  color: #fff;
  background-color: ${tn};
`;function ta(e){var t,o;let{dragStart:i,dragNodes:r}=e,l=null==(o=tK.find(e=>e.type===(null==i?void 0:i.flowNodeType)))||null==(t=o.info)?void 0:t.icon,a=(r||[]).map(e=>e.allCollapsedChildren.length?e.allCollapsedChildren.filter(e=>!e.hidden).length:1).reduce((e,t)=>e+t,0);return(0,n.jsxs)(tr,{children:[(0,n.jsx)(to,{src:l}),null==i?void 0:i.id,a>1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tl,{children:a}),(0,n.jsx)(tr,{style:{position:"absolute",top:5,right:-5,left:5,bottom:-5,opacity:.5}})]})]})}let ts={render:e=>{let{form:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tv,{}),(0,n.jsxs)(ty,{children:[(0,n.jsx)(th,{}),(0,n.jsx)(tx,{})]})]})},validateTrigger:r.C$T.onChange,formatOnInit:(e,t)=>e,formatOnSubmit:(e,t)=>e,validate:{title:e=>{let{value:t}=e;return t?void 0:"Title is required"},"inputsValues.*":e=>{var t;let{value:o,context:i,formValues:n,name:l}=e,a=l.replace(/^inputsValues\./,"");if(((null==(t=n.inputs)?void 0:t.required)||[]).includes(a)&&(""===o||void 0===o||(null==o?void 0:o.content)===""))return{message:`${a} is required`,level:r.Odm.Error}}},effect:{title:ee.Hs,outputs:ee.Xp,inputsValues:ee.gB}},td=0,tc={type:"tool",info:{icon:"data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgd2lkdGg9IjQ0IiBoZWlnaHQ9IjQiPgogICAgPGRlZnM+CiAgICAgICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyX3Rvb2wiIHgxPSIxMDI0IiB5MT0iMTAyNCIgeDI9IjguMDk2ODYiIHkyPSI0LjY5ODIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzMzNzBGRiIvPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjAuOTk3OTA4IiBzdG9wLWNvbG9yPSIjMzNBOUZGIi8+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KICAgIDxwYXRoIGQ9Ik0xMDI0IDcxNi44djIwNC44YTEwMi40IDEwMi40IDAgMCAxLTEwMi40IDEwMi40aC0yMDQuOHYtMTAyLjRhMTAyLjQgMTAyLjQgMCAwIDAtMTAyLjQtMTAyLjQgMTAyLjQgMTAyLjQgMCAwIDAtMTAyLjQgMTAyLjR2MTAyLjRIMzA3LjJhMTAyLjQgMTAyLjQgMCAwIDEtMTAyLjQtMTAyLjR2LTIwNC44SDEwMi40YTEwMi40IDEwMi40IDAgMCAxLTEwMi40LTEwMi40IDEwMi40IDEwMi40IDAgMCAxIDEwMi40LTEwMi40aDEwMi40VjMwNy4yYzAtNTYuMzIgNDYuMDgtMTAyLjQgMTAyLjQtMTAyLjRoMjA0LjhWMTAyLjRhMTAyLjQgMTAyLjQgMCAwIDEgMTAyLjQtMTAyLjQgMTAyLjQgMTAyLjQgMCAwIDEgMTAyLjQgMTAyLjR2MTAyLjRoMjA0LjhhMTAyLjQgMTAyLjQgMCAwIDEgMTAyLjQgMTAyLjR2MjA0LjhoLTEwMi40YTEwMi40IDEwMi40IDAgMCAwLTEwMi40IDEwMi40IDEwMi40IDEwMi40IDAgMCAwIDEwMi40IDEwMi40aDEwMi40eiIKICAgICAgICAgIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl90b29sKSI+PC9wYXRoPgo8L3N2Zz4K",description:"Tool."},meta:{copyDisable:!0,draggable:!1,selectable:!1},formMeta:ts,onAdd:()=>({id:`tool${(0,l.x0)(5)}`,type:"tool",data:{title:`Tool_${++td}`}})};function tg(e){var t;let{node:o}=e,i=null==(t=o.firstChild)?void 0:t.getData(r.LzJ),l=(0,r.G2Z)(r.pQ4),a=(0,r.sX$)();async function s(){l.addNode({...tc.onAdd(a,o),parent:o})}return"agentTools"!==o.flowNodeType&&0!==o.blocks.length?null:(0,n.jsx)("div",{style:{display:"flex",color:"#fff",background:"rgb(187, 191, 196)",width:20,height:20,borderRadius:10,overflow:"hidden"},onMouseEnter:()=>null==i?void 0:i.toggleMouseEnter(),onMouseLeave:()=>null==i?void 0:i.toggleMouseLeave(),children:(0,n.jsx)("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>s(),children:(0,n.jsx)(eC.Z,{size:"small"})})})}function tu(){return(0,g.useContext)(ek)}function tp(){return(0,g.useContext)(eS)}let tA=a.ZP.div`
  box-sizing: border-box;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 6px;
  background-color: rgb(251, 251, 251);
  border-radius: 0 0 8px 8px;
  padding: 0 12px 12px;
`,tM=a.ZP.div`
  color: var(--semi-color-text-2);
  font-size: 12px;
  line-height: 20px;
  padding: 0px 4px;
  word-break: break-all;
  white-space: break-spaces;
`;function ty(e){var t;let{node:o,expanded:i}=tu(),r=tp(),l=o.getNodeRegistry();return(0,n.jsx)(tA,{children:(0,n.jsxs)(n.Fragment,{children:[r&&(0,n.jsx)(tM,{children:null==(t=l.info)?void 0:t.description}),(i||r)&&e.children]})})}function tx(){return tp()?null:(0,n.jsx)(ee.LE,{displayFromScope:!0})}o(249972);let{Text:tj}=w.Sx;function tI(e){let{children:t,name:o,required:i,description:r,type:l,labelWidth:a,vertical:s}=e,d=(0,g.useCallback)(e=>(0,n.jsxs)("div",{style:{width:"0",display:"flex",flex:"1"},children:[(0,n.jsx)(tj,{style:{width:"100%"},ellipsis:{showTooltip:!!e},children:o}),i&&(0,n.jsx)("span",{style:{color:"#f93920",paddingLeft:"2px"},children:"*"})]}),[]);return(0,n.jsxs)("div",{style:{fontSize:12,marginBottom:6,width:"100%",position:"relative",display:"flex",gap:8,...s?{flexDirection:"column"}:{justifyContent:"center",alignItems:"center"}},children:[(0,n.jsxs)("div",{style:{justifyContent:"center",alignItems:"center",color:"var(--semi-color-text-0)",width:a||118,position:"relative",display:"flex",columnGap:4,flexShrink:0},children:[(0,n.jsx)(ee.s1,{value:{type:l}}),r?(0,n.jsx)(w.u,{content:r,children:d()}):d(!0)]}),(0,n.jsx)("div",{style:{flexGrow:1,minWidth:0},children:t})]})}function th(){let{readonly:e}=tu();return(0,n.jsx)(r.gNt,{name:"inputs",children:t=>{var o,i;let{field:l}=t,a=(null==(o=l.value)?void 0:o.required)||[],s=null==(i=l.value)?void 0:i.properties;if(!s)return(0,n.jsx)(n.Fragment,{});let d=Object.keys(s).map(t=>{var o;let i=s[t],l=null==(o=i.extra)?void 0:o.formComponent,d=["prompt-editor"].includes(l||"");return(0,n.jsx)(r.gNt,{name:`inputsValues.${t}`,defaultValue:i.default,children:o=>{let{field:r,fieldState:s}=o;return(0,n.jsxs)(tI,{name:t,vertical:d,type:i.type,required:a.includes(t),children:["prompt-editor"===l&&(0,n.jsx)(ee.B1,{value:r.value,onChange:r.onChange,readonly:e,hasError:Object.keys((null==s?void 0:s.errors)||{}).length>0}),!l&&(0,n.jsx)(ee.XA,{value:r.value,onChange:r.onChange,readonly:e,hasError:Object.keys((null==s?void 0:s.errors)||{}).length>0,schema:i}),(0,n.jsx)(c,{errors:null==s?void 0:s.errors,warnings:null==s?void 0:s.warnings})]})}},t)});return(0,n.jsx)(n.Fragment,{children:d})}})}var tm=o(720403),tN=o(957436),tD=o(228013),tC=o(940953);let{Text:tb}=w.Sx;function tT(e){let{readonly:t,titleEdit:o,updateTitleEdit:i}=e,l=(0,g.useRef)(),a=o&&!t;return(0,g.useEffect)(()=>{if(a){var e;null==(e=l.current)||e.focus()}},[a]),(0,n.jsx)(tt,{children:(0,n.jsx)(r.gNt,{name:"title",children:e=>{let{field:{value:t,onChange:o},fieldState:r}=e;return(0,n.jsxs)("div",{style:{height:24},children:[a?(0,n.jsx)(w.II,{value:t,onChange:o,ref:l,onBlur:()=>i(!1)}):(0,n.jsx)(tb,{ellipsis:{showTooltip:!0},children:t}),(0,n.jsx)(c,{errors:null==r?void 0:r.errors})]})}})})}function tf(e){let{updateTitleEdit:t}=e,{node:o,deleteNode:i}=(0,g.useContext)(ek),l=(0,r.sX$)(),a=o.getNodeRegistry(),s=(0,g.useCallback)(e=>{l.playground.commandService.executeCommand(Q.COPY,o),e.stopPropagation()},[l,o]),d=(0,g.useCallback)(e=>{i(),e.stopPropagation()},[l,o]),c=(0,g.useCallback)(()=>{t(!0)},[t]),u=(0,g.useMemo)(()=>a.canDelete?!a.canDelete(l,o):a.meta.deleteDisable,[a,o]);return(0,n.jsxs)(w.Lt.Menu,{children:[(0,n.jsx)(w.Lt.Item,{onClick:c,children:"Edit Title"}),(0,n.jsx)(w.Lt.Item,{onClick:s,disabled:!0===a.meta.copyDisable,children:"Copy"}),(0,n.jsx)(w.Lt.Item,{onClick:d,disabled:u,children:"Delete"})]})}function tv(){let{node:e,expanded:t,startDrag:o,toggleExpand:i,readonly:r}=(0,g.useContext)(ek),[l,a]=(0,g.useState)(!1),{setNodeId:s}=(0,g.useContext)(eO),d=tp();return(0,n.jsxs)(te,{onMouseDown:e=>{o(e)},children:[(e=>{var t;let o=null==(t=e.getNodeRegistry().info)?void 0:t.icon;return o?(0,n.jsx)(to,{src:o}):null})(e),(0,n.jsx)(tT,{readonly:r,titleEdit:l,updateTitleEdit:a}),e.renderData.expandable&&!d&&(0,n.jsx)(w.zx,{type:"primary",icon:t?(0,n.jsx)(tm.Z,{}):(0,n.jsx)(tN.Z,{}),size:"small",theme:"borderless",onClick:e=>{i(),e.stopPropagation()}}),r?void 0:(0,n.jsx)(ti,{children:(0,n.jsx)(w.Lt,{trigger:"hover",position:"bottomRight",render:(0,n.jsx)(tf,{updateTitleEdit:a}),children:(0,n.jsx)(w.hU,{color:"secondary",size:"small",theme:"borderless",icon:(0,n.jsx)(tC.Z,{}),onClick:e=>e.stopPropagation()})})}),d&&(0,n.jsx)(w.zx,{type:"primary",icon:(0,n.jsx)(tD.Z,{}),size:"small",theme:"borderless",onClick:()=>{s(void 0)}})]})}a.ZP.div`
  display: flex;
  justify-content: flex-start;
  align-items: center;
  font-size: 12px;
  margin-bottom: 6px;
`,a.ZP.div`
  width: 120px;
  margin-right: 5px;
  position: relative;
`;let tz={render:e=>{let{form:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tv,{}),(0,n.jsx)(ty,{children:(0,n.jsx)(tx,{})})]})},validateTrigger:r.C$T.onChange,validate:{title:e=>{let{value:t}=e;return t?void 0:"Title is required"}}},tw={extend:r.OTb.DYNAMIC_SPLIT,type:"switch",info:{icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDQiIGhlaWdodD0iNDUiIHZpZXdCb3g9IjAgMCA0NCA0NSIgZmlsbD0ibm9uZSIgY2xhc3M9ImluamVjdGVkLXN2ZyIgZGF0YS1zcmM9Imh0dHBzOi8vbGYzLXN0YXRpYy5ieXRlZG5zZG9jLmNvbS9vYmovZWRlbi1jbi91dnBhaHR2YWJoX2xtX3poaHdoL2xqaHdadGhsYXVramxrdWx6bHAvYWN0aXZpdHlfaWNvbnMvZXhjbHVzaXZlLXNwbGl0LTA1MTguc3ZnIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE2LjQ3MDUgMTQuMDE1MkMxNS4yOTkgMTIuODQzNiAxNS4yOTkgMTAuOTQ0IDE2LjQ3MDUgOS43NzI0NEwyMC43MTMxIDUuNTI5N0MyMS44ODQ2IDQuMzU4MSAyMy43ODQgNC4zNTgxIDI0Ljk1NTYgNS41Mjk3TDI5LjE5ODEgOS43NzI0NEMzMC4zNjk3IDEwLjk0NCAzMC4zNjk3IDEyLjg0MzYgMjkuMTk4MSAxNC4wMTUyTDI1LjEyMDYgMTguMDkyOUgzMi42Njc0QzM2LjUzMzQgMTguMDkyOSAzOS42Njc0IDIxLjIyNjkgMzkuNjY3NCAyNS4wOTI5VjMzLjE1NFYzMy4zMjcxVjM3LjE1NEMzOS42Njc0IDM4LjI1ODUgMzguNzcxOSAzOS4xNTQgMzcuNjY3NCAzOS4xNTRIMzMuNjY3NEMzMi41NjI4IDM5LjE1NCAzMS42Njc0IDM4LjI1ODUgMzEuNjY3NCAzNy4xNTRWMzMuMzI3MVYzMy4xNTRWMjYuMDkyOUgyMy41OTQ4SDE1LjY2NzRWMzMuMTMyN0wxNy4yNjg1IDMzLjEyNDRDMTguODM5NyAzMy4xMTYzIDE5LjYzMjIgMzUuMDE1NiAxOC41MjEyIDM2LjEyNjZMMTIuNzM3NCA0MS45MTAzQzEyLjA1MDYgNDIuNTk3MSAxMC45MzcxIDQyLjU5NzEgMTAuMjUwMyA0MS45MTAzTDQuNTI1ODggMzYuMTg1OUMzLjQyMTA3IDM1LjA4MTEgNC4xOTc5NyAzMy4xOTE3IDUuNzYwMzggMzMuMTgzN0w3LjY2NzM3IDMzLjE3MzlWMjUuMDkyOUM3LjY2NzM3IDIxLjIyNyAxMC44MDE0IDE4LjA5MjkgMTQuNjY3NCAxOC4wOTI5SDIwLjU0ODFMMTYuNDcwNSAxNC4wMTUyWiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzI3NTJfMTgzNzAyLTcpIi8+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjc1Ml8xODM3MDItNyIgeDE9IjM4LjUyIiB5MT0iNDMuMzkxNSIgeDI9IjguMDk2ODYiIHkyPSI0LjY5ODIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzMzNzBGRiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjAuOTk3OTA4IiBzdG9wLWNvbG9yPSIjMzNBOUZGIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KPC9zdmc+Cg==",description:"Connect multiple downstream branches. Only the corresponding branch will be executed if the set conditions are met."},meta:{expandable:!1},formMeta:ts,onAdd:()=>({id:`switch_${(0,l.x0)(5)}`,type:"switch",data:{title:"Switch"},blocks:[{id:(0,l.x0)(5),type:"case",data:{title:"Case_0",inputsValues:{condition:{type:"constant",content:""}},inputs:{type:"object",required:["condition"],properties:{condition:{type:"boolean"}}}},blocks:[]},{id:(0,l.x0)(5),type:"case",data:{title:"Case_1",inputsValues:{condition:{type:"constant",content:""}},inputs:{type:"object",required:["condition"],properties:{condition:{type:"boolean"}}}}},{id:(0,l.x0)(5),type:"caseDefault",data:{title:"Default"},blocks:[]}]})},tL=o.p+"static/image/icon-start.8353312d.jpg",tE={render:e=>{let{form:t}=e;return tp()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tv,{}),(0,n.jsx)(ty,{children:(0,n.jsx)(r.gNt,{name:"outputs",render:e=>{let{field:{value:t,onChange:o}}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ee._R,{value:t,onChange:e=>o(e)})})}})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tv,{}),(0,n.jsx)(ty,{children:(0,n.jsx)(tx,{})})]})},validateTrigger:r.C$T.onChange,validate:{title:e=>{let{value:t}=e;return t?void 0:"Title is required"}},effect:{title:ee.Hs,outputs:ee.Xp}},tQ={render:e=>{let{form:t}=e;tp();let{readonly:o}=tu(),i=(0,n.jsx)(r.gNt,{name:"loopFor",children:e=>{var t;let{field:i,fieldState:r}=e;return(0,n.jsxs)(tI,{name:"loopFor",type:"array",required:!0,children:[(0,n.jsx)(ee.uA,{style:{width:"100%"},value:null==(t=i.value)?void 0:t.content,onChange:e=>i.onChange({type:"ref",content:e}),readonly:o,hasError:Object.keys((null==r?void 0:r.errors)||{}).length>0}),(0,n.jsx)(c,{errors:null==r?void 0:r.errors})]})}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tv,{}),(0,n.jsxs)(ty,{children:[i,(0,n.jsx)(tx,{})]})]})},effect:{loopFor:ee.lz}},tk={type:"agentLLM",extend:r.SyX.SLOT_BLOCK,meta:{addDisable:!0,sidebarDisable:!0,draggable:!1},info:{icon:"",description:"Agent LLM."}},tO=o.p+"static/image/icon-llm.de446995.jpg",tS=0,tZ={type:"llm",info:{icon:tO,description:"Call the large language model and use variables and prompt words to generate responses."},formMeta:ts,meta:{draggable:e=>{var t;return(null==(t=e.parent)?void 0:t.flowNodeType)!==tk.type}},canDelete(e,t){var o;return(null==(o=t.parent)?void 0:o.flowNodeType)!==tk.type},onAdd:()=>({id:`llm_${(0,l.x0)(5)}`,type:"llm",data:{title:`LLM_${++tS}`,inputsValues:{modelType:{type:"constant",content:"gpt-3.5-turbo"},temperature:{type:"constant",content:.5},systemPrompt:{type:"template",content:"# Role\nYou are an AI assistant.\n"},prompt:{type:"template",content:""}},inputs:{type:"object",required:["modelType","temperature","prompt"],properties:{modelType:{type:"string"},temperature:{type:"number"},systemPrompt:{type:"string",extra:{formComponent:"prompt-editor"}},prompt:{type:"string",extra:{formComponent:"prompt-editor"}}}},outputs:{type:"object",properties:{result:{type:"string"}}}}})},tB="data:image/png;base64,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",tY={extend:r.OTb.STATIC_SPLIT,type:"if",info:{icon:tB,description:"Only the corresponding branch will be executed if the set conditions are met."},meta:{expandable:!1},formMeta:ts,onAdd:()=>({id:`if_${(0,l.x0)(5)}`,type:"if",data:{title:"If",inputsValues:{condition:{type:"constant",content:!0}},inputs:{type:"object",required:["condition"],properties:{condition:{type:"boolean"}}}},blocks:[{id:(0,l.x0)(5),type:"ifBlock",data:{title:"true"},blocks:[]},{id:(0,l.x0)(5),type:"ifBlock",data:{title:"false"}}]})},tP=o.p+"static/image/icon-end.ac3dc81e.jpg",tR={...ts,render:()=>tp()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tv,{}),(0,n.jsx)(ty,{children:(0,n.jsx)(r.gNt,{name:"inputsValues",children:e=>{let{field:{value:t,onChange:o}}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ee.PF,{value:t,onChange:e=>o(e)})})}})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tv,{}),(0,n.jsx)(ty,{children:(0,n.jsx)(r.gNt,{name:"inputsValues",children:e=>{let{field:{value:t}}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ee.y3,{value:t})})}})})]}),plugins:[(0,ee.kk)({sourceKey:"inputsValues",targetKey:"inputs"})]},tG={render:e=>{let{form:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tv,{}),(0,n.jsxs)(ty,{children:[(0,n.jsx)(th,{}),(0,n.jsx)(tx,{})]})]})},validateTrigger:r.C$T.onChange,validate:{"inputsValues.*":e=>{var t;let{value:o,context:i,formValues:n,name:r}=e,l=r.replace(/^inputsValues\./,"");if(((null==(t=n.inputs)?void 0:t.required)||[]).includes(l)&&(""===o||void 0===o||(null==o?void 0:o.content)===""))return`${l} is required`}}},tU=0,tV={type:"memory",info:{icon:"data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgd2lkdGg9IjQ0IiBoZWlnaHQ9IjQ0Ij4KICAgIDxkZWZzPgogICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl9tZW1vcnkiIHgxPSIxMDI0IiB5MT0iMTAyNCIgeDI9IjguMDk2ODYiIHkyPSI0LjY5ODIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzMzNzBGRiIvPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjAuOTk3OTA4IiBzdG9wLWNvbG9yPSIjMzNBOUZGIi8+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KICAgIDxwYXRoIGQ9Ik05NjAgMTYwdjk2YzAgODguNC0yMDAuNiAxNjAtNDQ4IDE2MFM2NCAzNDQuNCA2NCAyNTZWMTYwQzY0IDcxLjYgMjY0LjYgMCA1MTIgMHM0NDggNzEuNiA0NDggMTYweiBtLTEwOS42IDI2OS40YzQxLjYtMTQuOCA3OS44LTMzLjggMTA5LjYtNTcuMlY1NzZjMCA4OC40LTIwMC42IDE2MC00NDggMTYwUzY0IDY2NC40IDY0IDU3NlYzNzIuMmMyOS44IDIzLjYgNjggNDIuNCAxMDkuNiA1Ny4yQzI2My40IDQ2MS40IDM4MyA0ODAgNTEyIDQ4MHMyNDguNi0xOC42IDMzOC40LTUwLjZ6TTY0IDY5Mi4yYzI5LjggMjMuNiA2OCA0Mi40IDEwOS42IDU3LjJDMjYzLjQgNzgxLjQgMzgzIDgwMCA1MTIgODAwczI0OC42LTE4LjYgMzM4LjQtNTAuNmM0MS42LTE0LjggNzkuOC0zMy44IDEwOS42LTU3LjJWODY0YzAgODguNC0yMDAuNiAxNjAtNDQ4IDE2MFM2NCA5NTIuNCA2NCA4NjR2LTE3MS44eiIKICAgICAgICAgIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl9tZW1vcnkpIj48L3BhdGg+Cjwvc3ZnPgo=",description:"Memory."},meta:{addDisable:!0,copyDisable:!0,draggable:!1,selectable:!1},formMeta:ts,onAdd:()=>({id:`memory_${(0,l.x0)(5)}`,type:"memory",data:{title:`Memory_${++tU}`}})},tF=0,tH={type:"agentTools",extend:r.SyX.SLOT_BLOCK,info:{icon:"",description:"Agent Tools."},meta:{addDisable:!0,sidebarDisable:!0},onAdd:()=>({id:`tool_${(0,l.x0)(5)}`,type:"agentTool",data:{title:`Tool_${++tF}`,outputs:{type:"object",properties:{result:{type:"string"}}}}})},tW={type:"agentMemory",extend:r.SyX.SLOT_BLOCK,meta:{addDisable:!0,sidebarDisable:!0},info:{icon:"",description:"Agent Memory."}},tJ=0,tX=[{type:"agent",extend:r.SyX.SLOT,info:{icon:"data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCI+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfcm9ib3QiIHgxPSIxMDI0IiB5MT0iMTAyNCIgeDI9IjguMDk2ODYiIHkyPSI0LjY5ODIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzMzNzBGRiIvPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjAuOTk3OTA4IiBzdG9wLWNvbG9yPSIjMzNBOUZGIi8+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KICAgIDxwYXRoIGQ9Ik03MTcuMTIgMjc0SDc2MmM4Mi44NDIgMCAxNTAgNjcuMTU4IDE1MCAxNTB2MjAwYzAgODIuODQyLTY3LjE1OCAxNTAtMTUwIDE1MEgyNjJjLTgyLjg0MiAwLTE1MC02Ny4xNTgtMTUwLTE1MFY0MjRjMC04Mi44NDIgNjcuMTU4LTE1MCAxNTAtMTUwaDQ0Ljg4bC0xOC4yNjgtMTA5LjYwMmMtNC4wODYtMjQuNTE0IDEyLjQ3Ni00Ny43IDM2Ljk5LTUxLjc4NiAyNC41MTQtNC4wODYgNDcuNyAxMi40NzYgNTEuNzg2IDM2Ljk5bDIwIDEyMGMwLjI0NiAxLjQ3MiAwLjQxNiAyLjk0IDAuNTE2IDQuMzk4aDIyOC4xOTJjMC4xLTEuNDYgMC4yNy0yLjkyNiAwLjUxNi00LjM5OGwyMC0xMjBjNC4wODYtMjQuNTE0IDI3LjI3Mi00MS4wNzYgNTEuNzg2LTM2Ljk5IDI0LjUxNCA0LjA4NiA0MS4wNzYgMjcuMjcyIDM2Ljk5IDUxLjc4Nkw3MTcuMTIgMjc0ek0zMDggNDg0djQwYzAgMjQuODUyIDIwLjE0OCA0NSA0NSA0NVMzOTggNTQ4Ljg1MiAzOTggNTI0di00MGMwLTI0Ljg1Mi0yMC4xNDgtNDUtNDUtNDVTMzA4IDQ1OS4xNDggMzA4IDQ4NHogbTMxOCAwdjQwYzAgMjQuODUyIDIwLjE0OCA0NSA0NSA0NVM3MTYgNTQ4Ljg1MiA3MTYgNTI0di00MGMwLTI0Ljg1Mi0yMC4xNDgtNDUtNDUtNDVTNjI2IDQ1OS4xNDggNjI2IDQ4NHpNMzEyIDkxMmMtMjQuODUyIDAtNDUtMjAuMTQ4LTQ1LTQ1UzI4Ny4xNDggODIyIDMxMiA4MjJoNDAwYzI0Ljg1MiAwIDQ1IDIwLjE0OCA0NSA0NVM3MzYuODUyIDkxMiA3MTIgOTEySDMxMnoiCiAgICAgICAgICBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfcm9ib3QpIiA+PC9wYXRoPgo8L3N2Zz4K",description:"AI Agent."},formMeta:ts,onAdd:(e,t)=>({id:`agent_${(0,l.x0)(5)}`,type:"agent",blocks:[{id:`agentLLM_${(0,l.x0)(5)}`,type:"agentLLM",blocks:[tZ.onAdd(e,t)]},{id:`agentMemory_${(0,l.x0)(5)}`,type:"agentMemory",blocks:[tV.onAdd(e,t)]},{id:`agentTools_${(0,l.x0)(5)}`,type:"agentTools",blocks:[tc.onAdd(e,t)]}],data:{title:`Agent_${++tJ}`,outputs:{type:"object",properties:{result:{type:"string"}}}}})},tW,tH,tk,tV,tc],tK=[{type:"start",meta:{isStart:!0,deleteDisable:!0,selectable:!1,copyDisable:!0,expandable:!1,addDisable:!0},info:{icon:tL,description:"The starting node of the workflow, used to set the information needed to initiate the workflow."},formMeta:tE},{type:"end",meta:{isNodeEnd:!0,selectable:!1,copyDisable:!0,expandable:!1},info:{icon:tP,description:"The final node of the workflow, used to return the result information after the workflow is run."},formMeta:tR,canAdd(e,t){var o;if(!t.isLast)return!1;if(t.parent&&(null==(o=t.parent.parent)?void 0:o.flowNodeType)===r.SyX.INLINE_BLOCKS&&t.parent.originParent&&!t.parent.originParent.isLast){let e=t.parent.parent.blocks;return e.filter(e=>{var t;return null==(t=e.blocks[e.blocks.length-1])?void 0:t.getNodeMeta().isNodeEnd}).length<e.length-1}return!0},canDelete:(e,t)=>t.parent!==e.document.root,onAdd:(e,t)=>({id:`end_${(0,l.x0)()}`,type:"end",data:{title:"End",outputs:{type:"object",properties:{result:{type:"string"}}}}})},tw,tZ,{type:"loop",info:{icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCIgdmlld0JveD0iMCAwIDQ0IDQ0IiBmaWxsPSJub25lIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTMyLjExMTIgNS45NTU2QzMxLjA2MzIgNC45MDc1OSAyOS4yNzE2IDUuNjU1MTMgMjkuMjc5MiA3LjEzNzIyTDI5LjI4NzMgOC43MTUwM0gxMi4xMTg0QzguMzczMjEgOC43MTUwMyA1LjMzNzExIDExLjc1MTEgNS4zMzcxMSAxNS40OTYzSDUuMzQyMzhDNS4zMzk3MSAxNS41MzggNS4zMzgzOSAxNS41OCA1LjMzODQ2IDE1LjYyMjRMNS4zNDg5MiAyMS42NDczQzUuMzUxNzEgMjMuMjQ5OSA3LjIyNTA4IDI0LjExOTQgOC40NTA5IDIzLjA4N0wxMi4yNzMyIDE5Ljg2NzlDMTIuOTEyMSAxOS4zMjk4IDEzLjI4MDYgMTguNTM2OSAxMy4yODAxIDE3LjcwMTZMMTMuMjc5NSAxNi43MTVIMjkuMzI4NUwyOS4zMzUxIDE3Ljk5MzFDMjkuMzQyNyAxOS40NjY5IDMxLjEyNSAyMC4xOTk4IDMyLjE2NzEgMTkuMTU3NkwzNy41NjcxIDEzLjc1NzZDMzguMjE1IDEzLjEwOTggMzguMjE1IDEyLjA1OTQgMzcuNTY3MSAxMS40MTE1TDMyLjExMTIgNS45NTU2Wk0xMy4yNzkgMTUuODY5NEwxMy4yNzg4IDE1LjYyNDNDMTMuMjc4OCAxNS41ODEzIDEzLjI3NzMgMTUuNTM4NiAxMy4yNzQ1IDE1LjQ5NjNIMTMuMzM3MUMxMy4zMzcxIDE1LjYyNjUgMTMuMzE2NyAxNS43NTE4IDEzLjI3OSAxNS44Njk0Wk0xMS40NzU5IDM3Ljk3MzFDMTIuNTIzOSAzOS4wMjExIDE0LjMxNTYgMzguMjczNiAxNC4zMDc5IDM2Ljc5MTVMMTQuMjk5OCAzNS4yMTM3SDMxLjQ2ODdDMzUuMjEzOSAzNS4yMTM3IDM4LjI1IDMyLjE3NzYgMzguMjUgMjguNDMyNEgzOC4yNDQ3QzM4LjI0NzQgMjguMzkwNyAzOC4yNDg3IDI4LjM0ODcgMzguMjQ4NyAyOC4zMDYzTDM4LjIzODIgMjIuMjgxNEMzOC4yMzU0IDIwLjY3ODggMzYuMzYyIDE5LjgwOTMgMzUuMTM2MiAyMC44NDE3TDMxLjMxNCAyNC4wNjA4QzMwLjY3NSAyNC41OTkgMzAuMzA2NSAyNS4zOTE4IDMwLjMwNyAyNi4yMjcyTDMwLjMwNzYgMjcuMjEzN0gxNC4yNTg2TDE0LjI1MiAyNS45MzU2QzE0LjI0NDQgMjQuNDYxOCAxMi40NjIyIDIzLjcyODkgMTEuNDIgMjQuNzcxMUw2LjAyMDAyIDMwLjE3MTFDNS4zNzIxNSAzMC44MTkgNS4zNzIxNSAzMS44Njk0IDYuMDIwMDIgMzIuNTE3MkwxMS40NzU5IDM3Ljk3MzFaTTMwLjMwODIgMjguMDU5M0wzMC4zMDgzIDI4LjMwNDRDMzAuMzA4MyAyOC4zNDc0IDMwLjMwOTggMjguMzkwMSAzMC4zMTI3IDI4LjQzMjRIMzAuMjVDMzAuMjUgMjguMzAyMyAzMC4yNzA0IDI4LjE3NjkgMzAuMzA4MiAyOC4wNTkzWiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzc3NV8xMTM3KSIvPgogIDxkZWZzPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzc3NV8xMTM3IiB4MT0iNi4zOTYwOSIgeTE9IjM5LjMwNjMiIHgyPSIzMi41OTA1IiB5Mj0iNC4xMDQ4OCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMzM3MEZGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMC45OTc5MDgiIHN0b3AtY29sb3I9IiMzM0E5RkYiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgo8L3N2Zz4K",description:"Used to repeatedly execute a series of tasks by setting the number of iterations and logic"},meta:{expandable:!1},formMeta:tQ,onAdd:()=>({id:`loop_${(0,l.x0)(5)}`,type:"loop",data:{title:"Loop"}})},eL,{type:"tryCatch",info:{icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NSIgdmlld0JveD0iMCAwIDQ0IDQ1IiBmaWxsPSJub25lIiA+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTQgMTAuMzY2MkM0IDcuMDUyNSA2LjY4NjI5IDQuMzY2MjEgMTAgNC4zNjYyMUgzNEMzNy4zMTM3IDQuMzY2MjEgNDAgNy4wNTI1IDQwIDEwLjM2NjJWMjYuMzY2MkM0MCAyOS42Nzk5IDM3LjMxMzcgMzIuMzY2MiAzNCAzMi4zNjYySDEwQzYuNjg2MjkgMzIuMzY2MiA0IDI5LjY3OTkgNCAyNi4zNjYyVjEwLjM2NjJaTTE4Ljg1NzggMTUuNzMwNEwxOC4xNzIzIDE4LjQ3MjVDMTcuODk0MSAxOS41ODU1IDE2Ljg5NDEgMjAuMzY2MiAxNS43NDY5IDIwLjM2NjJIMTEuMjQxNUMxMC40MTMgMjAuMzY2MiA5Ljc0MTQ1IDE5LjY5NDYgOS43NDE0NSAxOC44NjYyQzkuNzQxNDUgMTguMDM3OCAxMC40MTMgMTcuMzY2MiAxMS4yNDE1IDE3LjM2NjJIMTUuMzU2NUwxNi4zMjI0IDEzLjUwMjdDMTYuOTEwNyAxMS4xNDk3IDIwLjE2ODIgMTAuOTI4NiAyMS4wNjkgMTMuMTgwNUwyNC41NzU1IDIxLjk0NjhMMjUuODg5MiAxOC44ODE0QzI2LjI4MzEgMTcuOTYyMiAyNy4xODcgMTcuMzY2MiAyOC4xODcgMTcuMzY2MkgzMi43NTg1QzMzLjU4NyAxNy4zNjYyIDM0LjI1ODUgMTguMDM3OCAzNC4yNTg1IDE4Ljg2NjJDMzQuMjU4NSAxOS42OTQ2IDMzLjU4NyAyMC4zNjYyIDMyLjc1ODUgMjAuMzY2MkgyOC41MTY4TDI2Ljg1NzQgMjQuMjM4MUMyNS45OCAyNi4yODUzIDIzLjA2NTUgMjYuMjQ5NyAyMi4yMzgzIDI0LjE4MTdMMTguODU3OCAxNS43MzA0Wk0xMyAzNi4zNjYyQzExLjg5NTQgMzYuMzY2MiAxMSAzNy4yNjE2IDExIDM4LjM2NjJDMTEgMzkuNDcwOCAxMS44OTU0IDQwLjM2NjIgMTMgNDAuMzY2MkgzMUMzMi4xMDQ2IDQwLjM2NjIgMzMgMzkuNDcwOCAzMyAzOC4zNjYyQzMzIDM3LjI2MTYgMzIuMTA0NiAzNi4zNjYyIDMxIDM2LjM2NjJIMTNaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMjc1Ml8xODM3MDYtMSkiPjwvcGF0aD4KICAgIDxkZWZzPgogICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8yNzUyXzE4MzcwNi0xIiB4MT0iMzguODQxNyIgeTE9IjQxLjI4NjkiIHgyPSIxMC4yODM0IiB5Mj0iMi44MTE3NiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMzM3MEZGIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMC45OTc5MDgiIHN0b3AtY29sb3I9IiMzM0E5RkYiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPC9kZWZzPgo8L3N2Zz4K",description:"try catch."},meta:{expandable:!1},formMeta:tz,onAdd:()=>({id:`tryCatch${(0,l.x0)(5)}`,type:"tryCatch",data:{title:"TryCatch"},blocks:[{id:`tryBlock${(0,l.x0)(5)}`,type:"tryBlock",blocks:[]},{id:`catchBlock${(0,l.x0)(5)}`,type:"catchBlock",blocks:[],data:{title:"Catch Block 1",inputsValues:{condition:""},inputs:{type:"object",required:["condition"],properties:{condition:{type:"boolean"}}}}}]})},ev,tY,{type:"ifBlock",extend:"block",meta:{copyDisable:!0,addDisable:!0,sidebarDisable:!0,defaultExpanded:!1,style:{width:66,height:20,borderRadius:4}},info:{icon:tB,description:""},canAdd:()=>!1,canDelete:(e,t)=>!1,formMeta:{render:e=>{let{node:t}=tu();return(0,n.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:0===t.index?"green":"red",color:"white",display:"flex",pointerEvents:"none",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(r.gNt,{name:"title",children:e=>{let{field:t}=e;return(0,n.jsx)(n.Fragment,{children:t.value})}})})}}},{type:"breakLoop",extend:"end",info:{icon:"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjFlbSIgaGVpZ2h0PSIxZW0iIGZvY3VzYWJsZT0iZmFsc2UiIGFyaWEtaGlkZGVuPSJ0cnVlIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTkuNTYwNjYgMi40MzkzNEMxMC4xNDY0IDMuMDI1MTMgMTAuMTQ2NCAzLjk3NDg3IDkuNTYwNjYgNC41NjA2Nkw3LjEyMTMyIDdIMTQuNzVDMTguODM1MyA3IDIyIDEwLjU3OTYgMjIgMTQuNUMyMiAxOC40MjA0IDE4LjgzNTMgMjIgMTQuNzUgMjJIMTEuNUMxMC42NzE2IDIyIDEwIDIxLjMyODQgMTAgMjAuNUMxMCAxOS42NzE2IDEwLjY3MTYgMTkgMTEuNSAxOUgxNC43NUMxNy4wMTYgMTkgMTkgMTYuOTMwOCAxOSAxNC41QzE5IDEyLjA2OTIgMTcuMDE2IDEwIDE0Ljc1IDEwSDcuMTIxMzJMOS41NjA2NiAxMi40MzkzQzEwLjE0NjQgMTMuMDI1MSAxMC4xNDY0IDEzLjk3NDkgOS41NjA2NiAxNC41NjA3QzguOTc0ODcgMTUuMTQ2NCA4LjAyNTEzIDE1LjE0NjQgNy40MzkzNCAxNC41NjA3TDIuNDM5MzQgOS41NjA2NkMxLjg1MzU1IDguOTc0ODcgMS44NTM1NSA4LjAyNTEzIDIuNDM5MzQgNy40MzkzNEw3LjQzOTM0IDIuNDM5MzRDOC4wMjUxMyAxLjg1MzU1IDguOTc0ODcgMS44NTM1NSA5LjU2MDY2IDIuNDM5MzRaIiBmaWxsPSIjNTRBOUZGIj48L3BhdGg+PC9zdmc+Cg==",description:"Break in current Loop."},meta:{style:{width:240}},formMeta:{render:()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(tv,{})})},canAdd(e,t){for(;t.parent;){if("loop"===t.parent.flowNodeType)return!0;t=t.parent}return!1},onAdd:(e,t)=>({id:`break_${(0,l.x0)()}`,type:"breakLoop",data:{title:"BreakLoop"}})},{type:"caseDefault",extend:"case",meta:{copyDisable:!0,addDisable:!0,draggable:!1,deleteDisable:!0,style:{width:240}},info:{icon:eb,description:"Switch default branch"},canDelete:(e,t)=>!1,formMeta:tG},...tX],tq={nodes:[{id:"start_0",type:"start",blocks:[],data:{title:"Start",outputs:{type:"object",properties:{query:{type:"string",default:"Hello Flow."},enable:{type:"boolean",default:!0},array_obj:{type:"array",items:{type:"object",properties:{int:{type:"number"},str:{type:"string"}}}}}}}},{id:"agent_0",type:"agent",data:{title:"Agent"},blocks:[{id:"agentLLM_0",type:"agentLLM",blocks:[{id:"llm_5",type:"llm",meta:{defaultExpanded:!1},data:{title:"LLM",inputsValues:{modelType:{type:"constant",content:"gpt-3.5-turbo"},temperature:{type:"constant",content:.5},systemPrompt:{type:"template",content:"# Role\nYou are an AI assistant.\n"},prompt:{type:"template",content:""}},inputs:{type:"object",required:["modelType","temperature","prompt"],properties:{modelType:{type:"string"},temperature:{type:"number"},systemPrompt:{type:"string",extra:{formComponent:"prompt-editor"}},prompt:{type:"string",extra:{formComponent:"prompt-editor"}}}},outputs:{type:"object",properties:{result:{type:"string"}}}}}]},{id:"agentMemory_0",type:"agentMemory",blocks:[{id:"memory_0",type:"memory",meta:{defaultExpanded:!1},data:{title:"Memory"}}]},{id:"agentTools_0",type:"agentTools",blocks:[{id:"tool_0",type:"tool",data:{title:"Tool0"}},{id:"tool_1",type:"tool",data:{title:"Tool1"}}]}]},{id:"llm_0",type:"llm",blocks:[],data:{title:"LLM",inputsValues:{modelType:{type:"constant",content:"gpt-3.5-turbo"},temperature:{type:"constant",content:.5},systemPrompt:{type:"template",content:"# Role\nYou are an AI assistant.\n"},prompt:{type:"template",content:""}},inputs:{type:"object",required:["modelType","temperature","prompt"],properties:{modelType:{type:"string"},temperature:{type:"number"},systemPrompt:{type:"string",extra:{formComponent:"prompt-editor"}},prompt:{type:"string",extra:{formComponent:"prompt-editor"}}}},outputs:{type:"object",properties:{result:{type:"string"}}}}},{id:"switch_0",type:"switch",data:{title:"Switch"},blocks:[{id:"case_0",type:"case",data:{title:"Case_0",inputsValues:{condition:{type:"constant",content:!0}},inputs:{type:"object",required:["condition"],properties:{condition:{type:"boolean"}}}},blocks:[]},{id:"case_1",type:"case",data:{title:"Case_1",inputsValues:{condition:{type:"constant",content:!0}},inputs:{type:"object",required:["condition"],properties:{condition:{type:"boolean"}}}}},{id:"case_default_1",type:"caseDefault",data:{title:"Default"},blocks:[]}]},{id:"loop_0",type:"loop",data:{title:"Loop",loopFor:{type:"ref",content:["start_0","array_obj"]}},blocks:[{id:"if_0",type:"if",data:{title:"If",inputsValues:{condition:{type:"constant",content:!0}},inputs:{type:"object",required:["condition"],properties:{condition:{type:"boolean"}}}},blocks:[{id:"if_true",type:"ifBlock",data:{title:"true"},blocks:[]},{id:"if_false",type:"ifBlock",data:{title:"false"},blocks:[{id:"break_0",type:"breakLoop",data:{title:"BreakLoop"}}]}]}]},{id:"tryCatch_0",type:"tryCatch",data:{title:"TryCatch"},blocks:[{id:"tryBlock_0",type:"tryBlock",blocks:[]},{id:"catchBlock_0",type:"catchBlock",data:{title:"Catch Block 1",inputsValues:{condition:{type:"constant",content:!0}},inputs:{type:"object",required:["condition"],properties:{condition:{type:"boolean"}}}},blocks:[]},{id:"catchBlock_1",type:"catchBlock",data:{title:"Catch Block 2",inputsValues:{condition:{type:"constant",content:!0}},inputs:{type:"object",required:["condition"],properties:{condition:{type:"boolean"}}}},blocks:[]}]},{id:"end_0",type:"end",blocks:[],data:{title:"End",inputsValues:{success:{type:"constant",content:!0,schema:{type:"boolean"}}}}}]};function t_(e){let{children:t}=e,[o,i]=(0,g.useState)();return(0,n.jsx)(eO.Provider,{value:{visible:!!o,nodeId:o,setNodeId:i},children:t})}function t$(e){var t;let{node:o}=e,i=(0,r.PVB)(o);return(0,n.jsx)(ek.Provider,{value:i,children:(0,n.jsx)("div",{style:{background:"rgb(251, 251, 251)",height:"calc(100vh - 40px)",margin:"8px 8px 8px 0",borderRadius:8,border:"1px solid rgba(82,100,154, 0.13)"},children:null==(t=i.form)?void 0:t.render()})})}let t0=()=>{let{nodeId:e,setNodeId:t}=(0,g.useContext)(eO),{selection:o,playground:i,document:l}=(0,r.sX$)(),a=(0,r.JAk)(),s=(0,g.useCallback)(()=>{(0,g.startTransition)(()=>{t(void 0)})},[]),d=e?l.getNode(e):void 0;(0,g.useEffect)(()=>{let e=i.config.onReadonlyOrDisabledChange(()=>{s(),a()});return()=>e.dispose()},[i]),(0,g.useEffect)(()=>{let e=o.onSelectionChanged(()=>{0===o.selection.length?s():1===o.selection.length&&o.selection[0]!==d&&s()});return()=>e.dispose()},[o,s,d]),(0,g.useEffect)(()=>{if(d){let e=d.onDispose(()=>{t(void 0)});return()=>e.dispose()}return()=>{}},[d]);let c=(0,g.useMemo)(()=>{if(!d)return!1;let{sidebarDisable:e=!1}=d.getNodeMeta();return!e},[d]);if(i.config.readonly)return null;let u=d&&c?(0,n.jsx)(r.rQR.Provider,{value:d,children:(0,n.jsx)(t$,{node:d})},d.id):null;return(0,n.jsx)(w.Uu,{mask:!1,visible:c,onCancel:s,closable:!1,width:360,headerStyle:{display:"none"},bodyStyle:{padding:0},style:{background:"none",boxShadow:"none"},children:(0,n.jsx)(eS.Provider,{value:!0,children:u})})};o(846635);let t3=()=>{let e=(0,g.useMemo)(()=>({background:!0,playground:{preventGlobalGesture:!0},readonly:!1,initialData:tq,nodeRegistries:tK,getNodeDefaultRegistry:e=>({type:e,meta:{defaultExpanded:!0}}),fromNodeJSON:(e,t)=>t,toNodeJSON:(e,t)=>t,defaultLayout:r.XPE.VERTICAL_FIXED_LAYOUT,constants:{[r.cc3.BASE_COLOR]:"#B8BCC1",[r.cc3.BASE_ACTIVATED_COLOR]:"#82A7FC"},selectBox:{SelectorBoxPopover:ec},shortcuts:(e,t)=>{e.addHandlers(...k.map(e=>e(t)))},dragdrop:{onDrop:(e,t)=>{},canDrop:(e,t)=>!0},history:{enable:!0,enableChangeNode:!0,onApply:(0,u.Z)((e,t)=>{e.document.disposed||console.log("auto save: ",e.document.toJSON())},100)},nodeEngine:{enable:!0},variableEngine:{enable:!0},materials:{components:{...z.p,[r.kDE.ADDER]:eD,[r.kDE.BRANCH_ADDER]:eQ,[r.kDE.DRAG_NODE]:ta,[r.kDE.SLOT_ADDER]:tg,[r.kDE.SLOT_LABEL]:eG},renderDefaultNode:eP,renderTexts:{"loop-end-text":"Loop End","loop-traverse-text":"Loop","try-start-text":"Try Start","try-end-text":"Try End","catch-text":"Catch Error"}},onBind:e=>{let{bind:t}=e;t(S).toSelf().inSingletonScope()},scroll:{enableScrollLimit:!0},onInit:e=>{console.log("---- Playground Init ----")},onAllLayersRendered:e=>{setTimeout(()=>{e.tools.fitView()},10),console.log(e.document.toString(!0))},onDispose:()=>{console.log("---- Playground Dispose ----")},plugins:()=>[(0,p.qP)({disableLayer:!0,enableDisplayAllNodes:!0,canvasStyle:{canvasWidth:182,canvasHeight:102,canvasPadding:50,canvasBackground:"rgba(245, 245, 245, 1)",canvasBorderRadius:10,viewportBackground:"rgba(235, 235, 235, 1)",viewportBorderRadius:4,viewportBorderColor:"rgba(201, 201, 201, 1)",viewportBorderWidth:1,viewportBorderDashLength:2,nodeColor:"rgba(255, 255, 255, 1)",nodeBorderRadius:2,nodeBorderWidth:.145,nodeBorderColor:"rgba(6, 7, 9, 0.10)",overlayColor:"rgba(255, 255, 255, 0)"},inactiveDebounceTime:1}),v({components:{GroupBoxHeader:q,GroupNode:_}}),$(),ed({})]}),[]);return(0,n.jsx)("div",{className:"doc-feature-overview",children:(0,n.jsx)(r.g5f,{...e,children:(0,n.jsxs)(t_,{children:[(0,n.jsx)(r.R6T,{}),(0,n.jsx)(e7,{}),(0,n.jsx)(t0,{})]})})})}}}]);