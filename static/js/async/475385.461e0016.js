"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["475385"],{591718:function(e,t,r){r.r(t),r.d(t,{InputsPicker:()=>p,InputsTree:()=>h});var i=r(110239),n=r(908600),l=r(374488),a=r(111886),o=r(950454),s=r(11611),u=r(414682),c=r(653378),f=r(687252);function p(e){let{inputsValues:t,onSelect:r}=e,s=(0,o.$eD)(),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.GwP.isArray(e.items)?u(e.items,t+1):{type:e.items,depth:t}},p=(e,t)=>{let r,i=null==e?void 0:e.type;if(o.GwP.isObject(i)&&(r=(i.properties||[]).map(e=>p(e,[...t,e.key])).filter(Boolean)),o.GwP.isArray(i)){let e=u(i);o.GwP.isObject(e.type)&&(r=(e.type.properties||[]).map(r=>p(r,[...t,...Array(e.depth).fill("[0]"),r.key])).filter(Boolean))}let n=t.map((e,t)=>"[0]"===e||0===t?e:`.${e}`).join("");return{key:n,label:(0,l.Z)(t),value:n,children:r}},d=(e,t)=>{let r=t.join(".");if(f.U.isFlowValue(e)){if(f.U.isRef(e)){var i;let r=null==s||null==(i=s.available)?void 0:i.getByKeyPath(e.content||[]);if(r)return p(r,t)}return{key:r,value:r,label:(0,l.Z)(t)}}if((0,a.Z)(e))return{key:r,value:r,label:(0,l.Z)(t),children:Object.entries(e).map(e=>{let[r,i]=e;return d(i,[...t,r])}).filter(Boolean)}},h=(0,n.useMemo)(()=>Object.entries(t).map(e=>{let[t,r]=e;return d(r,[t])}).filter(Boolean),[]);return(0,i.jsx)(c.Tree,{treeData:h,onSelect:e=>r(e)})}let d=["{","{}","@"];function h(e){let{inputsValues:t,triggerCharacters:r=d}=e,[l,a]=(0,n.useState)(""),[o,f]=(0,n.useState)(!1),[h,m]=(0,n.useState)(-1),v=(0,s.jE)();return(0,n.useEffect)(()=>{if(!v)return},[v,o]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.pf,{triggerCharacters:r,onOpenChange:function(e){m(e.state.selection.main.head),f(e.value)}}),(0,i.jsx)(c.Popover,{visible:o,trigger:"custom",position:"topLeft",rePosKey:l,content:(0,i.jsx)("div",{style:{width:300,maxHeight:300,overflowY:"auto"},children:(0,i.jsx)(p,{inputsValues:t,onSelect:e=>{!function(e){let t=(0,u.m4)(v.$view.state);if(!t)return;let{from:r,to:i}=t;for(;"{"===v.$view.state.doc.sliceString(r-1,r);)r--;for(;"}"===v.$view.state.doc.sliceString(i,i+1);)i++;v.replaceText({...t,text:"{{"+e+"}}"}),f(!1)}(e)}})}),children:(0,i.jsx)(u.Iq,{position:h,onChange:()=>a(String(Math.random()))})})]})}}}]);